(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"25cm":function(e,t,r){"use strict";var n=r("tPH9"),o=r("/1FC");t.a=function(e,t,r){var i=t(e);return Object(o.a)(e)?i:Object(n.a)(i,r(e))}},"2L7+":function(e,t,r){"use strict";r.d(t,"a",function(){return f});var n=r("mrSG"),o=r("fXoL"),i=r("ey9i"),a=(r("xMQD"),r("GxWh")),c=r("QLwe"),s=r("Imgh"),l=r("ofXK"),u=r("EcKj");const d=["userBanModal"],b=function(e,t){return{user:e,account:t}};function h(e,t){if(1&e){const e=o.Wb();o.Tb(0),o.Vb(1,"my-user-ban-modal",1,2),o.jc("userBanned",function(){return o.Jc(e),o.nc().onUserBanned()}),o.Ub(),o.Qb(3,"my-action-dropdown",3),o.Sb()}if(2&e){const e=o.nc();o.Cb(3),o.uc("actions",e.userActions)("entry",o.zc(6,b,e.user,e.account))("buttonSize",e.buttonSize)("placement",e.placement)("label",e.label)("container",e.container)}}let f=(()=>{class e{constructor(e,t,r,n,i,a,c){this.authService=e,this.notifier=t,this.confirmService=r,this.serverService=n,this.userService=i,this.blocklistService=a,this.bulkService=c,this.buttonSize="normal",this.placement="right-top right-bottom auto",this.container=void 0,this.userChanged=new o.n,this.userDeleted=new o.n,this.userActions=[]}get requiresEmailVerification(){return this.serverConfig.signup.requiresEmailVerification}ngOnInit(){this.serverConfig=this.serverService.getTmpConfig(),this.serverService.getConfig().subscribe(e=>this.serverConfig=e)}ngOnChanges(){this.buildActions()}openBanUserModal(e){"root"!==e.username?this.userBanModal.openModal(e):this.notifier.error("Pod\xE8tz pas f\xF2rabandir lo root.")}onUserBanned(){this.userChanged.emit()}unbanUser(e){return Object(n.a)(this,void 0,void 0,function*(){!1!==(yield this.confirmService.confirm("Vol\xE8tz vertadi\xE8rament reabilitar \n          " + e.username + "\xA0?\n        ","Reabilitar"))&&this.userService.unbanUsers(e).subscribe(()=>{this.notifier.success("L\u2019utilizaire \n          " + e.username + " es reabilitat.\n        "),this.userChanged.emit()},e=>this.notifier.error(e.message))})}removeUser(e){return Object(n.a)(this,void 0,void 0,function*(){if("root"===e.username)return void this.notifier.error("Pod\xE8tz pas suprimir l\u2019utilizaire root.");const t="Se levatz aqueste utilizaire, poiretz pas ne crear un autre amb lo meteis nom d\u2019utilizaire\xA0!";!1!==(yield this.confirmService.confirm(t,"Delete"))&&this.userService.removeUser(e).subscribe(()=>{this.notifier.success("Utilizaire \n          " + e.username + " suprimit.\n        "),this.userDeleted.emit()},e=>this.notifier.error(e.message))})}setEmailAsVerified(e){this.userService.updateUser(e.id,{emailVerified:!0}).subscribe(()=>{this.notifier.success("L\u2019adre\xE7a a \n          " + e.username + " es passada coma verificada\n        "),this.userChanged.emit()},e=>this.notifier.error(e.message))}blockAccountByUser(e){this.blocklistService.blockAccountByUser(e).subscribe(()=>{this.notifier.success("Lo compte \n          " + e.nameWithHost + " es mut.\n        "),this.account.mutedByUser=!0,this.userChanged.emit()},e=>this.notifier.error(e.message))}unblockAccountByUser(e){this.blocklistService.unblockAccountByUser(e).subscribe(()=>{this.notifier.success("Compte \n          " + e.nameWithHost + " pas mai mut.\n        "),this.account.mutedByUser=!1,this.userChanged.emit()},e=>this.notifier.error(e.message))}blockServerByUser(e){this.blocklistService.blockServerByUser(e).subscribe(()=>{this.notifier.success("Instance \n          " + e + " muted.\n        "),this.account.mutedServerByUser=!0,this.userChanged.emit()},e=>this.notifier.error(e.message))}unblockServerByUser(e){this.blocklistService.unblockServerByUser(e).subscribe(()=>{this.notifier.success("L\u2019inst\xE0ncia \n          " + e + " es pas mai muda.\n        "),this.account.mutedServerByUser=!1,this.userChanged.emit()},e=>this.notifier.error(e.message))}blockAccountByInstance(e){this.blocklistService.blockAccountByInstance(e).subscribe(()=>{this.notifier.success("Lo compte \n          " + e.nameWithHost + "  es ut per l\u2019inst\xE0ncia.\n        "),this.account.mutedByInstance=!0,this.userChanged.emit()},e=>this.notifier.error(e.message))}unblockAccountByInstance(e){this.blocklistService.unblockAccountByInstance(e).subscribe(()=>{this.notifier.success("Compte \n          " + e.nameWithHost + " pas mai mut per l\u2019inst\xE0ncia.\n        "),this.account.mutedByInstance=!1,this.userChanged.emit()},e=>this.notifier.error(e.message))}blockServerByInstance(e){this.blocklistService.blockServerByInstance(e).subscribe(()=>{this.notifier.success("L\u2019inst\xE0ncia \n          " + e + " es muda per l\u2019inst\xE0ncia.\n        "),this.account.mutedServerByInstance=!0,this.userChanged.emit()},e=>this.notifier.error(e.message))}unblockServerByInstance(e){this.blocklistService.unblockServerByInstance(e).subscribe(()=>{this.notifier.success("L\u2019inst\xE0ncia \n          " + e + " es pas mai muda per l\u2019inst\xE0ncia.\n        "),this.account.mutedServerByInstance=!1,this.userChanged.emit()},e=>this.notifier.error(e.message))}bulkRemoveCommentsOf(e){return Object(n.a)(this,void 0,void 0,function*(){const t="Are you sure you want to remove all the comments of this account?";!1!==(yield this.confirmService.confirm(t,"Delete account comments"))&&this.bulkService.removeCommentsOf(e).subscribe(()=>{this.notifier.success("Will remove comments of this account (may take several minutes).")},e=>this.notifier.error(e.message))})}getRouterUserEditLink(e){return["/admin","users","update",e.id]}buildActions(){if(this.userActions=[],this.prependActions&&(this.userActions=[this.prependActions]),this.authService.isLoggedIn()){const e=this.authService.getUser();if(this.user&&e.id===this.user.id)return;if(this.user&&e.hasRight(1)&&e.canManage(this.user)&&this.userActions.push([{label:"Modificar l\u2019utilizaire",description:"Change quota, role, and more.",linkBuilder:({user:e})=>this.getRouterUserEditLink(e)},{label:"Suprimir l\u2019utilizaire",description:"Videos will be deleted, comments will be tombstoned.",handler:({user:e})=>this.removeUser(e)},{label:"Ban",description:"User won't be able to login anymore, but videos and comments will be kept as is.",handler:({user:e})=>this.openBanUserModal(e),isDisplayed:({user:e})=>!e.blocked},{label:"Unban user",description:"Allow the user to login and create videos/comments again",handler:({user:e})=>this.unbanUser(e),isDisplayed:({user:e})=>e.blocked},{label:"Passar l\u2019adre\xE7a coma verificada",handler:({user:e})=>this.setEmailAsVerified(e),isDisplayed:({user:e})=>this.requiresEmailVerification&&!e.blocked&&!1===e.emailVerified}]),this.account){this.userActions.push([{label:"Silenciar aqueste compte",description:"Hide any content from that user from you.",isDisplayed:({account:e})=>!1===e.mutedByUser,handler:({account:e})=>this.blockAccountByUser(e)},{label:"Restablir aqueste compte",description:"Show back content from that user for you.",isDisplayed:({account:e})=>!0===e.mutedByUser,handler:({account:e})=>this.unblockAccountByUser(e)},{label:"Silenciar l\u2019inst\xE0ncia",description:"Hide any content from that instance for you.",isDisplayed:({account:e})=>!e.userId&&!1===e.mutedServerByInstance,handler:({account:e})=>this.blockServerByUser(e.host)},{label:"Restablir l\u2019inst\xE0ncia",description:"Show back content from that instance for you.",isDisplayed:({account:e})=>!e.userId&&!0===e.mutedServerByInstance,handler:({account:e})=>this.unblockServerByUser(e.host)},{label:"Remove comments from your videos",description:"Remove comments made by this account on your videos.",handler:({account:e})=>this.bulkRemoveCommentsOf({accountName:e.nameWithHost,scope:"my-videos"})}]);let t=[];e.hasRight(9)&&(t=t.concat([{label:"Silenciar aqueste compte per v\xF2stra inst\xE0ncia",description:"Hide any content from that user from you, your instance and its users.",isDisplayed:({account:e})=>!1===e.mutedByInstance,handler:({account:e})=>this.blockAccountByInstance(e)},{label:"Restablir aqueste compte per v\xF2stra inst\xE0ncia",description:"Show this user's content to the users of this instance again.",isDisplayed:({account:e})=>!0===e.mutedByInstance,handler:({account:e})=>this.unblockAccountByInstance(e)}])),e.hasRight(10)&&(t=t.concat([{label:"Silenciar aquesta inst\xE0ncia per la v\xF2stra",description:"Hide any content from that instance from you, your instance and its users.",isDisplayed:({account:e})=>!e.userId&&!1===e.mutedServerByInstance,handler:({account:e})=>this.blockServerByInstance(e.host)},{label:"Restablir aquesta inst\xE0ncia per la v\xF2stra",description:"Show back content from that instance for you, your instance and its users.",isDisplayed:({account:e})=>!e.userId&&!0===e.mutedServerByInstance,handler:({account:e})=>this.unblockServerByInstance(e.host)}])),e.hasRight(15)&&(t=t.concat([{label:"Suprimir los comentaris de v\xF2stra inst\xE0ncia",description:"Remove comments made by this account from your instance.",handler:({account:e})=>this.bulkRemoveCommentsOf({accountName:e.nameWithHost,scope:"instance"})}])),0!==t.length&&this.userActions.push(t)}}}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(i.a),o.Pb(i.m),o.Pb(i.d),o.Pb(i.x),o.Pb(i.D),o.Pb(a.b),o.Pb(c.a))},e.\u0275cmp=o.Jb({type:e,selectors:[["my-user-moderation-dropdown"]],viewQuery:function(e,t){if(1&e&&o.Yc(d,!0),2&e){let e;o.Gc(e=o.kc())&&(t.userBanModal=e.first)}},inputs:{user:"user",account:"account",prependActions:"prependActions",buttonSize:"buttonSize",placement:"placement",label:"label",container:"container"},outputs:{userChanged:"userChanged",userDeleted:"userDeleted"},features:[o.Ab],decls:1,vars:1,consts:[[4,"ngIf"],[3,"userBanned"],["userBanModal",""],[3,"actions","entry","buttonSize","placement","label","container"]],template:function(e,t){1&e&&o.Sc(0,h,4,9,"ng-container",0),2&e&&o.uc("ngIf",0!==t.userActions.length)},directives:[l.n,s.a,u.a],encapsulation:2}),e})()},"3/ER":function(e,t,r){"use strict";(function(e){var n=r("Ju5/"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o?n.a.Buffer:void 0,c=a?a.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var r=e.length,n=c?c(r):new e.constructor(r);return e.copy(n),n}}).call(this,r("3UD+")(e))},"3ZlK":function(e,t,r){"use strict";r.d(t,"a",function(){return n});const n={violentOrRepulsive:1,hatefulOrAbusive:2,spamOrMisleading:3,privacy:4,rights:5,serverRules:6,thumbnails:7,captions:8}},"4/q3":function(e,t,r){"use strict";var n=r("7gMY"),o=r("IzLi"),i=r("pyRK"),a=Object.prototype.hasOwnProperty,c=r("5WsY");t.a=function(e){return Object(c.a)(e)?Object(n.a)(e,!0):function(e){if(!Object(o.a)(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=Object(i.a)(e),r=[];for(var n in e)("constructor"!=n||!t&&a.call(e,n))&&r.push(n);return r}(e)}},"4joM":function(e,t,r){"use strict";r.d(t,"c",function(){return o}),r.d(t,"b",function(){return i}),r.d(t,"a",function(){return a});var n=r("3Pt+");const o={VALIDATORS:[n.w.required,n.w.minLength(2),n.w.maxLength(3e3)],MESSAGES:{required:"La rason del senha es requesida.",minlength:"La rason del senhalament deu cont\xE9ner almens 2 caract\xE8rs.",maxlength:"La rason del senhalament p\xF2t pas cont\xE9ner mai de 3000 caract\xE8rs."}},i={VALIDATORS:[n.w.required,n.w.minLength(2),n.w.maxLength(3e3)],MESSAGES:{required:"Lo comentari de moderacion es requesit.",minlength:"Lo comentari de moderacon deu cont\xE9ner almens 2 caract\xE8rs.",maxlength:"Lo comentari de moderacion p\xF2t pas cont\xE9ner mai de 3000 caract\xE8rs."}},a={VALIDATORS:[n.w.required,n.w.minLength(2),n.w.maxLength(3e3)],MESSAGES:{required:"Abuse message is required.",minlength:"Abuse message must be at least 2 characters long.",maxlength:"Abuse message cannot be more than 3000 characters long."}}},"5WsY":function(e,t,r){"use strict";var n=r("vJtL"),o=r("Js68");t.a=function(e){return null!=e&&Object(o.a)(e.length)&&!Object(n.a)(e)}},"7gMY":function(e,t,r){"use strict";var n=r("9f76"),o=r("/1FC"),i=r("WOAq"),a=r("cSlR"),c=r("oYcn"),s=Object.prototype.hasOwnProperty;t.a=function(e,t){var r=Object(o.a)(e),l=!r&&Object(n.a)(e),u=!r&&!l&&Object(i.a)(e),d=!r&&!l&&!u&&Object(c.a)(e),b=r||l||u||d,h=b?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],f=h.length;for(var m in e)!t&&!s.call(e,m)||b&&("length"==m||u&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||Object(a.a)(m,f))||h.push(m);return h}},"8i4Y":function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a});var n=r("6rF9"),o=r("xMQD");class i{constructor(e){if(this.id=e.id,this.url=e.url,this.text=e.text,this.threadId=e.threadId,this.inReplyToCommentId=e.inReplyToCommentId,this.videoId=e.videoId,this.createdAt=new Date(e.createdAt.toString()),this.updatedAt=new Date(e.updatedAt.toString()),this.deletedAt=e.deletedAt?new Date(e.deletedAt.toString()):null,this.isDeleted=e.isDeleted,this.account=e.account,this.totalRepliesFromVideoAuthor=e.totalRepliesFromVideoAuthor,this.totalReplies=e.totalReplies,this.account){this.by=o.c.CREATE_BY_STRING(this.account.name,this.account.host),this.accountAvatarUrl=o.a.GET_ACTOR_AVATAR_URL(this.account);const e=Object(n.e)(),t=new URL(e).host;this.isLocal=this.account.host.trim()===t}}}class a{constructor(e,t){this.id=e.id,this.url=e.url,this.text=e.text,this.textHtml=t,this.threadId=e.threadId,this.inReplyToCommentId=e.inReplyToCommentId,this.createdAt=new Date(e.createdAt.toString()),this.updatedAt=new Date(e.updatedAt.toString()),this.video={id:e.video.id,uuid:e.video.uuid,name:e.video.name,localUrl:"/videos/watch/"+e.video.uuid},this.localUrl=this.video.localUrl+";threadId="+this.threadId,this.account=e.account,this.account&&(this.by=o.c.CREATE_BY_STRING(this.account.name,this.account.host),this.accountAvatarUrl=o.a.GET_ACTOR_AVATAR_URL(this.account),this.account.localUrl="/accounts/"+this.by)}}},"9BXX":function(e,t,r){"use strict";r.d(t,"a",function(){return E});var n=r("TSHB"),o=r("u3oV"),i=r("ey9i"),a=r("4joM"),c=r("sWvm"),s=(r("xMQD"),r("3ZlK")),l=r("9dYW"),u=r("fXoL"),d=r("1kSV"),b=r("UkmY"),h=r("3Pt+"),f=r("ofXK"),m=r("/xt7"),p=r("BLxp");const v=["modal"];function g(e,t){if(1&e&&u.Qb(0,"div",26),2&e){const e=u.nc(2).$implicit;u.uc("innerHTML",e.help,u.Kc)}}function y(e,t){1&e&&u.Sc(0,g,1,1,"ng-template",25)}function S(e,t){if(1&e&&(u.Tb(0,27),u.Qb(1,"div",26),u.Sb()),2&e){const e=u.nc().$implicit;u.Cb(1),u.uc("innerHTML",e.description,u.Kc)}}function O(e,t){if(1&e&&(u.Vb(0,"div",17),u.Vb(1,"my-peertube-checkbox",23),u.Sc(2,y,1,0,void 0,16),u.Sc(3,S,2,1,"ng-container",24),u.Ub(),u.Ub()),2&e){const e=t.$implicit;u.Cb(1),u.uc("inputName",e.id)("formControlName",e.id)("labelText",e.label),u.Cb(1),u.uc("ngIf",e.help),u.Cb(1),u.uc("ngIf",e.description)}}function j(e,t){if(1&e&&(u.fc(0,15,1),u.Rb(1),u.cc()),2&e){const e=u.nc(2);u.Cb(1),u.dc(e.originHost),u.ac(0)}}function A(e,t){if(1&e&&(u.Vb(0,"div",28),u.Uc(1),u.Ub()),2&e){const e=u.nc(2);u.Cb(1),u.Wc(" ",e.formErrors.reason," ")}}const C=function(e){return{"input-error":e}};function x(e,t){if(1&e){const e=u.Wb();u.Vb(0,"div",1),u.Vb(1,"h4",2),u.Uc(2),u.Ub(),u.Vb(3,"my-global-icon",3),u.jc("click",function(){return u.Jc(e),u.nc().hide()}),u.Ub(),u.Ub(),u.Vb(4,"div",4),u.Vb(5,"form",5),u.jc("ngSubmit",function(){return u.Jc(e),u.nc().report()}),u.Vb(6,"div",6),u.Vb(7,"div",7),u.Vb(8,"label",8),u.Zb(9,9),u.Ub(),u.Vb(10,"div",10),u.Tb(11,11),u.Sc(12,O,4,5,"div",12),u.Sb(),u.Ub(),u.Ub(),u.Vb(13,"div",13),u.Vb(14,"div",14),u.fc(15,15),u.Sc(16,j,2,1,"ng-container",16),u.cc(),u.Ub(),u.Vb(17,"div",17),u.Qb(18,"textarea",18),u.Sc(19,A,2,1,"div",19),u.Ub(),u.Ub(),u.Ub(),u.Vb(20,"div",20),u.Vb(21,"input",21),u.jc("click",function(){return u.Jc(e),u.nc().hide()})("key.enter",function(){return u.Jc(e),u.nc().hide()}),u.Ub(),u.Qb(22,"input",22),u.Ub(),u.Ub(),u.Ub()}if(2&e){const e=u.nc();u.Cb(2),u.Vc(e.modalTitle),u.Cb(3),u.uc("formGroup",e.form),u.Cb(7),u.uc("ngForOf",e.predefinedReasons),u.Cb(4),u.uc("ngIf",e.isRemote()),u.dc(e.currentHost),u.ac(15),u.Cb(2),u.uc("ngClass",u.yc(8,C,e.formErrors.reason)),u.Cb(1),u.uc("ngIf",e.formErrors.reason),u.Cb(3),u.uc("disabled",!e.form.valid)}}let E=(()=>{class e extends c.a{constructor(e,t,r,n){super(),this.formValidatorService=e,this.modalService=t,this.abuseService=r,this.notifier=n,this.account=null,this.error=null,this.predefinedReasons=[]}get currentHost(){return window.location.host}get originHost(){return this.isRemote()?this.account.host:""}ngOnInit(){this.modalTitle="Report \n          " + this.account.displayName + "\n        ",this.buildForm({reason:a.c,predefinedReasons:Object(n.a)(s.a,e=>null)}),this.predefinedReasons=this.abuseService.getPrefefinedReasons("account")}show(){this.openedModal=this.modalService.open(this.modal,{centered:!0,keyboard:!1,size:"lg"})}hide(){this.openedModal.close(),this.openedModal=null}report(){const e=this.form.get("reason").value,t=Object.keys(Object(o.a)(this.form.get("predefinedReasons").value));this.abuseService.reportVideo({reason:e,predefinedReasons:t,account:{id:this.account.id}}).subscribe(()=>{this.notifier.success("Account reported."),this.hide()},e=>this.notifier.error(e.message))}isRemote(){return!this.account.isLocal}}return e.\u0275fac=function(t){return new(t||e)(u.Pb(c.b),u.Pb(d.m),u.Pb(l.a),u.Pb(i.m))},e.\u0275cmp=u.Jb({type:e,selectors:[["my-account-report"]],viewQuery:function(e,t){if(1&e&&u.Pc(v,!0),2&e){let e;u.Gc(e=u.kc())&&(t.modal=e.first)}},inputs:{account:"account"},features:[u.zb],decls:2,vars:0,consts:function(){let e,t,r,n,o;return e="What is the issue?",t="Please describe the issue...",r="Cancel",n="Mandar",o="\n          Your report will be sent to moderators of \n          " + "\ufffd0\ufffd" + "\n          " + "\ufffd*16:1\ufffd\ufffd#1:1\ufffd" + " and will be forwarded to the comment origin (\n          " + "\ufffd0:1\ufffd" + ") too\n          " + "\ufffd/#1:1\ufffd\ufffd/*16:1\ufffd" + ".\n        \n        ",[["modal",""],[1,"modal-header"],[1,"modal-title"],["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-5","form-group"],["for","reportPredefinedReasons"],e,[1,"ml-2","mt-2","d-flex","flex-column"],["formGroupName","predefinedReasons"],["class","form-group",4,"ngFor","ngForOf"],[1,"col-7"],[1,"information"],o,[4,"ngIf"],[1,"form-group"],["placeholder",t,"formControlName","reason","ngbAutofocus","",1,"form-control",3,"ngClass"],["class","form-error",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button","value",r,1,"action-button","action-button-cancel",3,"click","key.enter"],["type","submit","value",n,1,"action-button-submit",3,"disabled"],[3,"inputName","formControlName","labelText"],["ngProjectAs","description",5,["description"],4,"ngIf"],["ptTemplate","help"],[3,"innerHTML"],["ngProjectAs","description",5,["description"]],[1,"form-error"]]},template:function(e,t){1&e&&u.Sc(0,x,23,10,"ng-template",null,0,u.Tc)},directives:[b.a,h.y,h.n,h.h,h.i,f.m,f.n,h.b,h.m,h.f,f.l,m.a,p.a],styles:[".information[_ngcontent-%COMP%]{margin-bottom:20px}textarea[_ngcontent-%COMP%]{display:inline-block;height:30px;width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;color:var(--textareaForegroundColor);background-color:var(--textareaBackgroundColor);height:100px;padding:5px 15px;font-size:15px}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}textarea[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width:100%){textarea[_ngcontent-%COMP%]{width:100%}}.start-at[_ngcontent-%COMP%], .stop-at[_ngcontent-%COMP%]{width:300px;display:flex;align-items:center}.start-at[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%], .stop-at[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%]{margin-left:10px}.screenratio[_ngcontent-%COMP%]{position:relative;height:0;width:100%;padding-top:56%}.screenratio[_ngcontent-%COMP%]     iframe, .screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}"]}),e})()},"9dYW":function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r("m8R6"),o=r("JIr8"),i=r("lJxs"),a=r("tk/3"),c=r("ey9i"),s=r("AytR"),l=r("fXoL");let u=(()=>{class e{constructor(e,t,r){this.authHttp=e,this.restService=t,this.restExtractor=r}getAdminAbuses(t){const{pagination:r,sort:n,search:i}=t,c=e.BASE_ABUSE_URL;let s=new a.f;return s=this.restService.addRestGetParams(s,r,n),i&&(s=this.buildParamsFromSearch(i,s)),this.authHttp.get(c,{params:s}).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}getUserAbuses(t){const{pagination:r,sort:n,search:i}=t,c=e.BASE_MY_ABUSE_URL;let s=new a.f;return s=this.restService.addRestGetParams(s,r,n),i&&(s=this.buildParamsFromSearch(i,s)),this.authHttp.get(c,{params:s}).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}reportVideo(t){const r=e.BASE_ABUSE_URL,a=Object(n.a)(t,["id"]);return this.authHttp.post(r,a).pipe(Object(i.a)(this.restExtractor.extractDataBool),Object(o.a)(e=>this.restExtractor.handleError(e)))}updateAbuse(t,r){return this.authHttp.put(e.BASE_ABUSE_URL+"/"+t.id,r).pipe(Object(i.a)(this.restExtractor.extractDataBool),Object(o.a)(e=>this.restExtractor.handleError(e)))}removeAbuse(t){return this.authHttp.delete(e.BASE_ABUSE_URL+"/"+t.id).pipe(Object(i.a)(this.restExtractor.extractDataBool),Object(o.a)(e=>this.restExtractor.handleError(e)))}addAbuseMessage(t,r){return this.authHttp.post(e.BASE_ABUSE_URL+"/"+t.id+"/messages",{message:r}).pipe(Object(i.a)(this.restExtractor.extractDataBool),Object(o.a)(e=>this.restExtractor.handleError(e)))}listAbuseMessages(t){return this.authHttp.get(e.BASE_ABUSE_URL+"/"+t.id+"/messages").pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}deleteAbuseMessage(t,r){return this.authHttp.delete(e.BASE_ABUSE_URL+"/"+t.id+"/messages/"+r.id).pipe(Object(i.a)(this.restExtractor.extractDataBool),Object(o.a)(e=>this.restExtractor.handleError(e)))}getPrefefinedReasons(e){let t=[{id:"violentOrRepulsive",label:"Violent or repulsive",help:"Contains offensive, violent, or coarse language or iconography."},{id:"hatefulOrAbusive",label:"Hateful or abusive",help:"Contains abusive, racist or sexist language or iconography."},{id:"spamOrMisleading",label:"Spam, ad or false news",help:"Contains marketing, spam, purposefully deceitful news, or otherwise misleading thumbnail/text/tags. Please provide reputable sources to report hoaxes."},{id:"privacy",label:"Privacy breach or doxxing",help:"Contains personal information that could be used to track, identify, contact or impersonate someone (e.g. name, address, phone number, email, or credit card details)."},{id:"rights",label:"Copyright",help:"Infringes your copyright wrt. the regional laws with which the server must comply."},{id:"serverRules",label:"Breaks server rules",description:"Anything not included in the above that breaks the terms of service, code of conduct, or general rules in place on the server."}];return"video"===e&&(t=t.concat([{id:"thumbnails",label:"Vinhetas",help:"The above can only be seen in thumbnails."},{id:"captions",label:"Captions",help:"The above can only be seen in captions (please describe which)."}])),t}buildParamsFromSearch(e,t){const r=this.restService.parseQueryStringFilter(e,{id:{prefix:"#"},state:{prefix:"state:",handler:e=>"accepted"===e?3:"pending"===e?1:"rejected"===e?2:void 0},videoIs:{prefix:"videoIs:",handler:e=>"deleted"===e||"blacklisted"===e?e:void 0},searchReporter:{prefix:"reporter:"},searchReportee:{prefix:"reportee:"},predefinedReason:{prefix:"tag:"}});return this.restService.addObjectParams(t,r)}}return e.BASE_ABUSE_URL=s.a.apiUrl+"/api/v1/abuses",e.BASE_MY_ABUSE_URL=s.a.apiUrl+"/api/v1/users/me/abuses",e.\u0275fac=function(t){return new(t||e)(l.gc(a.b),l.gc(c.s),l.gc(c.r))},e.\u0275prov=l.Lb({token:e,factory:e.\u0275fac}),e})()},BYvb:function(e,t,r){"use strict";r.d(t,"a",function(){return _});var n=r("TSHB"),o=r("u3oV"),i=r("H9+z"),a=r("ey9i"),c=r("4joM"),s=r("sWvm"),l=r("3ZlK"),u=(r("xMQD"),r("9dYW")),d=r("fXoL"),b=r("1kSV"),h=r("jhN1"),f=r("UkmY"),m=r("3Pt+"),p=r("ofXK"),v=r("/xt7"),g=r("C8Cb"),y=r("BLxp");const S=["modal"];function O(e,t){if(1&e&&d.Qb(0,"div",18),2&e){const e=d.nc(2).$implicit;d.uc("innerHTML",e.help,d.Kc)}}function j(e,t){1&e&&d.Sc(0,O,1,1,"ng-template",34)}function A(e,t){if(1&e&&(d.Tb(0,35),d.Qb(1,"div",18),d.Sb()),2&e){const e=d.nc().$implicit;d.Cb(1),d.uc("innerHTML",e.description,d.Kc)}}function C(e,t){if(1&e&&(d.Vb(0,"div",26),d.Vb(1,"my-peertube-checkbox",32),d.Sc(2,j,1,0,void 0,25),d.Sc(3,A,2,1,"ng-container",33),d.Ub(),d.Ub()),2&e){const e=t.$implicit;d.Cb(1),d.uc("inputName",e.id)("formControlName",e.id)("labelText",e.label),d.Cb(1),d.uc("ngIf",e.help),d.Cb(1),d.uc("ngIf",e.description)}}function x(e,t){if(1&e&&(d.Vb(0,"div",36),d.Qb(1,"my-peertube-checkbox",37),d.Qb(2,"my-timestamp-input",38),d.Ub()),2&e){const e=d.nc(2);d.Cb(2),d.uc("timestamp",e.timestamp.endAt)("maxTimestamp",e.video.duration)}}function E(e,t){if(1&e&&(d.fc(0,24,1),d.Rb(1),d.cc()),2&e){const e=d.nc(2);d.Cb(1),d.dc(e.originHost),d.ac(0)}}function U(e,t){if(1&e&&(d.Vb(0,"div",39),d.Uc(1),d.Ub()),2&e){const e=d.nc(2);d.Cb(1),d.Wc(" ",e.formErrors.reason," ")}}const w=function(e){return{"input-error":e}};function k(e,t){if(1&e){const e=d.Wb();d.Vb(0,"div",1),d.Vb(1,"h4",2),d.Zb(2,3),d.Ub(),d.Vb(3,"my-global-icon",4),d.jc("click",function(){return d.Jc(e),d.nc().hide()}),d.Ub(),d.Ub(),d.Vb(4,"div",5),d.Vb(5,"form",6),d.jc("ngSubmit",function(){return d.Jc(e),d.nc().report()}),d.Vb(6,"div",7),d.Vb(7,"div",8),d.Vb(8,"label",9),d.Zb(9,10),d.Ub(),d.Vb(10,"div",11),d.Tb(11,12),d.Sc(12,C,4,5,"div",13),d.Sb(),d.Ub(),d.Ub(),d.Vb(13,"div",14),d.Vb(14,"div",15),d.Vb(15,"div",16),d.Vb(16,"div",17),d.Qb(17,"div",18),d.Ub(),d.Ub(),d.Ub(),d.Vb(18,"div",19),d.Qb(19,"my-peertube-checkbox",20),d.Qb(20,"my-timestamp-input",21),d.Ub(),d.Sc(21,x,3,2,"div",22),d.Vb(22,"div",23),d.fc(23,24),d.Sc(24,E,2,1,"ng-container",25),d.cc(),d.Ub(),d.Vb(25,"div",26),d.Qb(26,"textarea",27),d.Sc(27,U,2,1,"div",28),d.Ub(),d.Ub(),d.Ub(),d.Vb(28,"div",29),d.Vb(29,"input",30),d.jc("click",function(){return d.Jc(e),d.nc().hide()})("key.enter",function(){return d.Jc(e),d.nc().hide()}),d.Ub(),d.Qb(30,"input",31),d.Ub(),d.Ub(),d.Ub()}if(2&e){const e=d.nc();d.Cb(2),d.dc(e.video.name),d.ac(2),d.Cb(3),d.uc("formGroup",e.form),d.Cb(7),d.uc("ngForOf",e.predefinedReasons),d.Cb(5),d.uc("innerHTML",e.embedHtml,d.Kc),d.Cb(3),d.uc("timestamp",e.timestamp.startAt)("maxTimestamp",e.video.duration),d.Cb(1),d.uc("ngIf",e.timestamp.hasStart),d.Cb(3),d.uc("ngIf",e.isRemote()),d.dc(e.currentHost),d.ac(23),d.Cb(2),d.uc("ngClass",d.yc(12,w,e.formErrors.reason)),d.Cb(1),d.uc("ngIf",e.formErrors.reason),d.Cb(3),d.uc("disabled",!e.form.valid)}}let _=(()=>{class e extends s.a{constructor(e,t,r,n,o){super(),this.formValidatorService=e,this.modalService=t,this.abuseService=r,this.notifier=n,this.sanitizer=o,this.video=null,this.error=null,this.predefinedReasons=[]}get currentHost(){return window.location.host}get originHost(){return this.isRemote()?this.video.account.host:""}get timestamp(){return this.form.get("timestamp").value}getVideoEmbed(){return this.sanitizer.bypassSecurityTrustHtml(Object(i.c)(Object(i.b)({baseUrl:this.video.embedUrl,title:!1,warningTitle:!1})))}ngOnInit(){this.buildForm({reason:c.c,predefinedReasons:Object(n.a)(l.a,e=>null),timestamp:{hasStart:null,startAt:null,hasEnd:null,endAt:null}}),this.predefinedReasons=this.abuseService.getPrefefinedReasons("video"),this.embedHtml=this.getVideoEmbed()}show(){this.openedModal=this.modalService.open(this.modal,{centered:!0,keyboard:!1,size:"lg"})}hide(){this.openedModal.close(),this.openedModal=null}report(){const e=this.form.get("reason").value,t=Object.keys(Object(o.a)(this.form.get("predefinedReasons").value)),{hasStart:r,startAt:n,hasEnd:i,endAt:a}=this.form.get("timestamp").value;this.abuseService.reportVideo({reason:e,predefinedReasons:t,video:{id:this.video.id,startAt:r&&n?n:void 0,endAt:i&&a?a:void 0}}).subscribe(()=>{this.notifier.success("Vid\xE8o senhalada."),this.hide()},e=>this.notifier.error(e.message))}isRemote(){return!this.video.isLocal}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(s.b),d.Pb(b.m),d.Pb(u.a),d.Pb(a.m),d.Pb(h.b))},e.\u0275cmp=d.Jb({type:e,selectors:[["my-video-report"]],viewQuery:function(e,t){if(1&e&&d.Pc(S,!0),2&e){let e;d.Gc(e=d.kc())&&(t.modal=e.first)}},inputs:{video:"video"},features:[d.zb],decls:2,vars:0,consts:function(){let e,t,r,n,o,i,a,c;return e="Report video \"\n          " + "\ufffd0\ufffd" + "\"\n        ",t="What is the issue?",r="Debuta a",n="Please describe the issue...",o="Cancel",i="Mandar",a="Arr\xE8sta a",c="\n          Your report will be sent to moderators of \n          " + "\ufffd0\ufffd" + "\n          " + "\ufffd*24:1\ufffd\ufffd#1:1\ufffd" + " and will be forwarded to the video origin (\n          " + "\ufffd0:1\ufffd" + ") too\n          " + "\ufffd/#1:1\ufffd\ufffd/*24:1\ufffd" + ".\n        \n        ",[["modal",""],[1,"modal-header"],[1,"modal-title"],e,["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-5","form-group"],["for","reportPredefinedReasons"],t,[1,"ml-2","mt-2","d-flex","flex-column"],["formGroupName","predefinedReasons"],["class","form-group",4,"ngFor","ngForOf"],[1,"col-7"],[1,"row","justify-content-center"],[1,"col-12","col-lg-9","mb-2"],[1,"screenratio"],[3,"innerHTML"],["formGroupName","timestamp",1,"mb-1","start-at"],["formControlName","hasStart","labelText",r],["formControlName","startAt","inputName","startAt",3,"timestamp","maxTimestamp"],["class","mb-3 stop-at","formGroupName","timestamp",4,"ngIf"],[1,"information"],c,[4,"ngIf"],[1,"form-group"],["placeholder",n,"formControlName","reason","ngbAutofocus","",1,"form-control",3,"ngClass"],["class","form-error",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button","value",o,1,"action-button","action-button-cancel",3,"click","key.enter"],["type","submit","value",i,1,"action-button-submit",3,"disabled"],[3,"inputName","formControlName","labelText"],["ngProjectAs","description",5,["description"],4,"ngIf"],["ptTemplate","help"],["ngProjectAs","description",5,["description"]],["formGroupName","timestamp",1,"mb-3","stop-at"],["formControlName","hasEnd","labelText",a],["formControlName","endAt","inputName","endAt",3,"timestamp","maxTimestamp"],[1,"form-error"]]},template:function(e,t){1&e&&d.Sc(0,k,31,14,"ng-template",null,0,d.Tc)},directives:[f.a,m.y,m.n,m.h,m.i,p.m,v.a,m.m,m.f,g.a,p.n,m.b,p.l,y.a],styles:[".information[_ngcontent-%COMP%]{margin-bottom:20px}textarea[_ngcontent-%COMP%]{display:inline-block;height:30px;width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;color:var(--textareaForegroundColor);background-color:var(--textareaBackgroundColor);height:100px;padding:5px 15px;font-size:15px}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}textarea[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width:100%){textarea[_ngcontent-%COMP%]{width:100%}}.start-at[_ngcontent-%COMP%], .stop-at[_ngcontent-%COMP%]{width:300px;display:flex;align-items:center}.start-at[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%], .stop-at[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%]{margin-left:10px}.screenratio[_ngcontent-%COMP%]{position:relative;height:0;width:100%;padding-top:56%}.screenratio[_ngcontent-%COMP%]     iframe, .screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}"]}),e})()},Ce4a:function(e,t,r){"use strict";var n=r("Ju5/");t.a=n.a.Uint8Array},"E/r9":function(e,t,r){"use strict";r.d(t,"a",function(){return g});var n=r("fXoL"),o=r("sWvm"),i=r("3Pt+");function a(e){return e.split("\n").filter(e=>e&&0!==e.length)}const c={VALIDATORS:[i.w.required,e=>{if(!e.value)return null;const t=[],r=a(e.value);for(const o of r)!1===(n=o,new RegExp("^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]).)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$").test(n))&&t.push("\n          " + o + " es pas valid\n        ");var n;return 0!==t.length?{validDomains:{reason:"invalid",value:t.join(". ")+"."}}:null},e=>{if(!e.value)return null;const t=a(e.value);return t.every(e=>t.indexOf(e)===t.lastIndexOf(e))?null:{uniqueDomains:{reason:"invalid"}}}],MESSAGES:{required:"Un domeni es requerit.",validDomains:"Los domenis picats son pas valids.",uniqueDomains:"Domains entered contain duplicates."}};var s=r("1kSV"),l=r("UkmY"),u=r("ofXK");const d=["modal"];function b(e,t){if(1&e&&(n.Vb(0,"div"),n.Uc(1),n.Ub()),2&e){const e=n.nc(3);n.Cb(1),n.Wc(" ",e.form.controls.domains.errors.validDomains.value," ")}}function h(e,t){if(1&e&&(n.Vb(0,"div",15),n.Uc(1),n.Sc(2,b,2,1,"div",16),n.Ub()),2&e){const e=n.nc(2);n.Cb(1),n.Wc(" ",e.formErrors.domains," "),n.Cb(1),n.uc("ngIf",e.form.controls.domains.errors.validDomains)}}const f=function(e){return{"input-error":e}};function m(e,t){if(1&e){const e=n.Wb();n.Vb(0,"div",1),n.Vb(1,"h4",2),n.Zb(2,3),n.Ub(),n.Vb(3,"my-global-icon",4),n.jc("click",function(){return n.Jc(e),n.nc().hide()}),n.Ub(),n.Ub(),n.Vb(4,"div",5),n.Vb(5,"form",6),n.jc("ngSubmit",function(){return n.Jc(e),n.nc().submit()}),n.Vb(6,"div",7),n.Vb(7,"label",8),n.Zb(8,9),n.Ub(),n.Qb(9,"textarea",10),n.Sc(10,h,3,2,"div",11),n.Ub(),n.sc(11),n.Vb(12,"div",12),n.Vb(13,"input",13),n.jc("click",function(){return n.Jc(e),n.nc().hide()})("key.enter",function(){return n.Jc(e),n.nc().hide()}),n.Ub(),n.Qb(14,"input",14),n.Ub(),n.Ub(),n.Ub()}if(2&e){const e=n.nc();n.Cb(2),n.dc(e.action),n.ac(2),n.Cb(3),n.uc("formGroup",e.form),n.Cb(4),n.uc("placeholder",e.placeholder)("ngClass",n.yc(7,f,e.formErrors.domains)),n.Cb(1),n.uc("ngIf",e.formErrors.domains),n.Cb(4),n.uc("value",e.action)("disabled",!e.form.valid)}}const p=[[["warning"]]],v=["warning"];let g=(()=>{class e extends o.a{constructor(e,t){super(),this.formValidatorService=e,this.modalService=t,this.placeholder="example.com",this.domains=new n.n}ngOnInit(){this.action||(this.action="Contunhar amb los domenis"),this.buildForm({domains:c})}openModal(){this.openedModal=this.modalService.open(this.modal,{centered:!0})}hide(){this.openedModal.close()}submit(){this.domains.emit(a(this.form.controls.domains.value)),this.form.reset(),this.hide()}}return e.\u0275fac=function(t){return new(t||e)(n.Pb(o.b),n.Pb(s.m))},e.\u0275cmp=n.Jb({type:e,selectors:[["my-batch-domains-modal"]],viewQuery:function(e,t){if(1&e&&n.Pc(d,!0),2&e){let e;n.Gc(e=n.kc())&&(t.modal=e.first)}},inputs:{placeholder:"placeholder",action:"action"},outputs:{domains:"domains"},features:[n.zb],ngContentSelectors:v,decls:2,vars:0,consts:function(){let e,t,r;return e="\n          " + "\ufffd0\ufffd" + "\n        ",t="1 \xF2st (sens \"http://\") per linha",r="Cancel",[["modal",""],[1,"modal-header"],[1,"modal-title"],e,["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group"],["for","hosts"],t,["formControlName","domains","type","text","id","hosts","name","hosts","ngbAutofocus","",1,"form-control",3,"placeholder","ngClass"],["class","form-error",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button","value",r,1,"action-button","action-button-cancel",3,"click","key.enter"],["type","submit",1,"action-button-submit",3,"value","disabled"],[1,"form-error"],[4,"ngIf"]]},template:function(e,t){1&e&&(n.tc(p),n.Sc(0,m,15,9,"ng-template",null,0,n.Tc))},directives:[l.a,i.y,i.n,i.h,i.b,i.m,i.f,u.l,u.n],styles:["textarea[_ngcontent-%COMP%]{height:200px}"]}),e})()},GYlH:function(e,t,r){"use strict";t.a=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}},GeT4:function(e,t,r){"use strict";r.d(t,"a",function(){return f});var n=r("Cfvw"),o=r("lJxs"),i=r("JIr8"),a=r("bOdf"),c=r("IAdc"),s=r("tk/3"),l=r("ey9i"),u=r("6rF9"),d=r("AytR"),b=r("8i4Y"),h=r("fXoL");let f=(()=>{class e{constructor(e,t,r){this.authHttp=e,this.restExtractor=t,this.restService=r}addCommentThread(t,r){const n=e.BASE_VIDEO_URL+t+"/comment-threads",a=Object(u.l)(r,"text");return this.authHttp.post(n,a).pipe(Object(o.a)(e=>this.extractVideoComment(e.comment)),Object(i.a)(e=>this.restExtractor.handleError(e)))}addCommentReply(t,r,n){const a=e.BASE_VIDEO_URL+t+"/comments/"+r,c=Object(u.l)(n,"text");return this.authHttp.post(a,c).pipe(Object(o.a)(e=>this.extractVideoComment(e.comment)),Object(i.a)(e=>this.restExtractor.handleError(e)))}getAdminVideoComments(t){const{pagination:r,sort:n,search:o}=t,a=e.BASE_VIDEO_URL+"comments";let c=new s.f;return c=this.restService.addRestGetParams(c,r,n),o&&(c=this.buildParamsFromSearch(o,c)),this.authHttp.get(a,{params:c}).pipe(Object(i.a)(e=>this.restExtractor.handleError(e)))}getVideoCommentThreads(t){const{videoId:r,componentPagination:n,sort:a}=t,c=this.restService.componentPaginationToRestPagination(n);let l=new s.f;return l=this.restService.addRestGetParams(l,c,a),this.authHttp.get(e.BASE_VIDEO_URL+r+"/comment-threads",{params:l}).pipe(Object(o.a)(e=>this.extractVideoComments(e)),Object(i.a)(e=>this.restExtractor.handleError(e)))}getVideoThreadComments(t){const{videoId:r,threadId:n}=t;return this.authHttp.get(`${e.BASE_VIDEO_URL+r}/comment-threads/${n}`).pipe(Object(o.a)(e=>this.extractVideoCommentTree(e)),Object(i.a)(e=>this.restExtractor.handleError(e)))}deleteVideoComment(t,r){return this.authHttp.delete(`${e.BASE_VIDEO_URL+t}/comments/${r}`).pipe(Object(o.a)(this.restExtractor.extractDataBool),Object(i.a)(e=>this.restExtractor.handleError(e)))}deleteVideoComments(e){return Object(n.a)(e).pipe(Object(a.a)(e=>this.deleteVideoComment(e.videoId,e.commentId)),Object(c.a)())}getVideoCommentsFeeds(t){const r=[{format:"xml",label:"rss 2.0",url:e.BASE_FEEDS_URL+"xml".toLowerCase()},{format:"atom",label:"atom 1.0",url:e.BASE_FEEDS_URL+"atom".toLowerCase()},{format:"json",label:"json 1.0",url:e.BASE_FEEDS_URL+"json".toLowerCase()}];if(void 0!==t)for(const e of r)e.url+="?videoId="+t;return r}extractVideoComment(e){return new b.a(e)}extractVideoComments(e){const t=e.data,r=e.total,n=[];for(const o of t)n.push(new b.a(o));return{data:n,total:r}}extractVideoCommentTree(e){return e?(e.comment=new b.a(e.comment),e.children.forEach(e=>this.extractVideoCommentTree(e)),e):e}buildParamsFromSearch(e,t){const r=this.restService.parseQueryStringFilter(e,{isLocal:{prefix:"local:",isBoolean:!0,handler:e=>"true"===e||"false"===e?e:void 0},searchAccount:{prefix:"account:"},searchVideo:{prefix:"video:"}});return this.restService.addObjectParams(t,r)}}return e.BASE_FEEDS_URL=d.a.apiUrl+"/feeds/video-comments.",e.BASE_VIDEO_URL=d.a.apiUrl+"/api/v1/videos/",e.\u0275fac=function(t){return new(t||e)(h.gc(s.b),h.gc(l.r),h.gc(l.s))},e.\u0275prov=h.Lb({token:e,factory:e.\u0275fac}),e})()},GxWh:function(e,t,r){"use strict";r.d(t,"a",function(){return u}),r.d(t,"b",function(){return d});var n=r("lJxs"),o=r("JIr8"),i=r("tk/3"),a=r("ey9i"),c=r("AytR"),s=r("xHIW"),l=r("fXoL"),u=function(e){return e[e.Account=0]="Account",e[e.Instance=1]="Instance",e}({});let d=(()=>{class e{constructor(e,t,r){this.authHttp=e,this.restExtractor=t,this.restService=r}getUserAccountBlocklist(t){const{pagination:r,sort:a,search:c}=t;let s=new i.f;return s=this.restService.addRestGetParams(s,r,a),c&&(s=s.append("search",c)),this.authHttp.get(e.BASE_USER_BLOCKLIST_URL+"/accounts",{params:s}).pipe(Object(n.a)(e=>this.restExtractor.convertResultListDateToHuman(e)),Object(n.a)(e=>this.restExtractor.applyToResultListData(e,this.formatAccountBlock.bind(this))),Object(o.a)(e=>this.restExtractor.handleError(e)))}blockAccountByUser(t){return this.authHttp.post(e.BASE_USER_BLOCKLIST_URL+"/accounts",{accountName:t.nameWithHost}).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}unblockAccountByUser(t){return this.authHttp.delete(e.BASE_USER_BLOCKLIST_URL+"/accounts/"+t.nameWithHost).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}getUserServerBlocklist(t){const{pagination:r,sort:a,search:c}=t;let s=new i.f;return s=this.restService.addRestGetParams(s,r,a),c&&(s=s.append("search",c)),this.authHttp.get(e.BASE_USER_BLOCKLIST_URL+"/servers",{params:s}).pipe(Object(n.a)(e=>this.restExtractor.convertResultListDateToHuman(e)),Object(o.a)(e=>this.restExtractor.handleError(e)))}blockServerByUser(t){return this.authHttp.post(e.BASE_USER_BLOCKLIST_URL+"/servers",{host:t}).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}unblockServerByUser(t){return this.authHttp.delete(e.BASE_USER_BLOCKLIST_URL+"/servers/"+t).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}getInstanceAccountBlocklist(t){const{pagination:r,sort:a,search:c}=t;let s=new i.f;return s=this.restService.addRestGetParams(s,r,a),c&&(s=s.append("search",c)),this.authHttp.get(e.BASE_SERVER_BLOCKLIST_URL+"/accounts",{params:s}).pipe(Object(n.a)(e=>this.restExtractor.convertResultListDateToHuman(e)),Object(n.a)(e=>this.restExtractor.applyToResultListData(e,this.formatAccountBlock.bind(this))),Object(o.a)(e=>this.restExtractor.handleError(e)))}blockAccountByInstance(t){return this.authHttp.post(e.BASE_SERVER_BLOCKLIST_URL+"/accounts",{accountName:t.nameWithHost}).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}unblockAccountByInstance(t){return this.authHttp.delete(e.BASE_SERVER_BLOCKLIST_URL+"/accounts/"+t.nameWithHost).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}getInstanceServerBlocklist(t){const{pagination:r,sort:a,search:c}=t;let s=new i.f;return s=this.restService.addRestGetParams(s,r,a),c&&(s=s.append("search",c)),this.authHttp.get(e.BASE_SERVER_BLOCKLIST_URL+"/servers",{params:s}).pipe(Object(n.a)(e=>this.restExtractor.convertResultListDateToHuman(e)),Object(o.a)(e=>this.restExtractor.handleError(e)))}blockServerByInstance(t){return this.authHttp.post(e.BASE_SERVER_BLOCKLIST_URL+"/servers",{host:t}).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}unblockServerByInstance(t){return this.authHttp.delete(e.BASE_SERVER_BLOCKLIST_URL+"/servers/"+t).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}formatAccountBlock(e){return new s.a(e)}}return e.BASE_USER_BLOCKLIST_URL=c.a.apiUrl+"/api/v1/users/me/blocklist",e.BASE_SERVER_BLOCKLIST_URL=c.a.apiUrl+"/api/v1/server/blocklist",e.\u0275fac=function(t){return new(t||e)(l.gc(i.b),l.gc(a.r),l.gc(a.s))},e.\u0275prov=l.Lb({token:e,factory:e.\u0275fac}),e})()},HIM4:function(e,t,r){"use strict";r.d(t,"a",function(){return n.a}),r.d(t,"e",function(){return s}),r.d(t,"b",function(){return a.a}),r.d(t,"c",function(){return a.b}),r.d(t,"d",function(){return l.a}),r.d(t,"f",function(){return d}),r.d(t,"h",function(){return b.a}),r.d(t,"g",function(){return v}),r("9BXX"),r("re7S"),r("BYvb");var n=r("9dYW"),o=(r("xHIW"),r("ey9i")),i=r("xMQD"),a=r("GxWh"),c=r("fXoL");let s=(()=>{class e extends o.t{constructor(e,t){super(),this.notifier=e,this.blocklistService=t,this.blockedAccounts=[],this.totalRecords=0,this.sort={field:"createdAt",order:-1},this.pagination={count:this.rowsPerPage,start:0}}ngOnInit(){this.initialize()}switchToDefaultAvatar(e){e.target.src=i.a.GET_DEFAULT_AVATAR_URL()}unblockAccount(e){const t=e.blockedAccount;(this.mode===a.a.Account?this.blocklistService.unblockAccountByUser(t):this.blocklistService.unblockAccountByInstance(t)).subscribe(()=>{this.notifier.success(this.mode===a.a.Account?"Compte \n          " + t.nameWithHost + " pas mai mut.\n        ":"Lo compte \n          " + t.nameWithHost + " es pas mai mut per v\xF2stra inst\xE0ncia.\n        "),this.loadData()})}loadData(){return(this.mode===a.a.Account?this.blocklistService.getUserAccountBlocklist({pagination:this.pagination,sort:this.sort,search:this.search}):this.blocklistService.getInstanceAccountBlocklist({pagination:this.pagination,sort:this.sort,search:this.search})).subscribe(e=>{this.blockedAccounts=e.data,this.totalRecords=e.total},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(c.Pb(o.m),c.Pb(a.b))},e.\u0275dir=c.Kb({type:e,features:[c.zb]}),e})();r("E/r9");var l=r("QLwe");const u=["batchDomainsModal"];let d=(()=>{class e extends o.t{constructor(e,t){super(),this.notifier=e,this.blocklistService=t,this.blockedServers=[],this.totalRecords=0,this.sort={field:"createdAt",order:-1},this.pagination={count:this.rowsPerPage,start:0}}ngOnInit(){this.initialize()}unblockServer(e){const t=e.blockedServer.host;(e=>this.mode===a.a.Account?this.blocklistService.unblockServerByUser(e):this.blocklistService.unblockServerByInstance(e))(t).subscribe(()=>{this.notifier.success(this.mode===a.a.Account?"L\u2019inst\xE0ncia \n          " + t + " es pas mai muda.\n        ":"L\u2019inst\xE0ncia \n          " + t + " es pas mai muda per v\xF2stra inst\xE0ncia.\n        "),this.loadData()})}addServersToBlock(){this.batchDomainsModal.openModal()}onDomainsToBlock(e){const t=e=>this.mode===a.a.Account?this.blocklistService.blockServerByUser(e):this.blocklistService.blockServerByInstance(e);e.forEach(e=>{t(e).subscribe(()=>{this.notifier.success(this.mode===a.a.Account?"Instance \n          " + e + " muted.\n        ":"Instance \n          " + e + " muted by your instance.\n        "),this.loadData()})})}loadData(){return(this.mode===a.a.Account?this.blocklistService.getUserServerBlocklist({pagination:this.pagination,sort:this.sort,search:this.search}):this.blocklistService.getInstanceServerBlocklist({pagination:this.pagination,sort:this.sort,search:this.search})).subscribe(e=>{this.blockedServers=e.data,this.totalRecords=e.total},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(c.Pb(o.m),c.Pb(a.b))},e.\u0275dir=c.Kb({type:e,viewQuery:function(e,t){if(1&e&&c.Yc(u,!0),2&e){let e;c.Gc(e=c.kc())&&(t.batchDomainsModal=e.first)}},features:[c.zb]}),e})();r("Imgh"),r("2L7+"),r("XZU/");var b=r("d8Kw"),h=r("N/VM"),f=r("P8w3"),m=r("Nmku"),p=r("ix8N");let v=(()=>{class e{}return e.\u0275mod=c.Nb({type:e}),e.\u0275inj=c.Mb({factory:function(t){return new(t||e)},providers:[a.b,l.a,n.a,b.a],imports:[[m.a,h.a,f.a,p.a]]}),e})()},Imgh:function(e,t,r){"use strict";r.d(t,"a",function(){return p});var n=r("mrSG"),o=r("fXoL"),i=r("ey9i"),a=r("sWvm"),c=r("nnN+"),s=r("1kSV"),l=r("UkmY"),u=r("3Pt+"),d=r("ofXK");const b=["modal"];function h(e,t){if(1&e&&(o.Vb(0,"div",14),o.Uc(1),o.Ub()),2&e){const e=o.nc(2);o.Cb(1),o.Wc(" ",e.formErrors.reason," ")}}const f=function(e){return{"input-error":e}};function m(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",1),o.Vb(1,"h4",2),o.Zb(2,3),o.Ub(),o.Vb(3,"my-global-icon",4),o.jc("click",function(){return o.Jc(e),o.nc().hide()}),o.Ub(),o.Ub(),o.Vb(4,"div",5),o.Vb(5,"form",6),o.jc("ngSubmit",function(){return o.Jc(e),o.nc().banUser()}),o.Vb(6,"div",7),o.Qb(7,"textarea",8),o.Sc(8,h,2,1,"div",9),o.Ub(),o.Vb(9,"div"),o.Zb(10,10),o.Ub(),o.Vb(11,"div",11),o.Vb(12,"input",12),o.jc("click",function(){return o.Jc(e),o.nc().hide()})("key.enter",function(){return o.Jc(e),o.nc().hide()}),o.Ub(),o.Qb(13,"input",13),o.Ub(),o.Ub(),o.Ub()}if(2&e){const e=o.nc();o.Cb(5),o.uc("formGroup",e.form),o.Cb(2),o.uc("ngClass",o.yc(4,f,e.formErrors.reason)),o.Cb(1),o.uc("ngIf",e.formErrors.reason),o.Cb(5),o.uc("disabled",!e.form.valid)}}let p=(()=>{class e extends a.a{constructor(e,t,r,n){super(),this.formValidatorService=e,this.modalService=t,this.notifier=r,this.userService=n,this.userBanned=new o.n}ngOnInit(){this.buildForm({reason:c.a})}openModal(e){this.usersToBan=e,this.openedModal=this.modalService.open(this.modal,{centered:!0})}hide(){this.usersToBan=void 0,this.openedModal.close()}banUser(){return Object(n.a)(this,void 0,void 0,function*(){this.userService.banUsers(this.usersToBan,this.form.value.reason||void 0).subscribe(()=>{const e=Array.isArray(this.usersToBan)?"\n          " + this.usersToBan.length + " utilizaires f\xF2rabandits.\n        ":"Utilizaire \n          " + this.usersToBan.username + " f\xF2rabandit.\n        ";this.notifier.success(e),this.userBanned.emit(this.usersToBan),this.hide()},e=>this.notifier.error(e.message))})}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(a.b),o.Pb(s.m),o.Pb(i.m),o.Pb(i.D))},e.\u0275cmp=o.Jb({type:e,selectors:[["my-user-ban-modal"]],viewQuery:function(e,t){if(1&e&&o.Pc(b,!0),2&e){let e;o.Gc(e=o.kc())&&(t.modal=e.first)}},outputs:{userBanned:"userBanned"},features:[o.zb],decls:2,vars:0,consts:function(){let e,t,r,n,o;return e="Ban",t="Rason...",r="\n        Un utilizaire f\xF2rabandit poir\xE0 pas mai se connectar.\n      ",n="Cancel",o="F\xF2rabandir aqueste utilizaire",[["modal",""],[1,"modal-header"],[1,"modal-title"],e,["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group"],["placeholder",t,"formControlName","reason",1,"form-control",3,"ngClass"],["class","form-error",4,"ngIf"],r,[1,"form-group","inputs"],["type","button","role","button","value",n,1,"action-button","action-button-cancel",3,"click","key.enter"],["type","submit","value",o,1,"action-button-submit",3,"disabled"],[1,"form-error"]]},template:function(e,t){1&e&&o.Sc(0,m,14,6,"ng-template",null,0,o.Tc)},directives:[l.a,u.y,u.n,u.h,u.b,u.m,u.f,d.l,d.n],styles:["textarea[_ngcontent-%COMP%]{display:inline-block;height:30px;width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;color:var(--textareaForegroundColor);background-color:var(--textareaBackgroundColor);height:60px;padding:5px 15px;font-size:15px}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}textarea[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width:100%){textarea[_ngcontent-%COMP%]{width:100%}}"]}),e})()},L3Qv:function(e,t,r){"use strict";t.a=function(){return!1}},QLwe:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r("JIr8"),o=r("ey9i"),i=r("AytR"),a=r("fXoL"),c=r("tk/3");let s=(()=>{class e{constructor(e,t){this.authHttp=e,this.restExtractor=t}removeCommentsOf(t){return this.authHttp.post(e.BASE_BULK_URL+"/remove-comments-of",t).pipe(Object(n.a)(e=>this.restExtractor.handleError(e)))}}return e.BASE_BULK_URL=i.a.apiUrl+"/api/v1/bulk",e.\u0275fac=function(t){return new(t||e)(a.gc(c.b),a.gc(o.r))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac}),e})()},TFwu:function(e,t,r){"use strict";var n=r("25cm"),o=r("jN84"),i=r("mkut");t.a=function(e){return Object(n.a)(e,i.a,o.a)}},TSHB:function(e,t,r){"use strict";var n=r("uE2L"),o=r("mkut"),i=r("fywt");t.a=function(e,t){var r={};return t=Object(i.a)(t,3),function(e,t){e&&function(e,t,r){for(var n=-1,o=Object(e),i=r(e),a=i.length;a--;){var c=i[++n];if(!1===t(o[c],c,o))break}}(e,t,o.a)}(e,function(e,o,i){Object(n.a)(r,o,t(e,o,i))}),r}},TnHx:function(e,t,r){"use strict";var n=r("25cm"),o=r("n561"),i=r("4/q3");t.a=function(e){return Object(n.a)(e,i.a,o.a)}},U6JX:function(e,t,r){"use strict";t.a=function(e,t){return function(r){return e(t(r))}}},UudT:function(e,t,r){"use strict";var n=r("U6JX"),o=Object(n.a)(Object.getPrototypeOf,Object);t.a=o},WJ6P:function(e,t,r){"use strict";t.a=function(){return[]}},WOAq:function(e,t,r){"use strict";(function(e){var n=r("Ju5/"),o=r("L3Qv"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,c=a&&a.exports===i?n.a.Buffer:void 0;t.a=(c?c.isBuffer:void 0)||o.a}).call(this,r("3UD+")(e))},"XZU/":function(e,t,r){"use strict";r.d(t,"a",function(){return O});var n=r("fXoL"),o=r("ey9i"),i=r("sWvm"),a=(r("xMQD"),r("3Pt+"));const c={VALIDATORS:[a.w.minLength(2),a.w.maxLength(300)],MESSAGES:{minlength:"Block reason must be at least 2 characters long.",maxlength:"Block reason cannot be more than 300 characters long."}};var s=r("d8Kw"),l=r("1kSV"),u=r("ofXK"),d=r("UkmY"),b=r("/xt7");const h=["modal"];function f(e,t){if(1&e&&(n.Vb(0,"h4",14),n.Zb(1,15),n.Ub()),2&e){const e=n.nc(2);n.Cb(1),n.dc(e.video.name),n.ac(1)}}function m(e,t){if(1&e&&(n.Vb(0,"h4",14),n.Zb(1,16),n.Ub()),2&e){const e=n.nc(2);n.Cb(1),n.dc(e.video.name),n.ac(1)}}function p(e,t){if(1&e&&(n.Vb(0,"div",17),n.Uc(1),n.Ub()),2&e){const e=n.nc(2);n.Cb(1),n.Wc(" ",e.formErrors.reason," ")}}function v(e,t){1&e&&(n.Vb(0,"div",6),n.Vb(1,"my-peertube-checkbox",18),n.Tb(2,19),n.Vb(3,"span"),n.Zb(4,20),n.Ub(),n.Sb(),n.Ub(),n.Ub())}function g(e,t){1&e&&(n.Vb(0,"strong",21),n.Zb(1,22),n.Ub())}const y=function(e){return{"input-error":e}};function S(e,t){if(1&e){const e=n.Wb();n.Vb(0,"div",1),n.Sc(1,f,2,1,"h4",2),n.Sc(2,m,2,1,"h4",2),n.Vb(3,"my-global-icon",3),n.jc("click",function(){return n.Jc(e),n.nc().hide()}),n.Ub(),n.Ub(),n.Vb(4,"div",4),n.Vb(5,"form",5),n.jc("ngSubmit",function(){return n.Jc(e),n.nc().block()}),n.Vb(6,"div",6),n.Qb(7,"textarea",7),n.Sc(8,p,2,1,"div",8),n.Ub(),n.Sc(9,v,5,0,"div",9),n.Sc(10,g,2,0,"strong",10),n.Vb(11,"div",11),n.Vb(12,"input",12),n.jc("click",function(){return n.Jc(e),n.nc().hide()})("key.enter",function(){return n.Jc(e),n.nc().hide()}),n.Ub(),n.Qb(13,"input",13),n.Ub(),n.Ub(),n.Ub()}if(2&e){const e=n.nc();n.Cb(1),n.uc("ngIf",!e.video.isLive),n.Cb(1),n.uc("ngIf",e.video.isLive),n.Cb(3),n.uc("formGroup",e.form),n.Cb(2),n.uc("ngClass",n.yc(8,y,e.formErrors.reason)),n.Cb(1),n.uc("ngIf",e.formErrors.reason),n.Cb(1),n.uc("ngIf",e.video.isLocal),n.Cb(1),n.uc("ngIf",e.video.isLive),n.Cb(3),n.uc("disabled",!e.form.valid)}}let O=(()=>{class e extends i.a{constructor(e,t,r,o){super(),this.formValidatorService=e,this.modalService=t,this.videoBlocklistService=r,this.notifier=o,this.video=null,this.videoBlocked=new n.n,this.error=null}ngOnInit(){this.buildForm({reason:c,unfederate:null},{unfederate:"true"})}show(){this.openedModal=this.modalService.open(this.modal,{centered:!0,keyboard:!1})}hide(){this.openedModal.close(),this.openedModal=null}block(){const e=this.form.value.reason||void 0;this.videoBlocklistService.blockVideo(this.video.id,e,this.video.isLocal?this.form.value.unfederate:void 0).subscribe(()=>{this.notifier.success("Vid\xE8o blocada"),this.hide(),this.video.blacklisted=!0,this.video.blockedReason=e,this.videoBlocked.emit()},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(n.Pb(i.b),n.Pb(l.m),n.Pb(s.a),n.Pb(o.m))},e.\u0275cmp=n.Jb({type:e,selectors:[["my-video-block"]],viewQuery:function(e,t){if(1&e&&n.Pc(h,!0),2&e){let e;n.Gc(e=n.kc())&&(t.modal=e.first)}},inputs:{video:"video"},outputs:{videoBlocked:"videoBlocked"},features:[n.zb],decls:2,vars:0,consts:function(){let e,t,r,n,o,i,a,c;return e="Please describe the reason...",t="Cancel",r="Mandar",n="Block video \"\n          " + "\ufffd0\ufffd" + "\"\n        ",o="Block live \"" + "\ufffd0\ufffd" + "\"",i="Quitar de federar la vid\xE8o",a="This will ask remote instances to delete it",c=" Blocking this live will automatically terminate the live stream. ",[["modal",""],[1,"modal-header"],["class","modal-title",4,"ngIf"],["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group"],["placeholder",e,"formControlName","reason",1,"form-control",3,"ngClass"],["class","form-error",4,"ngIf"],["class","form-group",4,"ngIf"],["class","live-info",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button","value",t,1,"action-button","action-button-cancel",3,"click","key.enter"],["type","submit","value",r,1,"action-button-submit",3,"disabled"],[1,"modal-title"],n,o,[1,"form-error"],["inputName","unfederate","formControlName","unfederate","labelText",i],["ngProjectAs","description",5,["description"]],a,[1,"live-info"],c]},template:function(e,t){1&e&&n.Sc(0,S,14,10,"ng-template",null,0,n.Tc)},directives:[u.n,d.a,a.y,a.n,a.h,a.b,a.m,a.f,u.l,b.a],styles:["textarea[_ngcontent-%COMP%]{display:inline-block;height:30px;width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;color:var(--textareaForegroundColor);background-color:var(--textareaBackgroundColor);height:100px;padding:5px 15px;font-size:15px}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}textarea[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width:100%){textarea[_ngcontent-%COMP%]{width:100%}}.live-info[_ngcontent-%COMP%]{font-size:15px;margin:40px 0 20px}"]}),e})()},YM6B:function(e,t,r){"use strict";var n=r("Y7yP"),o=r("Ju5/"),i=Object(n.a)(o.a,"DataView"),a=r("3cmB"),c=Object(n.a)(o.a,"Promise"),s=r("pVw1"),l=Object(n.a)(o.a,"WeakMap"),u=r("8M4i"),d=r("dLWn"),b=Object(d.a)(i),h=Object(d.a)(a.a),f=Object(d.a)(c),m=Object(d.a)(s.a),p=Object(d.a)(l),v=u.a;(i&&"[object DataView]"!=v(new i(new ArrayBuffer(1)))||a.a&&"[object Map]"!=v(new a.a)||c&&"[object Promise]"!=v(c.resolve())||s.a&&"[object Set]"!=v(new s.a)||l&&"[object WeakMap]"!=v(new l))&&(v=function(e){var t=Object(u.a)(e),r="[object Object]"==t?e.constructor:void 0,n=r?Object(d.a)(r):"";if(n)switch(n){case b:return"[object DataView]";case h:return"[object Map]";case f:return"[object Promise]";case m:return"[object Set]";case p:return"[object WeakMap]"}return t}),t.a=v},ZWiB:function(e,t,r){"use strict";t.a=function(e,t){return e.has(t)}},d8Kw:function(e,t,r){"use strict";r.d(t,"a",function(){return b});var n=r("Cfvw"),o=r("lJxs"),i=r("JIr8"),a=r("bOdf"),c=r("IAdc"),s=r("tk/3"),l=r("ey9i"),u=r("AytR"),d=r("fXoL");let b=(()=>{class e{constructor(e,t,r){this.authHttp=e,this.restService=t,this.restExtractor=r}listBlocks(t){const{pagination:r,sort:n,search:a,type:c}=t;let l=new s.f;if(l=this.restService.addRestGetParams(l,r,n),a){const e=this.restService.parseQueryStringFilter(a,{type:{prefix:"type:",handler:e=>"manual"===e?1:"auto"===e?2:void 0}});l=this.restService.addObjectParams(l,e)}return c&&(l=l.append("type",c.toString())),this.authHttp.get(e.BASE_VIDEOS_URL+"blacklist",{params:l}).pipe(Object(o.a)(e=>this.restExtractor.convertResultListDateToHuman(e)),Object(i.a)(e=>this.restExtractor.handleError(e)))}unblockVideo(t){const r=Array.isArray(t)?t:[t];return Object(n.a)(r).pipe(Object(a.a)(t=>this.authHttp.delete(e.BASE_VIDEOS_URL+t+"/blacklist")),Object(c.a)(),Object(i.a)(e=>this.restExtractor.handleError(e)))}blockVideo(t,r,n){return this.authHttp.post(e.BASE_VIDEOS_URL+t+"/blacklist",{unfederate:n,reason:r}).pipe(Object(o.a)(this.restExtractor.extractDataBool),Object(i.a)(e=>this.restExtractor.handleError(e)))}}return e.BASE_VIDEOS_URL=u.a.apiUrl+"/api/v1/videos/",e.\u0275fac=function(t){return new(t||e)(d.gc(s.b),d.gc(l.s),d.gc(l.r))},e.\u0275prov=d.Lb({token:e,factory:e.\u0275fac}),e})()},fywt:function(e,t,r){"use strict";var n=r("oSzE"),o=r("msdH"),i=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},a=r("ZWiB"),c=function(e,t,r,n,c,s){var l=1&r,u=e.length,d=t.length;if(u!=d&&!(l&&d>u))return!1;var b=s.get(e);if(b&&s.get(t))return b==t;var h=-1,f=!0,m=2&r?new o.a:void 0;for(s.set(e,t),s.set(t,e);++h<u;){var p=e[h],v=t[h];if(n)var g=l?n(v,p,h,t,e,s):n(p,v,h,e,t,s);if(void 0!==g){if(g)continue;f=!1;break}if(m){if(!i(t,function(e,t){if(!Object(a.a)(m,t)&&(p===e||c(p,e,r,n,s)))return m.push(t)})){f=!1;break}}else if(p!==v&&!c(p,v,r,n,s)){f=!1;break}}return s.delete(e),s.delete(t),f},s=r("ylTp"),l=r("Ce4a"),u=r("YHEm"),d=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r},b=r("GYlH"),h=s.a?s.a.prototype:void 0,f=h?h.valueOf:void 0,m=r("TFwu"),p=Object.prototype.hasOwnProperty,v=r("YM6B"),g=r("/1FC"),y=r("WOAq"),S=r("oYcn"),O="[object Object]",j=Object.prototype.hasOwnProperty,A=r("EUcb"),C=function e(t,r,o,i,a){return t===r||(null==t||null==r||!Object(A.a)(t)&&!Object(A.a)(r)?t!=t&&r!=r:function(e,t,r,o,i,a){var s=Object(g.a)(e),h=Object(g.a)(t),A=s?"[object Array]":Object(v.a)(e),C=h?"[object Array]":Object(v.a)(t),x=(A="[object Arguments]"==A?O:A)==O,E=(C="[object Arguments]"==C?O:C)==O,U=A==C;if(U&&Object(y.a)(e)){if(!Object(y.a)(t))return!1;s=!0,x=!1}if(U&&!x)return a||(a=new n.a),s||Object(S.a)(e)?c(e,t,r,o,i,a):function(e,t,r,n,o,i,a){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new l.a(e),new l.a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Object(u.a)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=d;case"[object Set]":if(s||(s=b.a),e.size!=t.size&&!(1&n))return!1;var h=a.get(e);if(h)return h==t;n|=2,a.set(e,t);var m=c(s(e),s(t),n,o,i,a);return a.delete(e),m;case"[object Symbol]":if(f)return f.call(e)==f.call(t)}return!1}(e,t,A,r,o,i,a);if(!(1&r)){var w=x&&j.call(e,"__wrapped__"),k=E&&j.call(t,"__wrapped__");if(w||k){var _=w?e.value():e,R=k?t.value():t;return a||(a=new n.a),i(_,R,r,o,a)}}return!!U&&(a||(a=new n.a),function(e,t,r,n,o,i){var a=1&r,c=Object(m.a)(e),s=c.length;if(s!=Object(m.a)(t).length&&!a)return!1;for(var l=s;l--;){var u=c[l];if(!(a?u in t:p.call(t,u)))return!1}var d=i.get(e);if(d&&i.get(t))return d==t;var b=!0;i.set(e,t),i.set(t,e);for(var h=a;++l<s;){var f=e[u=c[l]],v=t[u];if(n)var g=a?n(v,f,u,t,e,i):n(f,v,u,e,t,i);if(!(void 0===g?f===v||o(f,v,r,n,i):g)){b=!1;break}h||(h="constructor"==u)}if(b&&!h){var y=e.constructor,S=t.constructor;y==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof S&&S instanceof S||(b=!1)}return i.delete(e),i.delete(t),b}(e,t,r,o,i,a))}(t,r,o,i,e,a))},x=r("IzLi"),E=function(e){return e==e&&!Object(x.a)(e)},U=r("mkut"),w=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}},k=r("UTJH"),_=r("K160"),R=r("vY+C"),z=r("Tchk"),B=r("+Xah"),I=r("FSIP");t.a=function(e){return"function"==typeof e?e:null==e?B.a:"object"==typeof e?Object(g.a)(e)?(o=e[0],i=e[1],Object(R.a)(o)&&E(i)?w(Object(z.a)(o),i):function(e){var t=function(e,t,r){var n=null==e?void 0:Object(k.a)(e,t);return void 0===n?void 0:n}(e,o);return void 0===t&&t===i?Object(_.a)(e,o):C(i,t,3)}):1==(r=function(e){for(var t=Object(U.a)(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,E(o)]}return t}(t=e)).length&&r[0][2]?w(r[0][0],r[0][1]):function(e){return e===t||function(e,t,r,o){var i=r.length,a=i;if(null==e)return!a;for(e=Object(e);i--;){var c=r[i];if(c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<a;){var s=(c=r[i])[0],l=e[s],u=c[1];if(c[2]){if(void 0===l&&!(s in e))return!1}else{var d,b=new n.a;if(!(void 0===d?C(u,l,3,void 0,b):d))return!1}}return!0}(e,0,r)}:function(e){return Object(R.a)(e)?Object(I.a)(Object(z.a)(e)):function(e){return function(t){return Object(k.a)(t,e)}}(e)}(e);var t,r,o,i}},ix8N:function(e,t,r){"use strict";r.d(t,"d",function(){return n.a}),r.d(t,"b",function(){return o.a}),r.d(t,"c",function(){return o.b}),r.d(t,"a",function(){return c});var n=r("GeT4"),o=r("8i4Y"),i=r("Nmku"),a=r("fXoL");let c=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},providers:[n.a],imports:[[i.a]]}),e})()},jN84:function(e,t,r){"use strict";var n=r("WJ6P"),o=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols;t.a=i?function(e){return null==e?[]:(e=Object(e),function(t,r){for(var n=-1,i=null==t?0:t.length,a=0,c=[];++n<i;){var s=t[n];o.call(e,s)&&(c[a++]=s)}return c}(i(e)))}:n.a},m8R6:function(e,t,r){"use strict";var n=r("twO/"),o=r("oSzE"),i=r("23KU"),a=r("uE2L"),c=function(e,t,r,n){var o=!r;r||(r={});for(var c=-1,s=t.length;++c<s;){var l=t[c],u=n?n(r[l],e[l],l,r,e):void 0;void 0===u&&(u=e[l]),o?Object(a.a)(r,l,u):Object(i.a)(r,l,u)}return r},s=r("mkut"),l=r("4/q3"),u=r("3/ER"),d=r("jN84"),b=r("n561"),h=r("TFwu"),f=r("TnHx"),m=r("YM6B"),p=Object.prototype.hasOwnProperty,v=r("Ce4a"),g=function(e){var t=new e.constructor(e.byteLength);return new v.a(t).set(new v.a(e)),t},y=/\w*$/,S=r("ylTp"),O=S.a?S.a.prototype:void 0,j=O?O.valueOf:void 0,A=r("IzLi"),C=Object.create,x=function(){function e(){}return function(t){if(!Object(A.a)(t))return{};if(C)return C(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),E=r("UudT"),U=r("pyRK"),w=r("/1FC"),k=r("WOAq"),_=r("EUcb"),R=r("ovuK"),z=r("xutz"),B=z.a&&z.a.isMap,I=B?Object(R.a)(B):function(e){return Object(_.a)(e)&&"[object Map]"==Object(m.a)(e)},$=z.a&&z.a.isSet,L=$?Object(R.a)($):function(e){return Object(_.a)(e)&&"[object Set]"==Object(m.a)(e)},P={};P["[object Arguments]"]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object DataView]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=P["[object Number]"]=P["[object Object]"]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Error]"]=P["[object Function]"]=P["[object WeakMap]"]=!1;var V=function e(t,r,n,a,v,S){var O,C=1&r,_=2&r,R=4&r;if(n&&(O=v?n(t,a,v,S):n(t)),void 0!==O)return O;if(!Object(A.a)(t))return t;var z=Object(w.a)(t);if(z){if(O=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&p.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(t),!C)return function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(t,O)}else{var B=Object(m.a)(t),$="[object Function]"==B||"[object GeneratorFunction]"==B;if(Object(k.a)(t))return Object(u.a)(t,C);if("[object Object]"==B||"[object Arguments]"==B||$&&!v){if(O=_||$?{}:function(e){return"function"!=typeof e.constructor||Object(U.a)(e)?{}:x(Object(E.a)(e))}(t),!C)return _?function(e,t){return c(e,Object(b.a)(e),t)}(t,function(e,t){return e&&c(t,Object(l.a)(t),e)}(O,t)):function(e,t){return c(e,Object(d.a)(e),t)}(t,function(e,t){return e&&c(t,Object(s.a)(t),e)}(O,t))}else{if(!P[B])return v?t:{};O=function(e,t,r){var n,o,i=e.constructor;switch(t){case"[object ArrayBuffer]":return g(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function(e,t){var r=t?g(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var r=t?g(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return(o=new(n=e).constructor(n.source,y.exec(n))).lastIndex=n.lastIndex,o;case"[object Set]":return new i;case"[object Symbol]":return j?Object(j.call(e)):{}}}(t,B,C)}}S||(S=new o.a);var V=S.get(t);if(V)return V;S.set(t,O),L(t)?t.forEach(function(o){O.add(e(o,r,n,o,t,S))}):I(t)&&t.forEach(function(o,i){O.set(i,e(o,r,n,i,t,S))});var T=R?_?f.a:h.a:_?keysIn:s.a,M=z?void 0:T(t);return function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r););}(M||t,function(o,a){M&&(o=t[a=o]),Object(i.a)(O,a,e(o,r,n,a,t,S))}),O},T=r("IlA0"),M=r("UTJH"),D=r("5iG2"),H=r("Tchk"),N=function(e,t){return null==(e=function(e,t){return t.length<2?e:Object(M.a)(e,Object(D.a)(t,0,-1))}(e,t=Object(T.a)(t,e)))||delete e[Object(H.a)((r=t,n=null==r?0:r.length,n?r[n-1]:void 0))];var r,n},G=r("8M4i"),W=Function.prototype.toString,F=Object.prototype.hasOwnProperty,J=W.call(Object),q=function(e){return function(e){if(!Object(_.a)(e)||"[object Object]"!=Object(G.a)(e))return!1;var t=Object(E.a)(e);if(null===t)return!0;var r=F.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&W.call(r)==J}(e)?void 0:e},K=r("Tjpy"),Q=Object(K.a)(function(e,t){var r={};if(null==e)return r;var o=!1;t=Object(n.a)(t,function(t){return t=Object(T.a)(t,e),o||(o=t.length>1),t}),c(e,Object(f.a)(e),r),o&&(r=V(r,7,q));for(var i=t.length;i--;)N(r,t[i]);return r});t.a=Q},mkut:function(e,t,r){"use strict";var n=r("7gMY"),o=r("pyRK"),i=r("U6JX"),a=Object(i.a)(Object.keys,Object),c=Object.prototype.hasOwnProperty,s=r("5WsY");t.a=function(e){return Object(s.a)(e)?Object(n.a)(e):function(e){if(!Object(o.a)(e))return a(e);var t=[];for(var r in Object(e))c.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}},msdH:function(e,t,r){"use strict";var n=r("DlmY");function o(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n.a;++t<r;)this.add(e[t])}o.prototype.add=o.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},o.prototype.has=function(e){return this.__data__.has(e)},t.a=o},n561:function(e,t,r){"use strict";var n=r("tPH9"),o=r("UudT"),i=r("jN84"),a=r("WJ6P");t.a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Object(n.a)(t,Object(i.a)(e)),e=Object(o.a)(e);return t}:a.a},"nnN+":function(e,t,r){"use strict";r.d(t,"l",function(){return o}),r.d(t,"b",function(){return i}),r.d(t,"f",function(){return a}),r.d(t,"g",function(){return c}),r.d(t,"i",function(){return s}),r.d(t,"h",function(){return l}),r.d(t,"c",function(){return u}),r.d(t,"n",function(){return d}),r.d(t,"m",function(){return b}),r.d(t,"j",function(){return h}),r.d(t,"e",function(){return f}),r.d(t,"d",function(){return m}),r.d(t,"k",function(){return p}),r.d(t,"a",function(){return v});var n=r("3Pt+");const o={VALIDATORS:[n.w.required,n.w.minLength(1),n.w.maxLength(50),n.w.pattern(/^[a-z0-9][a-z0-9._]*$/)],MESSAGES:{required:"Lo nom d\u2019utilizaire es requesit.",minlength:"Lo nom d\u2019utilizaire deu almens cont\xE9ner 1 caract\xE8r.",maxlength:"Lo nom d\u2019utilizaire p\xF2t pas cont\xE9ner mai de 50 caract\xE8rs.",pattern:"Lo nom d\u2019utilizaire deu \xE8sser alfanumeric e en minuscula\u202F: ponches e jonhents bas son autorizats."}},i={VALIDATORS:[n.w.required,n.w.minLength(1),n.w.maxLength(50),n.w.pattern(/^[a-z0-9][a-z0-9._]*$/)],MESSAGES:{required:"Channel name is required.",minlength:"Channel name must be at least 1 character long.",maxlength:"Channel name cannot be more than 50 characters long.",pattern:"Channel name should be lowercase, and can contain only alphanumeric characters, dots and underscores."}},a={VALIDATORS:[n.w.required,n.w.email],MESSAGES:{required:"L\u2019adre\xE7a electronica es requesida.",email:"L\u2019adre\xE7a electronica deu \xE8sser valida."}},c={VALIDATORS:[n.w.required],MESSAGES:{required:"Lo senhal es requesit."}},s={VALIDATORS:[n.w.required,n.w.minLength(6),n.w.maxLength(255)],MESSAGES:{required:"Lo senhal es requesit.",minlength:"Lo senhal deu cont\xE9ner almens 6 caract\xE8rs.",maxlength:"Lo senhal p\xF2t pas cont\xE9ner mai de 255 caract\xE8rs."}},l={VALIDATORS:[n.w.minLength(6),n.w.maxLength(255)],MESSAGES:{minlength:"Lo senhal deu cont\xE9ner almens 6 caract\xE8rs.",maxlength:"Lo senhal p\xF2t pas cont\xE9ner mai de 255 caract\xE8rs."}},u={VALIDATORS:[],MESSAGES:{matchPassword:"Lo nov\xE8l senhal e sa confirmacion correspondon pas."}},d={VALIDATORS:[n.w.required,n.w.min(-1)],MESSAGES:{required:"Lo qu\xF2ta vid\xE8o es requesit.",min:"Lo qu\xF2ta deu \xE8sser superior a -1."}},b={VALIDATORS:[n.w.required,n.w.min(-1)],MESSAGES:{required:"Lo qu\xF2ta jornali\xE8r de mandad\xEDs es requesit.",min:"Lo qu\xF2ta jornali\xE8r deu \xE8sser superior a -1."}},h={VALIDATORS:[n.w.required],MESSAGES:{required:"Lo r\xF2tle del l\u2019utilizaire es requesit."}},f=function(e){const t={VALIDATORS:[n.w.minLength(1),n.w.maxLength(120)],MESSAGES:{required:"L\u2019escais-nom es requesit.",minlength:"Lo nom public deu almens cont\xE9ner 1 caract\xE8r.",maxlength:"Lo nom public p\xF2t pas cont\xE9ner mai de 50 caract\xE8rs."}};return t.VALIDATORS.push(n.w.required),t}(),m={VALIDATORS:[n.w.minLength(3),n.w.maxLength(1e3)],MESSAGES:{minlength:"La descripcion deu almens cont\xE9ner 3 caract\xE8rs.",maxlength:"La descripcion p\xF2t pas cont\xE9ner mai de 1000 caract\xE8rs."}},p={VALIDATORS:[n.w.requiredTrue],MESSAGES:{required:"Vos cal acceptar las condicions de l\u2019inst\xE0ncia per dire de vos i inscriure."}},v={VALIDATORS:[n.w.minLength(3),n.w.maxLength(250)],MESSAGES:{minlength:"La rason del bandiment deu cont\xE9ner almens 3 caract\xE8rs.",maxlength:"La rason del bandiment p\xF2t pas cont\xE9ner mai de 250 caract\xE8rs."}}},oSzE:function(e,t,r){"use strict";var n=r("nLtN"),o=r("3cmB"),i=r("DlmY");function a(e){var t=this.__data__=new n.a(e);this.size=t.size}a.prototype.clear=function(){this.__data__=new n.a,this.size=0},a.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},a.prototype.get=function(e){return this.__data__.get(e)},a.prototype.has=function(e){return this.__data__.has(e)},a.prototype.set=function(e,t){var r=this.__data__;if(r instanceof n.a){var a=r.__data__;if(!o.a||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new i.a(a)}return r.set(e,t),this.size=r.size,this},t.a=a},oYcn:function(e,t,r){"use strict";var n=r("8M4i"),o=r("Js68"),i=r("EUcb"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var c=r("ovuK"),s=r("xutz"),l=s.a&&s.a.isTypedArray,u=l?Object(c.a)(l):function(e){return Object(i.a)(e)&&Object(o.a)(e.length)&&!!a[Object(n.a)(e)]};t.a=u},pVw1:function(e,t,r){"use strict";var n=r("Y7yP"),o=r("Ju5/"),i=Object(n.a)(o.a,"Set");t.a=i},pyRK:function(e,t,r){"use strict";var n=Object.prototype;t.a=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},re7S:function(e,t,r){"use strict";r.d(t,"a",function(){return E});var n=r("TSHB"),o=r("u3oV"),i=r("ey9i"),a=r("4joM"),c=r("sWvm"),s=(r("ix8N"),r("3ZlK")),l=r("9dYW"),u=r("fXoL"),d=r("1kSV"),b=r("UkmY"),h=r("3Pt+"),f=r("ofXK"),m=r("/xt7"),p=r("BLxp");const v=["modal"];function g(e,t){if(1&e&&u.Qb(0,"div",26),2&e){const e=u.nc(2).$implicit;u.uc("innerHTML",e.help,u.Kc)}}function y(e,t){1&e&&u.Sc(0,g,1,1,"ng-template",25)}function S(e,t){if(1&e&&(u.Tb(0,27),u.Qb(1,"div",26),u.Sb()),2&e){const e=u.nc().$implicit;u.Cb(1),u.uc("innerHTML",e.description,u.Kc)}}function O(e,t){if(1&e&&(u.Vb(0,"div",17),u.Vb(1,"my-peertube-checkbox",23),u.Sc(2,y,1,0,void 0,16),u.Sc(3,S,2,1,"ng-container",24),u.Ub(),u.Ub()),2&e){const e=t.$implicit;u.Cb(1),u.uc("inputName",e.id)("formControlName",e.id)("labelText",e.label),u.Cb(1),u.uc("ngIf",e.help),u.Cb(1),u.uc("ngIf",e.description)}}function j(e,t){if(1&e&&(u.fc(0,15,1),u.Rb(1),u.cc()),2&e){const e=u.nc(2);u.Cb(1),u.dc(e.originHost),u.ac(0)}}function A(e,t){if(1&e&&(u.Vb(0,"div",28),u.Uc(1),u.Ub()),2&e){const e=u.nc(2);u.Cb(1),u.Wc(" ",e.formErrors.reason," ")}}const C=function(e){return{"input-error":e}};function x(e,t){if(1&e){const e=u.Wb();u.Vb(0,"div",1),u.Vb(1,"h4",2),u.Uc(2),u.Ub(),u.Vb(3,"my-global-icon",3),u.jc("click",function(){return u.Jc(e),u.nc().hide()}),u.Ub(),u.Ub(),u.Vb(4,"div",4),u.Vb(5,"form",5),u.jc("ngSubmit",function(){return u.Jc(e),u.nc().report()}),u.Vb(6,"div",6),u.Vb(7,"div",7),u.Vb(8,"label",8),u.Zb(9,9),u.Ub(),u.Vb(10,"div",10),u.Tb(11,11),u.Sc(12,O,4,5,"div",12),u.Sb(),u.Ub(),u.Ub(),u.Vb(13,"div",13),u.Vb(14,"div",14),u.fc(15,15),u.Sc(16,j,2,1,"ng-container",16),u.cc(),u.Ub(),u.Vb(17,"div",17),u.Qb(18,"textarea",18),u.Sc(19,A,2,1,"div",19),u.Ub(),u.Ub(),u.Ub(),u.Vb(20,"div",20),u.Vb(21,"input",21),u.jc("click",function(){return u.Jc(e),u.nc().hide()})("key.enter",function(){return u.Jc(e),u.nc().hide()}),u.Ub(),u.Qb(22,"input",22),u.Ub(),u.Ub(),u.Ub()}if(2&e){const e=u.nc();u.Cb(2),u.Vc(e.modalTitle),u.Cb(3),u.uc("formGroup",e.form),u.Cb(7),u.uc("ngForOf",e.predefinedReasons),u.Cb(4),u.uc("ngIf",e.isRemote()),u.dc(e.currentHost),u.ac(15),u.Cb(2),u.uc("ngClass",u.yc(8,C,e.formErrors.reason)),u.Cb(1),u.uc("ngIf",e.formErrors.reason),u.Cb(3),u.uc("disabled",!e.form.valid)}}let E=(()=>{class e extends c.a{constructor(e,t,r,n){super(),this.formValidatorService=e,this.modalService=t,this.abuseService=r,this.notifier=n,this.comment=null,this.error=null,this.predefinedReasons=[]}get currentHost(){return window.location.host}get originHost(){return this.isRemote()?this.comment.account.host:""}ngOnInit(){this.modalTitle="Report comment",this.buildForm({reason:a.c,predefinedReasons:Object(n.a)(s.a,e=>null)}),this.predefinedReasons=this.abuseService.getPrefefinedReasons("comment")}show(){this.openedModal=this.modalService.open(this.modal,{centered:!0,keyboard:!1,size:"lg"})}hide(){this.openedModal.close(),this.openedModal=null}report(){const e=this.form.get("reason").value,t=Object.keys(Object(o.a)(this.form.get("predefinedReasons").value));this.abuseService.reportVideo({reason:e,predefinedReasons:t,comment:{id:this.comment.id}}).subscribe(()=>{this.notifier.success("Comment reported."),this.hide()},e=>this.notifier.error(e.message))}isRemote(){return!this.comment.isLocal}}return e.\u0275fac=function(t){return new(t||e)(u.Pb(c.b),u.Pb(d.m),u.Pb(l.a),u.Pb(i.m))},e.\u0275cmp=u.Jb({type:e,selectors:[["my-comment-report"]],viewQuery:function(e,t){if(1&e&&u.Pc(v,!0),2&e){let e;u.Gc(e=u.kc())&&(t.modal=e.first)}},inputs:{comment:"comment"},features:[u.zb],decls:2,vars:0,consts:function(){let e,t,r,n,o;return e="What is the issue?",t="Please describe the issue...",r="Cancel",n="Mandar",o="\n          Your report will be sent to moderators of \n          " + "\ufffd0\ufffd" + "\n          " + "\ufffd*16:1\ufffd\ufffd#1:1\ufffd" + " and will be forwarded to the comment origin (\n          " + "\ufffd0:1\ufffd" + ") too\n          " + "\ufffd/#1:1\ufffd\ufffd/*16:1\ufffd" + ".\n        \n        ",[["modal",""],[1,"modal-header"],[1,"modal-title"],["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-5","form-group"],["for","reportPredefinedReasons"],e,[1,"ml-2","mt-2","d-flex","flex-column"],["formGroupName","predefinedReasons"],["class","form-group",4,"ngFor","ngForOf"],[1,"col-7"],[1,"information"],o,[4,"ngIf"],[1,"form-group"],["placeholder",t,"formControlName","reason","ngbAutofocus","",1,"form-control",3,"ngClass"],["class","form-error",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button","value",r,1,"action-button","action-button-cancel",3,"click","key.enter"],["type","submit","value",n,1,"action-button-submit",3,"disabled"],[3,"inputName","formControlName","labelText"],["ngProjectAs","description",5,["description"],4,"ngIf"],["ptTemplate","help"],[3,"innerHTML"],["ngProjectAs","description",5,["description"]],[1,"form-error"]]},template:function(e,t){1&e&&u.Sc(0,x,23,10,"ng-template",null,0,u.Tc)},directives:[b.a,h.y,h.n,h.h,h.i,f.m,f.n,h.b,h.m,h.f,f.l,m.a,p.a],styles:[".information[_ngcontent-%COMP%]{margin-bottom:20px}textarea[_ngcontent-%COMP%]{display:inline-block;height:30px;width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;color:var(--textareaForegroundColor);background-color:var(--textareaBackgroundColor);height:100px;padding:5px 15px;font-size:15px}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}textarea[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width:100%){textarea[_ngcontent-%COMP%]{width:100%}}.start-at[_ngcontent-%COMP%], .stop-at[_ngcontent-%COMP%]{width:300px;display:flex;align-items:center}.start-at[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%], .stop-at[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%]{margin-left:10px}.screenratio[_ngcontent-%COMP%]{position:relative;height:0;width:100%;padding-top:56%}.screenratio[_ngcontent-%COMP%]     iframe, .screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}"]}),e})()},u3oV:function(e,t,r){"use strict";var n=r("twO/"),o=r("fywt"),i=r("MKnB"),a=r("TnHx");t.a=function(e,t){if(null==e)return{};var r=Object(n.a)(Object(a.a)(e),function(e){return[e]});return t=Object(o.a)(t),Object(i.a)(e,r,function(e,r){return t(e,r[0])})}},xHIW:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("xMQD");class o{constructor(e){this.byAccount=new n.a(e.byAccount),this.blockedAccount=new n.a(e.blockedAccount),this.createdAt=e.createdAt}}}}]);