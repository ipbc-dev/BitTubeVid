(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"3/ER":function(e,t,n){"use strict";(function(e){var o=n("Ju5/"),c="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=c&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===c?o.a.Buffer:void 0,r=a?a.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var n=e.length,o=r?r(n):new e.constructor(n);return e.copy(o),o}}).call(this,n("3UD+")(e))},"8aVP":function(e,t){},V0Sv:function(e,t,n){"use strict";n.r(t),n.d(t,"AdminModule",(function(){return Jh}));var o=n("JIr8"),c=n("AytR"),i=n("M0ag"),a=n("fXoL"),r=n("tk/3"),l=n("7FIj");let s=(()=>{class e{constructor(e,t,n){this.authHttp=e,this.restExtractor=t,this.i18n=n,this.videoQuotaOptions=[],this.videoQuotaDailyOptions=[],this.videoQuotaOptions=[{value:void 0,label:"Default quota",disabled:!0},{value:-1,label:this.i18n("Unlimited")},{value:void 0,label:"\u2500\u2500\u2500\u2500\u2500",disabled:!0},{value:0,label:this.i18n("None - no upload possible")},{value:104857600,label:this.i18n("100MB")},{value:524288e3,label:this.i18n("500MB")},{value:1073741824,label:this.i18n("1GB")},{value:5368709120,label:this.i18n("5GB")},{value:21474836480,label:this.i18n("20GB")},{value:53687091200,label:this.i18n("50GB")}],this.videoQuotaDailyOptions=[{value:void 0,label:"Default daily upload limit",disabled:!0},{value:-1,label:this.i18n("Unlimited")},{value:void 0,label:"\u2500\u2500\u2500\u2500\u2500",disabled:!0},{value:0,label:this.i18n("None - no upload possible")},{value:10485760,label:this.i18n("10MB")},{value:52428800,label:this.i18n("50MB")},{value:104857600,label:this.i18n("100MB")},{value:524288e3,label:this.i18n("500MB")},{value:2147483648,label:this.i18n("2GB")},{value:5368709120,label:this.i18n("5GB")}]}getCustomConfig(){return this.authHttp.get(e.BASE_APPLICATION_URL+"/custom").pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}updateCustomConfig(t){return this.authHttp.put(e.BASE_APPLICATION_URL+"/custom",t).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}}return e.BASE_APPLICATION_URL=c.a.apiUrl+"/api/v1/config",e.\u0275fac=function(t){return new(t||e)(a.oc(r.b),a.oc(i.e),a.oc(l.a))},e.\u0275prov=a.Tb({token:e,factory:e.\u0275fac}),e})();var d=n("pyEO"),g=n("ey9i"),u=n("KwVR"),b=n("3szM"),p=n("cp0P"),f=n("aEDk"),h=n("ofXK"),m=n("3Pt+"),v=n("1kSV"),C=n("DnSO"),O=n("ed90"),P=n("lVkt"),_=n("tyNb"),M=n("ybWZ"),y=n("D+nq"),w=n("R0Ic"),x=n("YyRF"),k=n("7zfz");let I=(()=>{let e=class{constructor(e){this.el=e}onkeydown(e){if(!0!==this.pFocusTrapDisabled){e.preventDefault();let t=x.a.getFocusableElements(this.el.nativeElement);if(t&&t.length>0)if(document.activeElement){let n=t.indexOf(document.activeElement);e.shiftKey?-1==n||0===n?t[t.length-1].focus():t[n-1].focus():-1==n||n===t.length-1?t[0].focus():t[n+1].focus()}else t[0].focus()}}};return e.\u0275fac=function(t){return new(t||e)(a.Xb(a.l))},e.\u0275dir=a.Sb({type:e,selectors:[["","pFocusTrap",""]],hostBindings:function(e,t){1&e&&a.sc("keydown.tab",(function(e){return t.onkeydown(e)}))("keydown.shift.tab",(function(e){return t.onkeydown(e)}))},inputs:{pFocusTrapDisabled:"pFocusTrapDisabled"}}),e})(),T=(()=>{let e=class{};return e.\u0275mod=a.Vb({type:e}),e.\u0275inj=a.Ub({factory:function(t){return new(t||e)},imports:[[h.c]]}),e})();const S=["titlebar"],A=["content"],D=["footer"];function R(e,t){if(1&e&&(a.dc(0,"span",15),a.cd(1),a.cc()),2&e){const e=a.wc(4);a.Kb("id",e.id+"-label"),a.Jb(1),a.dd(e.header)}}function E(e,t){if(1&e&&(a.dc(0,"span",15),a.Bc(1,1),a.cc()),2&e){const e=a.wc(4);a.Kb("id",e.id+"-label")}}const z=function(){return{"ui-dialog-titlebar-icon ui-dialog-titlebar-maximize ui-corner-all":!0}};function L(e,t){if(1&e){const e=a.ec();a.dc(0,"a",16),a.sc("click",(function(){return a.Rc(e),a.wc(4).maximize()}))("keydown.enter",(function(){return a.Rc(e),a.wc(4).maximize()})),a.Yb(1,"span",1),a.cc()}if(2&e){const e=a.wc(4);a.Dc("ngClass",a.Gc(2,z)),a.Jb(1),a.Dc("ngClass",e.maximized?e.minimizeIcon:e.maximizeIcon)}}const $=function(){return{"ui-dialog-titlebar-icon ui-dialog-titlebar-close ui-corner-all":!0}};function J(e,t){if(1&e){const e=a.ec();a.dc(0,"a",16),a.sc("click",(function(t){return a.Rc(e),a.wc(4).close(t)}))("keydown.enter",(function(t){return a.Rc(e),a.wc(4).close(t)})),a.Yb(1,"span"),a.cc()}if(2&e){const e=a.wc(4);a.Dc("ngClass",a.Gc(3,$)),a.Jb(1),a.Lb(e.closeIcon)}}function N(e,t){if(1&e){const e=a.ec();a.dc(0,"div",10,11),a.sc("mousedown",(function(t){return a.Rc(e),a.wc(3).initDrag(t)})),a.ad(2,R,2,2,"span",12),a.ad(3,E,2,1,"span",12),a.dc(4,"div",13),a.ad(5,L,2,3,"a",14),a.ad(6,J,2,4,"a",14),a.cc(),a.cc()}if(2&e){const e=a.wc(3);a.Jb(2),a.Dc("ngIf",e.header),a.Jb(1),a.Dc("ngIf",e.headerFacet&&e.headerFacet.first),a.Jb(2),a.Dc("ngIf",e.maximizable),a.Jb(1),a.Dc("ngIf",e.closable)}}function j(e,t){1&e&&(a.dc(0,"div",17,18),a.Bc(2,2),a.cc())}function F(e,t){if(1&e){const e=a.ec();a.dc(0,"div",19),a.sc("mousedown",(function(t){return a.Rc(e),a.wc(3).initResize(t)})),a.cc()}}const U=function(e,t,n,o){return{"ui-dialog ui-widget ui-widget-content ui-corner-all ui-shadow":!0,"ui-dialog-rtl":e,"ui-dialog-draggable":t,"ui-dialog-resizable":n,"ui-dialog-maximized":o}},B=function(e,t){return{transform:e,transition:t}},G=function(e){return{value:"visible",params:e}};function V(e,t){if(1&e){const e=a.ec();a.dc(0,"div",3,4),a.sc("@animation.start",(function(t){return a.Rc(e),a.wc(2).onAnimationStart(t)}))("@animation.done",(function(t){return a.Rc(e),a.wc(2).onAnimationEnd(t)})),a.ad(2,N,7,4,"div",5),a.dc(3,"div",6,7),a.Bc(5),a.cc(),a.ad(6,j,3,0,"div",8),a.ad(7,F,1,0,"div",9),a.cc()}if(2&e){const e=a.wc(2);a.Lb(e.styleClass),a.Dc("ngClass",a.Kc(11,U,e.rtl,e.draggable,e.resizable,e.maximized))("ngStyle",e.style)("pFocusTrapDisabled",!1===e.focusTrap)("@animation",a.Hc(19,G,a.Ic(16,B,e.transformOptions,e.transitionOptions))),a.Kb("aria-labelledby",e.id+"-label"),a.Jb(2),a.Dc("ngIf",e.showHeader),a.Jb(1),a.Dc("ngStyle",e.contentStyle),a.Jb(3),a.Dc("ngIf",e.footerFacet&&e.footerFacet.first),a.Jb(1),a.Dc("ngIf",e.resizable)}}function Y(e,t){if(1&e&&(a.dc(0,"div",1),a.ad(1,V,8,21,"div",2),a.cc()),2&e){const e=a.wc();a.Lb(e.maskStyleClass),a.Dc("ngClass",e.getMaskClass()),a.Jb(1),a.Dc("ngIf",e.visible)}}const H=["*",[["p-header"]],[["p-footer"]]],X=["*","p-header","p-footer"];let Q=0;const K=Object(w.g)([Object(w.l)({transform:"{{transform}}",opacity:0}),Object(w.e)("{{transition}}",Object(w.l)({transform:"none",opacity:1}))]),q=Object(w.g)([Object(w.e)("{{transition}}",Object(w.l)({transform:"{{transform}}",opacity:0}))]);let W=(()=>{let e=class{constructor(e,t,n,o){this.el=e,this.renderer=t,this.zone=n,this.cd=o,this.draggable=!0,this.resizable=!0,this.closeOnEscape=!0,this.closable=!0,this.showHeader=!0,this.blockScroll=!1,this.autoZIndex=!0,this.baseZIndex=0,this.minX=0,this.minY=0,this.focusOnShow=!0,this.keepInViewport=!0,this.focusTrap=!0,this.transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.closeIcon="pi pi-times",this.minimizeIcon="pi pi-window-minimize",this.maximizeIcon="pi pi-window-maximize",this.onShow=new a.n,this.onHide=new a.n,this.visibleChange=new a.n,this.onResizeInit=new a.n,this.onResizeEnd=new a.n,this.id="ui-dialog-"+Q++,this._style={},this._position="center",this.transformOptions="scale(0.7)"}get positionLeft(){return 0}set positionLeft(e){console.log("positionLeft property is deprecated.")}get positionTop(){return 0}set positionTop(e){console.log("positionTop property is deprecated.")}get responsive(){return!1}set responsive(e){console.log("Responsive property is deprecated.")}get breakpoint(){return 649}set breakpoint(e){console.log("Breakpoint property is not utilized and deprecated, use CSS media queries instead.")}get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0)}get style(){return this._style}set style(e){e&&(this._style=Object.assign({},e),this.originalStyle=e)}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)"}}focus(){let e=x.a.findSingle(this.container,"button");e&&this.zone.runOutsideAngular(()=>{setTimeout(()=>e.focus(),5)})}close(e){this.visibleChange.emit(!1),e.preventDefault()}enableModality(){this.closable&&this.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"click",e=>{this.container.isSameNode(e.target)||this.container.contains(e.target)||this.close(e)})),this.modal&&x.a.addClass(document.body,"ui-overflow-hidden")}disableModality(){this.wrapper&&(this.dismissableMask&&this.unbindMaskClickListener(),this.modal&&x.a.removeClass(document.body,"ui-overflow-hidden"),this.cd.destroyed||this.cd.detectChanges())}maximize(){this.maximized=!this.maximized,this.modal||this.blockScroll||(this.maximized?x.a.addClass(document.body,"ui-overflow-hidden"):x.a.removeClass(document.body,"ui-overflow-hidden"))}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}moveOnTop(){this.autoZIndex&&(this.container.style.zIndex=String(this.baseZIndex+ ++x.a.zindex),this.wrapper.style.zIndex=String(this.baseZIndex+(x.a.zindex-1)))}getMaskClass(){let e={"ui-dialog-mask":!0,"ui-widget-overlay":this.modal,"ui-dialog-visible":this.maskVisible,"ui-dialog-mask-scrollblocker":this.modal||this.blockScroll};return e[this.getPositionClass().toString()]=!0,e}getPositionClass(){const e=["left","right","top","topleft","topright","bottom","bottomleft","bottomright"].find(e=>e===this.position);return e?"ui-dialog-"+e:""}initDrag(e){x.a.hasClass(e.target,"ui-dialog-titlebar-icon")||x.a.hasClass(e.target.parentElement,"ui-dialog-titlebar-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,this.container.style.margin="0",x.a.addClass(document.body,"ui-unselectable-text"))}onKeydown(e){if(this.focusTrap&&9===e.which){e.preventDefault();let t=x.a.getFocusableElements(this.container);if(t&&t.length>0)if(document.activeElement){let n=t.indexOf(document.activeElement);e.shiftKey?-1==n||0===n?t[t.length-1].focus():t[n-1].focus():-1==n||n===t.length-1?t[0].focus():t[n+1].focus()}else t[0].focus()}}onDrag(e){if(this.dragging){let t=x.a.getOuterWidth(this.container),n=x.a.getOuterHeight(this.container),o=e.pageX-this.lastPageX,c=e.pageY-this.lastPageY,i=x.a.getOffset(this.container),a=i.left+o,r=i.top+c,l=x.a.getViewport();this.container.style.position="fixed",this.keepInViewport?(a>=this.minX&&a+t<l.width&&(this._style.left=a+"px",this.lastPageX=e.pageX,this.container.style.left=a+"px"),r>=this.minY&&r+n<l.height&&(this._style.top=r+"px",this.lastPageY=e.pageY,this.container.style.top=r+"px")):(this.lastPageX=e.pageX,this.container.style.left=a+"px",this.lastPageY=e.pageY,this.container.style.top=r+"px")}}endDrag(e){this.draggable&&(this.dragging=!1,x.a.removeClass(document.body,"ui-unselectable-text"),this.cd.detectChanges())}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}initResize(e){this.resizable&&(this.resizing=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,x.a.addClass(document.body,"ui-unselectable-text"),this.onResizeInit.emit(e))}onResize(e){if(this.resizing){let t=e.pageX-this.lastPageX,n=e.pageY-this.lastPageY,o=x.a.getOuterWidth(this.container),c=x.a.getOuterHeight(this.container),i=x.a.getOuterHeight(this.contentViewChild.nativeElement),a=o+t,r=c+n,l=this.container.style.minWidth,s=this.container.style.minHeight,d=x.a.getOffset(this.container),g=x.a.getViewport();(!l||a>parseInt(l))&&d.left+a<g.width&&(this._style.width=a+"px",this.container.style.width=this._style.width),(!s||r>parseInt(s))&&d.top+r<g.height&&(this.contentViewChild.nativeElement.style.height=i+n+"px"),this.lastPageX=e.pageX,this.lastPageY=e.pageY}}resizeEnd(e){this.resizing&&(this.resizing=!1,x.a.removeClass(document.body,"ui-unselectable-text"),this.onResizeEnd.emit(e))}bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.resizable&&this.bindDocumentResizeListeners(),this.closeOnEscape&&this.closable&&this.bindDocumentEscapeListener()}unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentEscapeListener()}bindDocumentDragListener(){this.zone.runOutsideAngular(()=>{this.documentDragListener=this.onDrag.bind(this),window.document.addEventListener("mousemove",this.documentDragListener)})}unbindDocumentDragListener(){this.documentDragListener&&(window.document.removeEventListener("mousemove",this.documentDragListener),this.documentDragListener=null)}bindDocumentDragEndListener(){this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.endDrag.bind(this),window.document.addEventListener("mouseup",this.documentDragEndListener)})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(window.document.removeEventListener("mouseup",this.documentDragEndListener),this.documentDragEndListener=null)}bindDocumentResizeListeners(){this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.onResize.bind(this),this.documentResizeEndListener=this.resizeEnd.bind(this),window.document.addEventListener("mousemove",this.documentResizeListener),window.document.addEventListener("mouseup",this.documentResizeEndListener)})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(window.document.removeEventListener("mousemove",this.documentResizeListener),window.document.removeEventListener("mouseup",this.documentResizeEndListener),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindDocumentEscapeListener(){this.documentEscapeListener=this.renderer.listen("document","keydown",e=>{27==e.which&&parseInt(this.container.style.zIndex)===x.a.zindex+this.baseZIndex&&this.close(e)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.wrapper):x.a.appendChild(this.wrapper,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.el.nativeElement.appendChild(this.wrapper)}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container.parentElement,this.onShow.emit({}),this.appendContainer(),this.moveOnTop(),this.bindGlobalListeners(),this.modal&&this.enableModality(),!this.modal&&this.blockScroll&&x.a.addClass(document.body,"ui-overflow-hidden"),this.focusOnShow&&this.focus()}}onAnimationEnd(e){switch(e.toState){case"void":this.onContainerDestroy(),this.onHide.emit({})}}onContainerDestroy(){this.unbindGlobalListeners(),this.dragging=!1,this.maskVisible=!1,this.maximized&&(x.a.removeClass(document.body,"ui-overflow-hidden"),this.maximized=!1),this.modal&&this.disableModality(),this.blockScroll&&x.a.removeClass(document.body,"ui-overflow-hidden"),this.container=null,this.wrapper=null,this._style=this.originalStyle?Object.assign({},this.originalStyle):{}}ngOnDestroy(){this.container&&(this.restoreAppend(),this.onContainerDestroy())}};return e.\u0275fac=function(t){return new(t||e)(a.Xb(a.l),a.Xb(a.I),a.Xb(a.D),a.Xb(a.h))},e.\u0275cmp=a.Rb({type:e,selectors:[["p-dialog"]],contentQueries:function(e,t,n){var o;1&e&&(a.Pb(n,k.b,!1),a.Pb(n,k.a,!1)),2&e&&(a.Oc(o=a.tc())&&(t.headerFacet=o),a.Oc(o=a.tc())&&(t.footerFacet=o))},viewQuery:function(e,t){var n;1&e&&(a.gd(S,!0),a.gd(A,!0),a.gd(D,!0)),2&e&&(a.Oc(n=a.tc())&&(t.headerViewChild=n.first),a.Oc(n=a.tc())&&(t.contentViewChild=n.first),a.Oc(n=a.tc())&&(t.footerViewChild=n.first))},inputs:{draggable:"draggable",resizable:"resizable",closeOnEscape:"closeOnEscape",closable:"closable",showHeader:"showHeader",blockScroll:"blockScroll",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",minX:"minX",minY:"minY",focusOnShow:"focusOnShow",keepInViewport:"keepInViewport",focusTrap:"focusTrap",transitionOptions:"transitionOptions",closeIcon:"closeIcon",minimizeIcon:"minimizeIcon",maximizeIcon:"maximizeIcon",positionLeft:"positionLeft",positionTop:"positionTop",responsive:"responsive",breakpoint:"breakpoint",visible:"visible",style:"style",position:"position",header:"header",contentStyle:"contentStyle",modal:"modal",dismissableMask:"dismissableMask",rtl:"rtl",appendTo:"appendTo",styleClass:"styleClass",maskStyleClass:"maskStyleClass",maximizable:"maximizable"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange",onResizeInit:"onResizeInit",onResizeEnd:"onResizeEnd"},ngContentSelectors:X,decls:1,vars:1,consts:[[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","class","pFocusTrapDisabled",4,"ngIf"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","pFocusTrapDisabled"],["container",""],["class","ui-dialog-titlebar ui-widget-header ui-helper-clearfix ui-corner-top",3,"mousedown",4,"ngIf"],[1,"ui-dialog-content","ui-widget-content",3,"ngStyle"],["content",""],["class","ui-dialog-footer ui-widget-content",4,"ngIf"],["class","ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se","style","z-index: 90;",3,"mousedown",4,"ngIf"],[1,"ui-dialog-titlebar","ui-widget-header","ui-helper-clearfix","ui-corner-top",3,"mousedown"],["titlebar",""],["class","ui-dialog-title",4,"ngIf"],[1,"ui-dialog-titlebar-icons"],["tabindex","0","role","button",3,"ngClass","click","keydown.enter",4,"ngIf"],[1,"ui-dialog-title"],["tabindex","0","role","button",3,"ngClass","click","keydown.enter"],[1,"ui-dialog-footer","ui-widget-content"],["footer",""],[1,"ui-resizable-handle","ui-resizable-se","ui-icon","ui-icon-gripsmall-diagonal-se",2,"z-index","90",3,"mousedown"]],template:function(e,t){1&e&&(a.Cc(H),a.ad(0,Y,2,4,"div",0)),2&e&&a.Dc("ngIf",t.maskVisible)},directives:[h.u,h.r,I,h.y],encapsulation:2,data:{animation:[Object(w.n)("animation",[Object(w.m)("void => visible",[Object(w.o)(K)]),Object(w.m)("visible => void",[Object(w.o)(q)])])]}}),e})(),Z=(()=>{let e=class{};return e.\u0275mod=a.Vb({type:e}),e.\u0275inj=a.Ub({factory:function(t){return new(t||e)},imports:[[h.c,T],k.e]}),e})();var ee=n("v9Or"),te=n("rEr+"),ne=n("arj/"),oe=n("pPws"),ce=function(e,t,n,o){return new(n||(n=Promise))((function(c,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function r(e){try{l(o.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}))};const ie=["nav"];var ae,re,le,se,de;ae="Instance information",re="\u57FA\u672C\u914D\u7F6E",le="\u670D\u52A1",se="\u9AD8\u7EA7\u8BBE\u7F6E",de="Premium Storage";const ge=["value","\u66F4\u65B0\u8BBE\u7F6E"];var ue,be,pe,fe,he;ue="INSTANCE",be="\u540D\u79F0",pe="\u7B80\u4ECB",fe="\u8BF4\u660E",he="Main instance categories";const me=["emptyFilterMessage","\u6CA1\u6709\u7ED3\u679C"];var ve;ve="Main languages you/your moderators speak";const Ce=["emptyFilterMessage","\u6CA1\u6709\u7ED3\u679C"];var Oe,Pe,_e,Me,ye,we,xe,ke,Ie,Te,Se,Ae,De,Re,Ee,ze,Le,$e,Je,Ne,je,Fe,Ue,Be,Ge,Ve;function Ye(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.name)}}function He(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.shortDescription)}}function Xe(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.description)}}function Qe(e,t){1&e&&(a.bc(0),a.hc(1,Be),a.ac())}function Ke(e,t){1&e&&(a.bc(0),a.nc(1,Ge),a.Yb(2,"br"),a.Yb(3,"br"),a.kc(),a.ac())}function qe(e,t){1&e&&(a.bc(0),a.nc(1,Ve),a.Yb(2,"strong"),a.Yb(3,"strong"),a.kc(),a.ac())}function We(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.defaultNSFWPolicy)}}function Ze(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.terms)}}function et(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.codeOfConduct)}}function tt(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.moderationInformation)}}function nt(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.administrator)}}function ot(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.creationReason)}}function ct(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.maintenanceLifetime)}}function it(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.businessModel)}}function at(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.hardwareInformation)}}Oe="MODERATION & NSFW",Pe="\n                Manage " + "\ufffd#40\ufffd" + "users" + "\ufffd/#40\ufffd" + " to build a moderation team.\n              ",_e="\u9488\u5BF9\u5305\u542B\u654F\u611F\u5185\u5BB9\u89C6\u9891\u7684\u7B56\u7565",Me="Policy for sensitive videos",ye="\u4E0D\u8981\u5217\u51FA",we="\u5BF9\u7F29\u7565\u56FE\u8FDB\u884C\u6A21\u7CCA\u5904\u7406",xe="\u6B63\u5E38\u663E\u793A",ke="\u6761\u6B3E",Ie="Code of conduct",Te="Moderation information",Se="Who moderates the instance? What is the policy regarding NSFW videos? Political videos? etc",Ae="YOU AND YOUR INSTANCE",De="Who is behind the instance?",Re="A single person? A non-profit? A company?",Ee="Why did you create this instance?",ze="To share your personal videos? To open registrations and allow people to upload what they want?",Le="How long do you plan to maintain this instance?",$e="It's important to know for users who want to register on your instance",Je="How will you finance the PeerTube server?",Ne="With your own funds? With user donations? Advertising?",je="OTHER INFORMATION",Fe="What server/hardware does the instance run on?",Ue="i.e. 2vCore 2GB RAM, a direct the link to the server you rent, etc.",Be="This instance is dedicated to sensitive or NSFW content",Ge="\n                      Enabling it will allow other administrators to know that you are mainly federating sensitive content." + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + "\n                      Moreover, the NSFW checkbox on video upload will be automatically checked by default.\n                    ",Ge=a.mc(Ge),Ve="\n                      With " + "[\ufffd#2\ufffd|\ufffd#3\ufffd]" + "Do not list" + "[\ufffd/#2\ufffd|\ufffd/#3\ufffd]" + " or " + "[\ufffd#2\ufffd|\ufffd#3\ufffd]" + "Blur thumbnails" + "[\ufffd/#2\ufffd|\ufffd/#3\ufffd]" + ", a confirmation will be requested to watch the video.\n                    ",Ve=a.mc(Ve);const rt=function(e){return{"input-error":e}};function lt(e,t){if(1&e&&(a.bc(0,16),a.dc(1,"div",17),a.dc(2,"div",18),a.dc(3,"div",19),a.hc(4,ue),a.cc(),a.cc(),a.dc(5,"div",20),a.dc(6,"div",21),a.dc(7,"label",22),a.hc(8,be),a.cc(),a.Yb(9,"input",23),a.ad(10,Ye,2,1,"div",15),a.cc(),a.dc(11,"div",21),a.dc(12,"label",24),a.hc(13,pe),a.cc(),a.Yb(14,"textarea",25),a.ad(15,He,2,1,"div",15),a.cc(),a.dc(16,"div",21),a.dc(17,"label",26),a.hc(18,fe),a.cc(),a.Yb(19,"my-help",27),a.Yb(20,"my-markdown-textarea",28),a.ad(21,Xe,2,1,"div",15),a.cc(),a.dc(22,"div",21),a.dc(23,"label",29),a.hc(24,he),a.cc(),a.dc(25,"div"),a.dc(26,"p-multiSelect",30),a.jc(27,me),a.cc(),a.cc(),a.cc(),a.dc(28,"div",21),a.dc(29,"label",31),a.hc(30,ve),a.cc(),a.dc(31,"div"),a.dc(32,"p-multiSelect",32),a.jc(33,Ce),a.cc(),a.cc(),a.cc(),a.cc(),a.cc(),a.dc(34,"div",11),a.dc(35,"div",18),a.dc(36,"div",19),a.hc(37,Oe),a.cc(),a.dc(38,"div",33),a.nc(39,Pe),a.Yb(40,"a",34),a.kc(),a.cc(),a.cc(),a.dc(41,"div",20),a.dc(42,"div",21),a.dc(43,"my-peertube-checkbox",35),a.ad(44,Qe,2,0,"ng-template",36),a.ad(45,Ke,4,0,"ng-template",37),a.cc(),a.cc(),a.dc(46,"div",21),a.dc(47,"label",38),a.hc(48,_e),a.cc(),a.dc(49,"my-help"),a.ad(50,qe,4,0,"ng-template",39),a.cc(),a.dc(51,"div",40),a.dc(52,"select",41),a.dc(53,"option",42),a.hc(54,Me),a.cc(),a.dc(55,"option",43),a.hc(56,ye),a.cc(),a.dc(57,"option",44),a.hc(58,we),a.cc(),a.dc(59,"option",45),a.hc(60,xe),a.cc(),a.cc(),a.cc(),a.ad(61,We,2,1,"div",15),a.cc(),a.dc(62,"div",21),a.dc(63,"label",46),a.hc(64,ke),a.cc(),a.Yb(65,"my-help",27),a.Yb(66,"my-markdown-textarea",47),a.ad(67,Ze,2,1,"div",15),a.cc(),a.dc(68,"div",21),a.dc(69,"label",48),a.hc(70,Ie),a.cc(),a.Yb(71,"my-help",27),a.Yb(72,"my-markdown-textarea",49),a.ad(73,et,2,1,"div",15),a.cc(),a.dc(74,"div",21),a.dc(75,"label",50),a.hc(76,Te),a.cc(),a.Yb(77,"my-help",27),a.dc(78,"div",51),a.hc(79,Se),a.cc(),a.Yb(80,"my-markdown-textarea",52),a.ad(81,tt,2,1,"div",15),a.cc(),a.cc(),a.cc(),a.dc(82,"div",11),a.dc(83,"div",18),a.dc(84,"div",19),a.hc(85,Ae),a.cc(),a.cc(),a.dc(86,"div",20),a.dc(87,"div",21),a.dc(88,"label",53),a.hc(89,De),a.cc(),a.dc(90,"div",51),a.hc(91,Re),a.cc(),a.Yb(92,"my-markdown-textarea",54),a.ad(93,nt,2,1,"div",15),a.cc(),a.dc(94,"div",21),a.dc(95,"label",55),a.hc(96,Ee),a.cc(),a.dc(97,"div",51),a.hc(98,ze),a.cc(),a.Yb(99,"textarea",56),a.ad(100,ot,2,1,"div",15),a.cc(),a.dc(101,"div",21),a.dc(102,"label",57),a.hc(103,Le),a.cc(),a.dc(104,"div",51),a.hc(105,$e),a.cc(),a.Yb(106,"textarea",58),a.ad(107,ct,2,1,"div",15),a.cc(),a.dc(108,"div",21),a.dc(109,"label",59),a.hc(110,Je),a.cc(),a.dc(111,"div",51),a.hc(112,Ne),a.cc(),a.Yb(113,"textarea",60),a.ad(114,it,2,1,"div",15),a.cc(),a.cc(),a.cc(),a.dc(115,"div",11),a.dc(116,"div",18),a.dc(117,"div",19),a.hc(118,je),a.cc(),a.cc(),a.dc(119,"div",20),a.dc(120,"div",21),a.dc(121,"label",61),a.hc(122,Fe),a.cc(),a.dc(123,"div",51),a.hc(124,Ue),a.cc(),a.Yb(125,"my-markdown-textarea",62),a.ad(126,at,2,1,"div",15),a.cc(),a.cc(),a.cc(),a.ac()),2&e){const e=a.wc();a.Jb(9),a.Dc("ngClass",a.Hc(31,rt,e.formErrors.instance.name)),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.name),a.Jb(4),a.Dc("ngClass",a.Hc(33,rt,e.formErrors["instance.shortDescription"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.shortDescription),a.Jb(5),a.Dc("classes",a.Hc(35,rt,e.formErrors["instance.description"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.description),a.Jb(5),a.Dc("options",e.categoryItems)("showToggleAll",!1)("defaultLabel",e.getDefaultCategoryLabel())("selectedItemsLabel",e.getSelectedCategoryLabel()),a.Jb(6),a.Dc("options",e.languageItems)("showToggleAll",!1)("defaultLabel",e.getDefaultLanguageLabel())("selectedItemsLabel",e.getSelectedLanguageLabel()),a.Jb(29),a.Dc("ngIf",e.formErrors.instance.defaultNSFWPolicy),a.Jb(5),a.Dc("ngClass",a.Hc(37,rt,e.formErrors["instance.terms"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.terms),a.Jb(5),a.Dc("ngClass",a.Hc(39,rt,e.formErrors["instance.codeOfConduct"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.codeOfConduct),a.Jb(7),a.Dc("ngClass",a.Hc(41,rt,e.formErrors["instance.moderationInformation"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.moderationInformation),a.Jb(11),a.Dc("classes",a.Hc(43,rt,e.formErrors["instance.administrator"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.administrator),a.Jb(6),a.Dc("ngClass",a.Hc(45,rt,e.formErrors["instance.creationReason"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.creationReason),a.Jb(6),a.Dc("ngClass",a.Hc(47,rt,e.formErrors["instance.maintenanceLifetime"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.maintenanceLifetime),a.Jb(6),a.Dc("ngClass",a.Hc(49,rt,e.formErrors["instance.businessModel"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.businessModel),a.Jb(11),a.Dc("classes",a.Hc(51,rt,e.formErrors["instance.hardwareInformation"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.hardwareInformation)}}var st,dt,gt,ut,bt,pt,ft,ht,mt,vt,Ct,Ot;st="APPEARANCE",dt="\n              Use " + "\ufffd#6\ufffd" + "plugins & themes" + "[\ufffd/#6\ufffd|\ufffd/#7\ufffd]" + " for more involved changes, or " + "\ufffd#7\ufffd" + "add slight customizations" + "[\ufffd/#6\ufffd|\ufffd/#7\ufffd]" + ".\n            ",dt=a.mc(dt),gt="\u4E3B\u9898",ut="\u9ED8\u8BA4",bt="Landing page",pt="Discover videos",ft="Trending videos",ht="Most liked videos",mt="Recently added videos",vt="\u672C\u5730\u89C6\u9891",Ct="NEW USERS",Ot="\n              Manage " + "\ufffd#40\ufffd" + "users" + "\ufffd/#40\ufffd" + " to set their quota individually.\n            ";const Pt=["labelText","\u5F00\u653E\u6CE8\u518C"];var _t;_t="\u26A0\uFE0F This functionality requires a lot of attention and extra moderation.";const Mt=["labelText","\u6CE8\u518C\u9700\u8981\u9A8C\u8BC1\u7535\u5B50\u90AE\u4EF6\u5730\u5740"];var yt,wt,xt,kt;yt="\u6CE8\u518C\u9650\u5236",wt="Default video quota per user",xt="Default daily upload limit per user",kt="NEW VIDEOS";const It=["labelText","Allow import with HTTP URL (i.e. YouTube)"],Tt=["labelText","Allow import with a torrent file or a magnet URI"],St=["labelText","Blacklist new videos automatically"];var At,Dt,Rt;At="Unless a user is marked as trusted, their videos will stay private until a moderator reviews them.",Dt="FEDERATION",Rt="\n              Manage " + "\ufffd#101\ufffd" + "relations" + "\ufffd/#101\ufffd" + " with other instances.\n            ";const Et=["labelText","Other instances can follow yours"],zt=["labelText","Manually approve new instance followers"],Lt=["labelText","Automatically follow back instances"];var $t;$t="\u26A0\uFE0F This functionality requires a lot of attention and extra moderation.";const Jt=["labelText","Automatically follow instances of a public index"];var Nt,jt,Ft,Ut,Bt;Nt="\u26A0\uFE0F This functionality requires a lot of attention and extra moderation.",jt="\n                          You should only follow indexes you trust, or " + "\ufffd#129\ufffd" + "host your own" + "\ufffd/#129\ufffd" + ".\n                        ",Ft="Index URL",Ut="ADMINISTRATORS",Bt="\u7BA1\u7406\u5458\u7535\u5B50\u90AE\u4EF6\u5730\u5740";const Gt=["labelText","\u5F00\u542F\u8054\u7CFB\u8868\u683C"];function Vt(e,t){if(1&e&&(a.dc(0,"option",122),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e),a.Jb(1),a.dd(e)}}function Yt(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.defaultClientRoute)}}function Ht(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.signup.limit)}}function Xt(e,t){1&e&&(a.dc(0,"small",123),a.cd(1,"Signup won't be limited to a fixed number of users."),a.cc())}function Qt(e,t){if(1&e&&(a.dc(0,"option",124),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.value)("disabled",e.disabled),a.Jb(1),a.ed(" ",e.label," ")}}function Kt(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.user.videoQuota)}}function qt(e,t){if(1&e&&(a.dc(0,"option",124),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.value)("disabled",e.disabled),a.Jb(1),a.ed(" ",e.label," ")}}function Wt(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.user.videoQuotaDaily)}}function Zt(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.followings.instance.autoFollowIndex.indexUrl)}}function en(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.admin.email)}}const tn=function(e){return{"disabled-checkbox-extra":e}};function nn(e,t){if(1&e){const e=a.ec();a.dc(0,"div",17),a.dc(1,"div",18),a.dc(2,"div",19),a.hc(3,st),a.cc(),a.dc(4,"div",33),a.nc(5,dt),a.Yb(6,"a",64),a.dc(7,"a",65),a.sc("click",(function(){return a.Rc(e),a.wc().gotoAnchor()})),a.cc(),a.kc(),a.cc(),a.cc(),a.dc(8,"div",20),a.bc(9,66),a.dc(10,"div",21),a.dc(11,"label",67),a.hc(12,gt),a.cc(),a.dc(13,"div",40),a.dc(14,"select",68),a.dc(15,"option",69),a.hc(16,ut),a.cc(),a.ad(17,Vt,2,2,"option",70),a.cc(),a.cc(),a.cc(),a.ac(),a.dc(18,"div",71),a.dc(19,"label",72),a.hc(20,bt),a.cc(),a.dc(21,"div",40),a.dc(22,"select",73),a.dc(23,"option",74),a.hc(24,pt),a.cc(),a.dc(25,"option",75),a.hc(26,ft),a.cc(),a.dc(27,"option",76),a.hc(28,ht),a.cc(),a.dc(29,"option",77),a.hc(30,mt),a.cc(),a.dc(31,"option",78),a.hc(32,vt),a.cc(),a.cc(),a.cc(),a.ad(33,Yt,2,1,"div",15),a.cc(),a.cc(),a.cc(),a.dc(34,"div",11),a.dc(35,"div",18),a.dc(36,"div",19),a.hc(37,Ct),a.cc(),a.dc(38,"div",33),a.nc(39,Ot),a.Yb(40,"a",34),a.kc(),a.cc(),a.cc(),a.dc(41,"div",20),a.bc(42,79),a.dc(43,"div",21),a.dc(44,"my-peertube-checkbox",80),a.jc(45,Pt),a.bc(46,81),a.dc(47,"span"),a.hc(48,_t),a.cc(),a.ac(),a.bc(49,82),a.dc(50,"my-peertube-checkbox",83),a.jc(51,Mt),a.cc(),a.dc(52,"div",84),a.dc(53,"label",85),a.hc(54,yt),a.cc(),a.Yb(55,"input",86),a.ad(56,Ht,2,1,"div",15),a.ad(57,Xt,2,0,"small",87),a.cc(),a.ac(),a.cc(),a.cc(),a.ac(),a.bc(58,88),a.dc(59,"div",21),a.dc(60,"label",89),a.hc(61,wt),a.cc(),a.dc(62,"div",40),a.dc(63,"select",90),a.ad(64,Qt,2,3,"option",91),a.cc(),a.cc(),a.ad(65,Kt,2,1,"div",15),a.cc(),a.dc(66,"div",21),a.dc(67,"label",92),a.hc(68,xt),a.cc(),a.dc(69,"div",40),a.dc(70,"select",93),a.ad(71,qt,2,3,"option",91),a.cc(),a.cc(),a.ad(72,Wt,2,1,"div",15),a.cc(),a.ac(),a.cc(),a.cc(),a.dc(73,"div",11),a.dc(74,"div",18),a.dc(75,"div",19),a.hc(76,kt),a.cc(),a.cc(),a.dc(77,"div",20),a.bc(78,94),a.bc(79,95),a.dc(80,"div",96),a.dc(81,"my-peertube-checkbox",97),a.jc(82,It),a.cc(),a.cc(),a.dc(83,"div",98),a.dc(84,"my-peertube-checkbox",99),a.jc(85,Tt),a.cc(),a.cc(),a.ac(),a.ac(),a.bc(86,100),a.bc(87,95),a.bc(88,101),a.dc(89,"div",21),a.dc(90,"my-peertube-checkbox",102),a.jc(91,St),a.bc(92,81),a.dc(93,"span"),a.hc(94,At),a.cc(),a.ac(),a.cc(),a.cc(),a.ac(),a.ac(),a.ac(),a.cc(),a.cc(),a.dc(95,"div",11),a.dc(96,"div",18),a.dc(97,"div",19),a.hc(98,Dt),a.cc(),a.dc(99,"div",103),a.nc(100,Rt),a.Yb(101,"a",104),a.kc(),a.cc(),a.cc(),a.dc(102,"div",20),a.bc(103,105),a.bc(104,16),a.dc(105,"div",21),a.dc(106,"my-peertube-checkbox",106),a.jc(107,Et),a.cc(),a.cc(),a.dc(108,"div",21),a.dc(109,"my-peertube-checkbox",107),a.jc(110,zt),a.cc(),a.cc(),a.ac(),a.ac(),a.bc(111,108),a.bc(112,16),a.bc(113,109),a.dc(114,"div",21),a.dc(115,"my-peertube-checkbox",110),a.jc(116,Lt),a.bc(117,81),a.dc(118,"span"),a.hc(119,$t),a.cc(),a.ac(),a.cc(),a.cc(),a.ac(),a.bc(120,111),a.dc(121,"div",21),a.dc(122,"my-peertube-checkbox",112),a.jc(123,Jt),a.bc(124,81),a.dc(125,"p"),a.hc(126,Nt),a.cc(),a.dc(127,"span"),a.nc(128,jt),a.Yb(129,"a",113),a.kc(),a.cc(),a.ac(),a.bc(130,82),a.dc(131,"div",114),a.dc(132,"label",115),a.hc(133,Ft),a.cc(),a.Yb(134,"input",116),a.ad(135,Zt,2,1,"div",15),a.cc(),a.ac(),a.cc(),a.cc(),a.ac(),a.ac(),a.ac(),a.cc(),a.cc(),a.dc(136,"div",11),a.dc(137,"div",18),a.dc(138,"div",19),a.hc(139,Ut),a.cc(),a.cc(),a.dc(140,"div",20),a.dc(141,"div",117),a.dc(142,"label",118),a.hc(143,Bt),a.cc(),a.Yb(144,"input",119),a.ad(145,en,2,1,"div",15),a.cc(),a.dc(146,"div",120),a.dc(147,"my-peertube-checkbox",121),a.jc(148,Gt),a.cc(),a.cc(),a.cc(),a.cc()}if(2&e){const e=a.wc();a.Jb(17),a.Dc("ngForOf",e.availableThemes),a.Jb(16),a.Dc("ngIf",e.formErrors.instance.defaultClientRoute),a.Jb(17),a.Dc("ngClass",a.Hc(16,tn,!e.isSignupEnabled())),a.Jb(2),a.Dc("ngClass",a.Hc(18,tn,!e.isSignupEnabled())),a.Jb(3),a.Dc("ngClass",a.Hc(20,rt,e.formErrors["signup.limit"])),a.Jb(1),a.Dc("ngIf",e.formErrors.signup.limit),a.Jb(1),a.Dc("ngIf",-1===e.form.value.signup.limit),a.Jb(7),a.Dc("ngForOf",e.videoQuotaOptions),a.Jb(1),a.Dc("ngIf",e.formErrors.user.videoQuota),a.Jb(6),a.Dc("ngForOf",e.videoQuotaDailyOptions),a.Jb(1),a.Dc("ngIf",e.formErrors.user.videoQuotaDaily),a.Jb(59),a.Dc("ngClass",a.Hc(22,tn,!e.isAutoFollowIndexEnabled())),a.Jb(3),a.Dc("ngClass",a.Hc(24,rt,e.formErrors["followings.instance.autoFollowIndex.indexUrl"])),a.Jb(1),a.Dc("ngIf",e.formErrors.followings.instance.autoFollowIndex.indexUrl),a.Jb(9),a.Dc("ngClass",a.Hc(26,rt,e.formErrors["admin.email"])),a.Jb(1),a.Dc("ngIf",e.formErrors.admin.email)}}var on,cn,an,rn,ln,sn,dn;function gn(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.services.twitter.username)}}function un(e,t){1&e&&(a.bc(0),a.hc(1,rn),a.ac())}function bn(e,t){1&e&&(a.bc(0),a.nc(1,ln),a.Yb(2,"br"),a.Yb(3,"br"),a.Yb(4,"br"),a.Yb(5,"a",129),a.kc(),a.ac())}function pn(e,t){if(1&e&&(a.dc(0,"div",17),a.dc(1,"div",18),a.dc(2,"div",19),a.hc(3,on),a.cc(),a.dc(4,"div",103),a.hc(5,cn),a.cc(),a.cc(),a.dc(6,"div",20),a.bc(7,125),a.bc(8,126),a.dc(9,"div",21),a.dc(10,"label",85),a.hc(11,an),a.cc(),a.Yb(12,"input",127),a.ad(13,gn,2,1,"div",15),a.cc(),a.dc(14,"div",21),a.dc(15,"my-peertube-checkbox",128),a.ad(16,un,2,0,"ng-template",36),a.ad(17,bn,6,0,"ng-template",37),a.cc(),a.cc(),a.ac(),a.ac(),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(12),a.Dc("ngClass",a.Hc(2,rt,e.formErrors["services.twitter.username"])),a.Jb(1),a.Dc("ngIf",e.formErrors.services.twitter.username)}}on="TWITTER",cn="\n              Optional. If any, provide the Twitter account representing your instance to improve link previews.\n            ",an="\u60A8\u7684 Twitter \u7528\u6237\u540D",rn="\u5B9E\u4F8B\u5DF2\u8FDB\u5165 Twitter \u767D\u540D\u5355",ln="\n                        If your instance is whitelisted by Twitter, a video player will be embedded in the Twitter feed on PeerTube video share." + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#4\ufffd\ufffd/#4\ufffd]" + "\n                        If the instance is not whitelisted, we use an image link card that will redirect on your PeerTube instance." + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#4\ufffd\ufffd/#4\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#4\ufffd\ufffd/#4\ufffd]" + "\n                        Check this checkbox, save the configuration and test with a video URL of your instance (https://example.com/videos/watch/blabla) on\n                        " + "\ufffd#5\ufffd" + "https://cards-dev.twitter.com/validator" + "\ufffd/#5\ufffd" + "\n                        to see if you instance is whitelisted.\n                      ",ln=a.mc(ln),sn="TRANSCODING",dn="\n              Process uploaded videos so that they are in a streamable form that any device can play. Though costly in\n              resources, this is a critical part of PeerTube, so tread carefully.\n            ";const fn=["labelText","\u5141\u8BB8\u989D\u5916\u7684\u62D3\u5C55"];var hn;hn="Allows users to upload .mkv, .mov, .avi and .flv videos.";const mn=["labelText","\u5141\u8BB8\u4E0A\u4F20\u97F3\u9891\u6587\u4EF6"];var vn;vn="Allows users to upload audio files that will be merged with the preview file on upload.";const Cn=["labelText","WebTorrent support enabled"],On=["labelText","HLS support enabled"];var Pn,_n,Mn,yn,wn,xn,kn,In,Tn,Sn,An,Dn,Rn,En,zn;function Ln(e,t){1&e&&(a.bc(0),a.hc(1,Sn),a.ac())}function $n(e,t){1&e&&(a.bc(0),a.hc(1,An),a.ac())}function Jn(e,t){1&e&&(a.bc(0),a.nc(1,Dn),a.Yb(2,"strong"),a.Yb(3,"p"),a.Yb(4,"br"),a.Yb(5,"strong"),a.kc(),a.ac())}function Nn(e,t){1&e&&(a.bc(0),a.nc(1,Rn),a.Yb(2,"strong"),a.Yb(3,"p"),a.dc(4,"ul"),a.Yb(5,"li"),a.Yb(6,"li"),a.Yb(7,"li"),a.cc(),a.Yb(8,"p"),a.kc(),a.ac())}function jn(e,t){if(1&e&&(a.dc(0,"option",122),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.value),a.Jb(1),a.ed(" ",e.label," ")}}function Fn(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.transcoding.threads)}}function Un(e,t){if(1&e&&a.Yb(0,"div",159),2&e){const e=a.wc(2).$implicit;a.Dc("innerHTML",e.description,a.Sc)}}function Bn(e,t){1&e&&a.ad(0,Un,1,1,"ng-template",37)}function Gn(e,t){if(1&e&&(a.dc(0,"div",21),a.dc(1,"my-peertube-checkbox",157),a.ad(2,Bn,1,0,void 0,158),a.cc(),a.cc()),2&e){const e=t.$implicit,n=a.wc(2);a.Jb(1),a.Ec("labelText",e.label),a.Dc("inputName",n.getResolutionKey(e.id))("formControlName",e.id),a.Jb(1),a.Dc("ngIf",e.description)}}function Vn(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.cache.previews.size)}}function Yn(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.cache.captions.size)}}function Hn(e,t){1&e&&(a.bc(0),a.nc(1,En),a.Yb(2,"br"),a.Yb(3,"pre"),a.kc(),a.ac())}function Xn(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.customizations.javascript)}}function Qn(e,t){1&e&&(a.bc(0),a.nc(1,zn),a.Yb(2,"br"),a.Yb(3,"br"),a.Yb(4,"pre"),a.Yb(5,"em"),a.Yb(6,"br"),a.Yb(7,"br"),a.Yb(8,"pre"),a.kc(),a.ac()),2&e&&(a.Jb(8),a.lc("{")("}")("{")("}"),a.ic(1))}function Kn(e,t){if(1&e&&(a.dc(0,"div",63),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.customizations.css)}}function qn(e,t){if(1&e&&(a.dc(0,"div",17),a.dc(1,"div",18),a.dc(2,"div",19),a.hc(3,sn),a.cc(),a.dc(4,"div",103),a.hc(5,dn),a.cc(),a.cc(),a.dc(6,"div",20),a.bc(7,130),a.dc(8,"div",21),a.dc(9,"my-peertube-checkbox",131),a.ad(10,Ln,2,0,"ng-template",36),a.ad(11,$n,2,0,"ng-template",37),a.bc(12,82),a.dc(13,"div",132),a.dc(14,"my-peertube-checkbox",133),a.jc(15,fn),a.bc(16,81),a.dc(17,"span"),a.hc(18,hn),a.cc(),a.ac(),a.cc(),a.cc(),a.dc(19,"div",132),a.dc(20,"my-peertube-checkbox",134),a.jc(21,mn),a.bc(22,81),a.dc(23,"span"),a.hc(24,vn),a.cc(),a.ac(),a.cc(),a.cc(),a.bc(25,135),a.dc(26,"div",132),a.dc(27,"my-peertube-checkbox",136),a.jc(28,Cn),a.ad(29,Jn,6,0,"ng-template",37),a.cc(),a.cc(),a.ac(),a.bc(30,137),a.dc(31,"div",132),a.dc(32,"my-peertube-checkbox",138),a.jc(33,On),a.ad(34,Nn,9,0,"ng-template",37),a.cc(),a.cc(),a.ac(),a.ac(),a.cc(),a.cc(),a.dc(35,"div",132),a.dc(36,"label",139),a.hc(37,Pn),a.cc(),a.dc(38,"div",40),a.dc(39,"select",140),a.ad(40,jn,2,2,"option",70),a.cc(),a.cc(),a.ad(41,Fn,2,1,"div",15),a.cc(),a.dc(42,"div",132),a.dc(43,"label",139),a.hc(44,_n),a.cc(),a.dc(45,"div",141),a.bc(46,142),a.ad(47,Gn,3,4,"div",143),a.ac(),a.cc(),a.cc(),a.ac(),a.cc(),a.cc(),a.dc(48,"div",11),a.dc(49,"div",18),a.dc(50,"div",19),a.hc(51,Mn),a.cc(),a.dc(52,"div",103),a.hc(53,yn),a.cc(),a.cc(),a.dc(54,"div",20),a.bc(55,144),a.dc(56,"div",145),a.dc(57,"label",146),a.hc(58,wn),a.cc(),a.Yb(59,"input",147),a.ad(60,Vn,2,1,"div",15),a.cc(),a.dc(61,"div",148),a.dc(62,"label",149),a.hc(63,xn),a.cc(),a.Yb(64,"input",150),a.ad(65,Yn,2,1,"div",15),a.cc(),a.ac(),a.cc(),a.cc(),a.dc(66,"div",11),a.dc(67,"div",18),a.Yb(68,"div",151),a.dc(69,"div",19),a.hc(70,kn),a.cc(),a.dc(71,"div",103),a.hc(72,In),a.cc(),a.cc(),a.dc(73,"div",20),a.bc(74,16),a.bc(75,152),a.dc(76,"div",21),a.dc(77,"label",153),a.hc(78,Tn),a.cc(),a.dc(79,"my-help"),a.ad(80,Hn,4,0,"ng-template",39),a.cc(),a.Yb(81,"textarea",154),a.ad(82,Xn,2,1,"div",15),a.cc(),a.dc(83,"div",21),a.dc(84,"label",155),a.cd(85,"CSS"),a.cc(),a.dc(86,"my-help"),a.ad(87,Qn,9,4,"ng-template",39),a.cc(),a.Yb(88,"textarea",156),a.ad(89,Kn,2,1,"div",15),a.cc(),a.ac(),a.ac(),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(13),a.Dc("ngClass",a.Hc(17,tn,!e.isTranscodingEnabled())),a.Jb(6),a.Dc("ngClass",a.Hc(19,tn,!e.isTranscodingEnabled())),a.Jb(7),a.Dc("ngClass",a.Hc(21,tn,!e.isTranscodingEnabled())),a.Jb(5),a.Dc("ngClass",a.Hc(23,tn,!e.isTranscodingEnabled())),a.Jb(4),a.Dc("ngClass",a.Hc(25,tn,!e.isTranscodingEnabled())),a.Jb(5),a.Dc("ngForOf",e.transcodingThreadOptions),a.Jb(1),a.Dc("ngIf",e.formErrors.transcoding.threads),a.Jb(1),a.Dc("ngClass",a.Hc(27,tn,!e.isTranscodingEnabled())),a.Jb(5),a.Dc("ngForOf",e.resolutions),a.Jb(12),a.Dc("ngClass",a.Hc(29,rt,e.formErrors["cache.previews.size"])),a.Jb(1),a.Dc("ngIf",e.formErrors.cache.previews.size),a.Jb(4),a.Dc("ngClass",a.Hc(31,rt,e.formErrors["cache.captions.size"])),a.Jb(1),a.Dc("ngIf",e.formErrors.cache.captions.size),a.Jb(16),a.Dc("ngClass",a.Hc(33,rt,e.formErrors["instance.customizations.javascript"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.customizations.javascript),a.Jb(6),a.Dc("ngClass",a.Hc(35,rt,e.formErrors["instance.customizations.css"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.customizations.css)}}Pn="\u8F6C\u7801\u7EBF\u7A0B\u6570",_n="Resolutions to generate",Mn="CACHE",yn="\n              Some files are not federated, and fetched when necessary. Define their caching policies.\n            ",wn="Number of previews to keep in cache",xn="Number of video captions to keep in cache",kn="CUSTOMIZATIONS",In="\n              Slight modifications to your PeerTube instance for when creating a plugin or theme is overkill.\n            ",Tn="JavaScript",Sn="\u542F\u7528\u8F6C\u7801",An="\u5982\u679C\u7981\u7528\u8F6C\u7801\uFF0C\u7528\u6237\u4E0A\u4F20\u7684\u89C6\u9891\u5F88\u6709\u53EF\u80FD\u65E0\u6CD5\u6B63\u5E38\u64AD\u653E\uFF01",Dn="\n                              " + "[\ufffd#2\ufffd|\ufffd#5\ufffd]" + "Experimental, we suggest you to not disable webtorrent support for now" + "[\ufffd/#2\ufffd|\ufffd/#5\ufffd]" + "\n\n                              " + "\ufffd#3\ufffd" + "If you also enabled HLS support, it will multiply videos storage by 2" + "\ufffd/#3\ufffd" + "\n\n                              " + "\ufffd#4\ufffd\ufffd/#4\ufffd" + "\n\n                              " + "[\ufffd#2\ufffd|\ufffd#5\ufffd]" + "If disabled, breaks federation with PeerTube instances < 2.1" + "[\ufffd/#2\ufffd|\ufffd/#5\ufffd]" + "\n                            ",Dn=a.mc(Dn),Rn="\n                              " + "\ufffd#2\ufffd" + "Requires ffmpeg >= 4.1" + "\ufffd/#2\ufffd" + "\n\n                              " + "[\ufffd#3\ufffd|\ufffd#8\ufffd]" + "Generate HLS playlists and fragmented MP4 files resulting in a better playback than with the current default player:" + "[\ufffd/#3\ufffd|\ufffd/#8\ufffd]" + "\n                              " + "\ufffd#4\ufffd" + "\n                                " + "[\ufffd#5\ufffd|\ufffd#6\ufffd|\ufffd#7\ufffd]" + "Resolution change is smoother" + "[\ufffd/#5\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd]" + "\n                                " + "[\ufffd#5\ufffd|\ufffd#6\ufffd|\ufffd#7\ufffd]" + "Faster playback in particular with long videos" + "[\ufffd/#5\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd]" + "\n                                " + "[\ufffd#5\ufffd|\ufffd#6\ufffd|\ufffd#7\ufffd]" + "More stable playback (less bugs/infinite loading)" + "[\ufffd/#5\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd]" + "\n                              " + "\ufffd/#4\ufffd" + "\n\n                              " + "[\ufffd#3\ufffd|\ufffd#8\ufffd]" + "If you also enabled WebTorrent support, it will multiply videos storage by 2" + "[\ufffd/#3\ufffd|\ufffd/#8\ufffd]" + "\n                            ",Rn=a.mc(Rn),En="\n                        Write JavaScript code directly." + "\ufffd#2\ufffd\ufffd/#2\ufffd" + "Example: " + "\ufffd#3\ufffd" + "console.log('my instance is amazing');" + "\ufffd/#3\ufffd" + "\n                      ",zn="\n                        Write CSS code directly. Example:" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#6\ufffd\ufffd/#6\ufffd|\ufffd#7\ufffd\ufffd/#7\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#6\ufffd\ufffd/#6\ufffd|\ufffd#7\ufffd\ufffd/#7\ufffd]" + "\n    " + "[\ufffd#4\ufffd|\ufffd#8\ufffd]" + "    #custom-css " + "[\ufffd0\ufffd|\ufffd2\ufffd]" + "\n      color: red;\n    " + "[\ufffd1\ufffd|\ufffd3\ufffd]" + "\n    " + "[\ufffd/#4\ufffd|\ufffd/#8\ufffd]" + "\n                        Prepend with " + "\ufffd#5\ufffd" + "#custom-css" + "\ufffd/#5\ufffd" + " to override styles. Example:" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#6\ufffd\ufffd/#6\ufffd|\ufffd#7\ufffd\ufffd/#7\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#6\ufffd\ufffd/#6\ufffd|\ufffd#7\ufffd\ufffd/#7\ufffd]" + "\n    " + "[\ufffd#4\ufffd|\ufffd#8\ufffd]" + "    #custom-css .logged-in-email " + "[\ufffd0\ufffd|\ufffd2\ufffd]" + "\n      color: red;\n    " + "[\ufffd1\ufffd|\ufffd3\ufffd]" + "\n    " + "[\ufffd/#4\ufffd|\ufffd/#8\ufffd]" + "\n                      ",zn=a.mc(zn);const Wn=["label","\u4FDD\u5B58"],Zn=["label","\u53D6\u6D88"];var eo;eo="AVAILABLE PLANS";const to=["value","Add plan"];var no,oo,co,io,ao,ro,lo,so,go,uo,bo,po,fo;function ho(e,t){1&e&&(a.bc(0),a.nc(1,lo),a.Yb(2,"br"),a.Yb(3,"br"),a.kc(),a.ac())}function mo(e,t){1&e&&(a.bc(0),a.nc(1,so),a.Yb(2,"br"),a.Yb(3,"br"),a.kc(),a.ac())}function vo(e,t){if(1&e&&(a.dc(0,"label",189),a.cd(1),a.cc()),2&e){const e=a.wc(3);a.Jb(1),a.dd(e.getHRBytes(e.newStoragePlan.quota))}}function Co(e,t){1&e&&(a.bc(0),a.nc(1,go),a.Yb(2,"br"),a.Yb(3,"br"),a.kc(),a.ac())}function Oo(e,t){if(1&e&&(a.dc(0,"label",190),a.cd(1),a.cc()),2&e){const e=a.wc(3);a.Jb(1),a.dd(e.getHRBytes(e.newStoragePlan.dailyQuota))}}function Po(e,t){1&e&&(a.bc(0),a.nc(1,uo),a.Yb(2,"br"),a.Yb(3,"br"),a.kc(),a.ac())}function _o(e,t){1&e&&(a.bc(0),a.nc(1,bo),a.Yb(2,"br"),a.Yb(3,"br"),a.kc(),a.ac())}function Mo(e,t){if(1&e&&(a.dc(0,"label",191),a.cd(1),a.cc()),2&e){const e=a.wc(3);a.Jb(1),a.ed("",e.newStoragePlan.duration/2628e6," month/s")}}function yo(e,t){1&e&&(a.bc(0),a.hc(1,po),a.ac())}function wo(e,t){1&e&&(a.bc(0),a.nc(1,fo),a.Yb(2,"br"),a.Yb(3,"br"),a.kc(),a.ac())}no="ACTIVE / DEACTIVATE",oo="\u540D\u79F0",co="Quota",io="Daily Quota",ao="Price",ro="\u65F6\u957F",lo=" This is the Name of the plan. It is a string with a maximun length of 50." + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + " Anyway, we recomend to use short & user friendly names ",lo=a.mc(lo),so=" This value is the TOTAL amount of data that a user can upload with this plan." + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + " It's an integer in BYTES. For unlimited storage use -1 ",so=a.mc(so),go=" This value is the DAILY amount of data that a user can upload with this plan." + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + " It's an integer in BYTES. For unlimited uploading use -1 ",go=a.mc(go),uo=" This value is the Price in Tube Coins for this plan. " + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + " It is a float with 8 decimals. ",uo=a.mc(uo),bo=" This value is the Duration (lifespan) of this plan. It is an integer in miliseconds." + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + " Minimum value is 1 month and maximun 1 year. ",bo=a.mc(bo),po="Active",fo=" You can create the plan activated or deactivated." + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + " You will be able to modify this value in future. ",fo=a.mc(fo);const xo=function(){return{standalone:!0}};function ko(e,t){if(1&e){const e=a.ec();a.dc(0,"div",173),a.dc(1,"div",21),a.dc(2,"label",174),a.hc(3,oo),a.cc(),a.dc(4,"my-help"),a.ad(5,ho,4,0,"ng-template",39),a.cc(),a.dc(6,"input",175),a.sc("ngModelChange",(function(t){return a.Rc(e),a.wc(2).newStoragePlan.name=t})),a.cc(),a.cc(),a.dc(7,"div",21),a.dc(8,"div",176),a.dc(9,"label",177),a.hc(10,co),a.cc(),a.dc(11,"my-help"),a.ad(12,mo,4,0,"ng-template",39),a.cc(),a.cc(),a.dc(13,"input",178),a.sc("ngModelChange",(function(t){return a.Rc(e),a.wc(2).newStoragePlan.quota=t})),a.cc(),a.ad(14,vo,2,1,"label",179),a.cc(),a.dc(15,"div",21),a.dc(16,"div",176),a.dc(17,"label",180),a.hc(18,io),a.cc(),a.dc(19,"my-help"),a.ad(20,Co,4,0,"ng-template",39),a.cc(),a.cc(),a.dc(21,"input",181),a.sc("ngModelChange",(function(t){return a.Rc(e),a.wc(2).newStoragePlan.dailyQuota=t})),a.cc(),a.ad(22,Oo,2,1,"label",182),a.cc(),a.dc(23,"div",21),a.dc(24,"div",176),a.dc(25,"label",183),a.hc(26,ao),a.cc(),a.dc(27,"my-help"),a.ad(28,Po,4,0,"ng-template",39),a.cc(),a.cc(),a.dc(29,"input",184),a.sc("ngModelChange",(function(t){return a.Rc(e),a.wc(2).newStoragePlan.priceTube=t})),a.cc(),a.cc(),a.dc(30,"div",21),a.dc(31,"div",176),a.dc(32,"label",185),a.hc(33,ro),a.cc(),a.dc(34,"my-help"),a.ad(35,_o,4,0,"ng-template",39),a.cc(),a.cc(),a.dc(36,"input",186),a.sc("ngModelChange",(function(t){return a.Rc(e),a.wc(2).newStoragePlan.duration=t})),a.cc(),a.ad(37,Mo,2,1,"label",187),a.cc(),a.dc(38,"div",21),a.dc(39,"my-peertube-checkbox",188),a.sc("ngModelChange",(function(t){return a.Rc(e),a.wc(2).newStoragePlan.active=t})),a.ad(40,yo,2,0,"ng-template",36),a.ad(41,wo,4,0,"ng-template",37),a.cc(),a.cc(),a.cc()}if(2&e){const e=a.wc(2);a.Jb(6),a.Dc("ngModel",e.newStoragePlan.name)("ngModelOptions",a.Gc(15,xo)),a.Jb(7),a.Dc("ngModel",e.newStoragePlan.quota)("ngModelOptions",a.Gc(16,xo)),a.Jb(1),a.Dc("ngIf",e.newStoragePlan.quota>0),a.Jb(7),a.Dc("ngModel",e.newStoragePlan.dailyQuota)("ngModelOptions",a.Gc(17,xo)),a.Jb(1),a.Dc("ngIf",e.newStoragePlan.dailyQuota>0),a.Jb(7),a.Dc("ngModel",e.newStoragePlan.priceTube)("ngModelOptions",a.Gc(18,xo)),a.Jb(7),a.Dc("ngModel",e.newStoragePlan.duration)("ngModelOptions",a.Gc(19,xo)),a.Jb(1),a.Dc("ngIf",e.newStoragePlan.duration>0),a.Jb(2),a.Dc("ngModel",e.newStoragePlan.active)("ngModelOptions",a.Gc(20,xo))}}function Io(e,t){1&e&&(a.dc(0,"tr"),a.dc(1,"th",192),a.cd(2,"Id"),a.cc(),a.dc(3,"th"),a.cd(4,"Name"),a.cc(),a.dc(5,"th",193),a.cd(6,"Quota"),a.cc(),a.dc(7,"th",193),a.cd(8,"Daily Quota"),a.cc(),a.dc(9,"th",193),a.cd(10,"Price (TubeCoin)"),a.cc(),a.dc(11,"th",193),a.cd(12,"Duration"),a.cc(),a.dc(13,"th",194),a.cd(14,"Active"),a.cc(),a.dc(15,"th",195),a.cd(16,"Actions"),a.cc(),a.cc())}function To(e,t){if(1&e){const e=a.ec();a.dc(0,"input",204),a.sc("ngModelChange",(function(t){return a.Rc(e),a.wc().$implicit.updateData.name=t})),a.cc()}if(2&e){const e=a.wc().$implicit;a.Dc("ngModel",e.updateData.name)("ngModelOptions",a.Gc(2,xo))}}function So(e,t){if(1&e&&a.cd(0),2&e){const e=a.wc().$implicit;a.ed(" ",e.name," ")}}function Ao(e,t){if(1&e){const e=a.ec();a.dc(0,"input",205),a.sc("ngModelChange",(function(t){return a.Rc(e),a.wc().$implicit.updateData.quota=t})),a.cc()}if(2&e){const e=a.wc().$implicit;a.Dc("ngModel",e.updateData.quota)("ngModelOptions",a.Gc(2,xo))}}function Do(e,t){if(1&e&&a.cd(0),2&e){const e=a.wc().$implicit,t=a.wc(2);a.fd(" ",e.quota," | ",t.getHRBytes(e.quota)," ")}}function Ro(e,t){if(1&e){const e=a.ec();a.dc(0,"input",206),a.sc("ngModelChange",(function(t){return a.Rc(e),a.wc().$implicit.updateData.dailyQuota=t})),a.cc()}if(2&e){const e=a.wc().$implicit;a.Dc("ngModel",e.updateData.dailyQuota)("ngModelOptions",a.Gc(2,xo))}}function Eo(e,t){if(1&e&&a.cd(0),2&e){const e=a.wc().$implicit,t=a.wc(2);a.fd(" ",e.dailyQuota," | ",t.getHRBytes(e.dailyQuota)," ")}}function zo(e,t){if(1&e){const e=a.ec();a.dc(0,"input",207),a.sc("ngModelChange",(function(t){return a.Rc(e),a.wc().$implicit.updateData.priceTube=t})),a.cc()}if(2&e){const e=a.wc().$implicit;a.Dc("ngModel",e.updateData.priceTube)("ngModelOptions",a.Gc(2,xo))}}function Lo(e,t){if(1&e&&a.cd(0),2&e){const e=a.wc().$implicit;a.ed(" ",e.priceTube," ")}}function $o(e,t){if(1&e){const e=a.ec();a.dc(0,"input",208),a.sc("ngModelChange",(function(t){return a.Rc(e),a.wc().$implicit.updateData.duration=t})),a.cc()}if(2&e){const e=a.wc().$implicit;a.Dc("ngModel",e.updateData.duration)("ngModelOptions",a.Gc(2,xo))}}function Jo(e,t){if(1&e&&a.cd(0),2&e){const e=a.wc().$implicit;a.fd(" ",e.duration," | ",e.duration/2628e6," month/s ")}}function No(e,t){if(1&e){const e=a.ec();a.dc(0,"input",209),a.sc("ngModelChange",(function(t){return a.Rc(e),a.wc().$implicit.updateData.active=t})),a.cc()}if(2&e){const e=a.wc().$implicit;a.Dc("ngModel",e.updateData.active)("ngModelOptions",a.Gc(2,xo))}}function jo(e,t){if(1&e&&a.cd(0),2&e){const e=a.wc().$implicit;a.ed(" ",e.active," ")}}function Fo(e,t){if(1&e){const e=a.ec();a.dc(0,"my-edit-button",210),a.sc("click",(function(){a.Rc(e);const t=a.wc().$implicit;return a.wc(2).onRowEditInit(t)})),a.cc()}}function Uo(e,t){if(1&e){const e=a.ec();a.dc(0,"my-delete-button",211),a.sc("click",(function(){a.Rc(e);const t=a.wc().$implicit;return a.wc(2).onRowDelete(t)})),a.cc()}}const Bo=["label","\u4FDD\u5B58"];function Go(e,t){if(1&e){const e=a.ec();a.dc(0,"my-button",212),a.jc(1,Bo),a.sc("click",(function(){a.Rc(e);const t=a.wc().$implicit;return a.wc(2).onRowEditSave(t.updateData)})),a.cc()}}const Vo=["label","\u53D6\u6D88"];function Yo(e,t){if(1&e){const e=a.ec();a.dc(0,"my-button",213),a.jc(1,Vo),a.sc("click",(function(){a.Rc(e);const t=a.wc(),n=t.$implicit,o=t.planIndex;return a.wc(2).onRowEditCancel(n,o)})),a.cc()}}function Ho(e,t){if(1&e&&(a.dc(0,"tr",196),a.dc(1,"td"),a.cd(2),a.cc(),a.dc(3,"td"),a.dc(4,"p-cellEditor"),a.ad(5,To,1,3,"ng-template",197),a.ad(6,So,1,1,"ng-template",198),a.cc(),a.cc(),a.dc(7,"td"),a.dc(8,"p-cellEditor"),a.ad(9,Ao,1,3,"ng-template",197),a.ad(10,Do,1,2,"ng-template",198),a.cc(),a.cc(),a.dc(11,"td"),a.dc(12,"p-cellEditor"),a.ad(13,Ro,1,3,"ng-template",197),a.ad(14,Eo,1,2,"ng-template",198),a.cc(),a.cc(),a.dc(15,"td"),a.dc(16,"p-cellEditor"),a.ad(17,zo,1,3,"ng-template",197),a.ad(18,Lo,1,1,"ng-template",198),a.cc(),a.cc(),a.dc(19,"td"),a.dc(20,"p-cellEditor"),a.ad(21,$o,1,3,"ng-template",197),a.ad(22,Jo,1,2,"ng-template",198),a.cc(),a.cc(),a.dc(23,"td"),a.dc(24,"p-cellEditor"),a.ad(25,No,1,3,"ng-template",197),a.ad(26,jo,1,1,"ng-template",198),a.cc(),a.cc(),a.dc(27,"td",199),a.dc(28,"div"),a.ad(29,Fo,1,0,"my-edit-button",200),a.ad(30,Uo,1,0,"my-delete-button",201),a.ad(31,Go,2,0,"my-button",202),a.ad(32,Yo,2,0,"my-button",203),a.cc(),a.cc(),a.cc()),2&e){const e=t.$implicit,n=t.editing;a.Dc("pEditableRow",e),a.Jb(2),a.ed(" ",e.id," "),a.Jb(27),a.Dc("ngIf",!n),a.Jb(1),a.Dc("ngIf",!n),a.Jb(1),a.Dc("ngIf",n),a.Jb(1),a.Dc("ngIf",n)}}var Xo,Qo,Ko;function qo(e,t){1&e&&(a.bc(0),a.hc(1,Xo),a.ac())}function Wo(e,t){1&e&&(a.bc(0),a.nc(1,Qo),a.Yb(2,"br"),a.Yb(3,"br"),a.kc(),a.ac())}function Zo(e,t){if(1&e){const e=a.ec();a.dc(0,"p-dialog",160),a.sc("visibleChange",(function(t){return a.Rc(e),a.wc().showAddPlanModal=t})),a.ad(1,ko,42,21,"div",161),a.dc(2,"p-footer"),a.dc(3,"div",162),a.dc(4,"my-button",163),a.jc(5,Wn),a.sc("click",(function(){return a.Rc(e),a.wc().addPlanButtonClick()})),a.cc(),a.dc(6,"my-button",164),a.jc(7,Zn),a.sc("click",(function(){return a.Rc(e),a.wc().addPlanCancel()})),a.cc(),a.cc(),a.cc(),a.cc(),a.dc(8,"div",17),a.dc(9,"div",165),a.dc(10,"div",19),a.hc(11,eo),a.cc(),a.cc(),a.dc(12,"div",165),a.dc(13,"p-table",166),a.ad(14,Io,17,0,"ng-template",167),a.ad(15,Ho,33,6,"ng-template",168),a.cc(),a.cc(),a.cc(),a.dc(16,"div",11),a.dc(17,"div",169),a.dc(18,"input",170),a.jc(19,to),a.sc("click",(function(){return a.Rc(e),a.wc().addPlanShow()})),a.cc(),a.cc(),a.cc(),a.dc(20,"div",17),a.dc(21,"div",165),a.dc(22,"div",19),a.hc(23,no),a.cc(),a.cc(),a.bc(24,171),a.dc(25,"div",21),a.dc(26,"my-peertube-checkbox",172),a.ad(27,qo,2,0,"ng-template",36),a.ad(28,Wo,4,0,"ng-template",37),a.cc(),a.cc(),a.ac(),a.cc()}if(2&e){const e=a.wc();a.Dc("visible",e.showAddPlanModal)("focusOnShow",!1)("responsive",!0)("modal",!0),a.Jb(1),a.Dc("ngIf",e.newStoragePlan),a.Jb(12),a.Dc("value",e.storagePlans)}}function ec(e,t){1&e&&(a.dc(0,"span",63),a.hc(1,Ko),a.cc())}Xo="Premium storage is enabled",Qo=" Enabling it, will allow users to pay for a premium storage plan with Tube Coins." + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + " You need to create your own plans in this section. ",Qo=a.mc(Qo),Ko="It seems like the configuration is invalid. Please search for potential errors in the different tabs.";let tc=(()=>{class e extends i.b{constructor(e,t,n,o,c,i,a,r,l,s,d){super(),this.viewportScroller=e,this.formValidatorService=t,this.customConfigValidatorsService=n,this.userValidatorsService=o,this.notifier=c,this.authHttp=i,this.restExtractor=a,this.configService=r,this.serverService=l,this.confirmService=s,this.i18n=d,this.initDone=!1,this.resolutions=[],this.transcodingThreadOptions=[],this.languageItems=[],this.categoryItems=[],this.storagePlans=[],this.planIndex=null,this.premiumStorageActive=!1,this.addPremiumPlanClicked=!1,this.showAddPlanModal=!1,this.bytesPipe=new f.b,this.resolutions=[{id:"0p",label:this.i18n("Audio-only"),description:this.i18n("A <code>.mp4</code> that keeps the original audio track, with no video")},{id:"240p",label:this.i18n("240p")},{id:"360p",label:this.i18n("360p")},{id:"480p",label:this.i18n("480p")},{id:"720p",label:this.i18n("720p")},{id:"1080p",label:this.i18n("1080p")},{id:"2160p",label:this.i18n("2160p")}],this.transcodingThreadOptions=[{value:0,label:this.i18n("Auto (via ffmpeg)")},{value:1,label:"1"},{value:2,label:"2"},{value:4,label:"4"},{value:8,label:"8"}]}get videoQuotaOptions(){return this.configService.videoQuotaOptions}get videoQuotaDailyOptions(){return this.configService.videoQuotaDailyOptions}get availableThemes(){return this.serverConfig.theme.registered.map(e=>e.name)}ngOnInit(){this.subscribeConfigAndPlans(),this.serverConfig=this.serverService.getTmpConfig(),this.resetNewStoragePlan();const e={instance:{name:this.customConfigValidatorsService.INSTANCE_NAME,shortDescription:this.customConfigValidatorsService.INSTANCE_SHORT_DESCRIPTION,description:null,isNSFW:!1,defaultNSFWPolicy:null,terms:null,codeOfConduct:null,creationReason:null,moderationInformation:null,administrator:null,maintenanceLifetime:null,businessModel:null,hardwareInformation:null,categories:null,languages:null,defaultClientRoute:null,customizations:{javascript:null,css:null}},theme:{default:null},services:{twitter:{username:this.customConfigValidatorsService.SERVICES_TWITTER_USERNAME,whitelisted:null}},cache:{previews:{size:this.customConfigValidatorsService.CACHE_PREVIEWS_SIZE},captions:{size:this.customConfigValidatorsService.CACHE_CAPTIONS_SIZE}},signup:{enabled:null,limit:this.customConfigValidatorsService.SIGNUP_LIMIT,requiresEmailVerification:null},import:{videos:{http:{enabled:null},torrent:{enabled:null}}},admin:{email:this.customConfigValidatorsService.ADMIN_EMAIL},contactForm:{enabled:null},user:{videoQuota:this.userValidatorsService.USER_VIDEO_QUOTA,videoQuotaDaily:this.userValidatorsService.USER_VIDEO_QUOTA_DAILY},transcoding:{enabled:null,threads:this.customConfigValidatorsService.TRANSCODING_THREADS,allowAdditionalExtensions:null,allowAudioFiles:null,resolutions:{},hls:{enabled:null},webtorrent:{enabled:null}},autoBlacklist:{videos:{ofUsers:{enabled:null}}},followers:{instance:{enabled:null,manualApproval:null}},followings:{instance:{autoFollowBack:{enabled:null},autoFollowIndex:{enabled:null,indexUrl:this.customConfigValidatorsService.INDEX_URL}}},premium_storage:{enabled:null}},t={transcoding:{resolutions:{}}};for(const n of this.resolutions)t.transcoding.resolutions[n.id]="false",e.transcoding.resolutions[n.id]=null;this.buildForm(e),this.loadForm(),this.checkTranscodingFields()}ngAfterViewChecked(){this.initDone||(this.initDone=!0,this.gotoAnchor())}resetNewStoragePlan(){this.newStoragePlan={name:null,quota:0,dailyQuota:0,priceTube:0,duration:0,active:!1}}subscribeConfigAndPlans(){Object(p.a)([this.getPlans(),this.serverService.getConfig()]).subscribe(([e,t])=>{e.success&&e.plans.length>0&&(this.storagePlans=e.plans,this.storagePlans.forEach(e=>{e.updateData=e})),t&&(this.serverConfig=t,console.log("ICEICE config is: ",this.serverConfig))})}addPlanButtonClick(){this.isAddPlanButtonDisabled()||(console.log("ICEICE going to call addPlan with body. ",this.newStoragePlan),this.addPlan(this.newStoragePlan).subscribe(e=>{console.log("ICEICE addPlanButtonClick response is: ",e),e.success?(this.notifier.success("Your new plan has been successfully added"),this.showAddPlanModal=!1,this.resetNewStoragePlan(),this.subscribeConfigAndPlans()):this.notifier.error(e.error)}))}addPlanCancel(){this.showAddPlanModal=!1}addPlanShow(){this.showAddPlanModal=!0}addPlan(t){return this.authHttp.post(e.GET_PREMIUM_STORAGE_API_URL+"add-plan",t).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}isAddPlanButtonDisabled(){const{name:e,quota:t,dailyQuota:n,priceTube:o,duration:c,active:i}=this.newStoragePlan;return"string"!=typeof e||null===e||""===e||e.length>50||"number"!=typeof t||t<-1||0===t||"number"!=typeof n||n<-1||0===n||"number"!=typeof o||o<0||"number"!=typeof c||c<2628e6||c>31536e6||"boolean"!=typeof i}showAddButtonSubmitError(){return!1!==this.addPremiumPlanClicked&&this.isAddPlanButtonDisabled()}getPlans(){return this.authHttp.get(e.GET_PREMIUM_STORAGE_API_URL+"plans").pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}getHRBytes(e){try{return null==e?"":this.bytesPipe.transform(parseInt(e,10),0)}catch(t){return t}}onRowEditInit(e){}onRowDelete(e){return ce(this,void 0,void 0,(function*(){if(!1===(yield this.confirmService.confirm(this.i18n("Do you really want to delete '{{planName}}' plan? \n ATENTION! If some user already bought this plan you can delete his payment also! Before delete a plan, be sure that anybody is using it or consider to just deactivate it",{planName:e.name}),this.i18n("Delete"))))return;const t={planId:e.id};console.log("ICEICE calling onRowDelete function with data: ",t),this.deletePlan(t).subscribe(e=>{console.log("ICEICE deletePlan response is: ",e),e.success?(this.subscribeConfigAndPlans(),this.notifier.success("Plan successfully deleted")):this.notifier.error("Something went wrong deleting the plan, reload and try again")})}))}deletePlan(t){return this.authHttp.post(e.GET_PREMIUM_STORAGE_API_URL+"delete-plan",t).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}onRowEditSave(e){console.log("ICEICE calling onRowEditSave function with data: ",e);const t={id:e.id,name:e.name,quota:e.quota,dailyQuota:e.dailyQuota,priceTube:e.priceTube,duration:e.duration,active:e.active};console.log("ICEICE calling onRowEditSave function with body: ",t),this.updatePlan(t).subscribe(e=>{console.log("ICEICE onRowEditSave updatePlan response is: ",e),e.success?(this.subscribeConfigAndPlans(),this.notifier.success("Plan successfully updated")):this.notifier.error("Something went wrong updating the plan, reload and try again")})}updatePlan(t){return console.log("ICEICE going to call addPlan with body: ",t),this.authHttp.post(e.GET_PREMIUM_STORAGE_API_URL+"update-plan",t).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}onRowEditCancel(e,t){console.log("ICEICE calling onRowEditCancel function with data: ",e),console.log("ICEICE ri is: ",t)}getResolutionKey(e){return"transcoding.resolutions."+e}showFormSubmitButton(){return void 0!==this.nav&&void 0!==this.nav.activeId&&"premium-storage-config"!==this.nav.activeId}isTranscodingEnabled(){return!0===this.form.value.transcoding.enabled}isSignupEnabled(){return!0===this.form.value.signup.enabled}isAutoFollowIndexEnabled(){return!0===this.form.value.followings.instance.autoFollowIndex.enabled}formValidated(){return ce(this,void 0,void 0,(function*(){console.log("ICEICE going to update config with form : ",this.form.getRawValue()),this.configService.updateCustomConfig(this.form.getRawValue()).subscribe(e=>{this.customConfig=e,this.serverService.resetConfig(),this.updateForm(),this.notifier.success(this.i18n("Configuration updated."))},e=>this.notifier.error(e.message))}))}getSelectedLanguageLabel(){return this.i18n("{{'{0} languages selected")}getDefaultLanguageLabel(){return this.i18n("No language")}getSelectedCategoryLabel(){return this.i18n("{{'{0} categories selected")}getDefaultCategoryLabel(){return this.i18n("No category")}gotoAnchor(){const e={customizations:"advanced-configuration"},t=window.location.hash.replace("#","");t&&Object.keys(e).includes(t)&&(this.nav.select(e[t]),setTimeout(()=>this.viewportScroller.scrollToAnchor(t),100))}updateForm(){this.form.patchValue(this.customConfig)}loadForm(){Object(p.a)([this.configService.getCustomConfig(),this.serverService.getVideoLanguages(),this.serverService.getVideoCategories()]).subscribe(([e,t,n])=>{this.customConfig=e,this.languageItems=t.map(e=>({label:e.label,value:e.id})),this.categoryItems=n.map(e=>({label:e.label,value:e.id})),this.updateForm(),this.forceCheck()},e=>this.notifier.error(e.message))}checkTranscodingFields(){const e=this.form.get("transcoding.hls.enabled"),t=this.form.get("transcoding.webtorrent.enabled");t.valueChanges.subscribe(t=>{!1!==t||e.disabled||e.disable(),!0!==t||e.enabled||e.enable()}),e.valueChanges.subscribe(e=>{!1!==e||t.disabled||t.disable(),!0!==e||t.enabled||t.enable()})}}return e.GET_PREMIUM_STORAGE_API_URL=c.a.apiUrl+"/api/v1/premium-storage/",e.\u0275fac=function(t){return new(t||e)(a.Xb(h.K),a.Xb(b.a),a.Xb(i.a),a.Xb(i.k),a.Xb(g.f),a.Xb(r.b),a.Xb(i.e),a.Xb(s),a.Xb(d.a),a.Xb(u.a),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-edit-custom-config"]],viewQuery:function(e,t){var n;1&e&&a.gd(ie,!0),2&e&&a.Oc(n=a.tc())&&(t.nav=n.first)},features:[a.Gb],decls:30,vars:4,consts:[["role","form",3,"formGroup"],["ngbNav","",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem","instance-information"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","basic-configuration"],["ngbNavItem","services"],["ngbNavItem","advanced-configuration"],["ngbNavItem","premium-storage-config"],[3,"ngbNavOutlet"],[1,"form-row","mt-4"],[1,"col-md-7","col-xl-5"],[1,"col-md-5","col-xl-7"],["type","submit",3,"disabled","click",6,"value"],["class","form-error",4,"ngIf"],["formGroupName","instance"],[1,"form-row","mt-5"],[1,"form-group","col-12","col-lg-4","col-xl-3"],[1,"inner-form-title"],[1,"form-group","form-group-right","col-12","col-lg-8","col-xl-9"],[1,"form-group"],["for","instanceName"],["type","text","id","instanceName","formControlName","name",1,"form-control",3,"ngClass"],["for","instanceShortDescription"],["id","instanceShortDescription","formControlName","shortDescription",1,"form-control","small",3,"ngClass"],["for","instanceDescription"],["helpType","markdownText"],["name","instanceDescription","formControlName","description","textareaMaxWidth","500px",3,"classes"],["for","instanceCategories"],["inputId","instanceCategories","formControlName","categories",3,"options","showToggleAll","defaultLabel","selectedItemsLabel",6,"emptyFilterMessage"],["for","instanceLanguages"],["inputId","instanceLanguages","formControlName","languages",3,"options","showToggleAll","defaultLabel","selectedItemsLabel",6,"emptyFilterMessage"],[1,"inner-for-description"],["routerLink","/admin/users"],["inputName","instanceIsNSFW","formControlName","isNSFW"],["ptTemplate","label"],["ptTemplate","help"],["for","instanceDefaultNSFWPolicy"],["ptTemplate","customHtml"],[1,"peertube-select-container"],["id","instanceDefaultNSFWPolicy","formControlName","defaultNSFWPolicy",1,"form-control"],["value","undefined","disabled",""],["value","do_not_list"],["value","blur"],["value","display"],["for","instanceTerms"],["name","instanceTerms","formControlName","terms","textareaMaxWidth","500px",3,"ngClass"],["for","instanceCodeOfConduct"],["name","instanceCodeOfConduct","formControlName","codeOfConduct","textareaMaxWidth","500px",3,"ngClass"],["for","instanceModerationInformation"],[1,"label-small-info"],["name","instanceModerationInformation","formControlName","moderationInformation","textareaMaxWidth","500px",3,"ngClass"],["for","instanceAdministrator"],["name","instanceAdministrator","formControlName","administrator","textareaMaxWidth","500px","textareaHeight","75px",3,"classes"],["for","instanceCreationReason"],["id","instanceCreationReason","formControlName","creationReason",1,"form-control",3,"ngClass"],["for","instanceMaintenanceLifetime"],["id","instanceMaintenanceLifetime","formControlName","maintenanceLifetime",1,"form-control","small",3,"ngClass"],["for","instanceBusinessModel"],["id","instanceBusinessModel","formControlName","businessModel",1,"form-control","small",3,"ngClass"],["for","instanceHardwareInformation"],["name","instanceHardwareInformation","formControlName","hardwareInformation","textareaMaxWidth","500px","textareaHeight","75px",3,"classes"],[1,"form-error"],["routerLink","/admin/plugins"],["routerLink","/admin/config/edit-custom","fragment","customizations",3,"click"],["formGroupName","theme"],["for","themeDefault"],["formControlName","default","id","themeDefault",1,"form-control"],["value","default"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","instance",1,"form-group"],["for","instanceDefaultClientRoute"],["id","instanceDefaultClientRoute","formControlName","defaultClientRoute",1,"form-control"],["value","/videos/overview"],["value","/videos/trending"],["value","/videos/most-liked"],["value","/videos/recently-added"],["value","/videos/local"],["formGroupName","signup"],["inputName","signupEnabled","formControlName","enabled",6,"labelText"],["ngProjectAs","description",5,["description"]],["ngProjectAs","extra",5,["extra"]],["inputName","signupRequiresEmailVerification","formControlName","requiresEmailVerification",3,"ngClass",6,"labelText"],[1,"mt-3",3,"ngClass"],["for","signupLimit"],["type","number","min","-1","id","signupLimit","formControlName","limit",1,"form-control",3,"ngClass"],["class","text-muted",4,"ngIf"],["formGroupName","user"],["for","userVideoQuota"],["id","userVideoQuota","formControlName","videoQuota",1,"form-control"],[3,"value","disabled",4,"ngFor","ngForOf"],["for","userVideoQuotaDaily"],["id","userVideoQuotaDaily","formControlName","videoQuotaDaily",1,"form-control"],["formGroupName","import"],["formGroupName","videos"],["formGroupName","http",1,"form-group"],["inputName","importVideosHttpEnabled","formControlName","enabled",6,"labelText"],["formGroupName","torrent",1,"form-group"],["inputName","importVideosTorrentEnabled","formControlName","enabled",6,"labelText"],["formGroupName","autoBlacklist"],["formGroupName","ofUsers"],["inputName","autoBlacklistVideosOfUsersEnabled","formControlName","enabled",6,"labelText"],[1,"inner-form-description"],["routerLink","/admin/follows"],["formGroupName","followers"],["inputName","followersInstanceEnabled","formControlName","enabled",6,"labelText"],["inputName","followersInstanceManualApproval","formControlName","manualApproval",6,"labelText"],["formGroupName","followings"],["formGroupName","autoFollowBack"],["inputName","followingsInstanceAutoFollowBackEnabled","formControlName","enabled",6,"labelText"],["formGroupName","autoFollowIndex"],["inputName","followingsInstanceAutoFollowIndexEnabled","formControlName","enabled",6,"labelText"],["href","https://framagit.org/framasoft/peertube/instances-peertube#peertube-auto-follow"],[3,"ngClass"],["for","followingsInstanceAutoFollowIndexUrl"],["type","text","id","followingsInstanceAutoFollowIndexUrl","formControlName","indexUrl",1,"form-control",3,"ngClass"],["formGroupName","admin",1,"form-group"],["for","adminEmail"],["type","text","id","adminEmail","formControlName","email",1,"form-control",3,"ngClass"],["formGroupName","contactForm",1,"form-group"],["inputName","enableContactForm","formControlName","enabled",6,"labelText"],[3,"value"],[1,"text-muted"],[3,"value","disabled"],["formGroupName","services"],["formGroupName","twitter"],["type","text","id","servicesTwitterUsername","formControlName","username",1,"form-control",3,"ngClass"],["inputName","servicesTwitterWhitelisted","formControlName","whitelisted"],["target","_blank","rel","noopener noreferrer","href","https://cards-dev.twitter.com/validator"],["formGroupName","transcoding"],["inputName","transcodingEnabled","formControlName","enabled"],[1,"form-group",3,"ngClass"],["inputName","transcodingAllowAdditionalExtensions","formControlName","allowAdditionalExtensions",6,"labelText"],["inputName","transcodingAllowAudioFiles","formControlName","allowAudioFiles",6,"labelText"],["formGroupName","webtorrent"],["inputName","transcodingWebTorrentEnabled","formControlName","enabled",6,"labelText"],["formGroupName","hls"],["inputName","transcodingHlsEnabled","formControlName","enabled",6,"labelText"],["for","transcodingThreads"],["id","transcodingThreads","formControlName","threads",1,"form-control"],[1,"ml-2","mt-2","d-flex","flex-column"],["formGroupName","resolutions"],["class","form-group",4,"ngFor","ngForOf"],["formGroupName","cache"],["formGroupName","previews",1,"form-group"],["for","cachePreviewsSize"],["type","number","min","0","id","cachePreviewsSize","formControlName","size",1,"form-control",3,"ngClass"],["formGroupName","captions",1,"form-group"],["for","cacheCaptionsSize"],["type","number","min","0","id","cacheCaptionsSize","formControlName","size",1,"form-control",3,"ngClass"],["id","customizations",1,"anchor"],["formGroupName","customizations"],["for","customizationJavascript"],["id","customizationJavascript","formControlName","javascript",1,"form-control",3,"ngClass"],["for","customizationCSS"],["id","customizationCSS","formControlName","css",1,"form-control",3,"ngClass"],[3,"inputName","formControlName","labelText"],[4,"ngIf"],[3,"innerHTML"],["header","Add a new plan","showEffect","fade",1,"add-plan-modal",3,"visible","focusOnShow","responsive","modal","visibleChange"],["class","p-grid ui-fluid",4,"ngIf"],[1,"ui-dialog-buttonpane","ui-helper-clearfix"],["pButton","","type","button","icon","tick",1,"row-save-button",3,"click",6,"label"],["pButton","","type","button","icon","cross",1,"row-cancel-button",3,"click",6,"label"],[1,"form-group","col-12"],["dataKey","id","editMode","row",1,"p-table",3,"value"],["pTemplate","header"],["pTemplate","body"],[1,"col-12"],["type","submit",1,"add-plan-button",3,"click",6,"value"],["formGroupName","premium_storage",1,"form-group","form-group-right","col-12"],["inputName","premiumStorageActive","formControlName","enabled"],[1,"p-grid","ui-fluid"],["for","newPlanName"],["type","text","id","newPlanName",1,"storage-input","storage-text-input",3,"ngModel","ngModelOptions","ngModelChange"],[1,"label-with-help"],["for","newPlanQuota"],["type","number","min","-1","step","10737418240","id","newPlanQuota",1,"storage-input","storage-numeric-input",3,"ngModel","ngModelOptions","ngModelChange"],["class","storage-label","for","newPlanQuota",4,"ngIf"],["for","newPlanDailyQuota"],["type","number","min","-1","step","1073741824","id","newPlanDailyQuota",1,"storage-input","storage-numeric-input",3,"ngModel","ngModelOptions","ngModelChange"],["class","storage-label","for","newPlanDailyQuota",4,"ngIf"],["for","newPlanPrice"],["type","number","min","0","step","1000","id","newPlanPrice",1,"storage-input","storage-numeric-input",3,"ngModel","ngModelOptions","ngModelChange"],["for","newPlanDuration"],["type","number","min","2628000000","max","31536000000","step","2628000000","id","newPlanDuration",1,"storage-input","storage-numeric-input",3,"ngModel","ngModelOptions","ngModelChange"],["class","storage-label","for","newPlanDuration",4,"ngIf"],["inputName","newPlanActivated",3,"ngModel","ngModelOptions","ngModelChange"],["for","newPlanQuota",1,"storage-label"],["for","newPlanDailyQuota",1,"storage-label"],["for","newPlanDuration",1,"storage-label"],[2,"width","50px"],[2,"width","220px"],[2,"width","100px"],[2,"width","250px"],[3,"pEditableRow"],["pTemplate","input"],["pTemplate","output"],[2,"text-align","left"],["pInitEditableRow","","class","row-edit-button",3,"click",4,"ngIf"],["class","row-delete-button","disabled","true",3,"click",4,"ngIf"],["pButton","","type","button","pSaveEditableRow","","class","row-save-button","icon","tick",3,"click",4,"ngIf",6,"label"],["pButton","","type","button","pCancelEditableRow","","class","row-cancel-button","icon","cross",3,"click",4,"ngIf",6,"label"],["pInputText","","type","text",3,"ngModel","ngModelOptions","ngModelChange"],["pInputText","","type","number","min","-1","step","10737418240",3,"ngModel","ngModelOptions","ngModelChange"],["pInputText","","type","number","min","-1","step","1073741824",3,"ngModel","ngModelOptions","ngModelChange"],["pInputText","","type","number","min","1","step","1000",3,"ngModel","ngModelOptions","ngModelChange"],["pInputText","","type","number","min","1","step","2628000000",3,"ngModel","ngModelOptions","ngModelChange"],["pInputText","","type","checkbox",1,"pTableSimpleCheckbox",3,"ngModel","ngModelOptions","ngModelChange"],["pInitEditableRow","",1,"row-edit-button",3,"click"],["disabled","true",1,"row-delete-button",3,"click"],["pButton","","type","button","pSaveEditableRow","","icon","tick",1,"row-save-button",3,"click",6,"label"],["pButton","","type","button","pCancelEditableRow","","icon","cross",1,"row-cancel-button",3,"click",6,"label"]],template:function(e,t){if(1&e&&(a.dc(0,"form",0),a.dc(1,"div",1,2),a.bc(3,3),a.dc(4,"a",4),a.hc(5,ae),a.cc(),a.ad(6,lt,127,53,"ng-template",5),a.ac(),a.bc(7,6),a.dc(8,"a",4),a.hc(9,re),a.cc(),a.ad(10,nn,149,28,"ng-template",5),a.ac(),a.bc(11,7),a.dc(12,"a",4),a.hc(13,le),a.cc(),a.ad(14,pn,18,4,"ng-template",5),a.ac(),a.bc(15,8),a.dc(16,"a",4),a.hc(17,se),a.cc(),a.ad(18,qn,90,37,"ng-template",5),a.ac(),a.bc(19,9),a.dc(20,"a",4),a.hc(21,de),a.cc(),a.ad(22,Zo,29,6,"ng-template",5),a.ac(),a.cc(),a.Yb(23,"div",10),a.dc(24,"div",11),a.Yb(25,"div",12),a.dc(26,"div",13),a.dc(27,"input",14),a.jc(28,ge),a.sc("click",(function(){return t.formValidated()})),a.cc(),a.ad(29,ec,2,0,"span",15),a.cc(),a.cc(),a.cc()),2&e){const e=a.Pc(2);a.Dc("formGroup",t.form),a.Jb(23),a.Dc("ngbNavOutlet",e),a.Jb(4),a.Dc("disabled",!t.form.valid),a.Jb(2),a.Dc("ngIf",!t.form.valid)}},directives:[m.J,m.u,m.m,v.n,v.p,v.q,v.o,v.s,h.u,m.n,m.d,m.t,m.k,h.r,C.a,O.a,P.a,_.k,M.a,y.a,m.F,m.y,m.I,h.t,m.z,W,k.a,ee.a,te.q,k.d,m.w,te.e,te.b,m.b,ne.a,te.f,oe.a,te.l,te.a],styles:['label[_ngcontent-%COMP%]{font-weight:400;font-size:100%}form[_ngcontent-%COMP%]{padding-bottom:1.5rem}input[type=text][_ngcontent-%COMP%]{display:inline-block;height:30px;width:340px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;display:block}input[type=text][_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}input[type=text][_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}input[type=text][_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}input[type=text][_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:340px){input[type=text][_ngcontent-%COMP%]{width:100%}}input[type=number][_ngcontent-%COMP%]{display:inline-block;height:30px;width:315px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;display:block}input[type=number][_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}input[type=number][_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}input[type=number][_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}input[type=number][_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:315px){input[type=number][_ngcontent-%COMP%]{width:100%}}input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute}input[type=checkbox][_ngcontent-%COMP%]:focus + span[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest)}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:relative;width:18px;min-width:18px;height:18px;border:1px solid #c6c6c6;border-radius:3px;vertical-align:middle;cursor:pointer}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]:after{content:"";position:absolute;top:1px;left:5px;width:5px;height:12px;opacity:0;transform:rotate(45deg) scale(0);border-right:2px solid #fff;border-bottom:2px solid #fff}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{border-color:transparent;background:var(--mainColor);-webkit-animation:jelly .6s ease;animation:jelly .6s ease}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:after{opacity:1;transform:rotate(45deg) scale(1)}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{font-size:15px;font-weight:400;margin-left:5px;cursor:pointer;display:inline}input[type=checkbox][disabled][_ngcontent-%COMP%] + span[_ngcontent-%COMP%], input[type=checkbox][disabled][_ngcontent-%COMP%] + span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{opacity:.5;cursor:default}.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:340px;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;font-size:15px}.peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}@media screen and (max-width:340px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:15px;content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid transparent;border-top-color:#000;margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 35px 0 12px;width:calc(100% + 2px);position:relative;left:1px;border:1px solid #c6c6c6;background:transparent none;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:30px;text-overflow:ellipsis;color:var(--mainForegroundColor)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}input[type=submit][_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer;display:flex;margin-left:auto}input[type=submit].focus-visible[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}input[type=submit][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}input[type=submit].disabled[_ngcontent-%COMP%], input[type=submit][disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:#fff}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:#fff}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:#fff}input[type=submit][_ngcontent-%COMP%] + .form-error[_ngcontent-%COMP%]{display:inline;margin-left:5px}.inner-form-title[_ngcontent-%COMP%]{text-transform:uppercase;color:var(--mainColor);font-weight:700;font-size:110%;margin-bottom:10px}textarea[_ngcontent-%COMP%]{display:inline-block;height:30px;width:500px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;color:var(--textareaForegroundColor);background-color:var(--textareaBackgroundColor);height:150px;padding:5px 15px;font-size:15px;max-width:100%;display:block}textarea[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:500px){textarea[_ngcontent-%COMP%]{width:100%}}textarea.small[_ngcontent-%COMP%]{height:75px}.label-small-info[_ngcontent-%COMP%]{font-style:italic;margin-bottom:10px}.disabled-checkbox-extra[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.form-group-right[_ngcontent-%COMP%]{padding-top:2px}ngb-tabset[_ngcontent-%COMP%]:not(.previews)     .nav-link{font-size:105%}.label-with-help[_ngcontent-%COMP%]{display:block!important}.storage-label[_ngcontent-%COMP%], .storage-numeric-input[_ngcontent-%COMP%]{display:inline-block!important}.storage-label[_ngcontent-%COMP%]{margin-left:15px;margin-bottom:0}[_nghost-%COMP%]   .pTableSimpleCheckbox[_ngcontent-%COMP%]{opacity:1;position:relative;transform:scale(2);margin:6px}[_nghost-%COMP%]     .add-plan-modal .ui-dialog .ui-dialog-titlebar{color:var(--mainForegroundColor)!important;background-color:var(--menuBackgroundColor)!important}[_nghost-%COMP%]     .add-plan-modal .ui-dialog .ui-dialog-content{min-width:415px;color:var(--mainForegroundColor)!important;background-color:var(--mainBackgroundColor)!important;border-bottom:none}[_nghost-%COMP%]     .add-plan-modal .ui-dialog .ui-dialog-footer{background-color:var(--mainBackgroundColor)}[_nghost-%COMP%]     .add-plan-modal input{width:300px!important;padding-right:2px}[_nghost-%COMP%]     .ui-table input[type=number]{width:175px;padding-left:10px;padding-right:2px}.row-edit-button[_ngcontent-%COMP%]{margin-right:.5em}.add-plan-button[_ngcontent-%COMP%]{float:right;margin-right:50px}[_nghost-%COMP%]     .row-save-button{margin-right:.5em}[_nghost-%COMP%]     .row-save-button svg g g[stroke="#000000"]{stroke:var(--mainForegroundColor)!important}[_nghost-%COMP%]     .action-button-edit, [_nghost-%COMP%]     .row-save-button{border:1px solid!important;border-color:var(--mainBackgroundColor)!important;height:33px!important;border-radius:3px}[_nghost-%COMP%]     .action-button-edit svg g g[stroke="#000000"], [_nghost-%COMP%]     .row-save-button svg g g[stroke="#000000"]{stroke:var(--mainForegroundColor)!important}[_nghost-%COMP%]     .row-cancel-button span{background-color:#d9534f!important;color:#fff!important}[_nghost-%COMP%]     .row-cancel-button:hover span, [_nghost-%COMP%]     .row-save-button:hover span{background-color:#e5e5e5!important;color:var(--greyForegroundColor)!important}[_nghost-%COMP%]     .row-save-button:hover svg g g[stroke="#000000"]{stroke:var(--mainForegroundColor)!important}[_nghost-%COMP%]     .row-cancel-button .action-button-delete:hover, [_nghost-%COMP%]     .row-cancel-button .action-button-edit:hover, [_nghost-%COMP%]     .row-cancel-button .grey-button:hover, [_nghost-%COMP%]     .row-delete-button .action-button-delete:hover, [_nghost-%COMP%]     .row-delete-button .action-button-edit:hover, [_nghost-%COMP%]     .row-delete-button .grey-button:hover, [_nghost-%COMP%]     .row-edit-button .action-button-delete:hover, [_nghost-%COMP%]     .row-edit-button .action-button-edit:hover, [_nghost-%COMP%]     .row-edit-button .grey-button:hover, [_nghost-%COMP%]     .row-save-button .action-button-delete:hover, [_nghost-%COMP%]     .row-save-button .action-button-edit:hover, [_nghost-%COMP%]     .row-save-button .grey-button:hover{color:var(--greyForegroundColor)!important}[_nghost-%COMP%]     .row-cancel-button .action-button-delete:hover path[stroke="#000000"], [_nghost-%COMP%]     .row-cancel-button .action-button-delete:hover svg g g[stroke="#000000"] g, [_nghost-%COMP%]     .row-cancel-button .action-button-edit:hover path[stroke="#000000"], [_nghost-%COMP%]     .row-cancel-button .action-button-edit:hover svg g g[stroke="#000000"] g, [_nghost-%COMP%]     .row-cancel-button .grey-button:hover path[stroke="#000000"], [_nghost-%COMP%]     .row-cancel-button .grey-button:hover svg g g[stroke="#000000"] g, [_nghost-%COMP%]     .row-delete-button .action-button-delete:hover path[stroke="#000000"], [_nghost-%COMP%]     .row-delete-button .action-button-delete:hover svg g g[stroke="#000000"] g, [_nghost-%COMP%]     .row-delete-button .action-button-edit:hover path[stroke="#000000"], [_nghost-%COMP%]     .row-delete-button .action-button-edit:hover svg g g[stroke="#000000"] g, [_nghost-%COMP%]     .row-delete-button .grey-button:hover path[stroke="#000000"], [_nghost-%COMP%]     .row-delete-button .grey-button:hover svg g g[stroke="#000000"] g, [_nghost-%COMP%]     .row-edit-button .action-button-delete:hover path[stroke="#000000"], [_nghost-%COMP%]     .row-edit-button .action-button-delete:hover svg g g[stroke="#000000"] g, [_nghost-%COMP%]     .row-edit-button .action-button-edit:hover path[stroke="#000000"], [_nghost-%COMP%]     .row-edit-button .action-button-edit:hover svg g g[stroke="#000000"] g, [_nghost-%COMP%]     .row-edit-button .grey-button:hover path[stroke="#000000"], [_nghost-%COMP%]     .row-edit-button .grey-button:hover svg g g[stroke="#000000"] g, [_nghost-%COMP%]     .row-save-button .action-button-delete:hover path[stroke="#000000"], [_nghost-%COMP%]     .row-save-button .action-button-delete:hover svg g g[stroke="#000000"] g, [_nghost-%COMP%]     .row-save-button .action-button-edit:hover path[stroke="#000000"], [_nghost-%COMP%]     .row-save-button .action-button-edit:hover svg g g[stroke="#000000"] g, [_nghost-%COMP%]     .row-save-button .grey-button:hover path[stroke="#000000"], [_nghost-%COMP%]     .row-save-button .grey-button:hover svg g g[stroke="#000000"] g{stroke:var(--greyForegroundColor)!important}[_nghost-%COMP%]     .row-cancel-button .action-button-delete:hover path[fill="#000000"], [_nghost-%COMP%]     .row-cancel-button .action-button-delete:hover rect[fill="#000000"], [_nghost-%COMP%]     .row-cancel-button .action-button-edit:hover path[fill="#000000"], [_nghost-%COMP%]     .row-cancel-button .action-button-edit:hover rect[fill="#000000"], [_nghost-%COMP%]     .row-cancel-button .grey-button:hover path[fill="#000000"], [_nghost-%COMP%]     .row-cancel-button .grey-button:hover rect[fill="#000000"], [_nghost-%COMP%]     .row-delete-button .action-button-delete:hover path[fill="#000000"], [_nghost-%COMP%]     .row-delete-button .action-button-delete:hover rect[fill="#000000"], [_nghost-%COMP%]     .row-delete-button .action-button-edit:hover path[fill="#000000"], [_nghost-%COMP%]     .row-delete-button .action-button-edit:hover rect[fill="#000000"], [_nghost-%COMP%]     .row-delete-button .grey-button:hover path[fill="#000000"], [_nghost-%COMP%]     .row-delete-button .grey-button:hover rect[fill="#000000"], [_nghost-%COMP%]     .row-edit-button .action-button-delete:hover path[fill="#000000"], [_nghost-%COMP%]     .row-edit-button .action-button-delete:hover rect[fill="#000000"], [_nghost-%COMP%]     .row-edit-button .action-button-edit:hover path[fill="#000000"], [_nghost-%COMP%]     .row-edit-button .action-button-edit:hover rect[fill="#000000"], [_nghost-%COMP%]     .row-edit-button .grey-button:hover path[fill="#000000"], [_nghost-%COMP%]     .row-edit-button .grey-button:hover rect[fill="#000000"], [_nghost-%COMP%]     .row-save-button .action-button-delete:hover path[fill="#000000"], [_nghost-%COMP%]     .row-save-button .action-button-delete:hover rect[fill="#000000"], [_nghost-%COMP%]     .row-save-button .action-button-edit:hover path[fill="#000000"], [_nghost-%COMP%]     .row-save-button .action-button-edit:hover rect[fill="#000000"], [_nghost-%COMP%]     .row-save-button .grey-button:hover path[fill="#000000"], [_nghost-%COMP%]     .row-save-button .grey-button:hover rect[fill="#000000"]{fill:var(--greyForegroundColor)!important}']}),e})(),nc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Rb({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&a.Yb(0,"router-outlet")},directives:[_.m],encapsulation:2}),e})();var oc=n("MpoC");const cc=[{path:"config",component:nc,canActivate:[g.l],data:{userRight:oc.d.MANAGE_CONFIGURATION},children:[{path:"",redirectTo:"edit-custom",pathMatch:"full"},{path:"edit-custom",component:tc,data:{meta:{title:"Edit custom configuration"}}}]}];var ic=n("Phsq"),ac=n("voWr"),rc=n("Vurf"),lc=n("VCEm");function sc(e,t){if(1&e&&(a.dc(0,"a",5),a.cd(1),a.cc()),2&e){const e=t.item;a.Dc("routerLink",e.routerLink),a.Jb(1),a.dd(e.label)}}let dc=(()=>{class e{constructor(e,t){this.auth=e,this.i18n=t,this.items=[]}ngOnInit(){this.hasUsersRight()&&this.items.push({label:this.i18n("Users"),routerLink:"/admin/users"}),this.hasServerFollowRight()&&this.items.push({label:this.i18n("Follows & redundancies"),routerLink:"/admin/follows"}),(this.hasVideoAbusesRight()||this.hasVideoBlacklistRight())&&this.items.push({label:this.i18n("Moderation"),routerLink:"/admin/moderation"}),this.hasConfigRight()&&this.items.push({label:this.i18n("Configuration"),routerLink:"/admin/config"}),this.hasPluginsRight()&&this.items.push({label:this.i18n("Plugins/Themes"),routerLink:"/admin/plugins"}),(this.hasJobsRight()||this.hasLogsRight()||this.hasDebugRight())&&this.items.push({label:this.i18n("System"),routerLink:"/admin/system"})}hasUsersRight(){return this.auth.getUser().hasRight(ac.e.MANAGE_USERS)}hasServerFollowRight(){return this.auth.getUser().hasRight(ac.e.MANAGE_SERVER_FOLLOW)}hasVideoAbusesRight(){return this.auth.getUser().hasRight(ac.e.MANAGE_VIDEO_ABUSES)}hasVideoBlacklistRight(){return this.auth.getUser().hasRight(ac.e.MANAGE_VIDEO_BLACKLIST)}hasConfigRight(){return this.auth.getUser().hasRight(ac.e.MANAGE_CONFIGURATION)}hasPluginsRight(){return this.auth.getUser().hasRight(ac.e.MANAGE_PLUGINS)}hasLogsRight(){return this.auth.getUser().hasRight(ac.e.MANAGE_LOGS)}hasJobsRight(){return this.auth.getUser().hasRight(ac.e.MANAGE_JOBS)}hasDebugRight(){return this.auth.getUser().hasRight(ac.e.MANAGE_DEBUG)}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(rc.a),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["ng-component"]],decls:7,vars:2,consts:[[1,"row"],[1,"sub-menu"],["linkTemplate",""],[3,"items","itemTemplate"],[1,"margin-content"],["routerLinkActive","active",1,"title-page","title-page-settings",3,"routerLink"]],template:function(e,t){if(1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.ad(2,sc,2,2,"ng-template",null,2,a.bd),a.Yb(4,"list-overflow",3),a.cc(),a.dc(5,"div",4),a.Yb(6,"router-outlet"),a.cc(),a.cc()),2&e){const e=a.Pc(3);a.Jb(4),a.Dc("items",t.items)("itemTemplate",e)}},directives:[lc.a,_.m,_.k,_.j],encapsulation:2}),e})();var gc=n("c6Lk"),uc=function(e,t,n,o){return new(n||(n=Promise))((function(c,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function r(e){try{l(o.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}))};const bc=["currentPageReportTemplate","Showing " + "\ufffd0\ufffd" + " to " + "\ufffd1\ufffd" + " of " + "\ufffd2\ufffd" + " followers"],pc=["placeholder","\u8FC7\u6EE4\u5668\u2026"];var fc,hc,mc,vc,Cc;function Oc(e,t){if(1&e){const e=a.ec();a.dc(0,"div",5),a.dc(1,"div",6),a.dc(2,"input",7),a.jc(3,pc),a.sc("keyup",(function(t){return a.Rc(e),a.wc().onSearch(t)})),a.cc(),a.dc(4,"a",8),a.sc("click",(function(){return a.Rc(e),a.wc().resetSearch()})),a.cc(),a.dc(5,"span",9),a.hc(6,fc),a.cc(),a.cc(),a.cc()}}function Pc(e,t){1&e&&(a.dc(0,"tr"),a.dc(1,"th"),a.hc(2,hc),a.cc(),a.dc(3,"th",10),a.nc(4,mc),a.Yb(5,"p-sortIcon",11),a.kc(),a.cc(),a.dc(6,"th",12),a.nc(7,vc),a.Yb(8,"p-sortIcon",13),a.kc(),a.cc(),a.dc(9,"th",14),a.nc(10,Cc),a.Yb(11,"p-sortIcon",15),a.kc(),a.cc(),a.Yb(12,"th",16),a.cc())}fc="Clear filters",hc="\u7BA1\u7406\u5173\u6CE8",mc="\u72B6\u6001 " + "\ufffd#5\ufffd" + "" + "\ufffd/#5\ufffd" + "",vc="Score " + "\ufffd#8\ufffd" + "" + "\ufffd/#8\ufffd" + "",Cc="\u521B\u5EFA\u65F6\u95F4 " + "\ufffd#11\ufffd" + "" + "\ufffd/#11\ufffd" + "";const _c=["title","Open actor page in a new tab"];var Mc,yc;function wc(e,t){1&e&&(a.dc(0,"td"),a.hc(1,Mc),a.cc())}function xc(e,t){1&e&&(a.dc(0,"td"),a.hc(1,yc),a.cc())}Mc="\u5DF2\u63A5\u53D7",yc="\u7B49\u5F85\u4E2D";const kc=["label","\u63A5\u53D7"],Ic=["label","\u62D2\u7EDD"];function Tc(e,t){if(1&e){const e=a.ec();a.bc(0),a.dc(1,"my-button",22),a.jc(2,kc),a.sc("click",(function(){a.Rc(e);const t=a.wc().$implicit;return a.wc().acceptFollower(t)})),a.cc(),a.dc(3,"my-button",23),a.jc(4,Ic),a.sc("click",(function(){a.Rc(e);const t=a.wc().$implicit;return a.wc().rejectFollower(t)})),a.cc(),a.ac()}}function Sc(e,t){if(1&e){const e=a.ec();a.dc(0,"my-delete-button",24),a.sc("click",(function(){a.Rc(e);const t=a.wc().$implicit;return a.wc().deleteFollower(t)})),a.cc()}}function Ac(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td"),a.dc(2,"a",17),a.jc(3,_c),a.cd(4),a.Yb(5,"span",18),a.cc(),a.cc(),a.ad(6,wc,2,0,"td",19),a.ad(7,xc,2,0,"td",19),a.dc(8,"td"),a.cd(9),a.cc(),a.dc(10,"td"),a.cd(11),a.xc(12,"date"),a.cc(),a.dc(13,"td",20),a.ad(14,Tc,5,0,"ng-container",19),a.ad(15,Sc,1,0,"my-delete-button",21),a.cc(),a.cc()),2&e){const e=t.$implicit;a.Jb(2),a.Dc("href",e.follower.url,a.Tc),a.Jb(2),a.ed(" ",e.follower.name+"@"+e.follower.host," "),a.Jb(2),a.Dc("ngIf","accepted"===e.state),a.Jb(1),a.Dc("ngIf","pending"===e.state),a.Jb(2),a.dd(e.score),a.Jb(2),a.dd(a.zc(12,8,e.createdAt,"short")),a.Jb(3),a.Dc("ngIf","pending"===e.state),a.Jb(1),a.Dc("ngIf","accepted"===e.state)}}var Dc,Rc;function Ec(e,t){1&e&&(a.bc(0),a.hc(1,Dc),a.ac())}function zc(e,t){1&e&&(a.bc(0),a.hc(1,Rc),a.ac())}function Lc(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",25),a.dc(2,"div",26),a.ad(3,Ec,2,0,"ng-container",19),a.ad(4,zc,2,0,"ng-container",19),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngIf",e.search),a.Jb(1),a.Dc("ngIf",!e.search)}}Dc="No follower found matching current filters.",Rc="Your instance doesn't have any follower.";let $c=(()=>{class e extends i.g{constructor(e,t,n,o){super(),this.confirmService=e,this.notifier=t,this.i18n=n,this.followService=o,this.followers=[],this.totalRecords=0,this.sort={field:"createdAt",order:-1},this.pagination={count:this.rowsPerPage,start:0}}ngOnInit(){this.initialize()}getIdentifier(){return"FollowersListComponent"}acceptFollower(e){e.state="accepted",this.followService.acceptFollower(e).subscribe(()=>{this.notifier.success(this.i18n("{{handle}} accepted in instance followers",{handle:e.follower.name+"@"+e.follower.host}))},t=>{e.state="pending",this.notifier.error(t.message)})}rejectFollower(e){return uc(this,void 0,void 0,(function*(){const t=this.i18n("Do you really want to reject this follower?");!1!==(yield this.confirmService.confirm(t,this.i18n("Reject")))&&this.followService.rejectFollower(e).subscribe(()=>{this.notifier.success(this.i18n("{{handle}} rejected from instance followers",{handle:e.follower.name+"@"+e.follower.host})),this.loadData()},t=>{e.state="pending",this.notifier.error(t.message)})}))}deleteFollower(e){return uc(this,void 0,void 0,(function*(){const t=this.i18n("Do you really want to delete this follower?");!1!==(yield this.confirmService.confirm(t,this.i18n("Delete")))&&this.followService.removeFollower(e).subscribe(()=>{this.notifier.success(this.i18n("{{handle}} removed from instance followers",{handle:e.follower.name+"@"+e.follower.host})),this.loadData()},e=>this.notifier.error(e.message))}))}loadData(){this.followService.getFollowers({pagination:this.pagination,sort:this.sort,search:this.search}).subscribe(e=>{this.followers=e.data,this.totalRecords=e.total},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.c),a.Xb(g.f),a.Xb(l.a),a.Xb(gc.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-followers-list"]],features:[a.Gb],decls:6,vars:12,consts:[[3,"value","lazy","paginator","totalRecords","rows","rowsPerPageOptions","sortField","sortOrder","showCurrentPageReport","onLazyLoad","onPage",6,"currentPageReportTemplate"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"caption"],[1,"ml-auto","has-feedback","has-clear"],["type","text","name","table-filter","id","table-filter",3,"keyup",6,"placeholder"],[1,"glyphicon","glyphicon-remove-sign","form-control-feedback","form-control-clear",3,"click"],[1,"sr-only"],["pSortableColumn","state",2,"width","100px"],["field","state"],["pSortableColumn","score",2,"width","100px"],["field","score"],["pSortableColumn","createdAt",2,"width","150px"],["field","createdAt"],[2,"width","150px"],["target","_blank","rel","noopener noreferrer",3,"href",6,"title"],[1,"glyphicon","glyphicon-new-window"],[4,"ngIf"],[1,"action-cell"],[3,"click",4,"ngIf"],["icon","tick",3,"click",6,"label"],["icon","cross",3,"click",6,"label"],[3,"click"],["colspan","6"],[1,"empty-table-message"]],template:function(e,t){1&e&&(a.dc(0,"p-table",0),a.jc(1,bc),a.sc("onLazyLoad",(function(e){return t.loadLazy(e)}))("onPage",(function(e){return t.onPage(e)})),a.ad(2,Oc,7,0,"ng-template",1),a.ad(3,Pc,13,0,"ng-template",2),a.ad(4,Ac,16,11,"ng-template",3),a.ad(5,Lc,5,2,"ng-template",4),a.cc()),2&e&&(a.lc("{first}")("{last}")("{totalRecords}"),a.ic(1),a.Dc("value",t.followers)("lazy",!0)("paginator",t.totalRecords>0)("totalRecords",t.totalRecords)("rows",t.rowsPerPage)("rowsPerPageOptions",t.rowsPerPageOptions)("sortField",t.sort.field)("sortOrder",t.sort.order)("showCurrentPageReport",!0))},directives:[te.q,k.d,te.p,te.o,h.u,ee.a,oe.a],pipes:[h.f],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}",".caption[_ngcontent-%COMP%]{justify-content:flex-end}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:250px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:250px){.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}a[_ngcontent-%COMP%]{display:inline-block}a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{color:var(--mainForegroundColor)}a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:80%;color:var(--inputPlaceholderColor)}.action-cell[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%]:first-child{margin-right:10px}"]}),e})();var Jc=n("37nT"),Nc=n("rCE/"),jc=n("siTk"),Fc=n("fKnF");const Uc=["modal"];var Bc,Gc;Bc="" + "\ufffd0\ufffd" + "",Gc="\u6BCF\u884C\u4E00\u4E2A\u4E3B\u673A\u540D\uFF08\u4E0D\u5E26\u201Chttp://\u201D\uFF09";const Vc=["value","\u53D6\u6D88"];function Yc(e,t){if(1&e&&(a.dc(0,"div"),a.cd(1),a.cc()),2&e){const e=a.wc(3);a.Jb(1),a.ed(" ",e.form.controls.domains.errors.validDomains.value," ")}}function Hc(e,t){if(1&e&&(a.dc(0,"div",13),a.cd(1),a.ad(2,Yc,2,1,"div",14),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.ed(" ",e.formErrors.domains," "),a.Jb(1),a.Dc("ngIf",e.form.controls.domains.errors.validDomains)}}const Xc=function(e){return{"input-error":e}};function Qc(e,t){if(1&e){const e=a.ec();a.dc(0,"div",1),a.dc(1,"h4",2),a.hc(2,Bc),a.cc(),a.dc(3,"my-global-icon",3),a.sc("click",(function(){return a.Rc(e),a.wc().hide()})),a.cc(),a.cc(),a.dc(4,"div",4),a.dc(5,"form",5),a.sc("ngSubmit",(function(){return a.Rc(e),a.wc().submit()})),a.dc(6,"div",6),a.dc(7,"label",7),a.hc(8,Gc),a.cc(),a.Yb(9,"textarea",8),a.ad(10,Hc,3,2,"div",9),a.cc(),a.Bc(11),a.dc(12,"div",10),a.dc(13,"input",11),a.jc(14,Vc),a.sc("click",(function(){return a.Rc(e),a.wc().hide()}))("key.enter",(function(){return a.Rc(e),a.wc().hide()})),a.cc(),a.Yb(15,"input",12),a.cc(),a.cc(),a.cc()}if(2&e){const e=a.wc();a.Jb(2),a.lc(e.action),a.ic(2),a.Jb(3),a.Dc("formGroup",e.form),a.Jb(4),a.Dc("placeholder",e.placeholder)("ngClass",a.Hc(7,Xc,e.formErrors.domains)),a.Jb(1),a.Dc("ngIf",e.formErrors.domains),a.Jb(5),a.Dc("value",e.action)("disabled",!e.form.valid)}}const Kc=[[["warning"]]],qc=["warning"];let Wc=(()=>{class e extends Nc.b{constructor(e,t,n,o){super(),this.formValidatorService=e,this.modalService=t,this.batchDomainsValidatorsService=n,this.i18n=o,this.placeholder="example.com",this.domains=new a.n}ngOnInit(){this.action||(this.action=this.i18n("Process domains")),this.buildForm({domains:this.batchDomainsValidatorsService.DOMAINS})}openModal(){this.openedModal=this.modalService.open(this.modal,{centered:!0})}hide(){this.openedModal.close()}submit(){this.domains.emit(this.batchDomainsValidatorsService.getNotEmptyHosts(this.form.controls.domains.value)),this.form.reset(),this.hide()}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(b.a),a.Xb(v.k),a.Xb(jc.a),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-batch-domains-modal"]],viewQuery:function(e,t){var n;1&e&&a.Xc(Uc,!0),2&e&&a.Oc(n=a.tc())&&(t.modal=n.first)},inputs:{placeholder:"placeholder",action:"action"},outputs:{domains:"domains"},features:[a.Gb],ngContentSelectors:qc,decls:2,vars:0,consts:[["modal",""],[1,"modal-header"],[1,"modal-title"],["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group"],["for","hosts"],["formControlName","domains","type","text","id","hosts","name","hosts","ngbAutofocus","",1,"form-control",3,"placeholder","ngClass"],["class","form-error",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button",1,"action-button","action-button-cancel",3,"click","key.enter",6,"value"],["type","submit",1,"action-button-submit",3,"value","disabled"],[1,"form-error"],[4,"ngIf"]],template:function(e,t){1&e&&(a.Cc(Kc),a.ad(0,Qc,16,9,"ng-template",null,0,a.bd))},directives:[Fc.a,m.J,m.u,m.m,m.d,m.t,m.k,h.r,h.u],styles:["textarea[_ngcontent-%COMP%]{height:200px}"]}),e})();var Zc=n("j8ES");let ei=(()=>{class e{constructor(e,t,n){this.notifier=e,this.redundancyService=t,this.i18n=n}updateRedundancyState(){this.redundancyService.updateRedundancy(this.host,this.redundancyAllowed).subscribe(()=>{const e=this.i18n(this.redundancyAllowed?"enabled":"disabled");this.notifier.success(this.i18n("Redundancy for {{host}} is {{stateLabel}}",{host:this.host,stateLabel:e}))},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.f),a.Xb(Zc.a),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-redundancy-checkbox"]],inputs:{redundancyAllowed:"redundancyAllowed",host:"host"},decls:1,vars:2,consts:[[3,"inputName","ngModel","ngModelChange"]],template:function(e,t){1&e&&(a.dc(0,"my-peertube-checkbox",0),a.sc("ngModelChange",(function(e){return t.redundancyAllowed=e}))("ngModelChange",(function(){return t.updateRedundancyState()})),a.cc()),2&e&&a.Dc("inputName",t.host+"-redundancy-allowed")("ngModel",t.redundancyAllowed)},directives:[M.a,m.t,m.w],styles:[""]}),e})();var ti=function(e,t,n,o){return new(n||(n=Promise))((function(c,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function r(e){try{l(o.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}))};const ni=["batchDomainsModal"],oi=["currentPageReportTemplate","Showing " + "\ufffd0\ufffd" + " to " + "\ufffd1\ufffd" + " of " + "\ufffd2\ufffd" + " hosts"],ci=["action","Follow domains"],ii=["placeholder","\u8FC7\u6EE4\u5668\u2026"];var ai,ri,li,si,di,gi;function ui(e,t){if(1&e){const e=a.ec();a.dc(0,"div",9),a.dc(1,"div",10),a.dc(2,"input",11),a.jc(3,ii),a.sc("keyup",(function(t){return a.Rc(e),a.wc().onSearch(t)})),a.cc(),a.dc(4,"a",12),a.sc("click",(function(){return a.Rc(e),a.wc().resetSearch()})),a.cc(),a.dc(5,"span",13),a.hc(6,ai),a.cc(),a.cc(),a.dc(7,"a",14),a.sc("click",(function(){return a.Rc(e),a.wc().addDomainsToFollow()}))("key.enter",(function(){return a.Rc(e),a.wc().addDomainsToFollow()})),a.Yb(8,"my-global-icon",15),a.bc(9),a.hc(10,ri),a.ac(),a.cc(),a.cc()}}function bi(e,t){1&e&&(a.dc(0,"tr"),a.dc(1,"th"),a.hc(2,li),a.cc(),a.dc(3,"th",16),a.nc(4,si),a.Yb(5,"p-sortIcon",17),a.kc(),a.cc(),a.dc(6,"th",18),a.nc(7,di),a.Yb(8,"p-sortIcon",19),a.kc(),a.cc(),a.dc(9,"th",20),a.nc(10,gi),a.Yb(11,"p-sortIcon",21),a.kc(),a.cc(),a.Yb(12,"th",22),a.cc())}ai="Clear filters",ri="Follow domain",li="\u4E3B\u673A\u540D",si="\u72B6\u6001 " + "\ufffd#5\ufffd" + "" + "\ufffd/#5\ufffd" + "",di="\u521B\u5EFA\u65F6\u95F4 " + "\ufffd#8\ufffd" + "" + "\ufffd/#8\ufffd" + "",gi="Redundancy allowed " + "\ufffd#11\ufffd" + "" + "\ufffd/#11\ufffd" + "";const pi=["title","Open instance in a new tab"];var fi,hi,mi,vi,Ci;function Oi(e,t){1&e&&(a.dc(0,"td"),a.hc(1,fi),a.cc())}function Pi(e,t){1&e&&(a.dc(0,"td"),a.hc(1,hi),a.cc())}function _i(e,t){if(1&e){const e=a.ec();a.dc(0,"tr"),a.dc(1,"td"),a.dc(2,"a",23),a.jc(3,pi),a.cd(4),a.Yb(5,"span",24),a.cc(),a.cc(),a.ad(6,Oi,2,0,"td",25),a.ad(7,Pi,2,0,"td",25),a.dc(8,"td"),a.cd(9),a.xc(10,"date"),a.cc(),a.dc(11,"td"),a.Yb(12,"my-redundancy-checkbox",26),a.cc(),a.dc(13,"td",27),a.dc(14,"my-delete-button",28),a.sc("click",(function(){a.Rc(e);const n=t.$implicit;return a.wc().removeFollowing(n)})),a.cc(),a.cc(),a.cc()}if(2&e){const e=t.$implicit;a.Jb(2),a.Dc("href","https://"+e.following.host,a.Tc),a.Jb(2),a.ed(" ",e.following.host," "),a.Jb(2),a.Dc("ngIf","accepted"===e.state),a.Jb(1),a.Dc("ngIf","pending"===e.state),a.Jb(2),a.dd(a.zc(10,7,e.createdAt,"short")),a.Jb(3),a.Dc("host",e.following.host)("redundancyAllowed",e.following.hostRedundancyAllowed)}}function Mi(e,t){1&e&&(a.bc(0),a.hc(1,mi),a.ac())}function yi(e,t){1&e&&(a.bc(0),a.hc(1,vi),a.ac())}function wi(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",29),a.dc(2,"div",30),a.ad(3,Mi,2,0,"ng-container",25),a.ad(4,yi,2,0,"ng-container",25),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngIf",e.search),a.Jb(1),a.Dc("ngIf",!e.search)}}function xi(e,t){1&e&&(a.dc(0,"div",31),a.hc(1,Ci),a.cc())}fi="\u5DF2\u63A5\u53D7",hi="\u7B49\u5F85\u4E2D",mi="No host found matching current filters.",vi="Your instance is not following anyone.",Ci="\n      It seems that you are not on a HTTPS server. Your webserver needs to have TLS activated in order to follow servers.\n    ";let ki=(()=>{class e extends i.g{constructor(e,t,n,o){super(),this.notifier=e,this.confirmService=t,this.followService=n,this.i18n=o,this.following=[],this.totalRecords=0,this.sort={field:"createdAt",order:-1},this.pagination={count:this.rowsPerPage,start:0}}ngOnInit(){this.initialize()}getIdentifier(){return"FollowingListComponent"}addDomainsToFollow(){this.batchDomainsModal.openModal()}httpEnabled(){return"https:"===window.location.protocol}addFollowing(e){return ti(this,void 0,void 0,(function*(){this.followService.follow(e).subscribe(()=>{this.notifier.success(this.i18n("Follow request(s) sent!")),this.loadData()},e=>this.notifier.error(e.message))}))}removeFollowing(e){return ti(this,void 0,void 0,(function*(){!1!==(yield this.confirmService.confirm(this.i18n("Do you really want to unfollow {{host}}?",{host:e.following.host}),this.i18n("Unfollow")))&&this.followService.unfollow(e).subscribe(()=>{this.notifier.success(this.i18n("You are not following {{host}} anymore.",{host:e.following.host})),this.loadData()},e=>this.notifier.error(e.message))}))}loadData(){this.followService.getFollowing({pagination:this.pagination,sort:this.sort,search:this.search}).subscribe(e=>{this.following=e.data,this.totalRecords=e.total},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.f),a.Xb(Jc.a),a.Xb(gc.a),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-followers-list"]],viewQuery:function(e,t){var n;1&e&&a.gd(ni,!0),2&e&&a.Oc(n=a.tc())&&(t.batchDomainsModal=n.first)},features:[a.Gb],decls:11,vars:13,consts:[[3,"value","lazy","paginator","totalRecords","rows","rowsPerPageOptions","sortField","sortOrder","showCurrentPageReport","onLazyLoad","onPage",6,"currentPageReportTemplate"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"domains",6,"action"],["batchDomainsModal",""],["ngProjectAs","warning",5,["warning"]],["class","alert alert-warning",4,"ngIf"],[1,"caption"],[1,"ml-auto","has-feedback","has-clear"],["type","text","name","table-filter","id","table-filter",3,"keyup",6,"placeholder"],[1,"glyphicon","glyphicon-remove-sign","form-control-feedback","form-control-clear",3,"click"],[1,"sr-only"],[1,"ml-2","follow-button",3,"click","key.enter"],["iconName","add"],["pSortableColumn","state",2,"width","100px"],["field","state"],["pSortableColumn","createdAt",2,"width","150px"],["field","createdAt"],["pSortableColumn","redundancyAllowed",2,"width","160px"],["field","redundancyAllowed"],[2,"width","150px"],["target","_blank","rel","noopener noreferrer",3,"href",6,"title"],[1,"glyphicon","glyphicon-new-window"],[4,"ngIf"],[3,"host","redundancyAllowed"],[1,"action-cell"],[3,"click"],["colspan","6"],[1,"empty-table-message"],[1,"alert","alert-warning"]],template:function(e,t){1&e&&(a.dc(0,"p-table",0),a.jc(1,oi),a.sc("onLazyLoad",(function(e){return t.loadLazy(e)}))("onPage",(function(e){return t.onPage(e)})),a.ad(2,ui,11,0,"ng-template",1),a.ad(3,bi,13,0,"ng-template",2),a.ad(4,_i,15,10,"ng-template",3),a.ad(5,wi,5,2,"ng-template",4),a.cc(),a.dc(6,"my-batch-domains-modal",5,6),a.jc(8,ci),a.sc("domains",(function(e){return t.addFollowing(e)})),a.bc(9,7),a.ad(10,xi,2,0,"div",8),a.ac(),a.cc()),2&e&&(a.lc("{first}")("{last}")("{totalRecords}"),a.ic(1),a.Dc("value",t.following)("lazy",!0)("paginator",t.totalRecords>0)("totalRecords",t.totalRecords)("rows",t.rowsPerPage)("rowsPerPageOptions",t.rowsPerPageOptions)("sortField",t.sort.field)("sortOrder",t.sort.order)("showCurrentPageReport",!0),a.Jb(10),a.Dc("ngIf",!1===t.httpEnabled()))},directives:[te.q,k.d,Wc,h.u,Fc.a,te.p,te.o,ei,oe.a],pipes:[h.f],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}",'a[_ngcontent-%COMP%]{display:inline-block}a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{color:var(--mainForegroundColor)}a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:80%;color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]{justify-content:flex-end}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:250px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:250px){.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.follow-button[_ngcontent-%COMP%]{display:inline-block;border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.follow-button[_ngcontent-%COMP%]:active, .follow-button[_ngcontent-%COMP%]:focus, .follow-button[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.follow-button.focus-visible[_ngcontent-%COMP%], .follow-button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.follow-button[_ngcontent-%COMP%], .follow-button[_ngcontent-%COMP%]:active, .follow-button[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.follow-button[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.follow-button.disabled[_ngcontent-%COMP%], .follow-button[disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}.follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], .follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], .follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], .follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], .follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:#fff}.follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], .follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], .follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], .follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], .follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:#fff}.follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:#fff}.follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;width:20px;margin-right:5px;top:-1px}']}),e})();var Ii=n("fyHm");let Ti=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Rb({type:e,selectors:[["my-video-redundancy-information"]],inputs:{redundancyElement:"redundancyElement"},decls:23,vars:14,consts:[[1,"label"],["target","_blank","rel","noopener noreferrer",3,"href"]],template:function(e,t){1&e&&(a.dc(0,"div"),a.dc(1,"span",0),a.cd(2,"Url"),a.cc(),a.dc(3,"a",1),a.cd(4),a.cc(),a.cc(),a.dc(5,"div"),a.dc(6,"span",0),a.cd(7,"Created on"),a.cc(),a.dc(8,"span"),a.cd(9),a.xc(10,"date"),a.cc(),a.cc(),a.dc(11,"div"),a.dc(12,"span",0),a.cd(13,"Expires on"),a.cc(),a.dc(14,"span"),a.cd(15),a.xc(16,"date"),a.cc(),a.cc(),a.dc(17,"div"),a.dc(18,"span",0),a.cd(19,"Size"),a.cc(),a.dc(20,"span"),a.cd(21),a.xc(22,"bytes"),a.cc(),a.cc()),2&e&&(a.Jb(3),a.Dc("href",t.redundancyElement.fileUrl,a.Tc),a.Jb(1),a.dd(t.redundancyElement.fileUrl),a.Jb(5),a.dd(a.zc(10,5,t.redundancyElement.createdAt,"medium")),a.Jb(6),a.dd(a.zc(16,8,t.redundancyElement.expiresOn,"medium")),a.Jb(6),a.dd(a.zc(22,11,t.redundancyElement.size,1)))},pipes:[h.f,f.b],styles:[".label[_ngcontent-%COMP%]{display:inline-block;min-width:100px;font-weight:600}"]}),e})();var Si,Ai,Di,Ri,Ei,zi,Li=n("I5S5");function $i(e,t){1&e&&(a.dc(0,"th",19),a.hc(1,Ei),a.cc())}function Ji(e,t){1&e&&(a.dc(0,"th",20),a.hc(1,zi),a.cc())}function Ni(e,t){if(1&e&&(a.dc(0,"tr"),a.Yb(1,"th",13),a.ad(2,$i,2,0,"th",14),a.dc(3,"th",15),a.nc(4,Ri),a.Yb(5,"p-sortIcon",16),a.kc(),a.cc(),a.ad(6,Ji,2,0,"th",17),a.Yb(7,"th",18),a.cc()),2&e){const e=a.wc();a.Jb(2),a.Dc("ngIf",e.isDisplayingRemoteVideos()),a.Jb(4),a.Dc("ngIf",e.isDisplayingRemoteVideos())}}Si="\u6B63\u5E38\u663E\u793A",Ai="My videos duplicated by remote instances",Di="Remote videos duplicated by my instance",Ri="Video " + "\ufffd#5\ufffd" + "" + "\ufffd/#5\ufffd" + "",Ei="Strategy",zi="Total size";const ji=["ngbTooltip","List redundancies"],Fi=["title","Open video in a new tab"];function Ui(e,t){if(1&e&&(a.dc(0,"td"),a.cd(1),a.cc()),2&e){const e=a.wc().$implicit,t=a.wc();a.Jb(1),a.dd(t.getRedundancyStrategy(e))}}function Bi(e,t){if(1&e&&(a.dc(0,"td"),a.cd(1),a.xc(2,"bytes"),a.cc()),2&e){const e=a.wc().$implicit,t=a.wc();a.Jb(1),a.dd(a.zc(2,1,t.getTotalSize(e),1))}}function Gi(e,t){if(1&e){const e=a.ec();a.dc(0,"tr"),a.dc(1,"td"),a.dc(2,"span",21),a.jc(3,ji),a.Yb(4,"i",22),a.cc(),a.cc(),a.ad(5,Ui,2,1,"td",23),a.dc(6,"td"),a.dc(7,"a",24),a.jc(8,Fi),a.cd(9),a.Yb(10,"span",25),a.cc(),a.cc(),a.ad(11,Bi,3,4,"td",23),a.dc(12,"td",26),a.dc(13,"my-delete-button",27),a.sc("click",(function(){a.Rc(e);const n=t.$implicit;return a.wc().removeRedundancy(n)})),a.cc(),a.cc(),a.cc()}if(2&e){const e=t.expanded,n=t.$implicit,o=a.wc();a.Jb(2),a.Dc("pRowToggler",n),a.Jb(2),a.Dc("ngClass",e?"glyphicon glyphicon-menu-down":"glyphicon glyphicon-menu-right"),a.Jb(1),a.Dc("ngIf",o.isDisplayingRemoteVideos()),a.Jb(2),a.Dc("href",n.url,a.Tc),a.Jb(2),a.ed(" ",n.name," "),a.Jb(2),a.Dc("ngIf",o.isDisplayingRemoteVideos())}}function Vi(e,t){if(1&e&&(a.dc(0,"div",30),a.Yb(1,"my-video-redundancy-information",31),a.cc()),2&e){const e=t.$implicit;a.Jb(1),a.Dc("redundancyElement",e)}}function Yi(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",28),a.ad(2,Vi,2,1,"div",29),a.cc(),a.cc()),2&e){const e=a.wc().$implicit,t=a.wc();a.Jb(1),a.Kb("colspan",t.getColspan()),a.Jb(1),a.Dc("ngForOf",e.redundancies.files)}}function Hi(e,t){if(1&e&&(a.dc(0,"div"),a.Yb(1,"my-video-redundancy-information",31),a.cc()),2&e){const e=t.$implicit;a.Jb(1),a.Dc("redundancyElement",e)}}function Xi(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",28),a.ad(2,Hi,2,1,"div",32),a.cc(),a.cc()),2&e){const e=a.wc().$implicit,t=a.wc();a.Jb(1),a.Kb("colspan",t.getColspan()),a.Jb(1),a.Dc("ngForOf",e.redundancies.streamingPlaylists)}}function Qi(e,t){if(1&e&&(a.ad(0,Yi,3,2,"tr",23),a.ad(1,Xi,3,2,"tr",23)),2&e){const e=t.$implicit;a.Dc("ngIf",0!==e.redundancies.files.length),a.Jb(1),a.Dc("ngIf",0!==e.redundancies.streamingPlaylists.length)}}var Ki,qi,Wi,Zi;function ea(e,t){1&e&&(a.bc(0),a.hc(1,Ki),a.ac())}function ta(e,t){1&e&&(a.bc(0),a.hc(1,qi),a.ac())}function na(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",33),a.dc(2,"div",34),a.ad(3,ea,2,0,"ng-container",23),a.ad(4,ta,2,0,"ng-container",23),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngIf",e.isDisplayingRemoteVideos()),a.Jb(1),a.Dc("ngIf",!e.isDisplayingRemoteVideos())}}function oa(e,t){1&e&&(a.dc(0,"div",40),a.hc(1,Zi),a.cc())}function ca(e,t){if(1&e&&(a.dc(0,"div",41),a.Yb(1,"p-chart",42),a.cc()),2&e){const e=t.$implicit;a.Jb(1),a.Dc("data",e.graphData)("options",e.options)}}function ia(e,t){if(1&e&&(a.dc(0,"div",35),a.dc(1,"div",36),a.hc(2,Wi),a.cc(),a.dc(3,"div",37),a.ad(4,oa,2,0,"div",38),a.ad(5,ca,2,2,"div",39),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(4),a.Dc("ngIf",e.noRedundancies),a.Jb(1),a.Dc("ngForOf",e.redundanciesGraphsData)}}Ki="Your instance doesn't mirror any video.",qi="Your instance has no mirrored videos.",Wi="Enabled strategies stats",Zi="\n      No redundancy strategy is enabled on your instance.\n    ";let aa=(()=>{class e extends i.g{constructor(e,t,n,o,c){super(),this.notifier=e,this.confirmService=t,this.redundancyService=n,this.serverService=o,this.i18n=c,this.videoRedundancies=[],this.totalRecords=0,this.sort={field:"name",order:1},this.pagination={count:this.rowsPerPage,start:0},this.displayType="my-videos",this.redundanciesGraphsData=[],this.noRedundancies=!1,this.bytesPipe=new f.b}getIdentifier(){return"VideoRedundanciesListComponent"}ngOnInit(){this.loadSelectLocalStorage(),this.initialize(),this.serverService.getServerStats().subscribe(e=>{const t=e.videosRedundancy;0===t.length&&(this.noRedundancies=!0);for(const n of t)this.buildPieData(n)})}getColspan(){return this.isDisplayingRemoteVideos()?5:4}isDisplayingRemoteVideos(){return"remote-videos"===this.displayType}getTotalSize(e){return e.redundancies.files.reduce((e,t)=>e+t.size,0)+e.redundancies.streamingPlaylists.reduce((e,t)=>e+t.size,0)}onDisplayTypeChanged(){this.pagination.start=0,this.saveSelectLocalStorage(),this.loadData()}getRedundancyStrategy(e){return 0!==e.redundancies.files.length?e.redundancies.files[0].strategy:0!==e.redundancies.streamingPlaylists.length?e.redundancies.streamingPlaylists[0].strategy:""}buildPieData(e){const t=e.totalSize?e.totalSize-e.totalUsed:e.totalUsed;0!==t&&this.redundanciesGraphsData.push({stats:e,graphData:{labels:[this.i18n("Used"),this.i18n("Available")],datasets:[{data:[e.totalUsed,t],backgroundColor:["#FF6384","#36A2EB"],hoverBackgroundColor:["#FF6384","#36A2EB"]}]},options:{title:{display:!0,text:e.strategy},tooltips:{callbacks:{label:(e,t)=>{let n=t.labels[e.index];return n?n+=": ":n="",n+=this.bytesPipe.transform(t.datasets[e.datasetIndex].data[e.index],1),n}}}}})}removeRedundancy(e){return t=this,void 0,o=function*(){const t=this.i18n("Do you really want to remove this video redundancy?");!1!==(yield this.confirmService.confirm(t,this.i18n("Remove redundancy")))&&this.redundancyService.removeVideoRedundancies(e).subscribe(()=>{this.notifier.success(this.i18n("Video redundancies removed!")),this.loadData()},e=>this.notifier.error(e.message))},new((n=void 0)||(n=Promise))((function(e,c){function i(e){try{r(o.next(e))}catch(t){c(t)}}function a(e){try{r(o.throw(e))}catch(t){c(t)}}function r(t){var o;t.done?e(t.value):(o=t.value,o instanceof n?o:new n((function(e){e(o)}))).then(i,a)}r((o=o.apply(t,[])).next())}));var t,n,o}loadData(){this.redundancyService.listVideoRedundancies({pagination:this.pagination,sort:this.sort,target:this.displayType}).subscribe(e=>{this.videoRedundancies=e.data,this.totalRecords=e.total},e=>this.notifier.error(e.message))}loadSelectLocalStorage(){const t=Ii.a.getItem(e.LOCAL_STORAGE_DISPLAY_TYPE);t&&(this.displayType=t)}saveSelectLocalStorage(){Ii.a.setItem(e.LOCAL_STORAGE_DISPLAY_TYPE,this.displayType)}}return e.LOCAL_STORAGE_DISPLAY_TYPE="video-redundancies-list-display-type",e.\u0275fac=function(t){return new(t||e)(a.Xb(g.f),a.Xb(Jc.a),a.Xb(Zc.a),a.Xb(g.i),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-video-redundancies-list"]],features:[a.Gb],decls:16,vars:11,consts:[[1,"admin-sub-header"],[1,"select-filter-block"],["for","displayType"],[1,"peertube-select-container"],["id","displayType","name","displayType",1,"form-control",3,"ngModel","ngModelChange"],["value","my-videos"],["value","remote-videos"],["dataKey","id",3,"value","lazy","paginator","totalRecords","rows","rowsPerPageOptions","sortField","sortOrder","expandedRowKeys","onLazyLoad","onPage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],["class","redundancies-charts",4,"ngIf"],[2,"width","40px"],["style","width: 160px;",4,"ngIf"],["pSortableColumn","name"],["field","name"],["style","width: 100px;",4,"ngIf"],[2,"width","150px"],[2,"width","160px"],[2,"width","100px"],[1,"expander",3,"pRowToggler",6,"ngbTooltip"],[3,"ngClass"],[4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"href",6,"title"],[1,"glyphicon","glyphicon-new-window"],[1,"action-cell"],[3,"click"],[1,"expand-cell"],["class","expansion-block",4,"ngFor","ngForOf"],[1,"expansion-block"],[3,"redundancyElement"],[4,"ngFor","ngForOf"],["colspan","6"],[1,"empty-table-message"],[1,"redundancies-charts"],[1,"form-sub-title"],[1,"chart-blocks"],["class","no-results",4,"ngIf"],["class","chart-block",4,"ngFor","ngForOf"],[1,"no-results"],[1,"chart-block"],["type","pie","width","300px","height","300px",3,"data","options"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.dc(2,"label",2),a.hc(3,Si),a.cc(),a.dc(4,"div",3),a.dc(5,"select",4),a.sc("ngModelChange",(function(e){return t.displayType=e}))("ngModelChange",(function(){return t.onDisplayTypeChanged()})),a.dc(6,"option",5),a.hc(7,Ai),a.cc(),a.dc(8,"option",6),a.hc(9,Di),a.cc(),a.cc(),a.cc(),a.cc(),a.cc(),a.dc(10,"p-table",7),a.sc("onLazyLoad",(function(e){return t.loadLazy(e)}))("onPage",(function(e){return t.onPage(e)})),a.ad(11,Ni,8,2,"ng-template",8),a.ad(12,Gi,14,6,"ng-template",9),a.ad(13,Qi,2,2,"ng-template",10),a.ad(14,na,5,2,"ng-template",11),a.cc(),a.ad(15,ia,6,2,"div",12)),2&e&&(a.Jb(5),a.Dc("ngModel",t.displayType),a.Jb(5),a.Dc("value",t.videoRedundancies)("lazy",!0)("paginator",t.totalRecords>0)("totalRecords",t.totalRecords)("rows",t.rowsPerPage)("rowsPerPageOptions",t.rowsPerPageOptions)("sortField",t.sort.field)("sortOrder",t.sort.order)("expandedRowKeys",t.expandedRows),a.Jb(5),a.Dc("ngIf",t.isDisplayingRemoteVideos()))},directives:[m.F,m.t,m.w,m.y,m.I,te.q,k.d,h.u,te.p,te.o,v.y,te.k,h.r,oe.a,h.t,Ti,Li.b],pipes:[f.b],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}",'a[_ngcontent-%COMP%]{display:inline-block}a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{color:var(--mainForegroundColor)}a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:80%;color:var(--inputPlaceholderColor)}.expansion-block[_ngcontent-%COMP%]{margin-bottom:20px}.admin-sub-header[_ngcontent-%COMP%]{justify-content:flex-end}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]:not(:last-child){margin-right:10px}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:2px}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:auto;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;font-size:15px}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}@media screen and (max-width:auto){.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{width:100%}}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:15px;content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid transparent;border-top-color:#000;margin-top:-2px;z-index:100}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 35px 0 12px;width:calc(100% + 2px);position:relative;left:1px;border:1px solid #c6c6c6;background:transparent none;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:30px;text-overflow:ellipsis;color:var(--mainForegroundColor)}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.redundancies-charts[_ngcontent-%COMP%]{margin-top:50px}.redundancies-charts[_ngcontent-%COMP%]   .chart-blocks[_ngcontent-%COMP%]{display:flex;justify-content:center}.redundancies-charts[_ngcontent-%COMP%]   .chart-blocks[_ngcontent-%COMP%]   .chart-block[_ngcontent-%COMP%]{margin:0 20px}']}),e})();var ra,la,sa,da;ra="Follows & redundancies",la="\u6B63\u5728\u5173\u6CE8",sa="\u5173\u6CE8\u8005",da="Video redundancies";let ga=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Rb({type:e,selectors:[["ng-component"]],decls:11,vars:0,consts:[[1,"admin-sub-header"],[1,"form-sub-title"],[1,"admin-sub-nav"],["routerLink","following-list","routerLinkActive","active"],["routerLink","followers-list","routerLinkActive","active"],["routerLink","video-redundancies-list","routerLinkActive","active"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.hc(2,ra),a.cc(),a.dc(3,"div",2),a.dc(4,"a",3),a.hc(5,la),a.cc(),a.dc(6,"a",4),a.hc(7,sa),a.cc(),a.dc(8,"a",5),a.hc(9,da),a.cc(),a.cc(),a.cc(),a.Yb(10,"router-outlet"))},directives:[_.k,_.j,_.m],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}"]}),e})();const ua=[{path:"follows",component:ga,canActivate:[g.l],data:{userRight:ac.e.MANAGE_SERVER_FOLLOW},children:[{path:"",redirectTo:"following-list",pathMatch:"full"},{path:"following-list",component:ki,data:{meta:{title:"Following list"}}},{path:"followers-list",component:$c,data:{meta:{title:"Followers list"}}},{path:"following-add",redirectTo:"following-list"},{path:"video-redundancies-list",component:aa}]}];var ba=function(e){return e[e.NONE=0]="NONE",e[e.BY_PASS_VIDEO_AUTO_BLACKLIST=1]="BY_PASS_VIDEO_AUTO_BLACKLIST",e}({});let pa=(()=>{class e extends i.b{constructor(){super(...arguments),this.videoQuotaOptions=[],this.videoQuotaDailyOptions=[],this.roles=[]}ngOnInit(){this.serverConfig=this.serverService.getTmpConfig(),this.serverService.getConfig().subscribe(e=>this.serverConfig=e),this.buildRoles()}get subscribersCount(){return(this.user?this.user.account.followersCount:0)+(this.user?this.user.videoChannels.map(e=>e.followersCount).reduce((e,t)=>e+t,0):0)}isInBigView(){return this.screenService.getWindowInnerWidth()>1600}buildRoles(){this.roles=this.auth.getUser().role!==ac.f.ADMINISTRATOR?[{value:ac.f.USER.toString(),label:ac.b[ac.f.USER]}]:Object.keys(ac.b).map(e=>({value:e.toString(),label:ac.b[e]}))}isTranscodingInformationDisplayed(){const e=parseInt(this.form.value.videoQuota,10);return 0!==this.serverConfig.transcoding.enabledResolutions.length&&e>0}computeQuotaWithTranscoding(){const e=this.serverConfig.transcoding,t=e.enabledResolutions,n=ac.k.H_4K;let o=0;for(const c of t)o+=c/n;return e.hls.enabled&&(o*=2),o*parseInt(this.form.value.videoQuota,10)}resetPassword(){}buildAdminFlags(e){return e.byPassAutoBlacklist?ba.BY_PASS_VIDEO_AUTO_BLACKLIST:ba.NONE}buildQuotaOptions(){this.videoQuotaOptions=this.configService.videoQuotaOptions.map(e=>{var t;return{value:null===(t=e.value)||void 0===t?void 0:t.toString(),label:e.label,disabled:e.disabled}}),this.videoQuotaDailyOptions=this.configService.videoQuotaDailyOptions.map(e=>{var t;return{value:null===(t=e.value)||void 0===t?void 0:t.toString(),label:e.label,disabled:e.disabled}}),console.log(this.videoQuotaOptions,this.videoQuotaDailyOptions)}}return e.\u0275fac=function(t){return fa(t||e)},e.\u0275dir=a.Sb({type:e,features:[a.Gb]}),e})();const fa=a.fc(pa);var ha,ma,va=n("Qmuk"),Ca=n("fR23"),Oa=n("Ubd+"),Pa=n("vQJr");function _a(e,t){1&e&&(a.bc(0),a.hc(1,ha),a.ac())}function Ma(e,t){1&e&&(a.bc(0),a.hc(1,ma),a.ac())}function ya(e,t){if(1&e&&(a.dc(0,"div",9),a.cd(1),a.cc()),2&e){const e=a.wc();a.Jb(1),a.ed(" ",e.formErrors.password," ")}}ha="\u663E\u793A",ma="\u9690\u85CF";const wa=function(e){return{"input-error":e}};let xa=(()=>{class e extends i.b{constructor(e,t,n,o,c){super(),this.formValidatorService=e,this.userValidatorsService=t,this.notifier=n,this.userService=o,this.i18n=c,this.showPassword=!1}ngOnInit(){this.buildForm({password:this.userValidatorsService.USER_PASSWORD})}formValidated(){this.error=void 0,this.userService.updateUser(this.userId,this.form.value).subscribe(()=>{this.notifier.success(this.i18n("Password changed for user {{username}}.",{username:this.username}))},e=>this.error=e.message)}togglePasswordVisibility(){this.showPassword=!this.showPassword}getFormButtonTitle(){return this.i18n("Update user password")}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(b.a),a.Xb(va.a),a.Xb(g.f),a.Xb(Pa.a),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-user-password"]],inputs:{userId:"userId"},features:[a.Gb],decls:10,vars:10,consts:[["role","form",3,"formGroup","ngSubmit"],[1,"form-group"],[1,"input-group"],["id","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"input-group-append"],["type","button",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[4,"ngIf"],["class","form-error",4,"ngIf"],["type","submit",3,"value","disabled"],[1,"form-error"]],template:function(e,t){1&e&&(a.dc(0,"form",0),a.sc("ngSubmit",(function(){return t.formValidated()})),a.dc(1,"div",1),a.dc(2,"div",2),a.Yb(3,"input",3),a.dc(4,"div",4),a.dc(5,"button",5),a.sc("click",(function(){return t.togglePasswordVisibility()})),a.ad(6,_a,2,0,"ng-container",6),a.ad(7,Ma,2,0,"ng-container",6),a.cc(),a.cc(),a.cc(),a.ad(8,ya,2,1,"div",7),a.cc(),a.Yb(9,"input",8),a.cc()),2&e&&(a.Dc("formGroup",t.form),a.Jb(3),a.Dc("ngClass",a.Hc(8,wa,t.formErrors.password)),a.Kb("type",t.showPassword?"text":"password"),a.Jb(3),a.Dc("ngIf",!t.showPassword),a.Jb(1),a.Dc("ngIf",!!t.showPassword),a.Jb(1),a.Dc("ngIf",t.formErrors.password),a.Jb(1),a.Ec("value",t.getFormButtonTitle()),a.Dc("disabled",!t.form.valid))},directives:[m.J,m.u,m.m,m.d,m.t,m.k,h.r,h.u],styles:['input[_ngcontent-%COMP%]:not([type=submit]):not([type=checkbox]){display:inline-block;height:30px;width:340px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;display:block;border-top-right-radius:0;border-bottom-right-radius:0;border:1px solid #c6c6c6;border-right:none}input[_ngcontent-%COMP%]:not([type=submit]):not([type=checkbox])::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit]):not([type=checkbox])::-moz-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit]):not([type=checkbox])::-ms-input-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit]):not([type=checkbox])::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:340px){input[_ngcontent-%COMP%]:not([type=submit]):not([type=checkbox]){width:100%}}input[type=submit][_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer;margin-top:10px}input[type=submit].focus-visible[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}input[type=submit][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}input[type=submit].disabled[_ngcontent-%COMP%], input[type=submit][disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:#fff}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:#fff}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:#fff}.input-group-append[_ngcontent-%COMP%]{height:30px}']}),e})();var ka,Ia;ka="\u7528\u6237",Ia="\u7535\u5B50\u90AE\u4EF6\u5730\u5740";const Ta=["placeholder","mail@example.com"];var Sa,Aa,Da;Sa="\u89D2\u8272",Aa="\u89C6\u9891\u5B58\u50A8\u7A7A\u95F4",Da="\u5355\u65E5\u89C6\u9891\u4E0A\u4F20\u9650\u989D";const Ra=["labelText","Doesn't need review before a video goes public"];var Ea,za;function La(e,t){1&e&&(a.bc(0),a.dc(1,"li",33),a.hc(2,Ea),a.cc(),a.ac())}Ea="\u521B\u5EFA",za="\u7F16\u8F91";const $a=function(e){return["/accounts",e]};function Ja(e,t){if(1&e&&(a.dc(0,"a",36),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Dc("routerLink",a.Hc(2,$a,null==e.user?null:e.user.username)),a.Jb(1),a.dd(null==e.user?null:e.user.username)}}function Na(e,t){if(1&e&&(a.bc(0),a.dc(1,"li",33),a.hc(2,za),a.cc(),a.dc(3,"li",34),a.ad(4,Ja,2,4,"a",35),a.cc(),a.ac()),2&e){const e=a.wc();a.Jb(4),a.Dc("ngIf",e.user)}}var ja,Fa,Ua,Ba,Ga,Va;ja="{VAR_PLURAL, plural, =1 {Video} other {Videos}}",ja=a.mc(ja,{VAR_PLURAL:"\ufffd0\ufffd"}),Fa="{VAR_PLURAL, plural, =1 {Channel} other {Channels}}",Fa=a.mc(Fa,{VAR_PLURAL:"\ufffd0\ufffd"}),Ua="{VAR_PLURAL, plural, =1 {Subscriber} other {Subscribers}}",Ua=a.mc(Ua,{VAR_PLURAL:"\ufffd0\ufffd"}),Ba="Incriminated in reports",Ga="Authored reports accepted",Va="{VAR_PLURAL, plural, =1 {Comment} other {Comments}}",Va=a.mc(Va,{VAR_PLURAL:"\ufffd0\ufffd"});const Ya=function(){return["/admin/moderation/video-abuses/list"]},Ha=function(e){return{search:e}};function Xa(e,t){if(1&e&&(a.dc(0,"div",38),a.dc(1,"div"),a.dc(2,"a"),a.dc(3,"div",39),a.cd(4),a.xc(5,"bytes"),a.cc(),a.dc(6,"div",40),a.hc(7,ja),a.cc(),a.cc(),a.cc(),a.dc(8,"div"),a.dc(9,"a"),a.dc(10,"div",39),a.cd(11),a.cc(),a.dc(12,"div",40),a.hc(13,Fa),a.cc(),a.cc(),a.cc(),a.dc(14,"div"),a.dc(15,"a"),a.dc(16,"div",39),a.cd(17),a.cc(),a.dc(18,"div",40),a.hc(19,Ua),a.cc(),a.cc(),a.cc(),a.dc(20,"div"),a.dc(21,"a",41),a.dc(22,"div",39),a.cd(23),a.cc(),a.dc(24,"div",40),a.hc(25,Ba),a.cc(),a.cc(),a.cc(),a.dc(26,"div"),a.dc(27,"a",41),a.dc(28,"div",39),a.cd(29),a.cc(),a.dc(30,"div",40),a.hc(31,Ga),a.cc(),a.cc(),a.cc(),a.dc(32,"div"),a.dc(33,"a"),a.dc(34,"div",39),a.cd(35),a.cc(),a.dc(36,"div",40),a.hc(37,Va),a.cc(),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc(2);a.Jb(4),a.fd("",e.user.videosCount," (",a.zc(5,16,e.user.videoQuotaUsed,0),")"),a.Jb(3),a.lc(e.user.videosCount),a.ic(7),a.Jb(4),a.dd(e.user.videoChannels.length||0),a.Jb(2),a.lc(e.user.videoChannels.length),a.ic(13),a.Jb(4),a.dd(e.subscribersCount),a.Jb(2),a.lc(e.subscribersCount),a.ic(19),a.Jb(2),a.Dc("routerLink",a.Gc(19,Ya))("queryParams",a.Hc(20,Ha,"reportee:"+(null==e.user?null:e.user.account.displayName))),a.Jb(2),a.dd(e.user.videoAbusesCount),a.Jb(4),a.Dc("routerLink",a.Gc(22,Ya))("queryParams",a.Hc(23,Ha,"reporter:"+(null==e.user?null:e.user.account.displayName)+" state:accepted")),a.Jb(2),a.fd("",e.user.videoAbusesAcceptedCount," / ",e.user.videoAbusesCreatedCount,""),a.Jb(6),a.dd(e.user.videoCommentsCount),a.Jb(2),a.lc(e.user.videoCommentsCount),a.ic(37)}}function Qa(e,t){if(1&e&&a.ad(0,Xa,38,25,"div",37),2&e){const e=a.wc();a.Dc("ngIf",!e.isCreation()&&e.user)}}function Ka(e,t){}function qa(e,t){1&e&&a.ad(0,Ka,0,0,"ng-template")}function Wa(e,t){if(1&e&&(a.dc(0,"div",42),a.Yb(1,"div",43),a.dc(2,"div",44),a.ad(3,qa,1,0,void 0,45),a.cc(),a.cc()),2&e){a.wc();const e=a.Pc(8);a.Jb(3),a.Dc("ngTemplateOutlet",e)}}function Za(e,t){if(1&e&&(a.dc(0,"div",46),a.cd(1),a.cc()),2&e){const e=a.wc();a.Jb(1),a.dd(e.error)}}var er,tr;function nr(e,t){1&e&&(a.dc(0,"div",47),a.hc(1,er),a.cc())}function or(e,t){if(1&e&&(a.dc(0,"div",47),a.Yb(1,"my-actor-avatar-info",48),a.cc()),2&e){const e=a.wc();a.Jb(1),a.Dc("actor",e.user.account)}}er="NEW USER",tr="\u7528\u6237\u540D";const cr=["placeholder","john"];function ir(e,t){if(1&e&&(a.dc(0,"div",51),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.ed(" ",e.formErrors.username," ")}}const ar=function(e){return{"input-error":e}};function rr(e,t){if(1&e&&(a.dc(0,"div",15),a.dc(1,"label",49),a.hc(2,tr),a.cc(),a.dc(3,"input",50),a.jc(4,cr),a.cc(),a.ad(5,ir,2,1,"div",18),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngClass",a.Hc(2,ar,e.formErrors.username)),a.Jb(2),a.Dc("ngIf",e.formErrors.username)}}function lr(e,t){if(1&e&&(a.dc(0,"div",51),a.cd(1),a.cc()),2&e){const e=a.wc();a.Jb(1),a.ed(" ",e.formErrors.email," ")}}var sr,dr,gr,ur,br,pr,fr;function hr(e,t){1&e&&(a.bc(0),a.hc(1,dr),a.ac())}function mr(e,t){1&e&&(a.dc(0,"my-help"),a.ad(1,hr,2,0,"ng-template",54),a.cc())}function vr(e,t){if(1&e&&(a.dc(0,"div",51),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.ed(" ",e.formErrors.password," ")}}function Cr(e,t){if(1&e&&(a.dc(0,"div",15),a.dc(1,"label",52),a.hc(2,sr),a.cc(),a.ad(3,mr,2,0,"my-help",4),a.Yb(4,"input",53),a.ad(5,vr,2,1,"div",18),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngIf",e.isPasswordOptional()),a.Jb(1),a.Dc("ngClass",a.Hc(3,ar,e.formErrors.password)),a.Jb(1),a.Dc("ngIf",e.formErrors.password)}}function Or(e,t){if(1&e&&(a.dc(0,"option",55),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.value),a.Jb(1),a.ed(" ",e.label," ")}}function Pr(e,t){if(1&e&&(a.dc(0,"div",51),a.cd(1),a.cc()),2&e){const e=a.wc();a.Jb(1),a.ed(" ",e.formErrors.role," ")}}function _r(e,t){if(1&e&&(a.dc(0,"option",56),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.value)("disabled",e.disabled),a.Jb(1),a.ed(" ",e.label," ")}}function Mr(e,t){if(1&e&&(a.dc(0,"div",57),a.nc(1,gr),a.Yb(2,"strong"),a.Yb(3,"br"),a.xc(4,"bytes"),a.kc(),a.cc()),2&e){const e=a.wc();a.Jb(4),a.lc(a.zc(4,1,e.computeQuotaWithTranscoding(),0)),a.ic(1)}}function yr(e,t){if(1&e&&(a.dc(0,"option",56),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.value)("disabled",e.disabled),a.Jb(1),a.ed(" ",e.label," ")}}function wr(e,t){}function xr(e,t){1&e&&a.ad(0,wr,0,0,"ng-template")}function kr(e,t){if(1&e&&(a.dc(0,"div",58),a.ad(1,xr,1,0,void 0,45),a.cc()),2&e){a.wc();const e=a.Pc(8);a.Jb(1),a.Dc("ngTemplateOutlet",e)}}sr="\u5BC6\u7801",dr="\n              If you leave the password empty, an email will be sent to the user.\n            ",gr="\n          Transcoding is enabled. The video quota only takes into account " + "\ufffd#2\ufffd" + "original" + "\ufffd/#2\ufffd" + " video size. " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "\n          At most, this user could upload ~ " + "\ufffd0\ufffd" + ".\n        ",ur="DANGER ZONE",br="\u5411\u7528\u6237\u53D1\u9001\u5E26\u5BC6\u7801\u91CD\u7F6E\u94FE\u63A5\u7684\u90AE\u4EF6",pr="\u7D22\u8981\u65B0\u5BC6\u7801",fr="\u624B\u52A8\u8BBE\u7F6E\u7528\u6237\u5BC6\u7801";const Ir=function(e){return{"form-row":e}};function Tr(e,t){if(1&e){const e=a.ec();a.dc(0,"div",8),a.dc(1,"div",9),a.Yb(2,"div",59),a.dc(3,"div",47),a.hc(4,ur),a.cc(),a.cc(),a.dc(5,"div",12),a.dc(6,"div",60),a.dc(7,"div",61),a.dc(8,"label"),a.hc(9,br),a.cc(),a.dc(10,"button",62),a.sc("click",(function(){return a.Rc(e),a.wc().resetPassword()})),a.hc(11,pr),a.cc(),a.cc(),a.dc(12,"div",15),a.dc(13,"label"),a.hc(14,fr),a.cc(),a.Yb(15,"my-user-password",63),a.cc(),a.cc(),a.cc(),a.cc()}if(2&e){const e=a.wc();a.Jb(5),a.Dc("ngClass",a.Hc(2,Ir,e.isInBigView())),a.Jb(10),a.Dc("userId",e.user.id)}}const Sr=function(e){return{"col-5":e}};let Ar=(()=>{class e extends pa{constructor(e,t,n,o,c,i,a,r,l,s,d){super(),this.serverService=e,this.formValidatorService=t,this.configService=n,this.screenService=o,this.auth=c,this.userValidatorsService=i,this.route=a,this.router=r,this.notifier=l,this.userService=s,this.i18n=d,this.buildQuotaOptions()}ngOnInit(){super.ngOnInit();const e={role:ac.f.USER.toString(),videoQuota:"-1",videoQuotaDaily:"-1"};this.buildForm({username:this.userValidatorsService.USER_USERNAME,email:this.userValidatorsService.USER_EMAIL,password:this.isPasswordOptional()?this.userValidatorsService.USER_PASSWORD_OPTIONAL:this.userValidatorsService.USER_PASSWORD,role:this.userValidatorsService.USER_ROLE,videoQuota:this.userValidatorsService.USER_VIDEO_QUOTA,videoQuotaDaily:this.userValidatorsService.USER_VIDEO_QUOTA_DAILY,byPassAutoBlacklist:null},e)}formValidated(){this.error=void 0;const e=this.form.value;e.adminFlags=this.buildAdminFlags(this.form.value),e.videoQuota=parseInt(this.form.value.videoQuota,10),e.videoQuotaDaily=parseInt(this.form.value.videoQuotaDaily,10),this.userService.addUser(e).subscribe(()=>{this.notifier.success(this.i18n("User {{username}} created.",{username:e.username})),this.router.navigate(["/admin/users/list"])},e=>this.error=e.message)}isCreation(){return!0}isPasswordOptional(){return this.route.snapshot.data.serverConfig.email.enabled}getFormButtonTitle(){return this.i18n("Create user")}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.i),a.Xb(b.a),a.Xb(s),a.Xb(Ca.a),a.Xb(g.a),a.Xb(va.a),a.Xb(_.a),a.Xb(_.h),a.Xb(g.f),a.Xb(i.j),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-user-create"]],features:[a.Gb],decls:52,vars:28,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/users"],[4,"ngIf"],["dashboard",""],["class","form-row",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"form-row","mt-4"],[1,"form-group","col-12","col-lg-4","col-xl-3"],["id","user",1,"anchor"],["class","account-title",4,"ngIf"],[1,"form-group","form-group-right","col-12","col-lg-8","col-xl-9",3,"ngClass"],["role","form",3,"formGroup","ngClass","ngSubmit"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","email"],["type","text","id","email","formControlName","email","autocomplete","off",1,"form-control",3,"ngClass",6,"placeholder"],["class","form-error",4,"ngIf"],["for","role"],[1,"peertube-select-container"],["id","role","formControlName","role",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","videoQuota"],["id","videoQuota","formControlName","videoQuota",1,"form-control"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","transcoding-information",4,"ngIf"],["for","videoQuotaDaily"],["id","videoQuotaDaily","formControlName","videoQuotaDaily",1,"form-control"],["inputName","byPassAutoBlacklist","formControlName","byPassAutoBlacklist",6,"labelText"],["type","submit",3,"value","disabled"],["class","col-7",4,"ngIf"],["class","form-row mt-4",4,"ngIf"],[1,"breadcrumb-item","active"],["aria-current","page",1,"breadcrumb-item","active"],[3,"routerLink",4,"ngIf"],[3,"routerLink"],["class","dashboard",4,"ngIf"],[1,"dashboard"],[1,"dashboard-num"],[1,"dashboard-label"],[3,"routerLink","queryParams"],[1,"form-row"],[1,"col-12","col-xl-3"],[1,"form-group-right","col-12","col-xl-9"],[4,"ngTemplateOutlet"],[1,"alert","alert-danger"],[1,"account-title"],[3,"actor"],["for","username"],["type","text","id","username","formControlName","username",1,"form-control",3,"ngClass",6,"placeholder"],[1,"form-error"],["for","password"],["type","password","id","password","autocomplete","new-password","formControlName","password",1,"form-control",3,"ngClass"],["ptTemplate","customHtml"],[3,"value"],[3,"value","disabled"],[1,"transcoding-information"],[1,"col-7"],["id","danger",1,"anchor"],[1,"danger-zone"],[1,"form-group","reset-password-email"],[3,"click"],[3,"userId"]],template:function(e,t){1&e&&(a.dc(0,"nav",0),a.dc(1,"ol",1),a.dc(2,"li",2),a.dc(3,"a",3),a.hc(4,ka),a.cc(),a.cc(),a.ad(5,La,3,0,"ng-container",4),a.ad(6,Na,5,1,"ng-container",4),a.cc(),a.cc(),a.ad(7,Qa,1,1,"ng-template",null,5,a.bd),a.ad(9,Wa,4,1,"div",6),a.ad(10,Za,2,1,"div",7),a.dc(11,"div",8),a.dc(12,"div",9),a.Yb(13,"div",10),a.ad(14,nr,2,0,"div",11),a.ad(15,or,2,1,"div",11),a.cc(),a.dc(16,"div",12),a.dc(17,"form",13),a.sc("ngSubmit",(function(){return t.formValidated()})),a.ad(18,rr,6,4,"div",14),a.dc(19,"div",15),a.dc(20,"label",16),a.hc(21,Ia),a.cc(),a.dc(22,"input",17),a.jc(23,Ta),a.cc(),a.ad(24,lr,2,1,"div",18),a.cc(),a.ad(25,Cr,6,5,"div",14),a.dc(26,"div",15),a.dc(27,"label",19),a.hc(28,Sa),a.cc(),a.dc(29,"div",20),a.dc(30,"select",21),a.ad(31,Or,2,2,"option",22),a.cc(),a.cc(),a.ad(32,Pr,2,1,"div",18),a.cc(),a.dc(33,"div",15),a.dc(34,"label",23),a.hc(35,Aa),a.cc(),a.dc(36,"div",20),a.dc(37,"select",24),a.ad(38,_r,2,3,"option",25),a.cc(),a.cc(),a.ad(39,Mr,5,4,"div",26),a.cc(),a.dc(40,"div",15),a.dc(41,"label",27),a.hc(42,Da),a.cc(),a.dc(43,"div",20),a.dc(44,"select",28),a.ad(45,yr,2,3,"option",25),a.cc(),a.cc(),a.cc(),a.dc(46,"div",15),a.dc(47,"my-peertube-checkbox",29),a.jc(48,Ra),a.cc(),a.cc(),a.Yb(49,"input",30),a.cc(),a.ad(50,kr,2,1,"div",31),a.cc(),a.cc(),a.ad(51,Tr,16,4,"div",32)),2&e&&(a.Jb(5),a.Dc("ngIf",t.isCreation()),a.Jb(1),a.Dc("ngIf",!t.isCreation()),a.Jb(3),a.Dc("ngIf",!t.isInBigView()),a.Jb(1),a.Dc("ngIf",t.error),a.Jb(4),a.Dc("ngIf",t.isCreation()),a.Jb(1),a.Dc("ngIf",!t.isCreation()&&t.user),a.Jb(1),a.Dc("ngClass",a.Hc(22,Ir,t.isInBigView())),a.Jb(1),a.Dc("formGroup",t.form)("ngClass",a.Hc(24,Sr,t.isInBigView())),a.Jb(1),a.Dc("ngIf",t.isCreation()),a.Jb(4),a.Dc("ngClass",a.Hc(26,ar,t.formErrors.email)),a.Jb(2),a.Dc("ngIf",t.formErrors.email),a.Jb(1),a.Dc("ngIf",t.isCreation()),a.Jb(6),a.Dc("ngForOf",t.roles),a.Jb(1),a.Dc("ngIf",t.formErrors.role),a.Jb(6),a.Dc("ngForOf",t.videoQuotaOptions),a.Jb(1),a.Dc("ngIf",t.isTranscodingInformationDisplayed()),a.Jb(6),a.Dc("ngForOf",t.videoQuotaDailyOptions),a.Jb(4),a.Ec("value",t.getFormButtonTitle()),a.Dc("disabled",!t.form.valid),a.Jb(1),a.Dc("ngIf",t.isInBigView()),a.Jb(1),a.Dc("ngIf",!t.isCreation()&&t.user))},directives:[_.k,h.u,h.r,m.J,m.u,m.m,m.d,m.t,m.k,m.F,h.t,M.a,h.C,Oa.a,C.a,y.a,m.y,m.I,xa],pipes:[f.b],styles:['label[_ngcontent-%COMP%]{font-weight:400;font-size:100%}.account-title[_ngcontent-%COMP%]{text-transform:uppercase;color:var(--mainColor);font-weight:700;font-size:110%;margin-bottom:10px}input[_ngcontent-%COMP%]:not([type=submit]){display:inline-block;height:30px;width:340px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;display:block}input[_ngcontent-%COMP%]:not([type=submit])::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit])::-moz-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit])::-ms-input-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit])::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:340px){input[_ngcontent-%COMP%]:not([type=submit]){width:100%}}.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:340px;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;font-size:15px}.peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}@media screen and (max-width:340px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:15px;content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid transparent;border-top-color:#000;margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 35px 0 12px;width:calc(100% + 2px);position:relative;left:1px;border:1px solid #c6c6c6;background:transparent none;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:30px;text-overflow:ellipsis;color:var(--mainForegroundColor)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}button[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer;margin-top:10px}button.focus-visible[_ngcontent-%COMP%], button[_ngcontent-%COMP%]:focus, input[type=submit].focus-visible[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}button[_ngcontent-%COMP%], button[_ngcontent-%COMP%]:active, button[_ngcontent-%COMP%]:focus, input[type=submit][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}button[_ngcontent-%COMP%]:hover, input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}button.disabled[_ngcontent-%COMP%], button[disabled][_ngcontent-%COMP%], input[type=submit].disabled[_ngcontent-%COMP%], input[type=submit][disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:#fff}button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:#fff}button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:#fff}.transcoding-information[_ngcontent-%COMP%]{margin-top:5px;font-size:11px}.danger-zone[_ngcontent-%COMP%]   .reset-password-email[_ngcontent-%COMP%]{margin-bottom:30px}.danger-zone[_ngcontent-%COMP%]   .reset-password-email[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin-top:0}.breadcrumb[_ngcontent-%COMP%]{flex-wrap:wrap;padding:.75rem 1rem;margin-bottom:1rem;list-style:none;background-color:var(--submenuColor);border-radius:.25rem}.breadcrumb[_ngcontent-%COMP%], .breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]{display:flex}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--mainColor)}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%] + .breadcrumb-item[_ngcontent-%COMP%]{padding-left:.5rem}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%] + .breadcrumb-item[_ngcontent-%COMP%]:before{display:inline-block;padding-right:.5rem;color:#6c757d;content:"/"}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item.active[_ngcontent-%COMP%]{color:#6c757d}.dashboard[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:0 -5px;max-width:900px}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{box-sizing:border-box;flex:0 0 33.33333333%;padding:0 5px;margin-bottom:10px}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none;color:inherit;display:block;font-size:18px}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:active, .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important;opacity:.8}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:20px;background:var(--submenuColor);border-radius:4px;box-sizing:border-box;height:100%}.dashboard[_ngcontent-%COMP%]   .dashboard-num[_ngcontent-%COMP%], .dashboard[_ngcontent-%COMP%]   .dashboard-text[_ngcontent-%COMP%]{text-align:center;font-size:130%;line-height:21px;color:var(--mainForegroundColor);line-height:30px;margin-bottom:20px}.dashboard[_ngcontent-%COMP%]   .dashboard-label[_ngcontent-%COMP%]{font-size:90%;color:var(--inputPlaceholderColor);text-align:center}my-actor-avatar-info[_ngcontent-%COMP%]     .actor-img-edit-container, my-actor-avatar-info[_ngcontent-%COMP%]     .actor-info-followers, my-actor-avatar-info[_ngcontent-%COMP%]     .actor-info-username{display:none}']}),e})();var Dr,Rr,Er=n("SF7L");Dr="\u7528\u6237",Rr="\u7535\u5B50\u90AE\u4EF6\u5730\u5740";const zr=["placeholder","mail@example.com"];var Lr,$r,Jr;Lr="\u89D2\u8272",$r="\u89C6\u9891\u5B58\u50A8\u7A7A\u95F4",Jr="\u5355\u65E5\u89C6\u9891\u4E0A\u4F20\u9650\u989D";const Nr=["labelText","Doesn't need review before a video goes public"];var jr,Fr;function Ur(e,t){1&e&&(a.bc(0),a.dc(1,"li",33),a.hc(2,jr),a.cc(),a.ac())}jr="\u521B\u5EFA",Fr="\u7F16\u8F91";const Br=function(e){return["/accounts",e]};function Gr(e,t){if(1&e&&(a.dc(0,"a",36),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Dc("routerLink",a.Hc(2,Br,null==e.user?null:e.user.username)),a.Jb(1),a.dd(null==e.user?null:e.user.username)}}function Vr(e,t){if(1&e&&(a.bc(0),a.dc(1,"li",33),a.hc(2,Fr),a.cc(),a.dc(3,"li",34),a.ad(4,Gr,2,4,"a",35),a.cc(),a.ac()),2&e){const e=a.wc();a.Jb(4),a.Dc("ngIf",e.user)}}var Yr,Hr,Xr,Qr,Kr,qr;Yr="{VAR_PLURAL, plural, =1 {Video} other {Videos}}",Yr=a.mc(Yr,{VAR_PLURAL:"\ufffd0\ufffd"}),Hr="{VAR_PLURAL, plural, =1 {Channel} other {Channels}}",Hr=a.mc(Hr,{VAR_PLURAL:"\ufffd0\ufffd"}),Xr="{VAR_PLURAL, plural, =1 {Subscriber} other {Subscribers}}",Xr=a.mc(Xr,{VAR_PLURAL:"\ufffd0\ufffd"}),Qr="Incriminated in reports",Kr="Authored reports accepted",qr="{VAR_PLURAL, plural, =1 {Comment} other {Comments}}",qr=a.mc(qr,{VAR_PLURAL:"\ufffd0\ufffd"});const Wr=function(){return["/admin/moderation/video-abuses/list"]},Zr=function(e){return{search:e}};function el(e,t){if(1&e&&(a.dc(0,"div",38),a.dc(1,"div"),a.dc(2,"a"),a.dc(3,"div",39),a.cd(4),a.xc(5,"bytes"),a.cc(),a.dc(6,"div",40),a.hc(7,Yr),a.cc(),a.cc(),a.cc(),a.dc(8,"div"),a.dc(9,"a"),a.dc(10,"div",39),a.cd(11),a.cc(),a.dc(12,"div",40),a.hc(13,Hr),a.cc(),a.cc(),a.cc(),a.dc(14,"div"),a.dc(15,"a"),a.dc(16,"div",39),a.cd(17),a.cc(),a.dc(18,"div",40),a.hc(19,Xr),a.cc(),a.cc(),a.cc(),a.dc(20,"div"),a.dc(21,"a",41),a.dc(22,"div",39),a.cd(23),a.cc(),a.dc(24,"div",40),a.hc(25,Qr),a.cc(),a.cc(),a.cc(),a.dc(26,"div"),a.dc(27,"a",41),a.dc(28,"div",39),a.cd(29),a.cc(),a.dc(30,"div",40),a.hc(31,Kr),a.cc(),a.cc(),a.cc(),a.dc(32,"div"),a.dc(33,"a"),a.dc(34,"div",39),a.cd(35),a.cc(),a.dc(36,"div",40),a.hc(37,qr),a.cc(),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc(2);a.Jb(4),a.fd("",e.user.videosCount," (",a.zc(5,16,e.user.videoQuotaUsed,0),")"),a.Jb(3),a.lc(e.user.videosCount),a.ic(7),a.Jb(4),a.dd(e.user.videoChannels.length||0),a.Jb(2),a.lc(e.user.videoChannels.length),a.ic(13),a.Jb(4),a.dd(e.subscribersCount),a.Jb(2),a.lc(e.subscribersCount),a.ic(19),a.Jb(2),a.Dc("routerLink",a.Gc(19,Wr))("queryParams",a.Hc(20,Zr,"reportee:"+(null==e.user?null:e.user.account.displayName))),a.Jb(2),a.dd(e.user.videoAbusesCount),a.Jb(4),a.Dc("routerLink",a.Gc(22,Wr))("queryParams",a.Hc(23,Zr,"reporter:"+(null==e.user?null:e.user.account.displayName)+" state:accepted")),a.Jb(2),a.fd("",e.user.videoAbusesAcceptedCount," / ",e.user.videoAbusesCreatedCount,""),a.Jb(6),a.dd(e.user.videoCommentsCount),a.Jb(2),a.lc(e.user.videoCommentsCount),a.ic(37)}}function tl(e,t){if(1&e&&a.ad(0,el,38,25,"div",37),2&e){const e=a.wc();a.Dc("ngIf",!e.isCreation()&&e.user)}}function nl(e,t){}function ol(e,t){1&e&&a.ad(0,nl,0,0,"ng-template")}function cl(e,t){if(1&e&&(a.dc(0,"div",42),a.Yb(1,"div",43),a.dc(2,"div",44),a.ad(3,ol,1,0,void 0,45),a.cc(),a.cc()),2&e){a.wc();const e=a.Pc(8);a.Jb(3),a.Dc("ngTemplateOutlet",e)}}function il(e,t){if(1&e&&(a.dc(0,"div",46),a.cd(1),a.cc()),2&e){const e=a.wc();a.Jb(1),a.dd(e.error)}}var al,rl;function ll(e,t){1&e&&(a.dc(0,"div",47),a.hc(1,al),a.cc())}function sl(e,t){if(1&e&&(a.dc(0,"div",47),a.Yb(1,"my-actor-avatar-info",48),a.cc()),2&e){const e=a.wc();a.Jb(1),a.Dc("actor",e.user.account)}}al="NEW USER",rl="\u7528\u6237\u540D";const dl=["placeholder","john"];function gl(e,t){if(1&e&&(a.dc(0,"div",51),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.ed(" ",e.formErrors.username," ")}}const ul=function(e){return{"input-error":e}};function bl(e,t){if(1&e&&(a.dc(0,"div",15),a.dc(1,"label",49),a.hc(2,rl),a.cc(),a.dc(3,"input",50),a.jc(4,dl),a.cc(),a.ad(5,gl,2,1,"div",18),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngClass",a.Hc(2,ul,e.formErrors.username)),a.Jb(2),a.Dc("ngIf",e.formErrors.username)}}function pl(e,t){if(1&e&&(a.dc(0,"div",51),a.cd(1),a.cc()),2&e){const e=a.wc();a.Jb(1),a.ed(" ",e.formErrors.email," ")}}var fl,hl,ml,vl,Cl,Ol,Pl;function _l(e,t){1&e&&(a.bc(0),a.hc(1,hl),a.ac())}function Ml(e,t){1&e&&(a.dc(0,"my-help"),a.ad(1,_l,2,0,"ng-template",54),a.cc())}function yl(e,t){if(1&e&&(a.dc(0,"div",51),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.ed(" ",e.formErrors.password," ")}}function wl(e,t){if(1&e&&(a.dc(0,"div",15),a.dc(1,"label",52),a.hc(2,fl),a.cc(),a.ad(3,Ml,2,0,"my-help",4),a.Yb(4,"input",53),a.ad(5,yl,2,1,"div",18),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngIf",e.isPasswordOptional()),a.Jb(1),a.Dc("ngClass",a.Hc(3,ul,e.formErrors.password)),a.Jb(1),a.Dc("ngIf",e.formErrors.password)}}function xl(e,t){if(1&e&&(a.dc(0,"option",55),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.value),a.Jb(1),a.ed(" ",e.label," ")}}function kl(e,t){if(1&e&&(a.dc(0,"div",51),a.cd(1),a.cc()),2&e){const e=a.wc();a.Jb(1),a.ed(" ",e.formErrors.role," ")}}function Il(e,t){if(1&e&&(a.dc(0,"option",56),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.value)("disabled",e.disabled),a.Jb(1),a.ed(" ",e.label," ")}}function Tl(e,t){if(1&e&&(a.dc(0,"div",57),a.nc(1,ml),a.Yb(2,"strong"),a.Yb(3,"br"),a.xc(4,"bytes"),a.kc(),a.cc()),2&e){const e=a.wc();a.Jb(4),a.lc(a.zc(4,1,e.computeQuotaWithTranscoding(),0)),a.ic(1)}}function Sl(e,t){if(1&e&&(a.dc(0,"option",56),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.value)("disabled",e.disabled),a.Jb(1),a.ed(" ",e.label," ")}}function Al(e,t){}function Dl(e,t){1&e&&a.ad(0,Al,0,0,"ng-template")}function Rl(e,t){if(1&e&&(a.dc(0,"div",58),a.ad(1,Dl,1,0,void 0,45),a.cc()),2&e){a.wc();const e=a.Pc(8);a.Jb(1),a.Dc("ngTemplateOutlet",e)}}fl="\u5BC6\u7801",hl="\n              If you leave the password empty, an email will be sent to the user.\n            ",ml="\n          Transcoding is enabled. The video quota only takes into account " + "\ufffd#2\ufffd" + "original" + "\ufffd/#2\ufffd" + " video size. " + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "\n          At most, this user could upload ~ " + "\ufffd0\ufffd" + ".\n        ",vl="DANGER ZONE",Cl="\u5411\u7528\u6237\u53D1\u9001\u5E26\u5BC6\u7801\u91CD\u7F6E\u94FE\u63A5\u7684\u90AE\u4EF6",Ol="\u7D22\u8981\u65B0\u5BC6\u7801",Pl="\u624B\u52A8\u8BBE\u7F6E\u7528\u6237\u5BC6\u7801";const El=function(e){return{"form-row":e}};function zl(e,t){if(1&e){const e=a.ec();a.dc(0,"div",8),a.dc(1,"div",9),a.Yb(2,"div",59),a.dc(3,"div",47),a.hc(4,vl),a.cc(),a.cc(),a.dc(5,"div",12),a.dc(6,"div",60),a.dc(7,"div",61),a.dc(8,"label"),a.hc(9,Cl),a.cc(),a.dc(10,"button",62),a.sc("click",(function(){return a.Rc(e),a.wc().resetPassword()})),a.hc(11,Ol),a.cc(),a.cc(),a.dc(12,"div",15),a.dc(13,"label"),a.hc(14,Pl),a.cc(),a.Yb(15,"my-user-password",63),a.cc(),a.cc(),a.cc(),a.cc()}if(2&e){const e=a.wc();a.Jb(5),a.Dc("ngClass",a.Hc(2,El,e.isInBigView())),a.Jb(10),a.Dc("userId",e.user.id)}}const Ll=function(e){return{"col-5":e}};let $l=(()=>{class e extends pa{constructor(e,t,n,o,c,i,a,r,l,s,d){super(),this.formValidatorService=e,this.serverService=t,this.configService=n,this.screenService=o,this.auth=c,this.userValidatorsService=i,this.route=a,this.router=r,this.notifier=l,this.userService=s,this.i18n=d,this.buildQuotaOptions()}ngOnInit(){super.ngOnInit();const e={role:ac.f.USER.toString(),videoQuota:"-1",videoQuotaDaily:"-1"};this.buildForm({email:this.userValidatorsService.USER_EMAIL,role:this.userValidatorsService.USER_ROLE,videoQuota:this.userValidatorsService.USER_VIDEO_QUOTA,videoQuotaDaily:this.userValidatorsService.USER_VIDEO_QUOTA_DAILY,byPassAutoBlacklist:null},e),this.paramsSub=this.route.params.subscribe(e=>{this.userService.getUser(e.id,!0).subscribe(e=>this.onUserFetched(e),e=>this.error=e.message)})}ngOnDestroy(){this.paramsSub.unsubscribe()}formValidated(){this.error=void 0;const e=this.form.value;e.adminFlags=this.buildAdminFlags(this.form.value),e.videoQuota=parseInt(this.form.value.videoQuota,10),e.videoQuotaDaily=parseInt(this.form.value.videoQuotaDaily,10),this.userService.updateUser(this.user.id,e).subscribe(()=>{this.notifier.success(this.i18n("User {{username}} updated.",{username:this.user.username})),this.router.navigate(["/admin/users/list"])},e=>this.error=e.message)}isCreation(){return!1}isPasswordOptional(){return!1}getFormButtonTitle(){return this.i18n("Update user")}resetPassword(){this.userService.askResetPassword(this.user.email).subscribe(()=>{this.notifier.success(this.i18n("An email asking for password reset has been sent to {{username}}.",{username:this.user.username}))},e=>this.error=e.message)}onUserFetched(e){this.user=new Er.a(e),this.form.patchValue({email:e.email,role:e.role.toString(),videoQuota:e.videoQuota,videoQuotaDaily:e.videoQuotaDaily,byPassAutoBlacklist:e.adminFlags&ba.BY_PASS_VIDEO_AUTO_BLACKLIST})}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(b.a),a.Xb(g.i),a.Xb(s),a.Xb(Ca.a),a.Xb(g.a),a.Xb(va.a),a.Xb(_.a),a.Xb(_.h),a.Xb(g.f),a.Xb(i.j),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-user-update"]],features:[a.Gb],decls:52,vars:28,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/users"],[4,"ngIf"],["dashboard",""],["class","form-row",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"form-row","mt-4"],[1,"form-group","col-12","col-lg-4","col-xl-3"],["id","user",1,"anchor"],["class","account-title",4,"ngIf"],[1,"form-group","form-group-right","col-12","col-lg-8","col-xl-9",3,"ngClass"],["role","form",3,"formGroup","ngClass","ngSubmit"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","email"],["type","text","id","email","formControlName","email","autocomplete","off",1,"form-control",3,"ngClass",6,"placeholder"],["class","form-error",4,"ngIf"],["for","role"],[1,"peertube-select-container"],["id","role","formControlName","role",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","videoQuota"],["id","videoQuota","formControlName","videoQuota",1,"form-control"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","transcoding-information",4,"ngIf"],["for","videoQuotaDaily"],["id","videoQuotaDaily","formControlName","videoQuotaDaily",1,"form-control"],["inputName","byPassAutoBlacklist","formControlName","byPassAutoBlacklist",6,"labelText"],["type","submit",3,"value","disabled"],["class","col-7",4,"ngIf"],["class","form-row mt-4",4,"ngIf"],[1,"breadcrumb-item","active"],["aria-current","page",1,"breadcrumb-item","active"],[3,"routerLink",4,"ngIf"],[3,"routerLink"],["class","dashboard",4,"ngIf"],[1,"dashboard"],[1,"dashboard-num"],[1,"dashboard-label"],[3,"routerLink","queryParams"],[1,"form-row"],[1,"col-12","col-xl-3"],[1,"form-group-right","col-12","col-xl-9"],[4,"ngTemplateOutlet"],[1,"alert","alert-danger"],[1,"account-title"],[3,"actor"],["for","username"],["type","text","id","username","formControlName","username",1,"form-control",3,"ngClass",6,"placeholder"],[1,"form-error"],["for","password"],["type","password","id","password","autocomplete","new-password","formControlName","password",1,"form-control",3,"ngClass"],["ptTemplate","customHtml"],[3,"value"],[3,"value","disabled"],[1,"transcoding-information"],[1,"col-7"],["id","danger",1,"anchor"],[1,"danger-zone"],[1,"form-group","reset-password-email"],[3,"click"],[3,"userId"]],template:function(e,t){1&e&&(a.dc(0,"nav",0),a.dc(1,"ol",1),a.dc(2,"li",2),a.dc(3,"a",3),a.hc(4,Dr),a.cc(),a.cc(),a.ad(5,Ur,3,0,"ng-container",4),a.ad(6,Vr,5,1,"ng-container",4),a.cc(),a.cc(),a.ad(7,tl,1,1,"ng-template",null,5,a.bd),a.ad(9,cl,4,1,"div",6),a.ad(10,il,2,1,"div",7),a.dc(11,"div",8),a.dc(12,"div",9),a.Yb(13,"div",10),a.ad(14,ll,2,0,"div",11),a.ad(15,sl,2,1,"div",11),a.cc(),a.dc(16,"div",12),a.dc(17,"form",13),a.sc("ngSubmit",(function(){return t.formValidated()})),a.ad(18,bl,6,4,"div",14),a.dc(19,"div",15),a.dc(20,"label",16),a.hc(21,Rr),a.cc(),a.dc(22,"input",17),a.jc(23,zr),a.cc(),a.ad(24,pl,2,1,"div",18),a.cc(),a.ad(25,wl,6,5,"div",14),a.dc(26,"div",15),a.dc(27,"label",19),a.hc(28,Lr),a.cc(),a.dc(29,"div",20),a.dc(30,"select",21),a.ad(31,xl,2,2,"option",22),a.cc(),a.cc(),a.ad(32,kl,2,1,"div",18),a.cc(),a.dc(33,"div",15),a.dc(34,"label",23),a.hc(35,$r),a.cc(),a.dc(36,"div",20),a.dc(37,"select",24),a.ad(38,Il,2,3,"option",25),a.cc(),a.cc(),a.ad(39,Tl,5,4,"div",26),a.cc(),a.dc(40,"div",15),a.dc(41,"label",27),a.hc(42,Jr),a.cc(),a.dc(43,"div",20),a.dc(44,"select",28),a.ad(45,Sl,2,3,"option",25),a.cc(),a.cc(),a.cc(),a.dc(46,"div",15),a.dc(47,"my-peertube-checkbox",29),a.jc(48,Nr),a.cc(),a.cc(),a.Yb(49,"input",30),a.cc(),a.ad(50,Rl,2,1,"div",31),a.cc(),a.cc(),a.ad(51,zl,16,4,"div",32)),2&e&&(a.Jb(5),a.Dc("ngIf",t.isCreation()),a.Jb(1),a.Dc("ngIf",!t.isCreation()),a.Jb(3),a.Dc("ngIf",!t.isInBigView()),a.Jb(1),a.Dc("ngIf",t.error),a.Jb(4),a.Dc("ngIf",t.isCreation()),a.Jb(1),a.Dc("ngIf",!t.isCreation()&&t.user),a.Jb(1),a.Dc("ngClass",a.Hc(22,El,t.isInBigView())),a.Jb(1),a.Dc("formGroup",t.form)("ngClass",a.Hc(24,Ll,t.isInBigView())),a.Jb(1),a.Dc("ngIf",t.isCreation()),a.Jb(4),a.Dc("ngClass",a.Hc(26,ul,t.formErrors.email)),a.Jb(2),a.Dc("ngIf",t.formErrors.email),a.Jb(1),a.Dc("ngIf",t.isCreation()),a.Jb(6),a.Dc("ngForOf",t.roles),a.Jb(1),a.Dc("ngIf",t.formErrors.role),a.Jb(6),a.Dc("ngForOf",t.videoQuotaOptions),a.Jb(1),a.Dc("ngIf",t.isTranscodingInformationDisplayed()),a.Jb(6),a.Dc("ngForOf",t.videoQuotaDailyOptions),a.Jb(4),a.Ec("value",t.getFormButtonTitle()),a.Dc("disabled",!t.form.valid),a.Jb(1),a.Dc("ngIf",t.isInBigView()),a.Jb(1),a.Dc("ngIf",!t.isCreation()&&t.user))},directives:[_.k,h.u,h.r,m.J,m.u,m.m,m.d,m.t,m.k,m.F,h.t,M.a,h.C,Oa.a,C.a,y.a,m.y,m.I,xa],pipes:[f.b],styles:['label[_ngcontent-%COMP%]{font-weight:400;font-size:100%}.account-title[_ngcontent-%COMP%]{text-transform:uppercase;color:var(--mainColor);font-weight:700;font-size:110%;margin-bottom:10px}input[_ngcontent-%COMP%]:not([type=submit]){display:inline-block;height:30px;width:340px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;display:block}input[_ngcontent-%COMP%]:not([type=submit])::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit])::-moz-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit])::-ms-input-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit])::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:340px){input[_ngcontent-%COMP%]:not([type=submit]){width:100%}}.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:340px;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;font-size:15px}.peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}@media screen and (max-width:340px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:15px;content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid transparent;border-top-color:#000;margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 35px 0 12px;width:calc(100% + 2px);position:relative;left:1px;border:1px solid #c6c6c6;background:transparent none;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:30px;text-overflow:ellipsis;color:var(--mainForegroundColor)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}button[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer;margin-top:10px}button.focus-visible[_ngcontent-%COMP%], button[_ngcontent-%COMP%]:focus, input[type=submit].focus-visible[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}button[_ngcontent-%COMP%], button[_ngcontent-%COMP%]:active, button[_ngcontent-%COMP%]:focus, input[type=submit][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}button[_ngcontent-%COMP%]:hover, input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}button.disabled[_ngcontent-%COMP%], button[disabled][_ngcontent-%COMP%], input[type=submit].disabled[_ngcontent-%COMP%], input[type=submit][disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:#fff}button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:#fff}button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:#fff}.transcoding-information[_ngcontent-%COMP%]{margin-top:5px;font-size:11px}.danger-zone[_ngcontent-%COMP%]   .reset-password-email[_ngcontent-%COMP%]{margin-bottom:30px}.danger-zone[_ngcontent-%COMP%]   .reset-password-email[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin-top:0}.breadcrumb[_ngcontent-%COMP%]{flex-wrap:wrap;padding:.75rem 1rem;margin-bottom:1rem;list-style:none;background-color:var(--submenuColor);border-radius:.25rem}.breadcrumb[_ngcontent-%COMP%], .breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]{display:flex}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--mainColor)}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%] + .breadcrumb-item[_ngcontent-%COMP%]{padding-left:.5rem}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%] + .breadcrumb-item[_ngcontent-%COMP%]:before{display:inline-block;padding-right:.5rem;color:#6c757d;content:"/"}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item.active[_ngcontent-%COMP%]{color:#6c757d}.dashboard[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:0 -5px;max-width:900px}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{box-sizing:border-box;flex:0 0 33.33333333%;padding:0 5px;margin-bottom:10px}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none;color:inherit;display:block;font-size:18px}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:active, .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important;opacity:.8}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:20px;background:var(--submenuColor);border-radius:4px;box-sizing:border-box;height:100%}.dashboard[_ngcontent-%COMP%]   .dashboard-num[_ngcontent-%COMP%], .dashboard[_ngcontent-%COMP%]   .dashboard-text[_ngcontent-%COMP%]{text-align:center;font-size:130%;line-height:21px;color:var(--mainForegroundColor);line-height:30px;margin-bottom:20px}.dashboard[_ngcontent-%COMP%]   .dashboard-label[_ngcontent-%COMP%]{font-size:90%;color:var(--inputPlaceholderColor);text-align:center}my-actor-avatar-info[_ngcontent-%COMP%]     .actor-img-edit-container, my-actor-avatar-info[_ngcontent-%COMP%]     .actor-info-followers, my-actor-avatar-info[_ngcontent-%COMP%]     .actor-info-username{display:none}']}),e})();var Jl=n("92VT"),Nl=n("wJRF"),jl=n("eEm8"),Fl=n("lKr9"),Ul=function(e,t,n,o){return new(n||(n=Promise))((function(c,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function r(e){try{l(o.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}))};const Bl=["userBanModal"];var Gl,Vl;Gl="\u7528\u6237\u5217\u8868",Vl="\u521B\u5EFA\u7528\u6237";const Yl=["currentPageReportTemplate","Showing " + "\ufffd0\ufffd" + " to " + "\ufffd1\ufffd" + " of " + "\ufffd2\ufffd" + " users"],Hl=["placeholder","\u8FC7\u6EE4\u5668\u2026"];var Xl;Xl="Clear filters";const Ql=["label","\u6279\u91CF\u64CD\u4F5C"];function Kl(e,t){if(1&e&&(a.dc(0,"my-action-dropdown",17),a.jc(1,Ql),a.cc()),2&e){const e=a.wc(2);a.Dc("actions",e.bulkUserActions)("entry",e.selectedUsers)}}function ql(e,t){if(1&e){const e=a.ec();a.dc(0,"div",11),a.dc(1,"div"),a.ad(2,Kl,2,2,"my-action-dropdown",12),a.cc(),a.dc(3,"div",13),a.dc(4,"input",14),a.jc(5,Hl),a.sc("keyup",(function(t){return a.Rc(e),a.wc().onSearch(t)})),a.cc(),a.dc(6,"a",15),a.sc("click",(function(){return a.Rc(e),a.wc().resetSearch()})),a.cc(),a.dc(7,"span",16),a.hc(8,Xl),a.cc(),a.cc(),a.cc()}if(2&e){const e=a.wc();a.Jb(2),a.Dc("ngIf",e.isInSelectionMode())}}var Wl,Zl,es,ts,ns,os;function cs(e,t){1&e&&(a.dc(0,"tr"),a.dc(1,"th",18),a.Yb(2,"p-tableHeaderCheckbox"),a.cc(),a.Yb(3,"th",18),a.dc(4,"th",19),a.nc(5,Wl),a.Yb(6,"p-sortIcon",20),a.kc(),a.cc(),a.dc(7,"th"),a.hc(8,Zl),a.cc(),a.dc(9,"th",21),a.nc(10,es),a.Yb(11,"p-sortIcon",22),a.kc(),a.cc(),a.dc(12,"th",23),a.hc(13,ts),a.cc(),a.dc(14,"th",24),a.hc(15,ns),a.cc(),a.dc(16,"th",25),a.nc(17,os),a.Yb(18,"p-sortIcon",26),a.kc(),a.cc(),a.Yb(19,"th",27),a.cc())}Wl="\u7528\u6237\u540D " + "\ufffd#6\ufffd" + "" + "\ufffd/#6\ufffd" + "",Zl="\u7535\u5B50\u90AE\u4EF6\u5730\u5740",es="\u89C6\u9891\u6570\u9650\u5236 " + "\ufffd#11\ufffd" + "" + "\ufffd/#11\ufffd" + "",ts="\u89D2\u8272",ns="Auth plugin",os="\u521B\u5EFA\u65F6\u95F4 " + "\ufffd#18\ufffd" + "" + "\ufffd/#18\ufffd" + "";const is=["title","Open account in a new tab"];function as(e,t){if(1&e&&(a.dc(0,"span",43),a.Yb(1,"i",44),a.cc()),2&e){const e=a.wc(),t=e.expanded;a.Dc("pRowToggler",e.$implicit),a.Jb(1),a.Dc("ngClass",t?"glyphicon glyphicon-menu-down":"glyphicon glyphicon-menu-right")}}var rs;function ls(e,t){1&e&&(a.dc(0,"span",45),a.hc(1,rs),a.cc())}function ss(e,t){if(1&e&&(a.dc(0,"td",40),a.cd(1),a.cc()),2&e){const e=a.wc().$implicit;a.Dc("title",e.email),a.Jb(1),a.dd(e.email)}}rs="\uFF08\u5DF2\u5C01\u7981\uFF09";const ds=["title","\u7528\u6237\u7684\u90AE\u4EF6\u901A\u8FC7\u9A8C\u8BC1\u540E\u624D\u53EF\u4EE5\u767B\u5F55"];function gs(e,t){if(1&e&&(a.dc(0,"td",48),a.jc(1,ds),a.dc(2,"em"),a.cd(3),a.cc(),a.cc()),2&e){const e=a.wc(2).$implicit;a.Jb(3),a.ed("? ",e.email,"")}}const us=["title","\u7528\u6237\u7684\u90AE\u4EF6\u5DF2\u901A\u8FC7\u9A8C\u8BC1/\u7528\u6237\u6BCB\u9700\u9A8C\u8BC1\u90AE\u4EF6\u5373\u53EF\u767B\u5F55"];function bs(e,t){if(1&e&&(a.dc(0,"td",48),a.jc(1,us),a.cd(2),a.cc()),2&e){const e=a.wc(2).$implicit;a.Jb(2),a.ed(" \u2713 ",e.email," ")}}function ps(e,t){if(1&e&&(a.ad(0,gs,4,1,"td",46),a.ad(1,bs,3,1,"ng-template",null,47,a.bd)),2&e){const e=a.Pc(2),t=a.wc().$implicit;a.Dc("ngIf",!1===t.emailVerified)("ngIfElse",e)}}function fs(e,t){if(1&e&&(a.bc(0),a.cd(1),a.ac()),2&e){const e=a.wc().$implicit;a.Jb(1),a.dd(e.pluginAuth)}}function hs(e,t){if(1&e){const e=a.ec();a.dc(0,"my-user-moderation-dropdown",49),a.sc("userChanged",(function(){return a.Rc(e),a.wc(2).onUserChanged()}))("userDeleted",(function(){return a.Rc(e),a.wc(2).onUserChanged()})),a.cc()}if(2&e){const e=a.wc().$implicit;a.Dc("user",e)}}const ms=function(e){return{banned:e}},vs=function(e){return[e]};function Cs(e,t){if(1&e){const e=a.ec();a.dc(0,"tr",28),a.dc(1,"td"),a.Yb(2,"p-tableCheckbox",29),a.cc(),a.dc(3,"td",30),a.ad(4,as,2,2,"span",31),a.cc(),a.dc(5,"td"),a.dc(6,"a",32),a.jc(7,is),a.dc(8,"div",33),a.dc(9,"img",34),a.sc("error",(function(t){return a.Rc(e),a.wc().switchToDefaultAvatar(t)})),a.cc(),a.dc(10,"div"),a.cd(11),a.dc(12,"span",35),a.cd(13),a.cc(),a.cc(),a.cc(),a.ad(14,ls,2,0,"span",36),a.cc(),a.cc(),a.ad(15,ss,2,2,"td",37),a.ad(16,ps,3,2,"ng-template",null,38,a.bd),a.dc(18,"td"),a.cd(19),a.cc(),a.dc(20,"td"),a.cd(21),a.cc(),a.dc(22,"td"),a.ad(23,fs,2,1,"ng-container",39),a.cc(),a.dc(24,"td",40),a.cd(25),a.xc(26,"date"),a.cc(),a.dc(27,"td",41),a.ad(28,hs,1,1,"my-user-moderation-dropdown",42),a.cc(),a.cc()}if(2&e){const e=t.$implicit,n=a.Pc(17),o=a.wc();a.Dc("pSelectableRow",e)("ngClass",a.Hc(21,ms,e.blocked)),a.Jb(2),a.Dc("value",e),a.Jb(2),a.Dc("ngIf",e.blockedReason),a.Jb(2),a.Dc("routerLink",a.Hc(23,vs,"/accounts/"+e.username)),a.Jb(3),a.Dc("src",null==e||null==e.account||null==e.account.avatar?null:e.account.avatar.path,a.Tc),a.Jb(2),a.ed(" ",e.account.displayName," "),a.Jb(2),a.dd(e.username),a.Jb(1),a.Dc("ngIf",e.blocked),a.Jb(1),a.Dc("ngIf",!o.requiresEmailVerification||e.blocked)("ngIfElse",n),a.Jb(4),a.fd("",e.videoQuotaUsed," / ",e.videoQuota,""),a.Jb(2),a.dd(e.roleLabel),a.Jb(2),a.Dc("ngIf",e.pluginAuth),a.Jb(1),a.Dc("title",e.createdAt),a.Jb(1),a.dd(a.zc(26,18,e.createdAt,"short")),a.Jb(3),a.Dc("ngIf",!o.isInSelectionMode())}}var Os;function Ps(e,t){if(1&e&&(a.dc(0,"tr",50),a.dc(1,"td",51),a.dc(2,"span",52),a.hc(3,Os),a.cc(),a.cd(4),a.cc(),a.cc()),2&e){const e=t.$implicit;a.Jb(4),a.ed(" ",e.blockedReason," ")}}Os="\u5C01\u7981\u7406\u7531\uFF1A";let _s=(()=>{class e extends i.g{constructor(e,t,n,o,c,i){super(),this.notifier=e,this.confirmService=t,this.serverService=n,this.userService=o,this.auth=c,this.i18n=i,this.users=[],this.totalRecords=0,this.sort={field:"createdAt",order:1},this.pagination={count:this.rowsPerPage,start:0},this.selectedUsers=[],this.bulkUserActions=[]}get authUser(){return this.auth.getUser()}get requiresEmailVerification(){return this.serverConfig.signup.requiresEmailVerification}ngOnInit(){this.serverConfig=this.serverService.getTmpConfig(),this.serverService.getConfig().subscribe(e=>this.serverConfig=e),this.initialize(),this.bulkUserActions=[[{label:this.i18n("Delete"),description:this.i18n("Videos will be deleted, comments will be tombstoned."),handler:e=>this.removeUsers(e),isDisplayed:e=>e.every(e=>this.authUser.canManage(e))},{label:this.i18n("Ban"),description:this.i18n("User won't be able to login anymore, but videos and comments will be kept as is."),handler:e=>this.openBanUserModal(e),isDisplayed:e=>e.every(e=>this.authUser.canManage(e)&&!1===e.blocked)},{label:this.i18n("Unban"),handler:e=>this.unbanUsers(e),isDisplayed:e=>e.every(e=>this.authUser.canManage(e)&&!0===e.blocked)}],[{label:this.i18n("Set Email as Verified"),handler:e=>this.setEmailsAsVerified(e),isDisplayed:e=>this.requiresEmailVerification&&e.every(e=>this.authUser.canManage(e)&&!e.blocked&&!1===e.emailVerified)}]]}getIdentifier(){return"UserListComponent"}openBanUserModal(e){for(const t of e)if("root"===t.username)return void this.notifier.error(this.i18n("You cannot ban root."));this.userBanModal.openModal(e)}onUserChanged(){this.loadData()}switchToDefaultAvatar(e){e.target.src=Nl.a.GET_DEFAULT_AVATAR_URL()}unbanUsers(e){return Ul(this,void 0,void 0,(function*(){const t=this.i18n("Do you really want to unban {{num}} users?",{num:e.length});!1!==(yield this.confirmService.confirm(t,this.i18n("Unban")))&&this.userService.unbanUsers(e).subscribe(()=>{const t=this.i18n("{{num}} users unbanned.",{num:e.length});this.notifier.success(t),this.loadData()},e=>this.notifier.error(e.message))}))}removeUsers(e){return Ul(this,void 0,void 0,(function*(){for(const n of e)if("root"===n.username)return void this.notifier.error(this.i18n("You cannot delete root."));const t=this.i18n("If you remove these users, you will not be able to create others with the same username!");!1!==(yield this.confirmService.confirm(t,this.i18n("Delete")))&&this.userService.removeUser(e).subscribe(()=>{this.notifier.success(this.i18n("{{num}} users deleted.",{num:e.length})),this.loadData()},e=>this.notifier.error(e.message))}))}setEmailsAsVerified(e){return Ul(this,void 0,void 0,(function*(){this.userService.updateUsers(e,{emailVerified:!0}).subscribe(()=>{this.notifier.success(this.i18n("{{num}} users email set as verified.",{num:e.length})),this.loadData()},e=>this.notifier.error(e.message))}))}isInSelectionMode(){return 0!==this.selectedUsers.length}loadData(){this.selectedUsers=[],this.userService.getUsers(this.pagination,this.sort,this.search).subscribe(e=>{this.users=e.data,this.totalRecords=e.total},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.f),a.Xb(g.c),a.Xb(g.i),a.Xb(i.j),a.Xb(g.a),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-user-list"]],viewQuery:function(e,t){var n;1&e&&a.Xc(Bl,!0),2&e&&a.Oc(n=a.tc())&&(t.userBanModal=n.first)},features:[a.Gb],decls:15,vars:15,consts:[[1,"admin-sub-header"],[1,"form-sub-title"],["routerLink","/admin/users/create",1,"add-button"],["iconName","add"],["dataKey","id",3,"value","lazy","paginator","totalRecords","rows","rowsPerPageOptions","sortField","sortOrder","resizableColumns","selection","showCurrentPageReport","expandedRowKeys","onLazyLoad","selectionChange","onPage",6,"currentPageReportTemplate"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[3,"userBanned"],["userBanModal",""],[1,"caption"],["theme","orange",3,"actions","entry",4,"ngIf",6,"label"],[1,"has-feedback","has-clear"],["type","text","name","table-filter","id","table-filter",3,"keyup",6,"placeholder"],[1,"glyphicon","glyphicon-remove-sign","form-control-feedback","form-control-clear",3,"click"],[1,"sr-only"],["theme","orange",3,"actions","entry",6,"label"],[2,"width","40px"],["pResizableColumn","","pSortableColumn","username"],["field","username"],["pSortableColumn","videoQuotaUsed",2,"width","140px"],["field","videoQuotaUsed"],[2,"width","120px"],["pResizableColumn","",2,"width","140px"],["pSortableColumn","createdAt",2,"width","150px"],["field","createdAt"],[2,"width","50px"],[3,"pSelectableRow","ngClass"],[3,"value"],[1,"expand-cell"],["class","expander",3,"pRowToggler",4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"routerLink",6,"title"],[1,"chip","two-lines"],["alt","Avatar",1,"avatar",3,"src","error"],[1,"text-muted"],["class","banned-info",4,"ngIf"],[3,"title",4,"ngIf","ngIfElse"],["emailWithVerificationStatus",""],[4,"ngIf"],[3,"title"],[1,"action-cell"],["container","body",3,"user","userChanged","userDeleted",4,"ngIf"],[1,"expander",3,"pRowToggler"],[3,"ngClass"],[1,"banned-info"],[4,"ngIf","ngIfElse",6,"title"],["emailVerifiedNotFalse",""],[6,"title"],["container","body",3,"user","userChanged","userDeleted"],[1,"user-blocked-reason"],["colspan","7"],[1,"ban-reason-label"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.hc(2,Gl),a.cc(),a.dc(3,"a",2),a.Yb(4,"my-global-icon",3),a.bc(5),a.hc(6,Vl),a.ac(),a.cc(),a.cc(),a.dc(7,"p-table",4),a.jc(8,Yl),a.sc("onLazyLoad",(function(e){return t.loadLazy(e)}))("selectionChange",(function(e){return t.selectedUsers=e}))("onPage",(function(e){return t.onPage(e)})),a.ad(9,ql,9,1,"ng-template",5),a.ad(10,cs,20,0,"ng-template",6),a.ad(11,Cs,29,25,"ng-template",7),a.ad(12,Ps,5,1,"ng-template",8),a.cc(),a.dc(13,"my-user-ban-modal",9,10),a.sc("userBanned",(function(){return t.onUserChanged()})),a.cc()),2&e&&(a.Jb(7),a.lc("{first}")("{last}")("{totalRecords}"),a.ic(8),a.Dc("value",t.users)("lazy",!0)("paginator",t.totalRecords>0)("totalRecords",t.totalRecords)("rows",t.rowsPerPage)("rowsPerPageOptions",t.rowsPerPageOptions)("sortField",t.sort.field)("sortOrder",t.sort.order)("resizableColumns",!0)("selection",t.selectedUsers)("showCurrentPageReport",!0)("expandedRowKeys",t.expandedRows))},directives:[_.k,Fc.a,te.q,k.d,Jl.a,h.u,jl.a,te.s,te.j,te.p,te.o,te.m,h.r,te.r,te.k,Fl.a],pipes:[h.f],styles:['.add-button[_ngcontent-%COMP%]{display:inline-block;border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.add-button[_ngcontent-%COMP%]:active, .add-button[_ngcontent-%COMP%]:focus, .add-button[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.add-button.focus-visible[_ngcontent-%COMP%], .add-button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.add-button[_ngcontent-%COMP%], .add-button[_ngcontent-%COMP%]:active, .add-button[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.add-button[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.add-button.disabled[_ngcontent-%COMP%], .add-button[disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}.add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], .add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], .add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], .add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], .add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:#fff}.add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], .add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], .add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], .add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], .add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:#fff}.add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:#fff}.add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;width:20px;margin-right:5px;top:-1px}tr.banned[_ngcontent-%COMP%]{color:red}.banned-info[_ngcontent-%COMP%]{font-style:italic}.ban-reason-label[_ngcontent-%COMP%]{font-weight:600}.caption[_ngcontent-%COMP%]{justify-content:space-between}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:250px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:250px){.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}p-tableCheckbox[_ngcontent-%COMP%]{position:relative;top:-2.5px}.chip[_ngcontent-%COMP%]{align-items:center;border-radius:5rem;display:inline-flex;font-size:90%;color:var(--mainForegroundColor);line-height:1rem;margin:.1rem;max-width:320px;overflow:hidden;padding:.2rem .4rem;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}.chip[_ngcontent-%COMP%], .chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:1.2rem;vertical-align:middle}.chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-left:-.4rem;margin-right:.2rem;width:1.2rem;border-radius:50%;display:inline-block;line-height:1.25;position:relative}.chip.two-lines[_ngcontent-%COMP%]{height:2rem}.chip.two-lines[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:2rem;width:2rem}.chip.two-lines[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:2rem;margin-left:.1rem;margin-right:.1rem;justify-content:center}']}),e})(),Ms=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Rb({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&a.Yb(0,"router-outlet")},directives:[_.m],encapsulation:2}),e})();var ys=n("trhE");const ws=[{path:"users",component:Ms,canActivate:[g.l],data:{userRight:ac.e.MANAGE_USERS},children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:_s,data:{meta:{title:"Users list"}}},{path:"create",component:Ar,data:{meta:{title:"Create a user"}},resolve:{serverConfig:ys.a}},{path:"update/:id",component:$l,data:{meta:{title:"Update a user"}}}]}];var xs=n("joIj");const ks=["modal"];var Is,Ts;Is="\u8FD0\u8425\u5907\u6CE8",Ts="\n        \u6B64\u5907\u6CE8\u4EC5\u9650\u60A8\u548C\u5176\u4ED6\u76D1\u5BDF\u5458\u53EF\u89C1\u3002\n      ";const Ss=["value","\u53D6\u6D88"],As=["value","\u66F4\u65B0\u5907\u6CE8"];function Ds(e,t){if(1&e&&(a.dc(0,"div",12),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.ed(" ",e.formErrors.moderationComment," ")}}const Rs=function(e){return{"input-error":e}};function Es(e,t){if(1&e){const e=a.ec();a.dc(0,"div",1),a.dc(1,"h4",2),a.hc(2,Is),a.cc(),a.dc(3,"my-global-icon",3),a.sc("click",(function(){return a.Rc(e),a.wc().hide()})),a.cc(),a.cc(),a.dc(4,"div",4),a.dc(5,"form",5),a.sc("ngSubmit",(function(){return a.Rc(e),a.wc().banUser()})),a.dc(6,"div",6),a.dc(7,"textarea",7),a.cd(8,"        "),a.cc(),a.ad(9,Ds,2,1,"div",8),a.cc(),a.dc(10,"div",6),a.hc(11,Ts),a.cc(),a.dc(12,"div",9),a.dc(13,"input",10),a.jc(14,Ss),a.sc("click",(function(){return a.Rc(e),a.wc().hide()}))("key.enter",(function(){return a.Rc(e),a.wc().hide()})),a.cc(),a.dc(15,"input",11),a.jc(16,As),a.cc(),a.cc(),a.cc(),a.cc()}if(2&e){const e=a.wc();a.Jb(5),a.Dc("formGroup",e.form),a.Jb(2),a.Dc("ngClass",a.Hc(4,Rs,e.formErrors.moderationComment)),a.Jb(2),a.Dc("ngIf",e.formErrors.moderationComment),a.Jb(6),a.Dc("disabled",!e.form.valid)}}let zs=(()=>{class e extends i.b{constructor(e,t,n,o,c,i){super(),this.formValidatorService=e,this.modalService=t,this.notifier=n,this.videoAbuseService=o,this.videoAbuseValidatorsService=c,this.i18n=i,this.commentUpdated=new a.n}ngOnInit(){this.buildForm({moderationComment:this.videoAbuseValidatorsService.VIDEO_ABUSE_MODERATION_COMMENT})}openModal(e){this.abuseToComment=e,this.openedModal=this.modalService.open(this.modal,{centered:!0}),this.form.patchValue({moderationComment:this.abuseToComment.moderationComment})}hide(){this.abuseToComment=void 0,this.openedModal.close(),this.form.reset()}banUser(){return e=this,void 0,n=function*(){const e=this.form.value.moderationComment;this.videoAbuseService.updateVideoAbuse(this.abuseToComment,{moderationComment:e}).subscribe(()=>{this.notifier.success(this.i18n("Comment updated.")),this.commentUpdated.emit(e),this.hide()},e=>this.notifier.error(e.message))},new((t=void 0)||(t=Promise))((function(o,c){function i(e){try{r(n.next(e))}catch(t){c(t)}}function a(e){try{r(n.throw(e))}catch(t){c(t)}}function r(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,a)}r((n=n.apply(e,[])).next())}));var e,t,n}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(b.a),a.Xb(v.k),a.Xb(g.f),a.Xb(i.l),a.Xb(i.m),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-moderation-comment-modal"]],viewQuery:function(e,t){var n;1&e&&a.Xc(ks,!0),2&e&&a.Oc(n=a.tc())&&(t.modal=n.first)},outputs:{commentUpdated:"commentUpdated"},features:[a.Gb],decls:2,vars:0,consts:[["modal",""],[1,"modal-header"],[1,"modal-title"],["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group"],["formControlName","moderationComment","ngbAutofocus","","i18-placeholder","","placeholder","Comment this report\u2026",1,"form-control",3,"ngClass"],["class","form-error",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button",1,"action-button","action-button-cancel",3,"click","key.enter",6,"value"],["type","submit",1,"action-button-submit",3,"disabled",6,"value"],[1,"form-error"]],template:function(e,t){1&e&&a.ad(0,Es,17,6,"ng-template",null,0,a.bd)},directives:[Fc.a,m.J,m.u,m.m,m.d,m.t,m.k,h.r,h.u],styles:["textarea[_ngcontent-%COMP%]{display:inline-block;height:30px;width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;color:var(--textareaForegroundColor);background-color:var(--textareaBackgroundColor);height:100px;padding:5px 15px;font-size:15px}textarea[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:100%){textarea[_ngcontent-%COMP%]{width:100%}}"]}),e})();var Ls=n("aaN0"),$s=n("V8il"),Js=n("H9+z"),Ns=n("HB7e"),js=n("gNPL"),Fs=n("LTwV"),Us=n("pLZG"),Bs=n("jhN1"),Gs=function(e,t,n,o){return new(n||(n=Promise))((function(c,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function r(e){try{l(o.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}))};const Vs=["moderationCommentModal"],Ys=["currentPageReportTemplate","Showing " + "\ufffd0\ufffd" + " to " + "\ufffd1\ufffd" + " of " + "\ufffd2\ufffd" + " reports"];var Hs,Xs,Qs,Ks,qs,Ws;Hs="Advanced report filters",Xs="Unsolved reports",Qs="Accepted reports",Ks="Refused reports",qs="Reports with blacklisted videos",Ws="Reports with deleted videos";const Zs=["placeholder","\u8FC7\u6EE4\u5668\u2026"];var ed;ed="Clear filters";const td=function(){return["/admin/moderation/video-abuses/list"]},nd=function(){return{search:"state:pending"}},od=function(){return{search:"state:accepted"}},cd=function(){return{search:"state:rejected"}},id=function(){return{search:"videoIs:blacklisted"}},ad=function(){return{search:"videoIs:deleted"}};function rd(e,t){if(1&e){const e=a.ec();a.dc(0,"div",8),a.dc(1,"div",9),a.dc(2,"div",10),a.dc(3,"div",11),a.dc(4,"div",12),a.Yb(5,"span",13),a.cc(),a.dc(6,"div",14),a.dc(7,"h6",15),a.hc(8,Hs),a.cc(),a.dc(9,"a",16),a.hc(10,Xs),a.cc(),a.dc(11,"a",16),a.hc(12,Qs),a.cc(),a.dc(13,"a",16),a.hc(14,Ks),a.cc(),a.dc(15,"a",16),a.hc(16,qs),a.cc(),a.dc(17,"a",16),a.hc(18,Ws),a.cc(),a.cc(),a.cc(),a.dc(19,"input",17),a.jc(20,Zs),a.sc("keyup",(function(t){return a.Rc(e),a.wc().onAbuseSearch(t)})),a.cc(),a.dc(21,"a",18),a.sc("click",(function(){return a.Rc(e),a.wc().resetTableFilter()})),a.cc(),a.dc(22,"span",19),a.hc(23,ed),a.cc(),a.cc(),a.cc(),a.cc()}2&e&&(a.Jb(9),a.Dc("routerLink",a.Gc(10,td))("queryParams",a.Gc(11,nd)),a.Jb(2),a.Dc("routerLink",a.Gc(12,td))("queryParams",a.Gc(13,od)),a.Jb(2),a.Dc("routerLink",a.Gc(14,td))("queryParams",a.Gc(15,cd)),a.Jb(2),a.Dc("routerLink",a.Gc(16,td))("queryParams",a.Gc(17,id)),a.Jb(2),a.Dc("routerLink",a.Gc(18,td))("queryParams",a.Gc(19,ad)))}var ld,sd,dd,gd;function ud(e,t){1&e&&(a.dc(0,"tr"),a.Yb(1,"th",20),a.dc(2,"th",21),a.hc(3,ld),a.cc(),a.dc(4,"th"),a.hc(5,sd),a.cc(),a.dc(6,"th",22),a.nc(7,dd),a.Yb(8,"p-sortIcon",23),a.kc(),a.cc(),a.dc(9,"th",24),a.nc(10,gd),a.Yb(11,"p-sortIcon",25),a.kc(),a.cc(),a.Yb(12,"th",26),a.cc())}ld="\u4E3E\u62A5\u8005",sd="\u89C6\u9891",dd="\u521B\u5EFA\u65F6\u95F4 " + "\ufffd#8\ufffd" + "" + "\ufffd/#8\ufffd" + "",gd="\u72B6\u6001 " + "\ufffd#11\ufffd" + "" + "\ufffd/#11\ufffd" + "";const bd=["ngbTooltip","\u8BE6\u60C5"],pd=["title","Open account in a new tab"],fd=["label","\u64CD\u4F5C"],hd=["title","Open video in a new tab"];var md;md="by " + "\ufffd0\ufffd" + " on " + "\ufffd1\ufffd" + " ";const vd=["title","This video has been reported multiple times."];function Cd(e,t){if(1&e&&(a.dc(0,"span",51),a.jc(1,vd),a.cd(2),a.cc()),2&e){const e=a.wc(2).$implicit;a.Jb(2),a.fd(" ",e.nth,"/",e.count," ")}}function Od(e,t){1&e&&a.Yb(0,"span",52)}const Pd=["title","Video was blacklisted"];function _d(e,t){1&e&&(a.dc(0,"span",53),a.jc(1,Pd),a.cc())}function Md(e,t){if(1&e&&(a.dc(0,"td"),a.dc(1,"a",43),a.jc(2,hd),a.dc(3,"div",44),a.dc(4,"div",45),a.Yb(5,"img",46),a.ad(6,Cd,3,2,"span",47),a.cc(),a.dc(7,"div",48),a.dc(8,"div"),a.cd(9),a.ad(10,Od,1,0,"span",49),a.ad(11,_d,2,0,"span",50),a.cc(),a.dc(12,"div",33),a.hc(13,md),a.cc(),a.cc(),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc().$implicit,t=a.wc();a.Jb(1),a.Dc("href",t.getVideoUrl(e),a.Tc),a.Jb(4),a.Dc("src",e.video.thumbnailPath,a.Tc),a.Jb(1),a.Dc("ngIf",e.count>1),a.Jb(3),a.ed(" ",e.video.name," "),a.Jb(1),a.Dc("ngIf",!e.video.blacklisted),a.Jb(1),a.Dc("ngIf",e.video.blacklisted),a.Jb(2),a.lc(null==e.video.channel?null:e.video.channel.displayName)(null==e.video.channel?null:e.video.channel.host),a.ic(13)}}const yd=["title","Video was deleted"];var wd,xd;function kd(e,t){if(1&e&&(a.dc(0,"td",36),a.dc(1,"div",54),a.jc(2,yd),a.dc(3,"div",45),a.dc(4,"span"),a.hc(5,wd),a.cc(),a.cc(),a.dc(6,"div",48),a.dc(7,"div"),a.cd(8),a.Yb(9,"span",55),a.cc(),a.dc(10,"div",33),a.hc(11,xd),a.cc(),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc().$implicit;a.Dc("pRowToggler",e),a.Jb(8),a.ed(" ",e.video.name," "),a.Jb(3),a.lc(null==e.video.channel?null:e.video.channel.displayName)(null==e.video.channel?null:e.video.channel.host),a.ic(11)}}function Id(e,t){if(1&e&&a.Yb(0,"span",56),2&e){const e=a.wc().$implicit;a.Dc("title",e.state.label)}}function Td(e,t){if(1&e&&a.Yb(0,"span",57),2&e){const e=a.wc().$implicit;a.Dc("title",e.state.label)}}function Sd(e,t){if(1&e&&a.Yb(0,"span",58),2&e){const e=a.wc().$implicit;a.Dc("ngbTooltip",e.moderationComment)}}wd="Deleted",xd="by " + "\ufffd0\ufffd" + " on " + "\ufffd1\ufffd" + " ";const Ad=function(e){return{show:e}};function Dd(e,t){if(1&e){const e=a.ec();a.dc(0,"tr"),a.dc(1,"td",27),a.jc(2,bd),a.dc(3,"span",28),a.Yb(4,"i",29),a.cc(),a.cc(),a.dc(5,"td"),a.dc(6,"a",30),a.jc(7,pd),a.dc(8,"div",31),a.dc(9,"img",32),a.sc("error",(function(t){return a.Rc(e),a.wc().switchToDefaultAvatar(t)})),a.cc(),a.dc(10,"div"),a.cd(11),a.dc(12,"span",33),a.cd(13),a.cc(),a.cc(),a.cc(),a.cc(),a.cc(),a.ad(14,Md,14,8,"td",34),a.ad(15,kd,12,4,"td",35),a.dc(16,"td",36),a.cd(17),a.xc(18,"date"),a.cc(),a.dc(19,"td",37),a.ad(20,Id,1,1,"span",38),a.ad(21,Td,1,1,"span",39),a.ad(22,Sd,1,1,"span",40),a.cc(),a.dc(23,"td",41),a.dc(24,"my-action-dropdown",42),a.jc(25,fd),a.cc(),a.cc(),a.cc()}if(2&e){const e=t.expanded,n=t.$implicit,o=a.wc();a.Jb(1),a.Dc("pRowToggler",n),a.Jb(3),a.Dc("ngClass",e?"glyphicon glyphicon-menu-down":"glyphicon glyphicon-menu-right"),a.Jb(2),a.Dc("href",n.reporterAccount.url,a.Tc),a.Jb(3),a.Dc("src",null==n.reporterAccount.avatar?null:n.reporterAccount.avatar.path,a.Tc),a.Jb(2),a.ed(" ",n.reporterAccount.displayName," "),a.Jb(2),a.dd(n.reporterAccount.nameWithHost),a.Jb(1),a.Dc("ngIf",!n.video.deleted),a.Jb(1),a.Dc("ngIf",n.video.deleted),a.Jb(1),a.Dc("pRowToggler",n),a.Jb(1),a.dd(a.zc(18,17,n.createdAt,"short")),a.Jb(2),a.Dc("pRowToggler",n),a.Jb(1),a.Dc("ngIf",o.isVideoAbuseAccepted(n)),a.Jb(1),a.Dc("ngIf",o.isVideoAbuseRejected(n)),a.Jb(1),a.Dc("ngIf",n.moderationComment),a.Jb(2),a.Dc("ngClass",a.Hc(20,Ad,e))("actions",o.videoAbuseActions)("entry",n)}}function Rd(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",59),a.Yb(2,"my-video-abuse-details",60),a.cc(),a.cc()),2&e){const e=t.$implicit;a.Jb(2),a.Dc("videoAbuse",e)}}var Ed,zd;function Ld(e,t){1&e&&(a.bc(0),a.hc(1,Ed),a.ac())}function $d(e,t){1&e&&(a.bc(0),a.hc(1,zd),a.ac())}function Jd(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",61),a.dc(2,"div",62),a.ad(3,Ld,2,0,"ng-container",34),a.ad(4,$d,2,0,"ng-container",34),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngIf",e.search),a.Jb(1),a.Dc("ngIf",!e.search)}}Ed="No video abuses found matching current filters.",zd="No video abuses found.";let Nd=(()=>{class e extends i.g{constructor(e,t,n,o,c,i,a,r,l,s,d){super(),this.notifier=e,this.videoAbuseService=t,this.blocklistService=n,this.videoService=o,this.videoBlacklistService=c,this.confirmService=i,this.i18n=a,this.markdownRenderer=r,this.sanitizer=l,this.route=s,this.router=d,this.videoAbuses=[],this.totalRecords=0,this.sort={field:"createdAt",order:1},this.pagination={count:this.rowsPerPage,start:0},this.videoAbuseActions=[],this.videoAbuseActions=[[{label:this.i18n("Internal actions"),isHeader:!0},{label:this.i18n("Delete report"),handler:e=>this.removeVideoAbuse(e)},{label:this.i18n("Add note"),handler:e=>this.openModerationCommentModal(e),isDisplayed:e=>!e.moderationComment},{label:this.i18n("Update note"),handler:e=>this.openModerationCommentModal(e),isDisplayed:e=>!!e.moderationComment},{label:this.i18n("Mark as accepted"),handler:e=>this.updateVideoAbuseState(e,ac.g.ACCEPTED),isDisplayed:e=>!this.isVideoAbuseAccepted(e)},{label:this.i18n("Mark as rejected"),handler:e=>this.updateVideoAbuseState(e,ac.g.REJECTED),isDisplayed:e=>!this.isVideoAbuseRejected(e)}],[{label:this.i18n("Actions for the video"),isHeader:!0,isDisplayed:e=>!e.video.deleted},{label:this.i18n("Blacklist video"),isDisplayed:e=>!e.video.deleted&&!e.video.blacklisted,handler:e=>{this.videoBlacklistService.blacklistVideo(e.video.id,void 0,!0).subscribe(()=>{this.notifier.success(this.i18n("Video blacklisted.")),this.updateVideoAbuseState(e,ac.g.ACCEPTED)},e=>this.notifier.error(e.message))}},{label:this.i18n("Unblacklist video"),isDisplayed:e=>!e.video.deleted&&e.video.blacklisted,handler:e=>{this.videoBlacklistService.removeVideoFromBlacklist(e.video.id).subscribe(()=>{this.notifier.success(this.i18n("Video unblacklisted.")),this.updateVideoAbuseState(e,ac.g.ACCEPTED)},e=>this.notifier.error(e.message))}},{label:this.i18n("Delete video"),isDisplayed:e=>!e.video.deleted,handler:e=>Gs(this,void 0,void 0,(function*(){!1!==(yield this.confirmService.confirm(this.i18n("Do you really want to delete this video?"),this.i18n("Delete")))&&this.videoService.removeVideo(e.video.id).subscribe(()=>{this.notifier.success(this.i18n("Video deleted.")),this.updateVideoAbuseState(e,ac.g.ACCEPTED)},e=>this.notifier.error(e.message))}))}],[{label:this.i18n("Actions for the reporter"),isHeader:!0},{label:this.i18n("Mute reporter"),handler:e=>Gs(this,void 0,void 0,(function*(){const t=e.reporterAccount;this.blocklistService.blockAccountByInstance(t).subscribe(()=>{this.notifier.success(this.i18n("Account {{nameWithHost}} muted by the instance.",{nameWithHost:t.nameWithHost})),t.mutedByInstance=!0},e=>this.notifier.error(e.message))}))},{label:this.i18n("Mute server"),isDisplayed:e=>!e.reporterAccount.userId,handler:e=>Gs(this,void 0,void 0,(function*(){this.blocklistService.blockServerByInstance(e.reporterAccount.host).subscribe(()=>{this.notifier.success(this.i18n("Server {{host}} muted by the instance.",{host:e.reporterAccount.host}))},e=>this.notifier.error(e.message))}))}]]}ngOnInit(){this.initialize(),this.route.queryParams.pipe(Object(Us.a)(e=>null!=e.search)).subscribe(e=>{this.search=e.search,this.setTableFilter(e.search),this.loadData()})}ngAfterViewInit(){this.search&&this.setTableFilter(this.search)}getIdentifier(){return"VideoAbuseListComponent"}openModerationCommentModal(e){this.moderationCommentModal.openModal(e)}onModerationCommentUpdated(){this.loadData()}onAbuseSearch(e){this.onSearch(e),this.setQueryParams(e.target.value)}setQueryParams(e){const t={};e&&Object.assign(t,{search:e}),this.router.navigate(["/admin/moderation/video-abuses/list"],{queryParams:t})}resetTableFilter(){this.setTableFilter(""),this.setQueryParams(""),this.resetSearch()}isVideoAbuseAccepted(e){return e.state.id===ac.g.ACCEPTED}isVideoAbuseRejected(e){return e.state.id===ac.g.REJECTED}getVideoUrl(e){return Ls.a.buildClientUrl(e.video.uuid)}getVideoEmbed(e){const t=Object(Ns.c)(),n=Object(Js.b)({baseUrl:t+"/videos/embed/"+e.video.uuid,warningTitle:!1});return Object(Js.a)(n)}switchToDefaultAvatar(e){e.target.src=Nl.a.GET_DEFAULT_AVATAR_URL()}removeVideoAbuse(e){return Gs(this,void 0,void 0,(function*(){!1!==(yield this.confirmService.confirm(this.i18n("Do you really want to delete this abuse report?"),this.i18n("Delete")))&&this.videoAbuseService.removeVideoAbuse(e).subscribe(()=>{this.notifier.success(this.i18n("Abuse deleted.")),this.loadData()},e=>this.notifier.error(e.message))}))}updateVideoAbuseState(e,t){this.videoAbuseService.updateVideoAbuse(e,{state:t}).subscribe(()=>this.loadData(),e=>this.notifier.error(e.message))}loadData(){return this.videoAbuseService.getVideoAbuses({pagination:this.pagination,sort:this.sort,search:this.search}).subscribe(e=>Gs(this,void 0,void 0,(function*(){var t;this.totalRecords=e.total;const n=[];for(const o of e.data)Object.assign(o,{reasonHtml:yield this.toHtml(o.reason),moderationCommentHtml:yield this.toHtml(o.moderationComment),embedHtml:this.sanitizer.bypassSecurityTrustHtml(this.getVideoEmbed(o)),reporterAccount:new xs.a(o.reporterAccount)}),(null===(t=o.video.channel)||void 0===t?void 0:t.ownerAccount)&&(o.video.channel.ownerAccount=new xs.a(o.video.channel.ownerAccount)),o.updatedAt===o.createdAt&&delete o.updatedAt,n.push(o);this.videoAbuses=n})),e=>this.notifier.error(e.message))}toHtml(e){return this.markdownRenderer.textMarkdownToHTML(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.f),a.Xb(i.l),a.Xb(js.a),a.Xb(Fs.a),a.Xb(i.n),a.Xb(g.c),a.Xb(l.a),a.Xb($s.c),a.Xb(Bs.b),a.Xb(_.a),a.Xb(_.h))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-video-abuse-list"]],viewQuery:function(e,t){var n;1&e&&a.Xc(Vs,!0),2&e&&a.Oc(n=a.tc())&&(t.moderationCommentModal=n.first)},features:[a.Gb],decls:9,vars:14,consts:[["dataKey","id",3,"value","lazy","paginator","totalRecords","rows","rowsPerPageOptions","sortField","sortOrder","resizableColumns","showCurrentPageReport","expandedRowKeys","onLazyLoad","onPage",6,"currentPageReportTemplate"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],[3,"commentUpdated"],["moderationCommentModal",""],[1,"caption"],[1,"ml-auto"],[1,"input-group","has-feedback","has-clear"],["ngbDropdown","","placement","bottom-left auto","container","body",1,"input-group-prepend","c-hand"],["ngbDropdownToggle","",1,"input-group-text"],["aria-haspopup","menu","role","button",1,"caret"],["role","menu","ngbDropdownMenu",""],[1,"dropdown-header"],[1,"dropdown-item",3,"routerLink","queryParams"],["type","text","name","table-filter","id","table-filter",3,"keyup",6,"placeholder"],[1,"glyphicon","glyphicon-remove-sign","form-control-feedback","form-control-clear",3,"click"],[1,"sr-only"],[2,"width","40px"],["pResizableColumn","",2,"width","20%"],["pSortableColumn","createdAt",2,"width","150px"],["field","createdAt"],["pSortableColumn","state",2,"width","80px"],["field","state"],[2,"width","150px"],["placement","top-left","container","body",1,"c-hand",3,"pRowToggler",6,"ngbTooltip"],[1,"expander"],[3,"ngClass"],["target","_blank","rel","noopener noreferrer",3,"href",6,"title"],[1,"chip","two-lines"],["alt","Avatar",1,"avatar",3,"src","error"],[1,"text-muted"],[4,"ngIf"],["class","c-hand",3,"pRowToggler",4,"ngIf"],[1,"c-hand",3,"pRowToggler"],[1,"c-hand","video-abuse-states",3,"pRowToggler"],["class","glyphicon glyphicon-ok",3,"title",4,"ngIf"],["class","glyphicon glyphicon-remove",3,"title",4,"ngIf"],["container","body","placement","left auto","class","glyphicon glyphicon-comment",3,"ngbTooltip",4,"ngIf"],[1,"action-cell"],["placement","bottom-right top-right left auto","container","body",3,"ngClass","actions","entry",6,"label"],["target","_blank","rel","noopener noreferrer",1,"video-table-video-link",3,"href",6,"title"],[1,"video-table-video"],[1,"video-table-video-image"],[3,"src"],["class","video-table-video-image-label",4,"ngIf",6,"title"],[1,"video-table-video-text"],["class","glyphicon glyphicon-new-window",4,"ngIf"],["class","glyphicon glyphicon-ban-circle",4,"ngIf",6,"title"],[1,"video-table-video-image-label",6,"title"],[1,"glyphicon","glyphicon-new-window"],[1,"glyphicon","glyphicon-ban-circle",6,"title"],[1,"video-table-video",6,"title"],[1,"glyphicon","glyphicon-trash"],[1,"glyphicon","glyphicon-ok",3,"title"],[1,"glyphicon","glyphicon-remove",3,"title"],["container","body","placement","left auto",1,"glyphicon","glyphicon-comment",3,"ngbTooltip"],["colspan","6",1,"expand-cell"],[3,"videoAbuse"],["colspan","6"],[1,"empty-table-message"]],template:function(e,t){1&e&&(a.dc(0,"p-table",0),a.jc(1,Ys),a.sc("onLazyLoad",(function(e){return t.loadLazy(e)}))("onPage",(function(e){return t.onPage(e)})),a.ad(2,rd,24,20,"ng-template",1),a.ad(3,ud,13,0,"ng-template",2),a.ad(4,Dd,26,22,"ng-template",3),a.ad(5,Rd,3,1,"ng-template",4),a.ad(6,Jd,5,2,"ng-template",5),a.cc(),a.dc(7,"my-moderation-comment-modal",6,7),a.sc("commentUpdated",(function(){return t.onModerationCommentUpdated()})),a.cc()),2&e&&(a.lc("{first}")("{last}")("{totalRecords}"),a.ic(1),a.Dc("value",t.videoAbuses)("lazy",!0)("paginator",t.totalRecords>0)("totalRecords",t.totalRecords)("rows",t.rowsPerPage)("rowsPerPageOptions",t.rowsPerPageOptions)("sortField",t.sort.field)("sortOrder",t.sort.order)("resizableColumns",!0)("showCurrentPageReport",!0)("expandedRowKeys",t.expandedRows))},styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.caption[_ngcontent-%COMP%]{justify-content:flex-end}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:250px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;flex-grow:1}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:250px){.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}.moderation-expanded[_ngcontent-%COMP%]{font-size:90%}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;vertical-align:top;text-align:right}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]{display:inline-flex;word-wrap:break-word}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0!important}.video-table-states[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:.4rem}.screenratio[_ngcontent-%COMP%]{position:relative;width:100%;height:0;padding-bottom:56%}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;position:absolute;height:100%;width:100%;display:inline-flex;justify-content:center;align-items:center;color:var(--inputPlaceholderColor)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{text-decoration:none!important}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.screenratio[_ngcontent-%COMP%]   div.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.screenratio[_ngcontent-%COMP%]     iframe{position:absolute;width:100%!important;height:100%!important;left:0;top:0}.chip[_ngcontent-%COMP%]{align-items:center;border-radius:5rem;display:inline-flex;font-size:90%;color:var(--mainForegroundColor);line-height:1rem;margin:.1rem;max-width:320px;overflow:hidden;padding:.2rem .4rem;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}.chip[_ngcontent-%COMP%], .chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:1.2rem;vertical-align:middle}.chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-left:-.4rem;margin-right:.2rem;width:1.2rem;border-radius:50%;display:inline-block;line-height:1.25;position:relative}.chip.two-lines[_ngcontent-%COMP%]{height:2rem}.chip.two-lines[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:2rem;width:2rem}.chip.two-lines[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:2rem;margin-left:.1rem;margin-right:.1rem;justify-content:center}my-action-dropdown.show[_ngcontent-%COMP%]     .dropdown-root{display:block!important}.video-table-video-link[_ngcontent-%COMP%]{position:relative;top:3px}.video-table-video-link[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]{display:inline-flex}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;height:45px;width:80px;margin-right:.5rem;border-radius:2px;border:none;background:transparent;display:inline-flex;justify-content:center;align-items:center;position:relative}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover{text-decoration:none!important}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--inputPlaceholderColor)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .video-table-video-image-label[_ngcontent-%COMP%]{display:inline-block;background-color:rgba(0,0,0,.7);color:#fff;position:absolute;border-radius:3px;font-size:10px;padding:0 3px;line-height:1.3;bottom:2px;right:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;justify-content:center;font-size:90%;color:var(--mainForegroundColor);line-height:1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:80%;color:grey;margin-left:.1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{font-size:80%}",".video-details-date-updated[_ngcontent-%COMP%]{font-size:90%;margin-top:.1rem}.video-details-links[_ngcontent-%COMP%]:active, .video-details-links[_ngcontent-%COMP%]:focus, .video-details-links[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.video-abuse-states[_ngcontent-%COMP%]   .glyphicon-comment[_ngcontent-%COMP%]{margin-left:.5rem}.input-group[_ngcontent-%COMP%]{width:300px;min-height:30px;padding-top:0;padding-bottom:0}.input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{font-size:14px;color:grey}.input-group[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{margin-left:0}"]}),e})();var jd=function(e,t,n,o){return new(n||(n=Promise))((function(c,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function r(e){try{l(o.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}))};const Fd=["currentPageReportTemplate","Showing " + "\ufffd0\ufffd" + " to " + "\ufffd1\ufffd" + " of " + "\ufffd2\ufffd" + " blacklisted videos"],Ud=["placeholder","\u8FC7\u6EE4\u5668\u2026"];var Bd,Gd,Vd,Yd,Hd;function Xd(e,t){if(1&e){const e=a.ec();a.dc(0,"div",6),a.dc(1,"div",7),a.dc(2,"input",8),a.jc(3,Ud),a.sc("keyup",(function(t){return a.Rc(e),a.wc().onSearch(t)})),a.cc(),a.dc(4,"a",9),a.sc("click",(function(){return a.Rc(e),a.wc().resetSearch()})),a.cc(),a.dc(5,"span",10),a.hc(6,Bd),a.cc(),a.cc(),a.cc()}}function Qd(e,t){1&e&&(a.dc(0,"tr"),a.Yb(1,"th",11),a.dc(2,"th",12),a.nc(3,Gd),a.Yb(4,"p-sortIcon",13),a.kc(),a.cc(),a.dc(5,"th",14),a.hc(6,Vd),a.cc(),a.dc(7,"th",15),a.hc(8,Yd),a.cc(),a.dc(9,"th",16),a.nc(10,Hd),a.Yb(11,"p-sortIcon",17),a.kc(),a.cc(),a.Yb(12,"th",18),a.cc())}Bd="Clear filters",Gd="Video " + "\ufffd#4\ufffd" + "" + "\ufffd/#4\ufffd" + "",Vd="\u654F\u611F",Yd="\u53BB\u8054\u90A6\u5316",Hd="\u65E5\u671F " + "\ufffd#11\ufffd" + "" + "\ufffd/#11\ufffd" + "";const Kd=["title","Open video in a new tab"],qd=["title","Video was blacklisted"],Wd=["label","\u64CD\u4F5C"];function Zd(e,t){1&e&&a.Yb(0,"td")}const eg=["ngbTooltip","\u8BE6\u60C5"];function tg(e,t){if(1&e&&(a.dc(0,"td",30),a.jc(1,eg),a.dc(2,"span",31),a.Yb(3,"i",32),a.cc(),a.cc()),2&e){const e=a.wc(),t=e.expanded;a.Dc("pRowToggler",e.$implicit),a.Jb(3),a.Dc("ngClass",t?"glyphicon glyphicon-menu-down":"glyphicon glyphicon-menu-right")}}function ng(e,t){if(1&e&&(a.bc(0),a.dc(1,"td",33),a.cd(2),a.cc(),a.dc(3,"td",33),a.cd(4),a.cc(),a.dc(5,"td",33),a.cd(6),a.xc(7,"date"),a.cc(),a.ac()),2&e){const e=a.wc().$implicit,t=a.wc();a.Jb(1),a.Dc("pRowToggler",e),a.Jb(1),a.dd(t.booleanToText(e.video.nsfw)),a.Jb(1),a.Dc("pRowToggler",e),a.Jb(1),a.dd(t.booleanToText(e.unfederated)),a.Jb(1),a.Dc("pRowToggler",e),a.Jb(1),a.dd(a.zc(7,6,e.createdAt,"short"))}}function og(e,t){if(1&e&&(a.bc(0),a.dc(1,"td"),a.cd(2),a.cc(),a.dc(3,"td"),a.cd(4),a.cc(),a.dc(5,"td"),a.cd(6),a.xc(7,"date"),a.cc(),a.ac()),2&e){const e=a.wc().$implicit,t=a.wc();a.Jb(2),a.dd(t.booleanToText(e.video.nsfw)),a.Jb(2),a.dd(t.booleanToText(e.unfederated)),a.Jb(2),a.dd(a.zc(7,3,e.createdAt,"short"))}}const cg=function(e){return{show:e}};function ig(e,t){if(1&e&&(a.dc(0,"tr"),a.ad(1,Zd,1,0,"td",19),a.ad(2,tg,4,2,"td",20),a.dc(3,"td"),a.dc(4,"a",21),a.jc(5,Kd),a.dc(6,"div",22),a.dc(7,"div",23),a.Yb(8,"img",24),a.cc(),a.dc(9,"div",25),a.dc(10,"div"),a.cd(11),a.dc(12,"span",26),a.jc(13,qd),a.cc(),a.cc(),a.dc(14,"div",27),a.cd(15),a.cc(),a.cc(),a.cc(),a.cc(),a.cc(),a.ad(16,ng,8,9,"ng-container",19),a.ad(17,og,8,6,"ng-container",19),a.dc(18,"td",28),a.dc(19,"my-action-dropdown",29),a.jc(20,Wd),a.cc(),a.cc(),a.cc()),2&e){const e=t.$implicit,n=t.expanded,o=a.wc();a.Jb(1),a.Dc("ngIf",!e.reason),a.Jb(1),a.Dc("ngIf",e.reason),a.Jb(2),a.Dc("href",o.getVideoUrl(e),a.Tc),a.Jb(4),a.Dc("src",e.video.thumbnailPath,a.Tc),a.Jb(3),a.ed(" ",e.video.name," "),a.Jb(4),a.fd("by ",null==e.video.channel?null:e.video.channel.displayName," on ",null==e.video.channel?null:e.video.channel.host," "),a.Jb(1),a.Dc("ngIf",e.reason),a.Jb(1),a.Dc("ngIf",!e.reason),a.Jb(2),a.Dc("ngClass",a.Hc(12,cg,n))("actions",o.videoBlacklistActions)("entry",e)}}var ag,rg,lg;function sg(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",34),a.dc(2,"div",35),a.dc(3,"span",36),a.hc(4,ag),a.cc(),a.Yb(5,"span",37),a.cc(),a.cc(),a.cc()),2&e){const e=t.$implicit;a.Jb(5),a.Dc("innerHTML",e.reasonHtml,a.Sc)}}function dg(e,t){1&e&&(a.bc(0),a.hc(1,rg),a.ac())}function gg(e,t){1&e&&(a.bc(0),a.hc(1,lg),a.ac())}function ug(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",38),a.dc(2,"div",39),a.ad(3,dg,2,0,"ng-container",19),a.ad(4,gg,2,0,"ng-container",19),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngIf",e.search),a.Jb(1),a.Dc("ngIf",!e.search)}}ag="\u9ED1\u540D\u5355\u7406\u7531\uFF1A",rg="No blacklisted video found matching current filters.",lg="No blacklisted video found.";let bg=(()=>{class e extends i.g{constructor(e,t,n,o,c,i){super(),this.notifier=e,this.serverService=t,this.confirmService=n,this.videoBlacklistService=o,this.markdownRenderer=c,this.i18n=i,this.blacklist=[],this.totalRecords=0,this.sort={field:"createdAt",order:-1},this.pagination={count:this.rowsPerPage,start:0},this.listBlacklistTypeFilter=void 0,this.videoBlacklistActions=[]}ngOnInit(){this.serverService.getConfig().subscribe(e=>{e.autoBlacklist.videos.ofUsers.enabled&&(this.listBlacklistTypeFilter=ac.h.MANUAL)}),this.initialize(),this.videoBlacklistActions=[{label:this.i18n("Unblacklist"),handler:e=>this.removeVideoFromBlacklist(e)}]}getIdentifier(){return"VideoBlacklistListComponent"}getVideoUrl(e){return Ls.a.buildClientUrl(e.video.uuid)}booleanToText(e){return this.i18n(!0===e?"yes":"no")}toHtml(e){return this.markdownRenderer.textMarkdownToHTML(e)}removeVideoFromBlacklist(e){return jd(this,void 0,void 0,(function*(){const t=this.i18n("Do you really want to remove this video from the blacklist? It will be available again in the videos list.");!1!==(yield this.confirmService.confirm(t,this.i18n("Unblacklist")))&&this.videoBlacklistService.removeVideoFromBlacklist(e.video.id).subscribe(()=>{this.notifier.success(this.i18n("Video {{name}} removed from the blacklist.",{name:e.video.name})),this.loadData()},e=>this.notifier.error(e.message))}))}loadData(){this.videoBlacklistService.listBlacklist({pagination:this.pagination,sort:this.sort,search:this.search,type:this.listBlacklistTypeFilter}).subscribe(e=>jd(this,void 0,void 0,(function*(){this.totalRecords=e.total,this.blacklist=e.data;for(const e of this.blacklist)Object.assign(e,{reasonHtml:yield this.toHtml(e.reason)})})),e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.f),a.Xb(g.i),a.Xb(g.c),a.Xb(i.n),a.Xb($s.c),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-video-blacklist-list"]],features:[a.Gb],decls:7,vars:13,consts:[["dataKey","id",3,"value","lazy","paginator","totalRecords","rows","rowsPerPageOptions","sortField","sortOrder","showCurrentPageReport","expandedRowKeys","onLazyLoad","onPage",6,"currentPageReportTemplate"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],[1,"caption"],[1,"ml-auto","has-feedback","has-clear"],["type","text","name","table-filter","id","table-filter",3,"keyup",6,"placeholder"],[1,"glyphicon","glyphicon-remove-sign","form-control-feedback","form-control-clear",3,"click"],[1,"sr-only"],[2,"width","40px"],["pSortableColumn","name"],["field","name"],[2,"width","100px"],[2,"width","120px"],["pSortableColumn","createdAt",2,"width","150px"],["field","createdAt"],[2,"width","150px"],[4,"ngIf"],["class","expand-cell c-hand","placement","top-left","container","body",3,"pRowToggler",4,"ngIf",6,"ngbTooltip"],["target","_blank","rel","noopener noreferrer",1,"video-table-video-link",3,"href",6,"title"],[1,"video-table-video"],[1,"video-table-video-image"],[3,"src"],[1,"video-table-video-text"],[1,"glyphicon","glyphicon-ban-circle",6,"title"],[1,"text-muted"],[1,"action-cell"],["placement","bottom-right","container","body",3,"ngClass","actions","entry",6,"label"],["placement","top-left","container","body",1,"expand-cell","c-hand",3,"pRowToggler",6,"ngbTooltip"],[1,"expander"],[3,"ngClass"],[1,"c-hand",3,"pRowToggler"],["colspan","6",1,"expand-cell"],[1,"d-flex","moderation-expanded"],[1,"col-2","moderation-expanded-label"],[1,"col-9","moderation-expanded-text",3,"innerHTML"],["colspan","6"],[1,"empty-table-message"]],template:function(e,t){1&e&&(a.dc(0,"p-table",0),a.jc(1,Fd),a.sc("onLazyLoad",(function(e){return t.loadLazy(e)}))("onPage",(function(e){return t.onPage(e)})),a.ad(2,Xd,7,0,"ng-template",1),a.ad(3,Qd,13,0,"ng-template",2),a.ad(4,ig,21,14,"ng-template",3),a.ad(5,sg,6,1,"ng-template",4),a.ad(6,ug,5,2,"ng-template",5),a.cc()),2&e&&(a.lc("{first}")("{last}")("{totalRecords}"),a.ic(1),a.Dc("value",t.blacklist)("lazy",!0)("paginator",t.totalRecords>0)("totalRecords",t.totalRecords)("rows",t.rowsPerPage)("rowsPerPageOptions",t.rowsPerPageOptions)("sortField",t.sort.field)("sortOrder",t.sort.order)("showCurrentPageReport",!0)("expandedRowKeys",t.expandedRows))},directives:[te.q,k.d,te.p,te.o,h.u,jl.a,h.r,v.y,te.k],pipes:[h.f],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.caption[_ngcontent-%COMP%]{justify-content:flex-end}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:250px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;flex-grow:1}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:250px){.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}.moderation-expanded[_ngcontent-%COMP%]{font-size:90%}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;vertical-align:top;text-align:right}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]{display:inline-flex;word-wrap:break-word}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0!important}.video-table-states[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:.4rem}.screenratio[_ngcontent-%COMP%]{position:relative;width:100%;height:0;padding-bottom:56%}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;position:absolute;height:100%;width:100%;display:inline-flex;justify-content:center;align-items:center;color:var(--inputPlaceholderColor)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{text-decoration:none!important}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.screenratio[_ngcontent-%COMP%]   div.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.screenratio[_ngcontent-%COMP%]     iframe{position:absolute;width:100%!important;height:100%!important;left:0;top:0}.chip[_ngcontent-%COMP%]{align-items:center;border-radius:5rem;display:inline-flex;font-size:90%;color:var(--mainForegroundColor);line-height:1rem;margin:.1rem;max-width:320px;overflow:hidden;padding:.2rem .4rem;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}.chip[_ngcontent-%COMP%], .chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:1.2rem;vertical-align:middle}.chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-left:-.4rem;margin-right:.2rem;width:1.2rem;border-radius:50%;display:inline-block;line-height:1.25;position:relative}.chip.two-lines[_ngcontent-%COMP%]{height:2rem}.chip.two-lines[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:2rem;width:2rem}.chip.two-lines[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:2rem;margin-left:.1rem;margin-right:.1rem;justify-content:center}my-action-dropdown.show[_ngcontent-%COMP%]     .dropdown-root{display:block!important}.video-table-video-link[_ngcontent-%COMP%]{position:relative;top:3px}.video-table-video-link[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]{display:inline-flex}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;height:45px;width:80px;margin-right:.5rem;border-radius:2px;border:none;background:transparent;display:inline-flex;justify-content:center;align-items:center;position:relative}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover{text-decoration:none!important}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--inputPlaceholderColor)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .video-table-video-image-label[_ngcontent-%COMP%]{display:inline-block;background-color:rgba(0,0,0,.7);color:#fff;position:absolute;border-radius:3px;font-size:10px;padding:0 3px;line-height:1.3;bottom:2px;right:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;justify-content:center;font-size:90%;color:var(--mainForegroundColor);line-height:1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:80%;color:grey;margin-left:.1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{font-size:80%}"]}),e})();var pg,fg=n("YvhO");function hg(e,t){if(1&e){const e=a.ec();a.dc(0,"span",3),a.sc("click",(function(){return a.Rc(e),a.wc().removeSelectedVideosFromBlacklist()})),a.Yb(1,"my-global-icon",4),a.bc(2),a.hc(3,pg),a.ac(),a.cc()}}pg="\u79FB\u9664\u9ED1\u540D\u5355";const mg=["label","\u79FB\u9664\u9ED1\u540D\u5355"];function vg(e,t){if(1&e){const e=a.ec();a.dc(0,"my-button",5),a.jc(1,mg),a.sc("click",(function(){a.Rc(e);const n=t.$implicit;return a.wc().removeVideoFromBlacklist(n)})),a.cc()}}let Cg=(()=>{class e{constructor(e,t,n,o,c,i,a,r){this.router=e,this.route=t,this.notifier=n,this.authService=o,this.screenService=c,this.serverService=i,this.i18n=a,this.videoBlacklistService=r,this.selection={},this.miniatureDisplayOptions={date:!0,views:!1,by:!0,privacyLabel:!1,privacyText:!0,state:!1,blacklistInfo:!1,nsfw:!0},this.pagination={currentPage:1,itemsPerPage:5,totalItems:null},this.videos=[],this.getVideosObservableFunction=this.getVideosObservable.bind(this),this.titlePage=this.i18n("Auto-blacklisted videos")}getVideosObservable(e){const t=Object(Ns.d)(this.pagination,{currentPage:e});return this.videoBlacklistService.getAutoBlacklistedAsVideoList(t)}removeVideoFromBlacklist(e){this.videoBlacklistService.removeVideoFromBlacklist(e.id).subscribe(()=>{this.notifier.success(this.i18n("Video {{name}} removed from blacklist.",{name:e.name})),this.videos=this.videos.filter(t=>t.id!==e.id)},e=>this.notifier.error(e.message))}removeSelectedVideosFromBlacklist(){const e=Object.keys(this.selection).filter(e=>!0===this.selection[e]).map(e=>parseInt(e,10));this.videoBlacklistService.removeVideoFromBlacklist(e).subscribe(()=>{this.notifier.success(this.i18n("{{num}} videos removed from blacklist.",{num:e.length})),this.selection={},this.videos=this.videos.filter(t=>!1===e.includes(t.id))},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(_.h),a.Xb(_.a),a.Xb(g.f),a.Xb(g.a),a.Xb(Ca.a),a.Xb(g.i),a.Xb(l.a),a.Xb(i.n))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-video-auto-blacklist-list"]],decls:3,vars:6,consts:[[3,"pagination","selection","videosModel","miniatureDisplayOptions","titlePage","getVideosObservableFunction","selectionChange","videosModelChange"],["ptTemplate","globalButtons"],["ptTemplate","rowButtons"],[1,"action-button","action-button-unblacklist-selection",3,"click"],["iconName","tick"],["icon","tick",3,"click",6,"label"]],template:function(e,t){1&e&&(a.dc(0,"my-videos-selection",0),a.sc("selectionChange",(function(e){return t.selection=e}))("videosModelChange",(function(e){return t.videos=e})),a.ad(1,hg,4,0,"ng-template",1),a.ad(2,vg,2,0,"ng-template",2),a.cc()),2&e&&a.Dc("pagination",t.pagination)("selection",t.selection)("videosModel",t.videos)("miniatureDisplayOptions",t.miniatureDisplayOptions)("titlePage",t.titlePage)("getVideosObservableFunction",t.getVideosObservableFunction)},directives:[fg.a,y.a,Fc.a,ee.a],styles:['.action-button-unblacklist-selection[_ngcontent-%COMP%]{display:inline-block;border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.action-button-unblacklist-selection.focus-visible[_ngcontent-%COMP%], .action-button-unblacklist-selection[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.action-button-unblacklist-selection[_ngcontent-%COMP%], .action-button-unblacklist-selection[_ngcontent-%COMP%]:active, .action-button-unblacklist-selection[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.action-button-unblacklist-selection[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.action-button-unblacklist-selection.disabled[_ngcontent-%COMP%], .action-button-unblacklist-selection[disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}.action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;width:21px;margin-right:3px;top:-1px}.action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], .action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], .action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], .action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], .action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:#fff}.action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], .action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], .action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], .action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], .action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:#fff}.action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:#fff}']}),e})();var Og,Pg,_g,Mg,yg,wg,xg;function kg(e,t){1&e&&(a.dc(0,"a",9),a.hc(1,Pg),a.cc())}function Ig(e,t){if(1&e&&(a.dc(0,"a",10),a.hc(1,_g),a.cc()),2&e){const e=a.wc();a.Jb(1),a.lc(e.autoBlacklistVideosEnabled?"Manually blacklisted videos":"Blacklisted videos"),a.ic(1)}}function Tg(e,t){1&e&&(a.dc(0,"a",11),a.hc(1,Mg),a.cc())}function Sg(e,t){1&e&&(a.dc(0,"a",12),a.hc(1,yg),a.cc())}function Ag(e,t){1&e&&(a.dc(0,"a",13),a.hc(1,wg),a.cc())}function Dg(e,t){1&e&&(a.dc(0,"a",14),a.hc(1,xg),a.cc())}Og="\u8FD0\u8425",Pg="\u89C6\u9891\u4E3E\u62A5",_g="" + "\ufffd0\ufffd" + "",Mg="\u81EA\u52A8\u9ED1\u540D\u5355\u89C6\u9891",yg="\u5DF2\u5C4F\u853D\u7684\u5E10\u6237",wg="\u5DF2\u5C4F\u853D\u7684\u5B9E\u4F8B",xg="Storage Billing";let Rg=(()=>{class e{constructor(e,t){this.auth=e,this.serverService=t,this.autoBlacklistVideosEnabled=!1}ngOnInit(){this.serverService.getConfig().subscribe(e=>this.autoBlacklistVideosEnabled=e.autoBlacklist.videos.ofUsers.enabled)}hasVideoAbusesRight(){return this.auth.getUser().hasRight(ac.e.MANAGE_VIDEO_ABUSES)}hasVideoBlacklistRight(){return this.auth.getUser().hasRight(ac.e.MANAGE_VIDEO_BLACKLIST)}hasAccountsBlocklistRight(){return this.auth.getUser().hasRight(ac.e.MANAGE_ACCOUNTS_BLOCKLIST)}hasServersBlocklistRight(){return this.auth.getUser().hasRight(ac.e.MANAGE_SERVERS_BLOCKLIST)}hasServerPremiumStorage(){return!0}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.a),a.Xb(g.i))},e.\u0275cmp=a.Rb({type:e,selectors:[["ng-component"]],decls:11,vars:6,consts:[[1,"admin-sub-header"],[1,"form-sub-title"],[1,"admin-sub-nav"],["routerLink","video-abuses/list","routerLinkActive","active",4,"ngIf"],["routerLink","video-blacklist/list","routerLinkActive","active",4,"ngIf"],["routerLink","video-auto-blacklist/list","routerLinkActive","active",4,"ngIf"],["routerLink","blocklist/accounts","routerLinkActive","active",4,"ngIf"],["routerLink","blocklist/servers","routerLinkActive","active",4,"ngIf"],["routerLink","premium-storage/billing","routerLinkActive","active",4,"ngIf"],["routerLink","video-abuses/list","routerLinkActive","active"],["routerLink","video-blacklist/list","routerLinkActive","active"],["routerLink","video-auto-blacklist/list","routerLinkActive","active"],["routerLink","blocklist/accounts","routerLinkActive","active"],["routerLink","blocklist/servers","routerLinkActive","active"],["routerLink","premium-storage/billing","routerLinkActive","active"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.hc(2,Og),a.cc(),a.dc(3,"div",2),a.ad(4,kg,2,0,"a",3),a.ad(5,Ig,2,1,"a",4),a.ad(6,Tg,2,0,"a",5),a.ad(7,Sg,2,0,"a",6),a.ad(8,Ag,2,0,"a",7),a.ad(9,Dg,2,0,"a",8),a.cc(),a.cc(),a.Yb(10,"router-outlet")),2&e&&(a.Jb(4),a.Dc("ngIf",t.hasVideoAbusesRight()),a.Jb(1),a.Dc("ngIf",t.hasVideoBlacklistRight()),a.Jb(1),a.Dc("ngIf",t.autoBlacklistVideosEnabled&&t.hasVideoBlacklistRight()),a.Jb(1),a.Dc("ngIf",t.hasAccountsBlocklistRight()),a.Jb(1),a.Dc("ngIf",t.hasServersBlocklistRight()),a.Jb(1),a.Dc("ngIf",t.hasServerPremiumStorage()))},directives:[h.u,_.m,_.k,_.j],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.caption[_ngcontent-%COMP%]{justify-content:flex-end}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:250px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;flex-grow:1}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:250px){.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}.moderation-expanded[_ngcontent-%COMP%]{font-size:90%}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;vertical-align:top;text-align:right}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]{display:inline-flex;word-wrap:break-word}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0!important}.video-table-states[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:.4rem}.screenratio[_ngcontent-%COMP%]{position:relative;width:100%;height:0;padding-bottom:56%}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;position:absolute;height:100%;width:100%;display:inline-flex;justify-content:center;align-items:center;color:var(--inputPlaceholderColor)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{text-decoration:none!important}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.screenratio[_ngcontent-%COMP%]   div.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.screenratio[_ngcontent-%COMP%]     iframe{position:absolute;width:100%!important;height:100%!important;left:0;top:0}.chip[_ngcontent-%COMP%]{align-items:center;border-radius:5rem;display:inline-flex;font-size:90%;color:var(--mainForegroundColor);line-height:1rem;margin:.1rem;max-width:320px;overflow:hidden;padding:.2rem .4rem;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}.chip[_ngcontent-%COMP%], .chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:1.2rem;vertical-align:middle}.chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-left:-.4rem;margin-right:.2rem;width:1.2rem;border-radius:50%;display:inline-block;line-height:1.25;position:relative}.chip.two-lines[_ngcontent-%COMP%]{height:2rem}.chip.two-lines[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:2rem;width:2rem}.chip.two-lines[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:2rem;margin-left:.1rem;margin-right:.1rem;justify-content:center}my-action-dropdown.show[_ngcontent-%COMP%]     .dropdown-root{display:block!important}.video-table-video-link[_ngcontent-%COMP%]{position:relative;top:3px}.video-table-video-link[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]{display:inline-flex}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;height:45px;width:80px;margin-right:.5rem;border-radius:2px;border:none;background:transparent;display:inline-flex;justify-content:center;align-items:center;position:relative}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover{text-decoration:none!important}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--inputPlaceholderColor)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .video-table-video-image-label[_ngcontent-%COMP%]{display:inline-block;background-color:rgba(0,0,0,.7);color:#fff;position:absolute;border-radius:3px;font-size:10px;padding:0 3px;line-height:1.3;bottom:2px;right:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;justify-content:center;font-size:90%;color:var(--mainForegroundColor);line-height:1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:80%;color:grey;margin-left:.1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{font-size:80%}"]}),e})();const Eg=["currentPageReportTemplate","Showing " + "\ufffd0\ufffd" + " to " + "\ufffd1\ufffd" + " of " + "\ufffd2\ufffd" + " muted accounts"],zg=["placeholder","\u8FC7\u6EE4\u5668\u2026"];var Lg,$g,Jg;function Ng(e,t){if(1&e){const e=a.ec();a.dc(0,"div",5),a.dc(1,"div",6),a.dc(2,"input",7),a.jc(3,zg),a.sc("keyup",(function(t){return a.Rc(e),a.wc().onSearch(t)})),a.cc(),a.dc(4,"a",8),a.sc("click",(function(){return a.Rc(e),a.wc().resetSearch()})),a.cc(),a.dc(5,"span",9),a.hc(6,Lg),a.cc(),a.cc(),a.cc()}}function jg(e,t){1&e&&(a.dc(0,"tr"),a.dc(1,"th",10),a.hc(2,$g),a.cc(),a.dc(3,"th",11),a.nc(4,Jg),a.Yb(5,"p-sortIcon",12),a.kc(),a.cc(),a.Yb(6,"th",13),a.cc())}Lg="Clear filters",$g="\u5E10\u6237",Jg="\u5C4F\u853D\u65F6\u95F4 " + "\ufffd#5\ufffd" + "" + "\ufffd/#5\ufffd" + "";const Fg=["title","Open account in a new tab"];var Ug,Bg,Gg;function Vg(e,t){if(1&e){const e=a.ec();a.dc(0,"tr"),a.dc(1,"td"),a.dc(2,"a",14),a.jc(3,Fg),a.dc(4,"div",15),a.dc(5,"img",16),a.sc("error",(function(t){return a.Rc(e),a.wc().switchToDefaultAvatar(t)})),a.cc(),a.dc(6,"div"),a.cd(7),a.dc(8,"span",17),a.cd(9),a.cc(),a.cc(),a.cc(),a.cc(),a.cc(),a.dc(10,"td"),a.cd(11),a.xc(12,"date"),a.cc(),a.dc(13,"td",18),a.dc(14,"button",19),a.sc("click",(function(){a.Rc(e);const n=t.$implicit;return a.wc().unblockAccount(n)})),a.hc(15,Ug),a.cc(),a.cc(),a.cc()}if(2&e){const e=t.$implicit;a.Jb(2),a.Dc("href",e.blockedAccount.url,a.Tc),a.Jb(3),a.Dc("src",null==e.blockedAccount.avatar?null:e.blockedAccount.avatar.path,a.Tc),a.Jb(2),a.ed(" ",e.blockedAccount.displayName," "),a.Jb(2),a.dd(e.blockedAccount.nameWithHost),a.Jb(2),a.dd(a.zc(12,5,e.createdAt,"short"))}}function Yg(e,t){1&e&&(a.bc(0),a.hc(1,Bg),a.ac())}function Hg(e,t){1&e&&(a.bc(0),a.hc(1,Gg),a.ac())}function Xg(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",20),a.dc(2,"div",21),a.ad(3,Yg,2,0,"ng-container",22),a.ad(4,Hg,2,0,"ng-container",22),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngIf",e.search),a.Jb(1),a.Dc("ngIf",!e.search)}}Ug="\u53D6\u6D88\u5C4F\u853D",Bg="No account found matching current filters.",Gg="No account found.";let Qg=(()=>{class e extends i.g{constructor(e,t,n){super(),this.notifier=e,this.blocklistService=t,this.i18n=n,this.blockedAccounts=[],this.totalRecords=0,this.sort={field:"createdAt",order:-1},this.pagination={count:this.rowsPerPage,start:0}}ngOnInit(){this.initialize()}getIdentifier(){return"InstanceAccountBlocklistComponent"}switchToDefaultAvatar(e){e.target.src=Nl.a.GET_DEFAULT_AVATAR_URL()}unblockAccount(e){const t=e.blockedAccount;this.blocklistService.unblockAccountByInstance(t).subscribe(()=>{this.notifier.success(this.i18n("Account {{nameWithHost}} unmuted by your instance.",{nameWithHost:t.nameWithHost})),this.loadData()})}loadData(){return this.blocklistService.getInstanceAccountBlocklist({pagination:this.pagination,sort:this.sort,search:this.search}).subscribe(e=>{this.blockedAccounts=e.data,this.totalRecords=e.total},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.f),a.Xb(js.a),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-instance-account-blocklist"]],features:[a.Gb],decls:6,vars:12,consts:[[3,"value","lazy","paginator","totalRecords","rows","rowsPerPageOptions","sortField","sortOrder","showCurrentPageReport","onLazyLoad","onPage",6,"currentPageReportTemplate"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"caption"],[1,"ml-auto","has-feedback","has-clear"],["type","text","name","table-filter","id","table-filter",3,"keyup",6,"placeholder"],[1,"glyphicon","glyphicon-remove-sign","form-control-feedback","form-control-clear",3,"click"],[1,"sr-only"],[2,"width","100%"],["pSortableColumn","createdAt",2,"width","150px"],["field","createdAt"],[2,"width","150px"],["target","_blank","rel","noopener noreferrer",3,"href",6,"title"],[1,"chip","two-lines"],["alt","Avatar",1,"avatar",3,"src","error"],[1,"text-muted"],[1,"action-cell"],[1,"unblock-button",3,"click"],["colspan","6"],[1,"empty-table-message"],[4,"ngIf"]],template:function(e,t){1&e&&(a.dc(0,"p-table",0),a.jc(1,Eg),a.sc("onLazyLoad",(function(e){return t.loadLazy(e)}))("onPage",(function(e){return t.onPage(e)})),a.ad(2,Ng,7,0,"ng-template",1),a.ad(3,jg,7,0,"ng-template",2),a.ad(4,Vg,16,8,"ng-template",3),a.ad(5,Xg,5,2,"ng-template",4),a.cc()),2&e&&(a.lc("{first}")("{last}")("{totalRecords}"),a.ic(1),a.Dc("value",t.blockedAccounts)("lazy",!0)("paginator",t.totalRecords>0)("totalRecords",t.totalRecords)("rows",t.rowsPerPage)("rowsPerPageOptions",t.rowsPerPageOptions)("sortField",t.sort.field)("sortOrder",t.sort.order)("showCurrentPageReport",!0))},directives:[te.q,k.d,te.p,te.o,h.u],pipes:[h.f],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.caption[_ngcontent-%COMP%]{justify-content:flex-end}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:250px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;flex-grow:1}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:250px){.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}.moderation-expanded[_ngcontent-%COMP%]{font-size:90%}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;vertical-align:top;text-align:right}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]{display:inline-flex;word-wrap:break-word}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0!important}.video-table-states[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:.4rem}.screenratio[_ngcontent-%COMP%]{position:relative;width:100%;height:0;padding-bottom:56%}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;position:absolute;height:100%;width:100%;display:inline-flex;justify-content:center;align-items:center;color:var(--inputPlaceholderColor)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{text-decoration:none!important}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.screenratio[_ngcontent-%COMP%]   div.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.screenratio[_ngcontent-%COMP%]     iframe{position:absolute;width:100%!important;height:100%!important;left:0;top:0}.chip[_ngcontent-%COMP%]{align-items:center;border-radius:5rem;display:inline-flex;font-size:90%;color:var(--mainForegroundColor);line-height:1rem;margin:.1rem;max-width:320px;overflow:hidden;padding:.2rem .4rem;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}.chip[_ngcontent-%COMP%], .chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:1.2rem;vertical-align:middle}.chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-left:-.4rem;margin-right:.2rem;width:1.2rem;border-radius:50%;display:inline-block;line-height:1.25;position:relative}.chip.two-lines[_ngcontent-%COMP%]{height:2rem}.chip.two-lines[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:2rem;width:2rem}.chip.two-lines[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:2rem;margin-left:.1rem;margin-right:.1rem;justify-content:center}my-action-dropdown.show[_ngcontent-%COMP%]     .dropdown-root{display:block!important}.video-table-video-link[_ngcontent-%COMP%]{position:relative;top:3px}.video-table-video-link[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]{display:inline-flex}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;height:45px;width:80px;margin-right:.5rem;border-radius:2px;border:none;background:transparent;display:inline-flex;justify-content:center;align-items:center;position:relative}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover{text-decoration:none!important}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--inputPlaceholderColor)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .video-table-video-image-label[_ngcontent-%COMP%]{display:inline-block;background-color:rgba(0,0,0,.7);color:#fff;position:absolute;border-radius:3px;font-size:10px;padding:0 3px;line-height:1.3;bottom:2px;right:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;justify-content:center;font-size:90%;color:var(--mainForegroundColor);line-height:1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:80%;color:grey;margin-left:.1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{font-size:80%}",'.unblock-button[_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.unblock-button.focus-visible[_ngcontent-%COMP%], .unblock-button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(88,88,88,.05)}.unblock-button[_ngcontent-%COMP%], .unblock-button[_ngcontent-%COMP%]:active, .unblock-button[_ngcontent-%COMP%]:focus{background-color:#e5e5e5;color:var(--greyForegroundColor)}.unblock-button.disabled[_ngcontent-%COMP%], .unblock-button[_ngcontent-%COMP%]:active, .unblock-button[_ngcontent-%COMP%]:focus, .unblock-button[_ngcontent-%COMP%]:hover, .unblock-button[disabled][_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:#efefef}.unblock-button.disabled[_ngcontent-%COMP%], .unblock-button[disabled][_ngcontent-%COMP%]{cursor:default}.unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:var(--greyForegroundColor)}.unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:var(--greyForegroundColor)}.unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:var(--greyForegroundColor)}']}),e})();const Kg=["batchDomainsModal"],qg=["currentPageReportTemplate","Showing " + "\ufffd0\ufffd" + " to " + "\ufffd1\ufffd" + " of " + "\ufffd2\ufffd" + " muted instances"],Wg=["action","Mute domains"],Zg=["placeholder","\u8FC7\u6EE4\u5668\u2026"];var eu,tu,nu,ou;function cu(e,t){if(1&e){const e=a.ec();a.dc(0,"div",7),a.dc(1,"div",8),a.dc(2,"input",9),a.jc(3,Zg),a.sc("keyup",(function(t){return a.Rc(e),a.wc().onSearch(t)})),a.cc(),a.dc(4,"a",10),a.sc("click",(function(){return a.Rc(e),a.wc().resetSearch()})),a.cc(),a.dc(5,"span",11),a.hc(6,eu),a.cc(),a.cc(),a.dc(7,"a",12),a.sc("click",(function(){return a.Rc(e),a.wc().addServersToBlock()}))("key.enter",(function(){return a.Rc(e),a.wc().addServersToBlock()})),a.Yb(8,"my-global-icon",13),a.bc(9),a.hc(10,tu),a.ac(),a.cc(),a.cc()}}function iu(e,t){1&e&&(a.dc(0,"tr"),a.dc(1,"th",14),a.hc(2,nu),a.cc(),a.dc(3,"th",15),a.nc(4,ou),a.Yb(5,"p-sortIcon",16),a.kc(),a.cc(),a.Yb(6,"th",17),a.cc())}eu="Clear filters",tu="Mute domain",nu="\u5B9E\u4F8B",ou="\u5C4F\u853D\u65F6\u95F4 " + "\ufffd#5\ufffd" + "" + "\ufffd/#5\ufffd" + "";const au=["title","Open instance in a new tab"];var ru,lu,su;function du(e,t){if(1&e){const e=a.ec();a.dc(0,"tr"),a.dc(1,"td"),a.dc(2,"a",18),a.jc(3,au),a.cd(4),a.Yb(5,"span",19),a.cc(),a.cc(),a.dc(6,"td"),a.cd(7),a.xc(8,"date"),a.cc(),a.dc(9,"td",20),a.dc(10,"button",21),a.sc("click",(function(){a.Rc(e);const n=t.$implicit;return a.wc().unblockServer(n)})),a.hc(11,ru),a.cc(),a.cc(),a.cc()}if(2&e){const e=t.$implicit;a.Jb(2),a.Dc("href","https://"+e.blockedServer.host,a.Tc),a.Jb(2),a.ed(" ",e.blockedServer.host," "),a.Jb(3),a.dd(a.zc(8,3,e.createdAt,"short"))}}function gu(e,t){1&e&&(a.bc(0),a.hc(1,lu),a.ac())}function uu(e,t){1&e&&(a.bc(0),a.hc(1,su),a.ac())}function bu(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",22),a.dc(2,"div",23),a.ad(3,gu,2,0,"ng-container",24),a.ad(4,uu,2,0,"ng-container",24),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngIf",e.search),a.Jb(1),a.Dc("ngIf",!e.search)}}ru="\u53D6\u6D88\u5C4F\u853D",lu="No server found matching current filters.",su="No server found.";let pu=(()=>{class e extends i.g{constructor(e,t,n){super(),this.notifier=e,this.blocklistService=t,this.i18n=n,this.blockedServers=[],this.totalRecords=0,this.sort={field:"createdAt",order:-1},this.pagination={count:this.rowsPerPage,start:0}}ngOnInit(){this.initialize()}getIdentifier(){return"InstanceServerBlocklistComponent"}unblockServer(e){const t=e.blockedServer.host;this.blocklistService.unblockServerByInstance(t).subscribe(()=>{this.notifier.success(this.i18n("Instance {{host}} unmuted by your instance.",{host:t})),this.loadData()})}addServersToBlock(){this.batchDomainsModal.openModal()}onDomainsToBlock(e){e.forEach(e=>{this.blocklistService.blockServerByInstance(e).subscribe(()=>{this.notifier.success(this.i18n("Instance {{domain}} muted by your instance.",{domain:e})),this.loadData()})})}loadData(){return this.blocklistService.getInstanceServerBlocklist({pagination:this.pagination,sort:this.sort,search:this.search}).subscribe(e=>{this.blockedServers=e.data,this.totalRecords=e.total},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.f),a.Xb(js.a),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-instance-server-blocklist"]],viewQuery:function(e,t){var n;1&e&&a.gd(Kg,!0),2&e&&a.Oc(n=a.tc())&&(t.batchDomainsModal=n.first)},features:[a.Gb],decls:9,vars:12,consts:[[3,"value","lazy","paginator","totalRecords","rows","rowsPerPageOptions","sortField","sortOrder","showCurrentPageReport","onLazyLoad","onPage",6,"currentPageReportTemplate"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"domains",6,"action"],["batchDomainsModal",""],[1,"caption"],[1,"ml-auto","has-feedback","has-clear"],["type","text","name","table-filter","id","table-filter",3,"keyup",6,"placeholder"],[1,"glyphicon","glyphicon-remove-sign","form-control-feedback","form-control-clear",3,"click"],[1,"sr-only"],[1,"ml-2","block-button",3,"click","key.enter"],["iconName","add"],[2,"width","100%"],["pSortableColumn","createdAt",2,"width","150px"],["field","createdAt"],[2,"width","150px"],["target","_blank","rel","noopener noreferrer",3,"href",6,"title"],[1,"glyphicon","glyphicon-new-window"],[1,"action-cell"],[1,"unblock-button",3,"click"],["colspan","6"],[1,"empty-table-message"],[4,"ngIf"]],template:function(e,t){1&e&&(a.dc(0,"p-table",0),a.jc(1,qg),a.sc("onLazyLoad",(function(e){return t.loadLazy(e)}))("onPage",(function(e){return t.onPage(e)})),a.ad(2,cu,11,0,"ng-template",1),a.ad(3,iu,7,0,"ng-template",2),a.ad(4,du,12,6,"ng-template",3),a.ad(5,bu,5,2,"ng-template",4),a.cc(),a.dc(6,"my-batch-domains-modal",5,6),a.jc(8,Wg),a.sc("domains",(function(e){return t.onDomainsToBlock(e)})),a.cc()),2&e&&(a.lc("{first}")("{last}")("{totalRecords}"),a.ic(1),a.Dc("value",t.blockedServers)("lazy",!0)("paginator",t.totalRecords>0)("totalRecords",t.totalRecords)("rows",t.rowsPerPage)("rowsPerPageOptions",t.rowsPerPageOptions)("sortField",t.sort.field)("sortOrder",t.sort.order)("showCurrentPageReport",!0))},directives:[te.q,k.d,Wc,Fc.a,te.p,te.o,h.u],pipes:[h.f],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.caption[_ngcontent-%COMP%]{justify-content:flex-end}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:250px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;flex-grow:1}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:250px){.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}.moderation-expanded[_ngcontent-%COMP%]{font-size:90%}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;vertical-align:top;text-align:right}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]{display:inline-flex;word-wrap:break-word}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0!important}.video-table-states[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:.4rem}.screenratio[_ngcontent-%COMP%]{position:relative;width:100%;height:0;padding-bottom:56%}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;position:absolute;height:100%;width:100%;display:inline-flex;justify-content:center;align-items:center;color:var(--inputPlaceholderColor)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{text-decoration:none!important}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.screenratio[_ngcontent-%COMP%]   div.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.screenratio[_ngcontent-%COMP%]     iframe{position:absolute;width:100%!important;height:100%!important;left:0;top:0}.chip[_ngcontent-%COMP%]{align-items:center;border-radius:5rem;display:inline-flex;font-size:90%;color:var(--mainForegroundColor);line-height:1rem;margin:.1rem;max-width:320px;overflow:hidden;padding:.2rem .4rem;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}.chip[_ngcontent-%COMP%], .chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:1.2rem;vertical-align:middle}.chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-left:-.4rem;margin-right:.2rem;width:1.2rem;border-radius:50%;display:inline-block;line-height:1.25;position:relative}.chip.two-lines[_ngcontent-%COMP%]{height:2rem}.chip.two-lines[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:2rem;width:2rem}.chip.two-lines[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:2rem;margin-left:.1rem;margin-right:.1rem;justify-content:center}my-action-dropdown.show[_ngcontent-%COMP%]     .dropdown-root{display:block!important}.video-table-video-link[_ngcontent-%COMP%]{position:relative;top:3px}.video-table-video-link[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]{display:inline-flex}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;height:45px;width:80px;margin-right:.5rem;border-radius:2px;border:none;background:transparent;display:inline-flex;justify-content:center;align-items:center;position:relative}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover{text-decoration:none!important}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--inputPlaceholderColor)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .video-table-video-image-label[_ngcontent-%COMP%]{display:inline-block;background-color:rgba(0,0,0,.7);color:#fff;position:absolute;border-radius:3px;font-size:10px;padding:0 3px;line-height:1.3;bottom:2px;right:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;justify-content:center;font-size:90%;color:var(--mainForegroundColor);line-height:1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:80%;color:grey;margin-left:.1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{font-size:80%}",'a[_ngcontent-%COMP%]{display:inline-block}a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{color:var(--mainForegroundColor)}a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:80%;color:var(--inputPlaceholderColor)}.unblock-button[_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.unblock-button.focus-visible[_ngcontent-%COMP%], .unblock-button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(88,88,88,.05)}.unblock-button[_ngcontent-%COMP%], .unblock-button[_ngcontent-%COMP%]:active, .unblock-button[_ngcontent-%COMP%]:focus{background-color:#e5e5e5;color:var(--greyForegroundColor)}.unblock-button.disabled[_ngcontent-%COMP%], .unblock-button[_ngcontent-%COMP%]:active, .unblock-button[_ngcontent-%COMP%]:focus, .unblock-button[_ngcontent-%COMP%]:hover, .unblock-button[disabled][_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:#efefef}.unblock-button.disabled[_ngcontent-%COMP%], .unblock-button[disabled][_ngcontent-%COMP%]{cursor:default}.unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:var(--greyForegroundColor)}.unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:var(--greyForegroundColor)}.unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:var(--greyForegroundColor)}.block-button[_ngcontent-%COMP%]{display:inline-block;border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.block-button[_ngcontent-%COMP%]:active, .block-button[_ngcontent-%COMP%]:focus, .block-button[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.block-button.focus-visible[_ngcontent-%COMP%], .block-button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.block-button[_ngcontent-%COMP%], .block-button[_ngcontent-%COMP%]:active, .block-button[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.block-button[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.block-button.disabled[_ngcontent-%COMP%], .block-button[disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}.block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], .block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], .block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], .block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], .block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:#fff}.block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], .block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], .block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], .block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], .block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:#fff}.block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:#fff}.block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;width:20px;margin-right:5px;top:-1px}']}),e})();const fu=[{path:"moderation",component:Rg,children:[{path:"",redirectTo:"video-abuses/list",pathMatch:"full"},{path:"video-abuses",redirectTo:"video-abuses/list",pathMatch:"full"},{path:"video-blacklist",redirectTo:"video-blacklist/list",pathMatch:"full"},{path:"video-auto-blacklist",redirectTo:"video-auto-blacklist/list",pathMatch:"full"},{path:"video-abuses/list",component:Nd,canActivate:[g.l],data:{userRight:ac.e.MANAGE_VIDEO_ABUSES,meta:{title:"Video abuses list"}}},{path:"video-auto-blacklist/list",component:Cg,canActivate:[g.l],data:{userRight:ac.e.MANAGE_VIDEO_BLACKLIST,meta:{title:"Auto-blacklisted videos"}}},{path:"video-blacklist/list",component:bg,canActivate:[g.l],data:{userRight:ac.e.MANAGE_VIDEO_BLACKLIST,meta:{title:"Blacklisted videos"}}},{path:"blocklist/accounts",component:Qg,canActivate:[g.l],data:{userRight:ac.e.MANAGE_ACCOUNTS_BLOCKLIST,meta:{title:"Muted accounts"}}},{path:"blocklist/servers",component:pu,canActivate:[g.l],data:{userRight:ac.e.MANAGE_SERVERS_BLOCKLIST,meta:{title:"Muted instances"}}}]}];var hu=n("lJxs");let mu=(()=>{class e{constructor(e,t,n){this.authHttp=e,this.restService=t,this.restExtractor=n}getJobs(t,n,c,i){let a=new r.f;return a=this.restService.addRestGetParams(a,c,i),"all"!==n&&(a=a.append("jobType",n)),this.authHttp.get(e.BASE_JOB_URL+"/"+t,{params:a}).pipe(Object(hu.a)(e=>this.restExtractor.convertResultListDateToHuman(e,["createdAt","processedOn","finishedOn"])),Object(hu.a)(e=>this.restExtractor.applyToResultListData(e,this.prettyPrintData)),Object(hu.a)(e=>this.restExtractor.applyToResultListData(e,this.buildUniqId)),Object(o.a)(e=>this.restExtractor.handleError(e)))}prettyPrintData(e){const t=JSON.stringify(e.data,null,2);return Object.assign(e,{data:t})}buildUniqId(e){return Object.assign(e,{uniqId:`${e.id}-${e.type}`})}}return e.BASE_JOB_URL=c.a.apiUrl+"/api/v1/jobs",e.\u0275fac=function(t){return new(t||e)(a.oc(r.b),a.oc(i.f),a.oc(i.e))},e.\u0275prov=a.Tb({token:e,factory:e.\u0275fac}),e})();var vu,Cu,Ou,Pu,_u,Mu;function yu(e,t){if(1&e&&(a.dc(0,"option",12),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e),a.Jb(1),a.dd(e)}}function wu(e,t){if(1&e&&(a.dc(0,"option",12),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e),a.Jb(1),a.dd(e)}}function xu(e,t){1&e&&(a.dc(0,"tr"),a.Yb(1,"th",13),a.dc(2,"th",14),a.hc(3,Ou),a.cc(),a.dc(4,"th",15),a.hc(5,Pu),a.cc(),a.dc(6,"th",16),a.nc(7,_u),a.Yb(8,"p-sortIcon",17),a.kc(),a.cc(),a.dc(9,"th",18),a.hc(10,Mu),a.cc(),a.cc())}vu="Job type",Cu="Job state",Ou="ID",Pu="\u7C7B\u578B",_u="\u521B\u5EFA\u65F6\u95F4 " + "\ufffd#8\ufffd" + "" + "\ufffd/#8\ufffd" + "",Mu="\u72B6\u6001";const ku=["ngbTooltip","\u8BE6\u60C5"];var Iu,Tu,Su,Au,Du;function Ru(e,t){1&e&&(a.dc(0,"td",28),a.Yb(1,"span",29),a.dc(2,"span"),a.hc(3,Iu),a.cc(),a.cc())}function Eu(e,t){1&e&&(a.dc(0,"td",30),a.Yb(1,"span",31),a.dc(2,"span"),a.hc(3,Tu),a.cc(),a.cc())}function zu(e,t){1&e&&(a.dc(0,"td",30),a.Yb(1,"span",32),a.dc(2,"span"),a.hc(3,Su),a.cc(),a.cc())}function Lu(e,t){1&e&&(a.dc(0,"td",33),a.Yb(1,"span",34),a.dc(2,"span"),a.hc(3,Au),a.cc(),a.cc())}function $u(e,t){1&e&&(a.dc(0,"td",35),a.Yb(1,"span",36),a.dc(2,"span"),a.hc(3,Du),a.cc(),a.cc())}function Ju(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",19),a.dc(2,"span",20),a.jc(3,ku),a.Yb(4,"i",21),a.cc(),a.cc(),a.dc(5,"td",22),a.cd(6),a.cc(),a.dc(7,"td",15),a.cd(8),a.cc(),a.dc(9,"td",23),a.cd(10),a.cc(),a.ad(11,Ru,4,0,"td",24),a.ad(12,Eu,4,0,"td",25),a.ad(13,zu,4,0,"td",25),a.ad(14,Lu,4,0,"td",26),a.ad(15,$u,4,0,"td",27),a.cc()),2&e){const e=t.expanded,n=t.$implicit;a.Jb(2),a.Dc("pRowToggler",n),a.Jb(2),a.Dc("ngClass",e?"glyphicon glyphicon-menu-down":"glyphicon glyphicon-menu-right"),a.Jb(1),a.Dc("title",n.id),a.Jb(1),a.dd(n.id),a.Jb(2),a.dd(n.type),a.Jb(2),a.dd(n.createdAt),a.Jb(1),a.Dc("ngIf","delayed"===n.state),a.Jb(1),a.Dc("ngIf","waiting"===n.state),a.Jb(1),a.Dc("ngIf","active"===n.state),a.Jb(1),a.Dc("ngIf","completed"===n.state),a.Jb(1),a.Dc("ngIf","failed"===n.state)}}function Nu(e,t){if(1&e&&(a.dc(0,"tr",39),a.dc(1,"td",37),a.dc(2,"pre"),a.cd(3),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc().$implicit;a.Jb(3),a.dd(e.error)}}Iu="Delayed.",Tu="Will start soon...",Su="Running...",Au="Finished",Du="Failed";const ju=function(e,t,n,o){return[e,t,n,o]};function Fu(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",37),a.dc(2,"pre"),a.cd(3),a.cc(),a.cc(),a.cc(),a.dc(4,"tr"),a.dc(5,"td",37),a.dc(6,"pre"),a.cd(7),a.cc(),a.cc(),a.cc(),a.ad(8,Nu,4,1,"tr",38)),2&e){const e=t.$implicit;a.Jb(3),a.dd(a.Kc(3,ju,"Job: "+e.id,"Type: "+e.type,"Processed on "+(e.processedOn||"-"),"Finished on "+(e.finishedOn||"-")).join("\n")),a.Jb(4),a.dd(e.data),a.Jb(1),a.Dc("ngIf",e.error)}}const Uu=function(){return{"table-layout":"auto"}};let Bu=(()=>{class e extends i.g{constructor(e,t,n){super(),this.notifier=e,this.jobsService=t,this.i18n=n,this.jobState="waiting",this.jobStates=["active","completed","failed","waiting","delayed"],this.jobType="all",this.jobTypes=["all","activitypub-follow","activitypub-http-broadcast","activitypub-http-fetcher","activitypub-http-unicast","email","video-transcoding","video-file-import","video-import","videos-views","activitypub-refresher","video-redundancy"],this.jobs=[],this.sort={field:"createdAt",order:-1},this.pagination={count:this.rowsPerPage,start:0}}ngOnInit(){this.loadJobStateAndType(),this.initialize()}getIdentifier(){return"JobsComponent"}onJobStateOrTypeChanged(){this.pagination.start=0,this.loadData(),this.saveJobStateAndType()}loadData(){this.jobsService.getJobs(this.jobState,this.jobType,this.pagination,this.sort).subscribe(e=>{this.jobs=e.data,this.totalRecords=e.total},e=>this.notifier.error(e.message))}loadJobStateAndType(){const t=Ii.a.getItem(e.LOCAL_STORAGE_STATE);t&&(this.jobState=t);const n=Ii.a.getItem(e.LOCAL_STORAGE_TYPE);n&&(this.jobType=n)}saveJobStateAndType(){Ii.a.setItem(e.LOCAL_STORAGE_STATE,this.jobState),Ii.a.setItem(e.LOCAL_STORAGE_TYPE,this.jobType)}}return e.LOCAL_STORAGE_STATE="jobs-list-state",e.LOCAL_STORAGE_TYPE="jobs-list-type",e.\u0275fac=function(t){return new(t||e)(a.Xb(g.f),a.Xb(mu),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-jobs"]],features:[a.Gb],decls:17,vars:15,consts:[[1,"admin-sub-header"],[1,"select-filter-block"],["for","jobType"],[1,"peertube-select-container"],["id","jobType","name","jobType",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","jobState"],["id","jobState","name","jobState",1,"form-control",3,"ngModel","ngModelChange"],["dataKey","uniqId",3,"value","lazy","paginator","totalRecords","rows","sortField","sortOrder","first","tableStyle","expandedRowKeys","onLazyLoad","onPage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[3,"value"],[2,"width","40px"],[1,"job-id"],[1,"job-type"],["pSortableColumn","createdAt",1,"job-date"],["field","createdAt"],[1,"job-state"],[1,"expand-cell"],[1,"expander",3,"pRowToggler",6,"ngbTooltip"],[3,"ngClass"],[1,"job-id",3,"title"],[1,"job-date"],["class","job-state","class","text-muted",4,"ngIf"],["class","job-state","class","text-warning",4,"ngIf"],["class","job-state","class","text-success",4,"ngIf"],["class","job-state","class","text-danger",4,"ngIf"],[1,"text-muted"],[1,"glyphicon","glyphicon-repeat"],[1,"text-warning"],[1,"glyphicon","glyphicon-hourglass"],[1,"glyphicon","glyphicon-cog"],[1,"text-success"],[1,"glyphicon","glyphicon-ok"],[1,"text-danger"],[1,"glyphicon","glyphicon-remove"],["colspan","4"],["class","job-error",4,"ngIf"],[1,"job-error"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.dc(2,"label",2),a.hc(3,vu),a.cc(),a.dc(4,"div",3),a.dc(5,"select",4),a.sc("ngModelChange",(function(e){return t.jobType=e}))("ngModelChange",(function(){return t.onJobStateOrTypeChanged()})),a.ad(6,yu,2,2,"option",5),a.cc(),a.cc(),a.cc(),a.dc(7,"div",1),a.dc(8,"label",6),a.hc(9,Cu),a.cc(),a.dc(10,"div",3),a.dc(11,"select",7),a.sc("ngModelChange",(function(e){return t.jobState=e}))("ngModelChange",(function(){return t.onJobStateOrTypeChanged()})),a.ad(12,wu,2,2,"option",5),a.cc(),a.cc(),a.cc(),a.cc(),a.dc(13,"p-table",8),a.sc("onLazyLoad",(function(e){return t.loadLazy(e)}))("onPage",(function(e){return t.onPage(e)})),a.ad(14,xu,11,0,"ng-template",9),a.ad(15,Ju,16,11,"ng-template",10),a.ad(16,Fu,9,8,"ng-template",11),a.cc()),2&e&&(a.Jb(5),a.Dc("ngModel",t.jobType),a.Jb(1),a.Dc("ngForOf",t.jobTypes),a.Jb(5),a.Dc("ngModel",t.jobState),a.Jb(1),a.Dc("ngForOf",t.jobStates),a.Jb(1),a.Dc("value",t.jobs)("lazy",!0)("paginator",t.totalRecords>0)("totalRecords",t.totalRecords)("rows",t.rowsPerPage)("sortField",t.sort.field)("sortOrder",t.sort.order)("first",t.pagination.start)("tableStyle",a.Gc(14,Uu))("expandedRowKeys",t.expandedRows))},directives:[m.F,m.t,m.w,h.t,te.q,k.d,m.y,m.I,te.p,te.o,v.y,te.k,h.r,h.u],styles:['.job-id[_ngcontent-%COMP%]{max-width:30vw!important}.job-type[_ngcontent-%COMP%]{width:150px!important}.job-date[_ngcontent-%COMP%]{width:170px!important}.job-state[_ngcontent-%COMP%]{max-width:60px}.admin-sub-header[_ngcontent-%COMP%]{flex-direction:row!important;justify-content:flex-end}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]:not(:last-child){margin-right:10px}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:2px}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:auto;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;font-size:15px}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}@media screen and (max-width:auto){.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{width:100%}}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:15px;content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid transparent;border-top-color:#000;margin-top:-2px;z-index:100}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 35px 0 12px;width:calc(100% + 2px);position:relative;left:1px;border:1px solid #c6c6c6;background:transparent none;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:30px;text-overflow:ellipsis;color:var(--mainForegroundColor)}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}td[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{margin-right:10px}pre[_ngcontent-%COMP%]{font-size:11px}.job-error[_ngcontent-%COMP%]{color:red}']}),e})();var Gu=n("twO/"),Vu=n("oSzE"),Yu=n("23KU"),Hu=n("uE2L"),Xu=function(e,t,n,o){var c=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var r=t[i],l=o?o(n[r],e[r],r,n,e):void 0;void 0===l&&(l=e[r]),c?Object(Hu.a)(n,r,l):Object(Yu.a)(n,r,l)}return n},Qu=n("mkut"),Ku=n("7gMY"),qu=n("IzLi"),Wu=n("pyRK"),Zu=Object.prototype.hasOwnProperty,eb=n("5WsY"),tb=function(e){return Object(eb.a)(e)?Object(Ku.a)(e,!0):function(e){if(!Object(qu.a)(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Object(Wu.a)(e),n=[];for(var o in e)("constructor"!=o||!t&&Zu.call(e,o))&&n.push(o);return n}(e)},nb=n("3/ER"),ob=n("jN84"),cb=n("tPH9"),ib=n("U6JX"),ab=Object(ib.a)(Object.getPrototypeOf,Object),rb=n("WJ6P"),lb=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Object(cb.a)(t,Object(ob.a)(e)),e=ab(e);return t}:rb.a,sb=n("TFwu"),db=n("25cm"),gb=function(e){return Object(db.a)(e,tb,lb)},ub=n("YM6B"),bb=Object.prototype.hasOwnProperty,pb=n("Ce4a"),fb=function(e){var t=new e.constructor(e.byteLength);return new pb.a(t).set(new pb.a(e)),t},hb=/\w*$/,mb=n("ylTp"),vb=mb.a?mb.a.prototype:void 0,Cb=vb?vb.valueOf:void 0,Ob=Object.create,Pb=function(){function e(){}return function(t){if(!Object(qu.a)(t))return{};if(Ob)return Ob(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),_b=n("/1FC"),Mb=n("WOAq"),yb=n("EUcb"),wb=n("ovuK"),xb=n("xutz"),kb=xb.a&&xb.a.isMap,Ib=kb?Object(wb.a)(kb):function(e){return Object(yb.a)(e)&&"[object Map]"==Object(ub.a)(e)},Tb=xb.a&&xb.a.isSet,Sb=Tb?Object(wb.a)(Tb):function(e){return Object(yb.a)(e)&&"[object Set]"==Object(ub.a)(e)},Ab={};Ab["[object Arguments]"]=Ab["[object Array]"]=Ab["[object ArrayBuffer]"]=Ab["[object DataView]"]=Ab["[object Boolean]"]=Ab["[object Date]"]=Ab["[object Float32Array]"]=Ab["[object Float64Array]"]=Ab["[object Int8Array]"]=Ab["[object Int16Array]"]=Ab["[object Int32Array]"]=Ab["[object Map]"]=Ab["[object Number]"]=Ab["[object Object]"]=Ab["[object RegExp]"]=Ab["[object Set]"]=Ab["[object String]"]=Ab["[object Symbol]"]=Ab["[object Uint8Array]"]=Ab["[object Uint8ClampedArray]"]=Ab["[object Uint16Array]"]=Ab["[object Uint32Array]"]=!0,Ab["[object Error]"]=Ab["[object Function]"]=Ab["[object WeakMap]"]=!1;var Db=function e(t,n,o,c,i,a){var r,l=1&n,s=2&n,d=4&n;if(o&&(r=i?o(t,c,i,a):o(t)),void 0!==r)return r;if(!Object(qu.a)(t))return t;var g=Object(_b.a)(t);if(g){if(r=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&bb.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!l)return function(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t}(t,r)}else{var u=Object(ub.a)(t),b="[object Function]"==u||"[object GeneratorFunction]"==u;if(Object(Mb.a)(t))return Object(nb.a)(t,l);if("[object Object]"==u||"[object Arguments]"==u||b&&!i){if(r=s||b?{}:function(e){return"function"!=typeof e.constructor||Object(Wu.a)(e)?{}:Pb(ab(e))}(t),!l)return s?function(e,t){return Xu(e,lb(e),t)}(t,function(e,t){return e&&Xu(t,tb(t),e)}(r,t)):function(e,t){return Xu(e,Object(ob.a)(e),t)}(t,function(e,t){return e&&Xu(t,Object(Qu.a)(t),e)}(r,t))}else{if(!Ab[u])return i?t:{};r=function(e,t,n){var o,c,i=e.constructor;switch(t){case"[object ArrayBuffer]":return fb(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function(e,t){var n=t?fb(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?fb(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return(c=new(o=e).constructor(o.source,hb.exec(o))).lastIndex=o.lastIndex,c;case"[object Set]":return new i;case"[object Symbol]":return Cb?Object(Cb.call(e)):{}}}(t,u,l)}}a||(a=new Vu.a);var p=a.get(t);if(p)return p;a.set(t,r),Sb(t)?t.forEach((function(c){r.add(e(c,n,o,c,t,a))})):Ib(t)&&t.forEach((function(c,i){r.set(i,e(c,n,o,i,t,a))}));var f=d?s?gb:sb.a:s?keysIn:Qu.a,h=g?void 0:f(t);return function(e,t){for(var n=-1,o=null==e?0:e.length;++n<o&&!1!==t(e[n],n););}(h||t,(function(c,i){h&&(c=t[i=c]),Object(Yu.a)(r,i,e(c,n,o,i,t,a))})),r},Rb=n("IlA0"),Eb=n("UTJH"),zb=n("5iG2"),Lb=n("Tchk"),$b=function(e,t){return null==(e=function(e,t){return t.length<2?e:Object(Eb.a)(e,Object(zb.a)(t,0,-1))}(e,t=Object(Rb.a)(t,e)))||delete e[Object(Lb.a)((n=t,o=null==n?0:n.length,o?n[o-1]:void 0))];var n,o},Jb=n("8M4i"),Nb=Function.prototype.toString,jb=Object.prototype.hasOwnProperty,Fb=Nb.call(Object),Ub=function(e){return function(e){if(!Object(yb.a)(e)||"[object Object]"!=Object(Jb.a)(e))return!1;var t=ab(e);if(null===t)return!0;var n=jb.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Nb.call(n)==Fb}(e)?void 0:e},Bb=n("Tjpy"),Gb=Object(Bb.a)((function(e,t){var n={};if(null==e)return n;var o=!1;t=Object(Gu.a)(t,(function(t){return t=Object(Rb.a)(t,e),o||(o=t.length>1),t})),Xu(e,gb(e),n),o&&(n=Db(n,7,Ub));for(var c=t.length;c--;)$b(n,t[c]);return n}));class Vb{constructor(e){this.date=new Date(e.timestamp),this.localeDate=this.date.toLocaleString(),this.level=e.level,this.message=e.message;const t=Gb(e,"timestamp","level","message","label");if(0!==Object.keys(t).length&&(this.meta=JSON.stringify(t,void 0,2)),"audit"===e.level)try{const t=JSON.parse(e.message);this.by=t.user,this.domain=t.domain,this.action=t.action,this.meta=JSON.stringify(t,null,2),this.message=""}catch(n){console.error("Cannot parse audit message.",n)}}}let Yb=(()=>{class e{constructor(e,t,n){this.authHttp=e,this.restService=t,this.restExtractor=n}getLogs(t){const{isAuditLog:n,startDate:c}=t;let i=new r.f;return i=i.append("startDate",c),n||(i=i.append("level",t.level)),t.endDate&&i.append("endDate",t.endDate),this.authHttp.get(n?e.BASE_AUDIT_LOG_URL:e.BASE_LOG_URL,{params:i}).pipe(Object(hu.a)(e=>e.map(e=>new Vb(e))),Object(o.a)(e=>this.restExtractor.handleError(e)))}}return e.BASE_LOG_URL=c.a.apiUrl+"/api/v1/server/logs",e.BASE_AUDIT_LOG_URL=c.a.apiUrl+"/api/v1/server/audit-logs",e.\u0275fac=function(t){return new(t||e)(a.oc(r.b),a.oc(i.f),a.oc(i.e))},e.\u0275prov=a.Tb({token:e,factory:e.\u0275fac}),e})();const Hb=["logsElement"],Xb=["label","\u5237\u65B0"];function Qb(e,t){if(1&e&&(a.dc(0,"option",10),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.id),a.Jb(1),a.dd(e.label)}}function Kb(e,t){if(1&e&&(a.dc(0,"option",10),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.id),a.Jb(1),a.dd(e.label)}}function qb(e,t){if(1&e&&(a.dc(0,"option",10),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.id),a.Jb(1),a.dd(e.label)}}function Wb(e,t){if(1&e){const e=a.ec();a.dc(0,"div",1),a.dc(1,"select",2),a.sc("ngModelChange",(function(t){return a.Rc(e),a.wc().level=t}))("ngModelChange",(function(){return a.Rc(e),a.wc().refresh()})),a.ad(2,qb,2,2,"option",3),a.cc(),a.cc()}if(2&e){const e=a.wc();a.Jb(1),a.Dc("ngModel",e.level),a.Jb(1),a.Dc("ngForOf",e.levelChoices)}}var Zb,ep;function tp(e,t){1&e&&(a.dc(0,"div"),a.hc(1,Zb),a.cc())}function np(e,t){if(1&e&&(a.dc(0,"strong",16),a.hc(1,ep),a.cc()),2&e){const e=a.wc().$implicit;a.Jb(1),a.lc(e.by),a.ic(1)}}function op(e,t){if(1&e&&(a.dc(0,"strong",17),a.cd(1),a.cc()),2&e){const e=a.wc().$implicit;a.Jb(1),a.fd("",e.domain," -> ",e.action,"")}}Zb="Loading...",ep="By " + "\ufffd0\ufffd" + " ->";const cp=function(e,t){return{error:e,warn:t}};function ip(e,t){if(1&e&&(a.dc(0,"div",11),a.dc(1,"span",12),a.cd(2),a.cc(),a.dc(3,"span",13),a.cd(4),a.cc(),a.ad(5,np,2,1,"strong",14),a.ad(6,op,2,2,"strong",15),a.cd(7),a.dc(8,"pre"),a.cd(9),a.cc(),a.cc()),2&e){const e=t.$implicit;a.Dc("ngClass",a.Ic(7,cp,"error"===e.level,"warn"===e.level)),a.Jb(2),a.dd(e.level),a.Jb(2),a.ed("[",e.localeDate,"]"),a.Jb(1),a.Dc("ngIf",e.by),a.Jb(1),a.Dc("ngIf",e.domain),a.Jb(1),a.ed(" ",e.message," "),a.Jb(2),a.dd(e.meta)}}let ap=(()=>{class e{constructor(e,t,n){this.logsService=e,this.notifier=t,this.i18n=n,this.loading=!1,this.logs=[],this.timeChoices=[],this.levelChoices=[],this.logTypeChoices=[]}ngOnInit(){this.buildTimeChoices(),this.buildLevelChoices(),this.buildLogTypeChoices(),this.load()}refresh(){this.logs=[],this.load()}load(){this.loading=!0,this.logsService.getLogs({isAuditLog:this.isAuditLog(),level:this.level,startDate:this.startDate}).subscribe(e=>{this.logs=e,setTimeout(()=>{this.logsElement.nativeElement.scrollIntoView({block:"end",inline:"nearest"})})},e=>this.notifier.error(e.message),()=>this.loading=!1)}isAuditLog(){return"audit"===this.logType}buildTimeChoices(){const e=new Date;e.setHours(e.getHours()-1);const t=new Date;t.setDate(t.getDate()-1);const n=new Date;n.setDate(n.getDate()-7),this.timeChoices=[{id:n.toISOString(),label:this.i18n("Last week")},{id:t.toISOString(),label:this.i18n("Last day")},{id:e.toISOString(),label:this.i18n("Last hour")}],this.startDate=e.toISOString()}buildLevelChoices(){this.levelChoices=[{id:"debug",label:this.i18n("Debug")},{id:"info",label:this.i18n("Info")},{id:"warn",label:this.i18n("Warning")},{id:"error",label:this.i18n("Error")}],this.level="warn"}buildLogTypeChoices(){this.logTypeChoices=[{id:"standard",label:this.i18n("Standard logs")},{id:"audit",label:this.i18n("Audit logs")}],this.logType="audit"}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(Yb),a.Xb(g.f),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&a.Xc(Hb,!0),2&e&&a.Oc(n=a.tc())&&(t.logsElement=n.first)},decls:15,vars:7,consts:[[1,"header"],[1,"peertube-select-container"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","peertube-select-container",4,"ngIf"],["icon","refresh",3,"click",6,"label"],[1,"logs"],[4,"ngIf"],["logsElement",""],["class","log-row",3,"ngClass",4,"ngFor","ngForOf"],[3,"value"],[1,"log-row",3,"ngClass"],[1,"log-level"],[1,"log-date"],["class","log-by",4,"ngIf"],["class","log-domain-action",4,"ngIf"],[1,"log-by"],[1,"log-domain-action"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.dc(2,"select",2),a.sc("ngModelChange",(function(e){return t.logType=e}))("ngModelChange",(function(){return t.refresh()})),a.ad(3,Qb,2,2,"option",3),a.cc(),a.cc(),a.dc(4,"div",1),a.dc(5,"select",2),a.sc("ngModelChange",(function(e){return t.startDate=e}))("ngModelChange",(function(){return t.refresh()})),a.ad(6,Kb,2,2,"option",3),a.cc(),a.cc(),a.ad(7,Wb,3,2,"div",4),a.dc(8,"my-button",5),a.jc(9,Xb),a.sc("click",(function(){return t.refresh()})),a.cc(),a.cc(),a.dc(10,"div",6),a.ad(11,tp,2,0,"div",7),a.dc(12,"div",null,8),a.ad(14,ip,10,10,"div",9),a.cc(),a.cc()),2&e&&(a.Jb(2),a.Dc("ngModel",t.logType),a.Jb(1),a.Dc("ngForOf",t.logTypeChoices),a.Jb(2),a.Dc("ngModel",t.startDate),a.Jb(1),a.Dc("ngForOf",t.timeChoices),a.Jb(1),a.Dc("ngIf",!t.isAuditLog()),a.Jb(4),a.Dc("ngIf",t.loading),a.Jb(3),a.Dc("ngForOf",t.logs))},directives:[m.F,m.t,m.w,h.t,h.u,ee.a,m.y,m.I,h.r],styles:['.logs[_ngcontent-%COMP%]{font-family:monospace;font-size:13px;max-height:500px;overflow-y:auto;background:rgba(0,0,0,.03);padding:20px}.logs[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]{margin-top:1px;word-break:break-word}.logs[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.07)}.logs[_ngcontent-%COMP%]   .log-level[_ngcontent-%COMP%]{font-weight:600;margin-right:5px}.logs[_ngcontent-%COMP%]   .log-by[_ngcontent-%COMP%]{margin:0 5px}.logs[_ngcontent-%COMP%]   .warn[_ngcontent-%COMP%]{color:var(--mainColor)}.logs[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red}.logs[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin-bottom:5px;white-space:pre-wrap;word-wrap:break-word}.header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:10px}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:150px;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;font-size:15px}.header[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.header[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}@media screen and (max-width:150px){.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{width:100%}}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:15px;content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid transparent;border-top-color:#000;margin-top:-2px;z-index:100}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 35px 0 12px;width:calc(100% + 2px);position:relative;left:1px;border:1px solid #c6c6c6;background:transparent none;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:30px;text-overflow:ellipsis;color:var(--mainForegroundColor)}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%]{margin-left:10px}@media screen and (max-width:800px){.header[_ngcontent-%COMP%]{flex-direction:column}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%]{width:100%!important;margin-left:0!important;margin-bottom:10px!important}.header[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%]{text-align:center}}@media screen and (max-width:1040px){.main-col[_nghost-%COMP%]:not(.expanded)   .header[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .header[_ngcontent-%COMP%]{flex-direction:column}.main-col[_nghost-%COMP%]:not(.expanded)   .header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%], .main-col[_nghost-%COMP%]:not(.expanded)   .header[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%]{width:100%!important;margin-left:0!important;margin-bottom:10px!important}.main-col[_nghost-%COMP%]:not(.expanded)   .header[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%]{text-align:center}}']}),e})();var rp,lp,sp,dp,gp=n("XRCn");function up(e,t){1&e&&(a.dc(0,"a",6),a.hc(1,lp),a.cc())}function bp(e,t){1&e&&(a.dc(0,"a",7),a.hc(1,sp),a.cc())}function pp(e,t){1&e&&(a.dc(0,"a",8),a.hc(1,dp),a.cc())}rp="\u7CFB\u7EDF",lp="\u4EFB\u52A1",sp="\u65E5\u5FD7",dp="\u8C03\u8BD5";let fp=(()=>{class e{constructor(e){this.auth=e}hasLogsRight(){return this.auth.getUser().hasRight(gp.f.MANAGE_LOGS)}hasJobsRight(){return this.auth.getUser().hasRight(gp.f.MANAGE_JOBS)}hasDebugRight(){return this.auth.getUser().hasRight(gp.f.MANAGE_DEBUG)}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["ng-component"]],decls:8,vars:3,consts:[[1,"admin-sub-header"],[1,"form-sub-title"],[1,"admin-sub-nav"],["routerLink","jobs","routerLinkActive","active",4,"ngIf"],["routerLink","logs","routerLinkActive","active",4,"ngIf"],["routerLink","debug","routerLinkActive","active",4,"ngIf"],["routerLink","jobs","routerLinkActive","active"],["routerLink","logs","routerLinkActive","active"],["routerLink","debug","routerLinkActive","active"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.hc(2,rp),a.cc(),a.dc(3,"div",2),a.ad(4,up,2,0,"a",3),a.ad(5,bp,2,0,"a",4),a.ad(6,pp,2,0,"a",5),a.cc(),a.cc(),a.Yb(7,"router-outlet")),2&e&&(a.Jb(4),a.Dc("ngIf",t.hasJobsRight()),a.Jb(1),a.Dc("ngIf",t.hasLogsRight()),a.Jb(1),a.Dc("ngIf",t.hasDebugRight()))},directives:[h.u,_.m,_.k,_.j],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}"]}),e})(),hp=(()=>{class e{constructor(e,t,n){this.authHttp=e,this.restService=t,this.restExtractor=n}getDebug(){return this.authHttp.get(e.BASE_DEBUG_URL).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}}return e.BASE_DEBUG_URL=c.a.apiUrl+"/api/v1/server/debug",e.\u0275fac=function(t){return new(t||e)(a.oc(r.b),a.oc(i.f),a.oc(i.e))},e.\u0275prov=a.Tb({token:e,factory:e.\u0275fac}),e})(),mp=(()=>{class e{constructor(e,t){this.debugService=e,this.notifier=t}ngOnInit(){this.load()}load(){this.debugService.getDebug().subscribe(e=>this.debug=e,e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(hp),a.Xb(g.f))},e.\u0275cmp=a.Rb({type:e,selectors:[["ng-component"]],decls:37,vars:1,consts:[[1,"root"],["href","https://github.com/Chocobozzz/PeerTube/issues/1643#issuecomment-464789666"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"h4"),a.cd(2,"IP"),a.cc(),a.dc(3,"p"),a.cd(4,"PeerTube thinks your web browser public IP is "),a.dc(5,"strong"),a.cd(6),a.cc(),a.cd(7,"."),a.cc(),a.dc(8,"p"),a.cd(9,"If this is not your correct public IP, please consider fixing it because:"),a.cc(),a.dc(10,"ul"),a.dc(11,"li"),a.cd(12,"Views may not be counted correctly (reduced compared to what they should be)"),a.cc(),a.dc(13,"li"),a.cd(14,"Anti brute force system could be overzealous"),a.cc(),a.dc(15,"li"),a.cd(16,"P2P system could not work correctly"),a.cc(),a.cc(),a.dc(17,"p"),a.cd(18,"To fix it:"),a.cc(),a.Yb(19,"p"),a.dc(20,"ul"),a.dc(21,"li"),a.cd(22,"Check the "),a.dc(23,"code"),a.cd(24,"trust_proxy"),a.cc(),a.cd(25," configuration key"),a.cc(),a.dc(26,"li"),a.cd(27,"If you run PeerTube using Docker, check you run the "),a.dc(28,"code"),a.cd(29,"reverse-proxy"),a.cc(),a.cd(30," with "),a.dc(31,"code"),a.cd(32,'network_mode: "host"'),a.cc(),a.cd(33," (see "),a.dc(34,"a",1),a.cd(35,"issue 1643"),a.cc(),a.cd(36,")"),a.cc(),a.cc(),a.cc()),2&e&&(a.Jb(6),a.dd(null==t.debug?null:t.debug.ip))},styles:[".root[_ngcontent-%COMP%]{font-size:15px}.root[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-size:14px;font-weight:600}"]}),e})();const vp=[{path:"system",component:fp,data:{},children:[{path:"",redirectTo:"jobs",pathMatch:"full"},{path:"jobs",canActivate:[g.l],component:Bu,data:{meta:{userRight:ac.e.MANAGE_JOBS,title:"Jobs"}}},{path:"logs",canActivate:[g.l],component:ap,data:{meta:{userRight:ac.e.MANAGE_LOGS,title:"Logs"}}},{path:"debug",canActivate:[g.l],component:mp,data:{meta:{userRight:ac.e.MANAGE_DEBUG,title:"Debug"}}}]}];var Cp=n("j0I5"),Op=n("eIep"),Pp=(n("8aVP"),n("To7i"));let _p=(()=>{class e{constructor(e,t,n,o,c){this.authHttp=e,this.restExtractor=t,this.restService=n,this.i18n=o,this.pluginService=c}getPluginTypeOptions(){return[{label:this.i18n("Plugins"),value:Cp.a.PLUGIN},{label:this.i18n("Themes"),value:Cp.a.THEME}]}getPluginTypeLabel(e){return this.i18n(e===Cp.a.PLUGIN?"plugin":"theme")}getPlugins(t,n,c){const i=this.restService.componentPaginationToRestPagination(n);let a=new r.f;return a=this.restService.addRestGetParams(a,i,c),a=a.append("pluginType",t.toString()),this.authHttp.get(e.BASE_PLUGIN_URL,{params:a}).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}searchAvailablePlugins(t,n,c,i){const a=this.restService.componentPaginationToRestPagination(n);let l=new r.f;return l=this.restService.addRestGetParams(l,a,c),l=l.append("pluginType",t.toString()),i&&(l=l.append("search",i)),this.authHttp.get(e.BASE_PLUGIN_URL+"/available",{params:l}).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}getPlugin(t){return this.authHttp.get(e.BASE_PLUGIN_URL+"/"+t).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}getPluginRegisteredSettings(t,n){const c=this.pluginService.nameToNpmName(t,n);return this.authHttp.get(e.BASE_PLUGIN_URL+"/"+c+"/registered-settings").pipe(Object(Op.a)(e=>this.translateSettingsLabel(c,e)),Object(o.a)(e=>this.restExtractor.handleError(e)))}updatePluginSettings(t,n,c){const i=this.pluginService.nameToNpmName(t,n);return this.authHttp.put(e.BASE_PLUGIN_URL+"/"+i+"/settings",{settings:c}).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}uninstall(t,n){const c={npmName:this.pluginService.nameToNpmName(t,n)};return this.authHttp.post(e.BASE_PLUGIN_URL+"/uninstall",c).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}update(t,n){const c={npmName:this.pluginService.nameToNpmName(t,n)};return this.authHttp.post(e.BASE_PLUGIN_URL+"/update",c).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}install(t){return this.authHttp.post(e.BASE_PLUGIN_URL+"/install",{npmName:t}).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}translateSettingsLabel(e,t){return this.pluginService.translationsObservable.pipe(Object(hu.a)(t=>t[e]),Object(hu.a)(e=>({registeredSettings:t.registeredSettings.map(t=>Object.assign({},t,{label:Object(gp.u)(t.label,e)}))})))}}return e.BASE_PLUGIN_URL=c.a.apiUrl+"/api/v1/plugins",e.\u0275fac=function(t){return new(t||e)(a.oc(r.b),a.oc(i.e),a.oc(i.f),a.oc(l.a),a.oc(Pp.a))},e.\u0275prov=a.Tb({token:e,factory:e.\u0275fac}),e})();var Mp=n("6dmf"),yp=n("aIhz"),wp=n("XNiG"),xp=n("t2ka");const kp=function(){return["ui-clickable","ui-button-icon-left"]};function Ip(e,t){if(1&e&&a.Yb(0,"span",8),2&e){const e=a.wc(2).$implicit;a.Lb(e.icon),a.Dc("ngClass",a.Gc(3,kp))}}function Tp(e,t){if(1&e&&(a.bc(0),a.ad(1,Ip,1,4,"span",6),a.dc(2,"span",7),a.cd(3),a.cc(),a.ac()),2&e){const e=a.wc().$implicit;a.Jb(1),a.Dc("ngIf",e.icon),a.Jb(2),a.dd(e.label||"ui-btn")}}function Sp(e,t){1&e&&a.Zb(0)}const Ap=function(e,t){return{$implicit:e,index:t}};function Dp(e,t){if(1&e&&a.ad(0,Sp,1,0,"ng-container",9),2&e){const e=a.wc(),t=e.$implicit,n=e.index,o=a.wc();a.Dc("ngTemplateOutlet",o.itemTemplate)("ngTemplateOutletContext",a.Ic(2,Ap,t,n))}}const Rp=function(e,t,n,o,c){return{"ui-state-active":e,"ui-state-disabled":t,"ui-state-focus":n,"ui-button-text-icon-left":o,"ui-button-icon-only":c}};function Ep(e,t){if(1&e){const e=a.ec();a.dc(0,"div",2,3),a.sc("click",(function(n){a.Rc(e);const o=t.$implicit,c=t.index;return a.wc().onItemClick(n,o,c)}))("keydown.enter",(function(n){a.Rc(e);const o=t.$implicit,c=t.index;return a.wc().onItemClick(n,o,c)}))("focus",(function(t){return a.Rc(e),a.wc().onFocus(t)}))("blur",(function(t){return a.Rc(e),a.wc().onBlur(t)})),a.ad(2,Tp,4,2,"ng-container",4),a.ad(3,Dp,1,5,"ng-template",null,5,a.bd),a.cc()}if(2&e){const e=t.$implicit,n=a.Pc(1),o=a.Pc(4),c=a.wc();a.Mb("ui-button ui-widget ui-state-default ui-button-text-only ",e.styleClass,""),a.Dc("ngClass",a.Lc(11,Rp,c.isSelected(e),c.disabled||e.disabled,n==c.focusedItem,null!=e.icon,e.icon&&!e.label)),a.Kb("aria-pressed",c.isSelected(e))("title",e.title)("aria-label",e.label)("tabindex",c.tabindex)("aria-labelledby",c.ariaLabelledBy),a.Jb(2),a.Dc("ngIf",!c.itemTemplate)("ngIfElse",o)}}const zp={provide:m.s,useExisting:Object(a.ab)(()=>Lp),multi:!0};let Lp=(()=>{let e=class{constructor(e){this.cd=e,this.tabindex=0,this.onOptionClick=new a.n,this.onChange=new a.n,this.onModelChange=()=>{},this.onModelTouched=()=>{}}get options(){return this._options}set options(e){}ngOnChanges(e){e.options&&(this._options=this.optionLabel?xp.b.generateSelectItems(e.options.currentValue,this.optionLabel):e.options.currentValue)}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e}onItemClick(e,t,n){if(!this.disabled&&!t.disabled){if(this.multiple){let e=this.findItemIndex(t);this.value=-1!=e?this.value.filter((t,n)=>n!=e):[...this.value||[],t.value]}else this.value=t.value;this.onOptionClick.emit({originalEvent:e,option:t,index:n}),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}}onFocus(e){this.focusedItem=e.target}onBlur(e){this.focusedItem=null,this.onModelTouched()}isSelected(e){return this.multiple?-1!=this.findItemIndex(e):xp.b.equals(e.value,this.value,this.dataKey)}findItemIndex(e){let t=-1;if(this.value)for(let n=0;n<this.value.length;n++)if(this.value[n]==e.value){t=n;break}return t}};return e.\u0275fac=function(t){return new(t||e)(a.Xb(a.h))},e.\u0275cmp=a.Rb({type:e,selectors:[["p-selectButton"]],contentQueries:function(e,t,n){var o;1&e&&a.Pb(n,a.R,!0),2&e&&a.Oc(o=a.tc())&&(t.itemTemplate=o.first)},inputs:{tabindex:"tabindex",options:"options",disabled:"disabled",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",dataKey:"dataKey",optionLabel:"optionLabel"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[a.Ib([zp]),a.Hb],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["role","button",3,"class","ngClass","click","keydown.enter","focus","blur",4,"ngFor","ngForOf"],["role","button",3,"ngClass","click","keydown.enter","focus","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"ui-button-text","ui-clickable"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.ad(1,Ep,5,17,"div",1),a.cc()),2&e&&(a.Lb(t.styleClass),a.Dc("ngClass","ui-selectbutton ui-buttonset ui-widget ui-corner-all ui-buttonset-"+(t.options?t.options.length:0))("ngStyle",t.style),a.Jb(1),a.Dc("ngForOf",t.options))},directives:[h.r,h.y,h.t,h.u,h.C],encapsulation:2}),e})(),$p=(()=>{let e=class{};return e.\u0275mod=a.Vb({type:e}),e.\u0275inj=a.Ub({factory:function(t){return new(t||e)},imports:[[h.c]]}),e})();var Jp=n("F3OD"),Np=function(e,t,n,o){return new(n||(n=Promise))((function(c,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function r(e){try{l(o.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}))};function jp(e,t){if(1&e&&(a.dc(0,"div",5),a.cd(1),a.cc()),2&e){const e=a.wc();a.Jb(1),a.ed(" ",e.getNoResultMessage(),"\n")}}const Fp=["title","\u524D\u5F80\u63D2\u4EF6\u9996\u9875"],Up=["title","\u524D\u5F80\u63D2\u4EF6\u9996\u9875"],Bp=["label","\u5378\u8F7D"],Gp=["label","\u8BBE\u7F6E"];function Vp(e,t){if(1&e&&(a.dc(0,"my-edit-button",20),a.jc(1,Gp),a.cc()),2&e){const e=a.wc().$implicit,t=a.wc();a.Dc("routerLink",t.getShowRouterLink(e))}}function Yp(e,t){if(1&e){const e=a.ec();a.dc(0,"my-button",21),a.sc("click",(function(){a.Rc(e);const t=a.wc().$implicit;return a.wc().update(t)})),a.cc()}if(2&e){const e=a.wc().$implicit,t=a.wc();a.Dc("loading",t.isUpdating(e))("label",t.getUpdateLabel(e)),a.Kb("disabled",t.isUpdating(e))}}function Hp(e,t){if(1&e){const e=a.ec();a.dc(0,"div",6),a.dc(1,"div",7),a.dc(2,"div",8),a.dc(3,"span",9),a.cd(4),a.cc(),a.dc(5,"span",10),a.cd(6),a.cc(),a.dc(7,"a",11),a.jc(8,Fp),a.Yb(9,"my-global-icon",12),a.cc(),a.dc(10,"a",11),a.jc(11,Up),a.Yb(12,"my-global-icon",13),a.cc(),a.dc(13,"div",14),a.ad(14,Vp,2,1,"my-edit-button",15),a.ad(15,Yp,1,3,"my-button",16),a.dc(16,"my-delete-button",17),a.jc(17,Bp),a.sc("click",(function(){a.Rc(e);const n=t.$implicit;return a.wc().uninstall(n)})),a.cc(),a.cc(),a.cc(),a.dc(18,"div",18),a.dc(19,"div",19),a.cd(20),a.cc(),a.cc(),a.cc(),a.cc()}if(2&e){const e=t.$implicit,n=a.wc();a.Jb(4),a.dd(e.name),a.Jb(2),a.dd(e.version),a.Jb(1),a.Dc("href",e.homepage,a.Tc),a.Jb(3),a.Dc("href","https://www.npmjs.com/package/peertube-plugin-"+e.name,a.Tc),a.Jb(4),a.Dc("ngIf",n.pluginType!==n.PluginType.THEME),a.Jb(1),a.Dc("ngIf",n.isUpdateAvailable(e)),a.Jb(5),a.dd(e.description)}}let Xp=(()=>{class e{constructor(e,t,n,o,c,i,a){this.i18n=e,this.pluginService=t,this.pluginApiService=n,this.notifier=o,this.confirmService=c,this.router=i,this.route=a,this.pluginTypeOptions=[],this.pluginType=Cp.a.PLUGIN,this.pagination={currentPage:1,itemsPerPage:10,totalItems:null},this.sort="name",this.plugins=[],this.updating={},this.PluginType=Cp.a,this.onDataSubject=new wp.a,this.pluginTypeOptions=this.pluginApiService.getPluginTypeOptions()}ngOnInit(){const e=this.route.snapshot.queryParams;e.pluginType&&(this.pluginType=parseInt(e.pluginType,10)),this.reloadPlugins()}reloadPlugins(){this.pagination.currentPage=1,this.plugins=[],this.router.navigate([],{queryParams:{pluginType:this.pluginType}}),this.loadMorePlugins()}loadMorePlugins(){this.pluginApiService.getPlugins(this.pluginType,this.pagination,this.sort).subscribe(e=>{this.plugins=this.plugins.concat(e.data),this.pagination.totalItems=e.total,this.onDataSubject.next(e.data)},e=>this.notifier.error(e.message))}onNearOfBottom(){Object(Mp.a)(this.pagination)&&(this.pagination.currentPage+=1,this.loadMorePlugins())}getNoResultMessage(){return this.i18n(this.pluginType===Cp.a.PLUGIN?"You don't have plugins installed yet.":"You don't have themes installed yet.")}isUpdateAvailable(e){return e.latestVersion&&Object(yp.a)(e.latestVersion,e.version)>0}getUpdateLabel(e){return this.i18n("Update to {{version}}",{version:e.latestVersion})}isUpdating(e){return!!this.updating[this.getUpdatingKey(e)]}uninstall(e){return Np(this,void 0,void 0,(function*(){!1!==(yield this.confirmService.confirm(this.i18n("Do you really want to uninstall {{pluginName}}?",{pluginName:e.name}),this.i18n("Uninstall")))&&this.pluginApiService.uninstall(e.name,e.type).subscribe(()=>{this.notifier.success(this.i18n("{{pluginName}} uninstalled.",{pluginName:e.name})),this.plugins=this.plugins.filter(t=>t.name!==e.name),this.pagination.totalItems--},e=>this.notifier.error(e.message))}))}update(e){return Np(this,void 0,void 0,(function*(){const t=this.getUpdatingKey(e);this.updating[t]||(this.updating[t]=!0,this.pluginApiService.update(e.name,e.type).pipe().subscribe(n=>{this.updating[t]=!1,this.notifier.success(this.i18n("{{pluginName}} updated.",{pluginName:e.name})),Object.assign(e,n)},e=>this.notifier.error(e.message)))}))}getShowRouterLink(e){return["/admin","plugins","show",this.pluginService.nameToNpmName(e.name,e.type)]}getUpdatingKey(e){return e.name+e.type}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(l.a),a.Xb(Pp.a),a.Xb(_p),a.Xb(g.f),a.Xb(g.c),a.Xb(_.h),a.Xb(_.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-plugin-list-installed"]],decls:5,vars:6,consts:[[1,"toggle-plugin-type"],[3,"options","ngModel","ngModelChange"],["class","no-results",4,"ngIf"],["myInfiniteScroller","",1,"plugins",3,"autoInit","dataObservable","nearOfBottom"],["class","card plugin",4,"ngFor","ngForOf"],[1,"no-results"],[1,"card","plugin"],[1,"card-body"],[1,"first-row"],[1,"plugin-name"],[1,"plugin-version"],["target","_blank","rel","noopener noreferrer",1,"plugin-icon",3,"href",6,"title"],["iconName","home"],["iconName","npm"],[1,"buttons"],[3,"routerLink",4,"ngIf",6,"label"],["class","update-button","icon","refresh",3,"loading","label","click",4,"ngIf"],[3,"click",6,"label"],[1,"second-row"],[1,"description"],[3,"routerLink",6,"label"],["icon","refresh",1,"update-button",3,"loading","label","click"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"p-selectButton",1),a.sc("ngModelChange",(function(e){return t.pluginType=e}))("ngModelChange",(function(){return t.reloadPlugins()})),a.cc(),a.cc(),a.ad(2,jp,2,1,"div",2),a.dc(3,"div",3),a.sc("nearOfBottom",(function(){return t.onNearOfBottom()})),a.ad(4,Hp,21,7,"div",4),a.cc()),2&e&&(a.Jb(1),a.Dc("options",t.pluginTypeOptions)("ngModel",t.pluginType),a.Jb(1),a.Dc("ngIf",0===t.pagination.totalItems),a.Jb(1),a.Dc("autoInit",!0)("dataObservable",t.onDataSubject.asObservable()),a.Jb(1),a.Dc("ngForOf",t.plugins))},directives:[Lp,m.t,m.w,h.u,Jp.a,h.t,Fc.a,oe.a,ne.a,_.i,ee.a],styles:[".toggle-plugin-type[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:30px}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button-text{font-size:15px;font-weight:600}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button.ui-state-default{background-color:#f0f0f0;border:1px solid #f0f0f0}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button.ui-state-active{background-color:var(--mainColor);border-color:var(--mainColor)}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button.ui-state-active:hover{background-color:var(--mainHoverColor);border-color:var(--mainHoverColor)}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button:not(.ui-state-active).ui-state-focus{box-shadow:0 0 0 .1rem rgba(87,85,217,.2)}",'.plugin[_ngcontent-%COMP%]{margin:15px 0;background-color:var(--submenuColor)}.first-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.first-row[_ngcontent-%COMP%]   .plugin-name[_ngcontent-%COMP%]{font-size:16px;margin-right:10px;font-weight:600}.first-row[_ngcontent-%COMP%]   .plugin-version[_ngcontent-%COMP%]{opacity:.6}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]{margin-left:10px}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:var(--greyForegroundColor)}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:var(--greyForegroundColor)}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:var(--greyForegroundColor)}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[iconName=npm][_ngcontent-%COMP%]     svg path{fill:var(--greyForegroundColor)}.first-row[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-left:auto;width:-webkit-max-content;width:-moz-max-content;width:max-content}.first-row[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:last-child){margin-right:10px}.second-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;align-items:center;justify-content:space-between}.second-row[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{opacity:.8}.action-button[_ngcontent-%COMP%]{display:inline-block;border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.action-button[_ngcontent-%COMP%]:active, .action-button[_ngcontent-%COMP%]:focus, .action-button[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.action-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;width:21px;margin-right:0;top:-2px}',".update-button[disabled=true][_ngcontent-%COMP%]     .action-button{cursor:default!important}"]}),e})();var Qp=n("Kj3r"),Kp=n("/uUt");const qp=["placeholder","\u641C\u7D22\u2026"];var Wp,Zp,ef,tf,nf;function of(e,t){1&e&&(a.dc(0,"div",9),a.hc(1,Wp),a.cc())}function cf(e,t){1&e&&(a.bc(0),a.Yb(1,"my-global-icon",12),a.bc(2),a.hc(3,Zp),a.ac(),a.ac())}function af(e,t){if(1&e&&(a.bc(0),a.Yb(1,"my-global-icon",13),a.bc(2),a.hc(3,tf),a.ac(),a.ac()),2&e){const e=a.wc(2);a.Jb(3),a.lc(e.pagination.totalItems)(e.pagination.totalItems)(e.search),a.ic(3)}}function rf(e,t){if(1&e&&(a.dc(0,"div",10),a.ad(1,cf,4,0,"ng-container",11),a.ad(2,af,4,3,"ng-container",11),a.cc()),2&e){const e=a.wc();a.Jb(1),a.Dc("ngIf",!e.search),a.Jb(1),a.Dc("ngIf",!!e.search)}}function lf(e,t){1&e&&(a.dc(0,"div",14),a.hc(1,nf),a.cc())}Wp="\n  \u4E3A\u4E86\u52A0\u8F7D\u60A8\u65B0\u5B89\u88C5\u7684\u63D2\u4EF6\u6216\u4E3B\u9898\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u3002\n",Zp="\u5F53\u4E0B\u6D41\u884C",ef="{VAR_PLURAL, plural, =1 {\u6761\u7ED3\u679C} other {\u6761\u7ED3\u679C}}",ef=a.mc(ef,{VAR_PLURAL:"\ufffd1\ufffd"}),tf="\n      " + "\ufffd0\ufffd" + " " + ef + " for \"<x id=\"INTERPOLATION_1\" equiv-text=\"{{ search }}\"/>\"\n      ",nf="\n  \u6CA1\u6709\u7ED3\u679C\u3002\n";const sf=["title","\u524D\u5F80\u63D2\u4EF6\u9996\u9875"],df=["title","Go to the plugin npm package"];function gf(e,t){1&e&&(a.dc(0,"span",28),a.cd(1,"Installed"),a.cc())}function uf(e,t){if(1&e){const e=a.ec();a.dc(0,"my-button",29),a.sc("click",(function(){a.Rc(e);const t=a.wc().$implicit;return a.wc().install(t)})),a.cc()}if(2&e){const e=a.wc().$implicit,t=a.wc();a.Dc("loading",t.isInstalling(e)),a.Kb("disabled",t.isInstalling(e))}}function bf(e,t){if(1&e&&(a.dc(0,"div",15),a.dc(1,"div",16),a.dc(2,"div",17),a.dc(3,"span",18),a.cd(4),a.cc(),a.dc(5,"span",19),a.cd(6),a.cc(),a.dc(7,"a",20),a.jc(8,sf),a.Yb(9,"my-global-icon",21),a.cc(),a.dc(10,"a",20),a.jc(11,df),a.Yb(12,"my-global-icon",22),a.cc(),a.ad(13,gf,2,0,"span",23),a.dc(14,"div",24),a.ad(15,uf,1,2,"my-button",25),a.cc(),a.cc(),a.dc(16,"div",26),a.dc(17,"div",27),a.cd(18),a.cc(),a.cc(),a.cc(),a.cc()),2&e){const e=t.$implicit;a.Jb(4),a.dd(e.name),a.Jb(2),a.dd(e.latestVersion),a.Jb(1),a.Dc("href",e.homepage,a.Tc),a.Jb(3),a.Dc("href","https://www.npmjs.com/package/peertube-plugin-"+e.name,a.Tc),a.Jb(3),a.Dc("ngIf",e.installed),a.Jb(2),a.Dc("ngIf",!1===e.installed),a.Jb(3),a.dd(e.description)}}let pf=(()=>{class e{constructor(e,t,n,o,c,i,a){this.server=e,this.i18n=t,this.pluginService=n,this.notifier=o,this.confirmService=c,this.router=i,this.route=a,this.pluginTypeOptions=[],this.pluginType=Cp.a.PLUGIN,this.pagination={currentPage:1,itemsPerPage:10,totalItems:null},this.sort="-popularity",this.search="",this.isSearching=!1,this.plugins=[],this.installing={},this.pluginInstalled=!1,this.onDataSubject=new wp.a,this.searchSubject=new wp.a,this.pluginTypeOptions=this.pluginService.getPluginTypeOptions()}ngOnInit(){const e=this.route.snapshot.queryParams;e.pluginType&&(this.pluginType=parseInt(e.pluginType,10)),this.searchSubject.asObservable().pipe(Object(Qp.a)(400),Object(Kp.a)()).subscribe(e=>{this.search=e,this.reloadPlugins()}),this.reloadPlugins()}onSearchChange(e){this.searchSubject.next(e.target.value)}reloadPlugins(){this.pagination.currentPage=1,this.plugins=[],this.router.navigate([],{queryParams:{pluginType:this.pluginType}}),this.loadMorePlugins()}loadMorePlugins(){this.isSearching=!0,this.pluginService.searchAvailablePlugins(this.pluginType,this.pagination,this.sort,this.search).subscribe(e=>{this.isSearching=!1,this.plugins=this.plugins.concat(e.data),this.pagination.totalItems=e.total,this.onDataSubject.next(e.data)},e=>{console.error(e);const t=this.i18n("The plugin index is not available. Please retry later.");this.notifier.error(t)})}onNearOfBottom(){Object(Mp.a)(this.pagination)&&(this.pagination.currentPage+=1,this.loadMorePlugins())}isInstalling(e){return!!this.installing[e.npmName]}install(e){return t=this,void 0,o=function*(){this.installing[e.npmName]||!1!==(yield this.confirmService.confirm(this.i18n("Please only install plugins or themes you trust, since they can execute any code on your instance."),this.i18n("Install {{pluginName}}?",{pluginName:e.name})))&&(this.installing[e.npmName]=!0,this.pluginService.install(e.npmName).subscribe(()=>{this.installing[e.npmName]=!1,this.pluginInstalled=!0,this.notifier.success(this.i18n("{{pluginName}} installed.",{pluginName:e.name})),e.installed=!0},e=>this.notifier.error(e.message)))},new((n=void 0)||(n=Promise))((function(e,c){function i(e){try{r(o.next(e))}catch(t){c(t)}}function a(e){try{r(o.throw(e))}catch(t){c(t)}}function r(t){var o;t.done?e(t.value):(o=t.value,o instanceof n?o:new n((function(e){e(o)}))).then(i,a)}r((o=o.apply(t,[])).next())}));var t,n,o}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.i),a.Xb(l.a),a.Xb(_p),a.Xb(g.f),a.Xb(g.c),a.Xb(_.h),a.Xb(_.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-plugin-search"]],decls:10,vars:8,consts:[[1,"toggle-plugin-type"],[3,"options","ngModel","ngModelChange"],[1,"search-bar"],["type","text",3,"input",6,"placeholder"],["class","alert alert-info",4,"ngIf"],["class","result-title",4,"ngIf"],["class","no-results",4,"ngIf"],["myInfiniteScroller","",1,"plugins",3,"autoInit","dataObservable","nearOfBottom"],["class","card plugin",4,"ngFor","ngForOf"],[1,"alert","alert-info"],[1,"result-title"],[4,"ngIf"],["iconName","trending"],["iconName","search"],[1,"no-results"],[1,"card","plugin"],[1,"card-body"],[1,"first-row"],[1,"plugin-name"],[1,"plugin-version"],["target","_blank","rel","noopener noreferrer",1,"plugin-icon",3,"href",6,"title"],["iconName","home"],["iconName","npm"],["class","badge badge-success",4,"ngIf"],[1,"buttons"],["class","update-button","label","Install","icon","cloud-download",3,"loading","click",4,"ngIf"],[1,"second-row"],[1,"description"],[1,"badge","badge-success"],["label","Install","icon","cloud-download",1,"update-button",3,"loading","click"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"p-selectButton",1),a.sc("ngModelChange",(function(e){return t.pluginType=e}))("ngModelChange",(function(){return t.reloadPlugins()})),a.cc(),a.cc(),a.dc(2,"div",2),a.dc(3,"input",3),a.jc(4,qp),a.sc("input",(function(e){return t.onSearchChange(e)})),a.cc(),a.cc(),a.ad(5,of,2,0,"div",4),a.ad(6,rf,3,2,"div",5),a.ad(7,lf,2,0,"div",6),a.dc(8,"div",7),a.sc("nearOfBottom",(function(){return t.onNearOfBottom()})),a.ad(9,bf,19,7,"div",8),a.cc()),2&e&&(a.Jb(1),a.Dc("options",t.pluginTypeOptions)("ngModel",t.pluginType),a.Jb(4),a.Dc("ngIf",t.pluginInstalled),a.Jb(1),a.Dc("ngIf",!t.isSearching),a.Jb(1),a.Dc("ngIf",0===t.pagination.totalItems),a.Jb(1),a.Dc("autoInit",!0)("dataObservable",t.onDataSubject.asObservable()),a.Jb(1),a.Dc("ngForOf",t.plugins))},directives:[Lp,m.t,m.w,h.u,Jp.a,h.t,Fc.a,ee.a],styles:[".toggle-plugin-type[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:30px}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button-text{font-size:15px;font-weight:600}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button.ui-state-default{background-color:#f0f0f0;border:1px solid #f0f0f0}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button.ui-state-active{background-color:var(--mainColor);border-color:var(--mainColor)}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button.ui-state-active:hover{background-color:var(--mainHoverColor);border-color:var(--mainHoverColor)}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button:not(.ui-state-active).ui-state-focus{box-shadow:0 0 0 .1rem rgba(87,85,217,.2)}",'.plugin[_ngcontent-%COMP%]{margin:15px 0;background-color:var(--submenuColor)}.first-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.first-row[_ngcontent-%COMP%]   .plugin-name[_ngcontent-%COMP%]{font-size:16px;margin-right:10px;font-weight:600}.first-row[_ngcontent-%COMP%]   .plugin-version[_ngcontent-%COMP%]{opacity:.6}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]{margin-left:10px}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:var(--greyForegroundColor)}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:var(--greyForegroundColor)}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:var(--greyForegroundColor)}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[iconName=npm][_ngcontent-%COMP%]     svg path{fill:var(--greyForegroundColor)}.first-row[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-left:auto;width:-webkit-max-content;width:-moz-max-content;width:max-content}.first-row[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:last-child){margin-right:10px}.second-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;align-items:center;justify-content:space-between}.second-row[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{opacity:.8}.action-button[_ngcontent-%COMP%]{display:inline-block;border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.action-button[_ngcontent-%COMP%]:active, .action-button[_ngcontent-%COMP%]:focus, .action-button[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.action-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;width:21px;margin-right:0;top:-2px}',".search-bar[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:30px 0}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:60%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;height:35px}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:60%){.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.result-title[_ngcontent-%COMP%]{font-size:22px;font-weight:600;margin-bottom:15px}.result-title[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{margin-right:5px}.badge[_ngcontent-%COMP%]{font-size:13px;font-weight:600;margin-left:15px}"]}),e})();function ff(e,t){if(1&e&&a.Yb(0,"label",15),2&e){const e=a.wc().$implicit;a.Dc("innerHTML",e.label,a.Sc),a.Kb("for",e.name)}}function hf(e,t){if(1&e&&a.Yb(0,"input",16),2&e){const e=a.wc().$implicit;a.Dc("id",e.name)("formControlName",e.name)}}function mf(e,t){if(1&e&&a.Yb(0,"textarea",16),2&e){const e=a.wc().$implicit;a.Dc("id",e.name)("formControlName",e.name)}}function vf(e,t){1&e&&a.Yb(0,"my-help",17)}function Cf(e,t){1&e&&a.Yb(0,"my-help",18)}const Of=function(e){return{"input-error":e}};function Pf(e,t){if(1&e&&a.Yb(0,"my-markdown-textarea",19),2&e){const e=a.wc().$implicit,t=a.wc(3);a.Dc("id",e.name)("formControlName",e.name)("classes",a.Hc(3,Of,t.formErrors["settings.name"]))}}function _f(e,t){if(1&e&&a.Yb(0,"my-markdown-textarea",20),2&e){const e=a.wc().$implicit,t=a.wc(3);a.Dc("id",e.name)("formControlName",e.name)("classes",a.Hc(3,Of,t.formErrors["settings.name"]))}}function Mf(e,t){if(1&e&&a.Yb(0,"my-peertube-checkbox",21),2&e){const e=a.wc().$implicit;a.Dc("id",e.name)("formControlName",e.name)("labelInnerHTML",e.label)}}function yf(e,t){if(1&e&&(a.dc(0,"div",22),a.cd(1),a.cc()),2&e){const e=a.wc().$implicit,t=a.wc(3);a.Jb(1),a.ed(" ",t.formErrors[e.name]," ")}}function wf(e,t){if(1&e&&(a.dc(0,"div",6),a.ad(1,ff,1,2,"label",7),a.ad(2,hf,1,2,"input",8),a.ad(3,mf,1,2,"textarea",8),a.ad(4,vf,1,0,"my-help",9),a.ad(5,Cf,1,0,"my-help",10),a.ad(6,Pf,1,5,"my-markdown-textarea",11),a.ad(7,_f,1,5,"my-markdown-textarea",12),a.ad(8,Mf,1,3,"my-peertube-checkbox",13),a.ad(9,yf,2,1,"div",14),a.cc()),2&e){const e=t.$implicit,n=a.wc(3);a.Jb(1),a.Dc("ngIf","input-checkbox"!==e.type),a.Jb(1),a.Dc("ngIf","input"===e.type),a.Jb(1),a.Dc("ngIf","input-textarea"===e.type),a.Jb(1),a.Dc("ngIf","markdown-text"===e.type),a.Jb(1),a.Dc("ngIf","markdown-enhanced"===e.type),a.Jb(1),a.Dc("ngIf","markdown-text"===e.type),a.Jb(1),a.Dc("ngIf","markdown-enhanced"===e.type),a.Jb(1),a.Dc("ngIf","input-checkbox"===e.type),a.Jb(1),a.Dc("ngIf",n.formErrors[e.name])}}function xf(e,t){if(1&e){const e=a.ec();a.dc(0,"form",3),a.sc("ngSubmit",(function(){return a.Rc(e),a.wc(2).formValidated()})),a.ad(1,wf,10,9,"div",4),a.Yb(2,"input",5),a.cc()}if(2&e){const e=a.wc(2);a.Dc("formGroup",e.form),a.Jb(1),a.Dc("ngForOf",e.registeredSettings),a.Jb(1),a.Dc("disabled",!e.form.valid)}}var kf;function If(e,t){if(1&e&&(a.dc(0,"div",23),a.hc(1,kf),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.lc(e.pluginTypeLabel),a.ic(1)}}function Tf(e,t){if(1&e&&(a.bc(0),a.dc(1,"h2"),a.bc(2),a.cd(3),a.ac(),a.cd(4),a.cc(),a.ad(5,xf,3,3,"form",1),a.ad(6,If,2,1,"div",2),a.ac()),2&e){const e=a.wc();a.Jb(3),a.dd(e.pluginTypeLabel),a.Jb(1),a.ed(" ",e.plugin.name," "),a.Jb(1),a.Dc("ngIf",e.hasRegisteredSettings()),a.Jb(1),a.Dc("ngIf",!e.hasRegisteredSettings())}}kf="\n    \u6B64 " + "\ufffd0\ufffd" + " \u6CA1\u6709\u8BBE\u7F6E\u9009\u9879\u3002\n  ";let Sf=(()=>{class e extends i.b{constructor(e,t,n,o,c){super(),this.formValidatorService=e,this.i18n=t,this.pluginService=n,this.notifier=o,this.route=c,this.registeredSettings=[]}ngOnInit(){this.sub=this.route.params.subscribe(e=>{this.loadPlugin(e.npmName)})}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}formValidated(){this.pluginService.updatePluginSettings(this.plugin.name,this.plugin.type,this.form.value).subscribe(()=>{this.notifier.success(this.i18n("Settings updated."))},e=>this.notifier.error(e.message))}hasRegisteredSettings(){return Array.isArray(this.registeredSettings)&&0!==this.registeredSettings.length}loadPlugin(e){this.pluginService.getPlugin(e).pipe(Object(Op.a)(e=>this.pluginService.getPluginRegisteredSettings(e.name,e.type).pipe(Object(hu.a)(t=>({plugin:e,registeredSettings:t.registeredSettings}))))).subscribe(({plugin:e,registeredSettings:t})=>{this.plugin=e,this.registeredSettings=t,this.pluginTypeLabel=this.pluginService.getPluginTypeLabel(this.plugin.type),this.buildSettingsForm()},e=>this.notifier.error(e.message))}buildSettingsForm(){const e={},t={};for(const n of this.registeredSettings)e[n.name]=null,t[n.name]=this.getSetting(n.name);this.buildForm(e),this.form.patchValue(t)}getSetting(e){const t=this.plugin.settings;return t&&t[e]?t[e]:this.registeredSettings.find(t=>t.name===e).default}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(i.c),a.Xb(l.a),a.Xb(_p),a.Xb(g.f),a.Xb(_.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-plugin-show-installed"]],features:[a.Gb],decls:1,vars:1,consts:[[4,"ngIf"],["role","form",3,"formGroup","ngSubmit",4,"ngIf"],["class","no-settings",4,"ngIf"],["role","form",3,"formGroup","ngSubmit"],["class","form-group",4,"ngFor","ngForOf"],["type","submit","value","Update plugin settings",3,"disabled"],[1,"form-group"],[3,"innerHTML",4,"ngIf"],["type","text",3,"id","formControlName",4,"ngIf"],["helpType","markdownText",4,"ngIf"],["helpType","markdownEnhanced",4,"ngIf"],["markdownType","text","textareaWidth","500px",3,"id","formControlName","classes",4,"ngIf"],["markdownType","enhanced","textareaWidth","500px",3,"id","formControlName","classes",4,"ngIf"],[3,"id","formControlName","labelInnerHTML",4,"ngIf"],["class","form-error",4,"ngIf"],[3,"innerHTML"],["type","text",3,"id","formControlName"],["helpType","markdownText"],["helpType","markdownEnhanced"],["markdownType","text","textareaWidth","500px",3,"id","formControlName","classes"],["markdownType","enhanced","textareaWidth","500px",3,"id","formControlName","classes"],[3,"id","formControlName","labelInnerHTML"],[1,"form-error"],[1,"no-settings"]],template:function(e,t){1&e&&a.ad(0,Tf,7,4,"ng-container",0),2&e&&a.Dc("ngIf",t.plugin)},directives:[h.u,m.J,m.u,m.m,h.t,m.d,m.t,m.k,C.a,O.a,M.a],styles:['h2[_ngcontent-%COMP%]{margin-bottom:20px}input[_ngcontent-%COMP%]:not([type=submit]){display:inline-block;height:30px;width:340px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;display:block}input[_ngcontent-%COMP%]:not([type=submit])::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit])::-moz-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit])::-ms-input-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit])::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:340px){input[_ngcontent-%COMP%]:not([type=submit]){width:100%}}textarea[_ngcontent-%COMP%]{display:inline-block;height:30px;width:340px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;color:var(--textareaForegroundColor);background-color:var(--textareaBackgroundColor);height:200px;padding:5px 15px;font-size:15px;display:block}textarea[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:340px){textarea[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:340px;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;font-size:15px}.peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}@media screen and (max-width:340px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:15px;content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid transparent;border-top-color:#000;margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 35px 0 12px;width:calc(100% + 2px);position:relative;left:1px;border:1px solid #c6c6c6;background:transparent none;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:30px;text-overflow:ellipsis;color:var(--mainForegroundColor)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}button[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer;margin-top:10px}button.focus-visible[_ngcontent-%COMP%], button[_ngcontent-%COMP%]:focus, input[type=submit].focus-visible[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}button[_ngcontent-%COMP%], button[_ngcontent-%COMP%]:active, button[_ngcontent-%COMP%]:focus, input[type=submit][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}button[_ngcontent-%COMP%]:hover, input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}button.disabled[_ngcontent-%COMP%], button[disabled][_ngcontent-%COMP%], input[type=submit].disabled[_ngcontent-%COMP%], input[type=submit][disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:#fff}button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:#fff}button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:#fff}']}),e})();var Af,Df,Rf;Af="\u63D2\u4EF6/\u4E3B\u9898",Df="\u5DF2\u5B89\u88C5",Rf="\u641C\u7D22";let Ef=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Rb({type:e,selectors:[["ng-component"]],decls:9,vars:0,consts:[[1,"admin-sub-header"],[1,"form-sub-title"],[1,"admin-sub-nav"],["routerLink","list-installed","routerLinkActive","active"],["routerLink","search","routerLinkActive","active"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.hc(2,Af),a.cc(),a.dc(3,"div",2),a.dc(4,"a",3),a.hc(5,Df),a.cc(),a.dc(6,"a",4),a.hc(7,Rf),a.cc(),a.cc(),a.cc(),a.Yb(8,"router-outlet"))},directives:[_.k,_.j,_.m],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}@media screen and (max-width:800px){  .plugins .plugin .first-row{flex-wrap:wrap}  .plugins .plugin .first-row .plugin-icon,   .plugins .plugin .first-row .plugin-name,   .plugins .plugin .first-row .plugin-version{margin-bottom:10px}  .plugins .plugin .first-row .buttons my-button .action-button,   .plugins .plugin .first-row .buttons my-delete-button .action-button,   .plugins .plugin .first-row .buttons my-edit-button .action-button{padding:0 13px}  .plugins .plugin .first-row .buttons my-button .button-label,   .plugins .plugin .first-row .buttons my-delete-button .button-label,   .plugins .plugin .first-row .buttons my-edit-button .button-label{display:none}}"]}),e})();const zf=[{path:"",component:dc,canActivate:[ic.a],canActivateChild:[ic.a],children:[{path:"",redirectTo:"users",pathMatch:"full"},...ua,...ws,...fu,...vp,...cc,{path:"plugins",component:Ef,canActivate:[g.l],data:{userRight:ac.e.MANAGE_PLUGINS},children:[{path:"",redirectTo:"list-installed",pathMatch:"full"},{path:"list-installed",component:Xp,data:{meta:{title:"List installed plugins"}}},{path:"search",component:pf,data:{meta:{title:"Search plugins"}}},{path:"show/:npmName",component:Sf,data:{meta:{title:"Show plugin"}}}]}]}];let Lf=(()=>{class e{}return e.\u0275mod=a.Vb({type:e}),e.\u0275inj=a.Ub({factory:function(t){return new(t||e)},imports:[[_.l.forChild(zf)],_.l]}),e})();var $f,Jf,Nf,jf,Ff,Uf,Bf,Gf,Vf,Yf,Hf;function Xf(e,t){if(1&e&&(a.dc(0,"div",2),a.dc(1,"span",3),a.hc(2,Gf),a.cc(),a.dc(3,"time",19),a.cd(4),a.xc(5,"date"),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(4),a.dd(a.zc(5,1,e.videoAbuse.updatedAt,"medium"))}}function Qf(e,t){if(1&e&&(a.dc(0,"div",11),a.dc(1,"span",3),a.hc(2,Vf),a.cc(),a.Yb(3,"span",13),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("innerHTML",e.videoAbuse.moderationCommentHtml,a.Sc)}}function Kf(e,t){1&e&&(a.dc(0,"span"),a.hc(1,Yf),a.cc())}function qf(e,t){1&e&&(a.dc(0,"span"),a.hc(1,Hf),a.cc())}function Wf(e,t){if(1&e&&(a.dc(0,"div"),a.ad(1,Kf,2,0,"span",17),a.ad(2,qf,2,0,"span",17),a.cc()),2&e){const e=a.wc();a.Jb(1),a.Dc("ngIf",e.videoAbuse.video.deleted),a.Jb(1),a.Dc("ngIf",!e.videoAbuse.video.deleted)}}function Zf(e,t){if(1&e&&a.Yb(0,"div",20),2&e){const e=a.wc();a.Dc("innerHTML",e.videoAbuse.embedHtml,a.Sc)}}$f="\u4E3E\u62A5\u8005",Jf="{VAR_PLURAL, plural, =1 {1 report} other {{INTERPOLATION} reports}}",Jf=a.mc(Jf,{VAR_PLURAL:"\ufffd0\ufffd",INTERPOLATION:"\ufffd1\ufffd"}),Nf="\n          " + Jf + "" + "\ufffd#13\ufffd" + "" + "\ufffd/#13\ufffd" + "\n        ",jf="Reportee",Ff="{VAR_PLURAL, plural, =1 {1 report} other {{INTERPOLATION} reports}}",Ff=a.mc(Ff,{VAR_PLURAL:"\ufffd0\ufffd",INTERPOLATION:"\ufffd1\ufffd"}),Uf="\n          " + Ff + "" + "\ufffd#25\ufffd" + "" + "\ufffd/#25\ufffd" + "\n        ",Bf="\u4E3E\u62A5",Gf="Updated",Vf="Note",Yf="The video was deleted",Hf="The video was blacklisted";const eh=function(){return["/admin/moderation/video-abuses/list"]},th=function(e){return{search:e}};let nh=(()=>{class e{switchToDefaultAvatar(e){e.target.src=Nl.a.GET_DEFAULT_AVATAR_URL()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Rb({type:e,selectors:[["my-video-abuse-details"]],inputs:{videoAbuse:"videoAbuse"},decls:39,vars:39,consts:[[1,"d-flex","moderation-expanded"],[1,"col-8"],[1,"d-flex"],[1,"col-3","moderation-expanded-label"],[1,"col-9","moderation-expanded-text"],[1,"chip",3,"routerLink","queryParams"],["alt","Avatar",1,"avatar",3,"src","error"],[1,"text-muted"],[1,"ml-auto","text-muted","video-details-links",3,"routerLink","queryParams"],[1,"ml-1","glyphicon","glyphicon-flag"],["class","d-flex",4,"ngIf"],[1,"mt-3","d-flex"],[1,"ml-1","text-muted",3,"routerLink","queryParams"],[1,"col-9","moderation-expanded-text",3,"innerHTML"],["class","mt-3 d-flex",4,"ngIf"],[1,"col-4"],[1,"screenratio"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"col-9","moderation-expanded-text","video-details-date-updated"],[3,"innerHTML"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.dc(2,"div",2),a.dc(3,"span",3),a.hc(4,$f),a.cc(),a.dc(5,"span",4),a.dc(6,"a",5),a.dc(7,"img",6),a.sc("error",(function(e){return t.switchToDefaultAvatar(e)})),a.cc(),a.dc(8,"div"),a.dc(9,"span",7),a.cd(10),a.cc(),a.cc(),a.cc(),a.dc(11,"a",8),a.nc(12,Nf),a.Yb(13,"span",9),a.kc(),a.cc(),a.cc(),a.cc(),a.dc(14,"div",2),a.dc(15,"span",3),a.hc(16,jf),a.cc(),a.dc(17,"span",4),a.dc(18,"a",5),a.dc(19,"img",6),a.sc("error",(function(e){return t.switchToDefaultAvatar(e)})),a.cc(),a.dc(20,"div"),a.dc(21,"span",7),a.cd(22),a.cc(),a.cc(),a.cc(),a.dc(23,"a",8),a.nc(24,Uf),a.Yb(25,"span",9),a.kc(),a.cc(),a.cc(),a.cc(),a.ad(26,Xf,6,4,"div",10),a.dc(27,"div",11),a.dc(28,"span",3),a.bc(29),a.hc(30,Bf),a.ac(),a.dc(31,"a",12),a.cd(32),a.cc(),a.cc(),a.Yb(33,"span",13),a.cc(),a.ad(34,Qf,4,1,"div",14),a.cc(),a.dc(35,"div",15),a.dc(36,"div",16),a.ad(37,Wf,3,2,"div",17),a.ad(38,Zf,1,1,"div",18),a.cc(),a.cc(),a.cc()),2&e&&(a.Jb(6),a.Dc("routerLink",a.Gc(24,eh))("queryParams",a.Hc(25,th,'reporter:"'+t.videoAbuse.reporterAccount.displayName+'"')),a.Jb(1),a.Dc("src",null==t.videoAbuse.reporterAccount.avatar?null:t.videoAbuse.reporterAccount.avatar.path,a.Tc),a.Jb(3),a.dd(t.videoAbuse.reporterAccount.nameWithHost),a.Jb(1),a.Dc("routerLink",a.Gc(27,eh))("queryParams",a.Hc(28,th,'reportee:"'+t.videoAbuse.reporterAccount.displayName+'"')),a.Jb(2),a.lc(t.videoAbuse.countReportsForReporter)(t.videoAbuse.countReportsForReporter),a.ic(12),a.Jb(5),a.Dc("routerLink",a.Gc(30,eh))("queryParams",a.Hc(31,th,'reportee:"'+t.videoAbuse.video.channel.ownerAccount.displayName+'"')),a.Jb(1),a.Dc("src",null==t.videoAbuse.video.channel.ownerAccount||null==t.videoAbuse.video.channel.ownerAccount.avatar?null:t.videoAbuse.video.channel.ownerAccount.avatar.path,a.Tc),a.Jb(3),a.dd(t.videoAbuse.video.channel.ownerAccount?t.videoAbuse.video.channel.ownerAccount.nameWithHost:""),a.Jb(1),a.Dc("routerLink",a.Gc(33,eh))("queryParams",a.Hc(34,th,'reportee:"'+t.videoAbuse.video.channel.ownerAccount.displayName+'"')),a.Jb(2),a.lc(t.videoAbuse.countReportsForReportee)(t.videoAbuse.countReportsForReportee),a.ic(24),a.Jb(1),a.Dc("ngIf",t.videoAbuse.updatedAt),a.Jb(5),a.Dc("routerLink",a.Gc(36,eh))("queryParams",a.Hc(37,th,"#"+t.videoAbuse.id)),a.Jb(1),a.ed("#",t.videoAbuse.id,""),a.Jb(1),a.Dc("innerHTML",t.videoAbuse.reasonHtml,a.Sc),a.Jb(1),a.Dc("ngIf",t.videoAbuse.moderationComment),a.Jb(3),a.Dc("ngIf",t.videoAbuse.video.deleted||t.videoAbuse.video.blacklisted),a.Jb(1),a.Dc("ngIf",!t.videoAbuse.video.deleted&&!t.videoAbuse.video.blacklisted))},directives:[_.k,h.u],pipes:[h.f],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.caption[_ngcontent-%COMP%]{justify-content:flex-end}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:250px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;flex-grow:1}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:250px){.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}.moderation-expanded[_ngcontent-%COMP%]{font-size:90%}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;vertical-align:top;text-align:right}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]{display:inline-flex;word-wrap:break-word}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0!important}.video-table-states[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:.4rem}.screenratio[_ngcontent-%COMP%]{position:relative;width:100%;height:0;padding-bottom:56%}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;position:absolute;height:100%;width:100%;display:inline-flex;justify-content:center;align-items:center;color:var(--inputPlaceholderColor)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{text-decoration:none!important}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.screenratio[_ngcontent-%COMP%]   div.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.screenratio[_ngcontent-%COMP%]     iframe{position:absolute;width:100%!important;height:100%!important;left:0;top:0}.chip[_ngcontent-%COMP%]{align-items:center;border-radius:5rem;display:inline-flex;font-size:90%;color:var(--mainForegroundColor);line-height:1rem;margin:.1rem;max-width:320px;overflow:hidden;padding:.2rem .4rem;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}.chip[_ngcontent-%COMP%], .chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:1.2rem;vertical-align:middle}.chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-left:-.4rem;margin-right:.2rem;width:1.2rem;border-radius:50%;display:inline-block;line-height:1.25;position:relative}.chip.two-lines[_ngcontent-%COMP%]{height:2rem}.chip.two-lines[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:2rem;width:2rem}.chip.two-lines[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:2rem;margin-left:.1rem;margin-right:.1rem;justify-content:center}my-action-dropdown.show[_ngcontent-%COMP%]     .dropdown-root{display:block!important}.video-table-video-link[_ngcontent-%COMP%]{position:relative;top:3px}.video-table-video-link[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]{display:inline-flex}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;height:45px;width:80px;margin-right:.5rem;border-radius:2px;border:none;background:transparent;display:inline-flex;justify-content:center;align-items:center;position:relative}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover{text-decoration:none!important}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--inputPlaceholderColor)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .video-table-video-image-label[_ngcontent-%COMP%]{display:inline-block;background-color:rgba(0,0,0,.7);color:#fff;position:absolute;border-radius:3px;font-size:10px;padding:0 3px;line-height:1.3;bottom:2px;right:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;justify-content:center;font-size:90%;color:var(--mainForegroundColor);line-height:1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:80%;color:grey;margin-left:.1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{font-size:80%}"]}),e})();var oh=n("UXJo"),ch=n("CwEU"),ih=n("cH1L"),ah=n("vxfF"),rh=n("06+q"),lh=n("1JpH"),sh=n("bT2D"),dh=n("4SI2"),gh=n("gcFA"),uh=n("1wmk"),bh=n("yc0L"),ph=n("MEIN"),fh=n("drR3"),hh=n("9BrR"),mh=n("NNUv"),vh=n("MGin"),Ch=n("cC62"),Oh=n("btCD"),Ph=n("dvLV"),_h=n("2e92"),Mh=n("86yf"),yh=n("dlBO"),wh=n("0s8y"),xh=n("6DTk"),kh=n("8/xE"),Ih=n("fgyJ"),Th=n("5hiN"),Sh=n("8d3D"),Ah=n("IDls"),Dh=n("QKku"),Rh=n("dzsG"),Eh=n("HqLa"),zh=n("WMbD"),Lh=n("V+8P"),$h=n("t1iq");let Jh=(()=>{class e{}return e.\u0275mod=a.Vb({type:e}),e.\u0275inj=a.Ub({factory:function(t){return new(t||e)},providers:[mu,Yb,hp,s,_p],imports:[[Lf,i.h,te.t,Z,$p,Li.a]]}),e})();a.Uc(Nd,[_.m,_.i,_.k,_.j,_.o,h.r,h.s,h.t,h.u,h.C,h.y,h.z,h.A,h.B,h.w,h.x,m.J,m.y,m.I,m.d,m.z,m.C,m.b,m.F,m.G,m.B,m.t,m.u,m.E,m.q,m.p,m.A,m.c,m.e,m.w,m.x,m.v,m.j,m.m,m.k,m.n,m.g,v.e,v.f,v.j,v.h,v.g,v.t,v.w,v.o,v.n,v.p,v.q,v.s,v.y,v.c,oh.a,k.b,k.a,k.d,ch.a,P.a,ih.b,ah.b,ah.a,ah.d,ah.e,rh.a,lh.a,sh.a,dh.a,gh.a,uh.a,bh.a,fg.a,ph.a,fh.a,hh.a,mh.a,vh.a,ee.a,oe.a,ne.a,jl.a,O.a,Jp.a,Nc.h,C.a,lc.a,Ch.a,Nc.f,M.a,Oh.a,Ph.a,_h.b,_h.a,Mh.a,yh.a,Jl.a,Fl.a,wh.a,xh.a,kh.a,Ih.a,Fc.a,Th.a,y.a,Sh.a,Ah.a,Dh.a,Oa.a,te.q,te.p,te.m,te.k,te.c,te.j,te.g,te.d,te.b,te.o,te.u,te.r,te.s,te.i,te.h,te.n,te.e,te.f,te.l,te.a,W,Lp,Li.b,dc,ga,$c,ki,ei,aa,Ti,Ms,Ar,$l,xa,_s,Rg,bg,Nd,nh,Cg,zs,pu,Qg,Ef,Xp,pf,Sf,fp,Bu,ap,mp,nc,tc,Wc],[h.b,h.J,h.q,h.l,h.G,h.g,h.E,h.H,h.d,h.f,h.j,h.k,h.m,f.b,f.K,Rh.a,Eh.a,zh.a,Lh.a,$h.a])}}]);