(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"2Qox":function(t,n,e){"use strict";e.d(n,"a",function(){return S});var o=e("fXoL"),i=e("ey9i"),a=e("H9+z"),c=(e("DQE6"),e("a9tR"),e("4Yo8")),l=e("ofXK"),s=e("tyNb"),r=e("UkmY"),d=e("qZuT"),g=e("l9Pe"),p=e("1kSV"),m=e("/xt7"),u=e("3Pt+"),b=e("C8Cb");const h=["moreDropdown"];function P(t,n){1&t&&o.Rb(0,"my-global-icon",11)}function C(t,n){if(1&t&&(o.Ub(0),o.Tc(1),o.Tb()),2&t){const t=o.oc();o.Db(1),o.Uc(t.position)}}function v(t,n){if(1&t&&o.Rb(0,"my-video-thumbnail",12),2&t){const t=o.oc();o.vc("video",t.playlistElement.video)("nsfw",t.isVideoBlur(t.playlistElement.video))("videoRouterLink",t.buildRouterLink())("queryParams",t.buildRouterQuery())}}function O(t,n){1&t&&o.Rb(0,"div",13)}const y=function(t){return["/accounts",t]};function _(t,n){if(1&t&&(o.Wb(0,"a",18),o.Tc(1),o.Vb()),2&t){const t=o.oc(2);o.vc("routerLink",o.zc(2,y,t.playlistElement.video.byAccount)),o.Db(1),o.Vc(" ",t.playlistElement.video.byAccount," ")}}function M(t,n){if(1&t&&(o.Wb(0,"span",19),o.Tc(1),o.Vb()),2&t){const t=o.oc(2);o.Db(1),o.Uc(t.playlistElement.video.byAccount)}}function f(t,n){if(1&t&&(o.Ub(0),o.Wb(1,"a",14),o.Tc(2),o.Vb(),o.Rc(3,_,2,4,"a",15),o.Rc(4,M,2,1,"span",16),o.Wb(5,"span",17),o.Tc(6),o.Vb(),o.Tb()),2&t){const t=o.oc();o.Db(1),o.vc("routerLink",t.buildRouterLink())("queryParams",t.buildRouterQuery()),o.Eb("title",t.playlistElement.video.name),o.Db(1),o.Uc(t.playlistElement.video.name),o.Db(1),o.vc("ngIf",t.accountLink),o.Db(1),o.vc("ngIf",!t.accountLink),o.Db(2),o.Uc(t.formatTimestamp(t.playlistElement))}}function x(t,n){1&t&&(o.Ub(0),o.ac(1,21),o.Tb())}function w(t,n){1&t&&(o.Ub(0),o.ac(1,22),o.Tb())}function k(t,n){1&t&&(o.Ub(0),o.ac(1,23),o.Tb())}function T(t,n){if(1&t&&(o.Wb(0,"span",20),o.Rc(1,x,2,0,"ng-container",4),o.Rc(2,w,2,0,"ng-container",4),o.Rc(3,k,2,0,"ng-container",4),o.Vb()),2&t){const t=o.oc();o.Db(1),o.vc("ngIf",t.isUnavailable(t.playlistElement)),o.Db(1),o.vc("ngIf",t.isPrivate(t.playlistElement)),o.Db(1),o.vc("ngIf",t.isDeleted(t.playlistElement))}}const E=function(t){return["/my-library","video-playlists",t]};function D(t,n){if(1&t&&o.Rb(0,"my-edit-button",24),2&t){const t=o.oc();o.vc("routerLink",o.zc(1,E,t.playlist.uuid))}}function L(t,n){if(1&t){const t=o.Xb();o.Wb(0,"div",35),o.Wb(1,"div"),o.Wb(2,"my-peertube-checkbox",36),o.kc("ngModelChange",function(n){return o.Kc(t),o.oc(3).timestampOptions.startTimestampEnabled=n}),o.Vb(),o.Wb(3,"my-timestamp-input",37),o.kc("ngModelChange",function(n){return o.Kc(t),o.oc(3).timestampOptions.startTimestamp=n}),o.Vb(),o.Vb(),o.Wb(4,"div"),o.Wb(5,"my-peertube-checkbox",38),o.kc("ngModelChange",function(n){return o.Kc(t),o.oc(3).timestampOptions.stopTimestampEnabled=n}),o.Vb(),o.Wb(6,"my-timestamp-input",37),o.kc("ngModelChange",function(n){return o.Kc(t),o.oc(3).timestampOptions.stopTimestamp=n}),o.Vb(),o.Vb(),o.Wb(7,"input",39),o.kc("click",function(){o.Kc(t);const n=o.oc(3);return n.updateTimestamps(n.playlistElement)}),o.Vb(),o.Vb()}if(2&t){const t=o.oc(3);o.Db(2),o.vc("ngModel",t.timestampOptions.startTimestampEnabled),o.Db(1),o.vc("timestamp",t.timestampOptions.startTimestamp)("maxTimestamp",t.playlistElement.video.duration)("disabled",!t.timestampOptions.startTimestampEnabled)("ngModel",t.timestampOptions.startTimestamp),o.Db(2),o.vc("ngModel",t.timestampOptions.stopTimestampEnabled),o.Db(1),o.vc("timestamp",t.timestampOptions.stopTimestamp)("maxTimestamp",t.playlistElement.video.duration)("disabled",!t.timestampOptions.stopTimestampEnabled)("ngModel",t.timestampOptions.stopTimestamp)}}function I(t,n){if(1&t){const t=o.Xb();o.Ub(0),o.Wb(1,"div",29),o.kc("click",function(n){o.Kc(t);const e=o.oc(2);return e.toggleDisplayTimestampsOptions(n,e.playlistElement)}),o.Rb(2,"my-global-icon",32),o.Ub(3),o.ac(4,33),o.Tb(),o.Vb(),o.Rc(5,L,8,10,"div",34),o.Tb()}if(2&t){const t=o.oc(2);o.Db(5),o.vc("ngIf",t.displayTimestampOptions)}}function V(t,n){if(1&t){const t=o.Xb();o.Wb(0,"div",25,26),o.kc("openChange",function(){return o.Kc(t),o.oc().onDropdownOpenChange()}),o.Wb(2,"my-global-icon",27),o.kc("click",function(t){return t.preventDefault()}),o.Vb(),o.Wb(3,"div",28),o.Rc(4,I,6,1,"ng-container",4),o.Wb(5,"span",29),o.kc("click",function(){o.Kc(t);const n=o.oc();return n.removeFromPlaylist(n.playlistElement)}),o.Rb(6,"my-global-icon",30),o.Ub(7),o.ac(8,31),o.Tb(),o.Vb(),o.Vb(),o.Vb()}if(2&t){const t=o.oc();o.Db(4),o.vc("ngIf",t.playlistElement.video),o.Db(4),o.ec(null==t.playlist?null:t.playlist.displayName),o.bc(8)}}const R=function(t){return{playing:t}};let S=(()=>{class t{constructor(t,n,e,i,a){this.authService=t,this.serverService=n,this.notifier=e,this.videoPlaylistService=i,this.cdr=a,this.owned=!1,this.playing=!1,this.rowLink=!1,this.accountLink=!0,this.touchScreenEditButton=!1,this.elementRemoved=new o.n,this.displayTimestampOptions=!1,this.timestampOptions={}}ngOnInit(){this.serverConfig=this.serverService.getTmpConfig(),this.serverService.getConfig().subscribe(t=>{this.serverConfig=t,this.cdr.detectChanges()})}isUnavailable(t){return 3===t.type}isPrivate(t){return 2===t.type}isDeleted(t){return 1===t.type}buildRouterLink(){return this.playlist?["/videos/watch/playlist",this.playlist.uuid]:null}buildRouterQuery(){return this.playlistElement&&this.playlistElement.video?{playlistPosition:this.playlistElement.position,start:this.playlistElement.startTimestamp,stop:this.playlistElement.stopTimestamp,resume:!0}:{}}isVideoBlur(t){return t.isVideoNSFWForUser(this.authService.getUser(),this.serverConfig)}removeFromPlaylist(t){this.videoPlaylistService.removeVideoFromPlaylist(this.playlist.id,t.id,this.playlistElement.video?this.playlistElement.video.id:void 0).subscribe(()=>{this.notifier.success("\u0412\u0438\u0434\u0435\u043E \u0443\u0434\u0430\u043B\u0435\u043D\u043E \u0441 \n          " + this.playlist.displayName + "\n        "),this.elementRemoved.emit(t)},t=>this.notifier.error(t.message)),this.moreDropdown.close()}updateTimestamps(t){const n={};n.startTimestamp=this.timestampOptions.startTimestampEnabled?this.timestampOptions.startTimestamp:null,n.stopTimestamp=this.timestampOptions.stopTimestampEnabled?this.timestampOptions.stopTimestamp:null,this.videoPlaylistService.updateVideoOfPlaylist(this.playlist.id,t.id,n,this.playlistElement.video.id).subscribe(()=>{this.notifier.success("\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u044B \u0432\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435 \u043C\u0435\u0442\u043A\u0438"),t.startTimestamp=n.startTimestamp,t.stopTimestamp=n.stopTimestamp,this.cdr.detectChanges()},t=>this.notifier.error(t.message)),this.moreDropdown.close()}formatTimestamp(t){const n=t.startTimestamp,e=t.stopTimestamp,o=Object(a.j)(n,!0,":"),i=Object(a.j)(e,!0,":");return null===n&&null===e?"":null!==n&&null===e?"\u041D\u0430\u0447\u0438\u043D\u0430\u0435\u0442\u0441\u044F \u0441"+o:null===n&&null!==e?"\u041E\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0435\u0442\u0441\u044F \u0432"+i:"\u041D\u0430\u0447\u0438\u043D\u0430\u0435\u0442\u0441\u044F \u0441"+o+"\u0438 \u043E\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0435\u0442\u0441\u044F \u0432"+i}onDropdownOpenChange(){this.displayTimestampOptions=!1}toggleDisplayTimestampsOptions(t,n){t.preventDefault(),this.displayTimestampOptions=!this.displayTimestampOptions,!0===this.displayTimestampOptions&&(this.timestampOptions={startTimestampEnabled:!1,stopTimestampEnabled:!1,startTimestamp:0,stopTimestamp:n.video.duration},n.startTimestamp&&(this.timestampOptions.startTimestampEnabled=!0,this.timestampOptions.startTimestamp=n.startTimestamp),n.stopTimestamp&&(this.timestampOptions.stopTimestampEnabled=!0,this.timestampOptions.stopTimestamp=n.stopTimestamp)),setTimeout(()=>{this.cdr.detectChanges()})}}return t.\u0275fac=function(n){return new(n||t)(o.Qb(i.a),o.Qb(i.x),o.Qb(i.m),o.Qb(c.a),o.Qb(o.h))},t.\u0275cmp=o.Kb({type:t,selectors:[["my-video-playlist-element-miniature"]],viewQuery:function(t,n){if(1&t&&o.Xc(h,1),2&t){let t;o.Hc(t=o.lc())&&(n.moreDropdown=t.first)}},inputs:{playlist:"playlist",playlistElement:"playlistElement",owned:"owned",playing:"playing",rowLink:"rowLink",accountLink:"accountLink",position:"position",touchScreenEditButton:"touchScreenEditButton"},outputs:{elementRemoved:"elementRemoved"},decls:12,vars:13,consts:function(){let t,n,e,o,i,a,c,l;return t="\u041D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u043E",n="\u041F\u0440\u0438\u0432\u0430\u0442\u043D\u044B\u0439",e="\u0423\u0434\u0430\u043B\u0435\u043D\u043E",o="\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0441 " + "\ufffd0\ufffd" + "",i="\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043D\u0430\u0447\u0430\u043B\u043E/\u043A\u043E\u043D\u0435\u0446 \u0432",a="\u041D\u0430\u0447\u0430\u043B\u043E \u0432",c="\u041A\u043E\u043D\u0435\u0446 \u0432",l="\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",[[1,"video",3,"ngClass"],[3,"routerLink","queryParams"],[1,"position"],["iconName","play",4,"ngIf"],[4,"ngIf"],[3,"video","nsfw","videoRouterLink","queryParams",4,"ngIf"],["class","fake-thumbnail",4,"ngIf"],[1,"video-info"],["class","video-info-name",4,"ngIf"],[3,"routerLink",4,"ngIf"],["class","more dropdown-root","ngbDropdown","","placement","left auto","autoClose","outside","container","body",3,"openChange",4,"ngIf"],["iconName","play"],[3,"video","nsfw","videoRouterLink","queryParams"],[1,"fake-thumbnail"],["tabindex","-1",1,"video-info-name",3,"routerLink","queryParams"],["tabindex","-1","class","video-info-account",3,"routerLink",4,"ngIf"],["tabindex","-1","class","video-info-account",4,"ngIf"],["tabindex","-1",1,"video-info-timestamp"],["tabindex","-1",1,"video-info-account",3,"routerLink"],["tabindex","-1",1,"video-info-account"],[1,"video-info-name"],t,n,e,[3,"routerLink"],["ngbDropdown","","placement","left auto","autoClose","outside","container","body",1,"more","dropdown-root",3,"openChange"],["moreDropdown","ngbDropdown"],["iconName","more-vertical","ngbDropdownToggle","","role","button",1,"icon-more",3,"click"],["ngbDropdownMenu",""],[1,"dropdown-item",3,"click"],["iconName","delete","aria-hidden","true"],o,["iconName","edit","aria-hidden","true"],i,["class","timestamp-options",4,"ngIf"],[1,"timestamp-options"],["inputName","startAt","labelText",a,3,"ngModel","ngModelChange"],[3,"timestamp","maxTimestamp","disabled","ngModel","ngModelChange"],["inputName","stopAt","labelText",c,3,"ngModel","ngModelChange"],["type","submit","value",l,3,"click"]]},template:function(t,n){1&t&&(o.Wb(0,"div",0),o.Wb(1,"a",1),o.Wb(2,"div",2),o.Rc(3,P,1,0,"my-global-icon",3),o.Rc(4,C,2,1,"ng-container",4),o.Vb(),o.Rc(5,v,1,4,"my-video-thumbnail",5),o.Rc(6,O,1,0,"div",6),o.Wb(7,"div",7),o.Rc(8,f,7,7,"ng-container",4),o.Rc(9,T,4,3,"span",8),o.Vb(),o.Vb(),o.Rc(10,D,1,3,"my-edit-button",9),o.Rc(11,V,9,2,"div",10),o.Vb()),2&t&&(o.vc("ngClass",o.zc(11,R,n.playing)),o.Db(1),o.vc("routerLink",n.buildRouterLink())("queryParams",n.buildRouterQuery()),o.Db(2),o.vc("ngIf",n.playing),o.Db(1),o.vc("ngIf",!n.playing),o.Db(1),o.vc("ngIf",n.playlistElement.video),o.Db(1),o.vc("ngIf",!n.playlistElement.video),o.Db(2),o.vc("ngIf",n.playlistElement.video),o.Db(1),o.vc("ngIf",!n.playlistElement.video),o.Db(1),o.vc("ngIf",n.owned&&n.touchScreenEditButton),o.Db(1),o.vc("ngIf",n.owned))},directives:[l.l,s.k,l.n,r.a,d.a,g.a,s.i,p.h,p.n,p.l,m.a,u.m,u.p,b.a],styles:['.fake-thumbnail[_ngcontent-%COMP%], my-video-thumbnail[_ngcontent-%COMP%]     .video-thumbnail{width:130px;height:72px}.fake-thumbnail[_ngcontent-%COMP%]{background-color:#ececec}.fake-thumbnail[_ngcontent-%COMP%], my-video-thumbnail[_ngcontent-%COMP%]{display:flex;margin-right:10px}.video[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;background-color:var(--mainBackgroundColor);padding:10px;border-bottom:1px solid rgba(0,0,0,.1)}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{display:flex}.video[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.05)}.video[_ngcontent-%COMP%]:hover   .more[_ngcontent-%COMP%]{opacity:1}@media not all and (hover:hover) and (pointer:fine){.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{opacity:1!important}}.video.playing[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.02)}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--mainForegroundColor);display:flex;min-width:0;align-items:center;cursor:pointer}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]{font-weight:600;margin-right:10px;color:var(--greyForegroundColor);min-width:25px}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{width:17px;position:relative;left:-2px}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-self:flex-start;min-width:0}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:auto}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-account[_ngcontent-%COMP%], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-timestamp[_ngcontent-%COMP%]{color:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   .video-info-name[_ngcontent-%COMP%]{font-size:18px;font-weight:600;display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%], .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{justify-self:flex-end;margin-left:auto;cursor:pointer;min-width:24px}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{opacity:0}.video[_ngcontent-%COMP%]   .more.show[_ngcontent-%COMP%]{opacity:1}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]{display:flex}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     .feather, .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     .material{color:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg circle[fill="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg g[fill="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg path[fill="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg polygon[fill="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg circle[stroke="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg g[stroke="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg path[stroke="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]:after{border:none}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{padding:6px 15px;cursor:pointer}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{width:22px;opacity:.7;margin-right:10px;position:relative;top:-2px}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]{padding-top:0;padding-left:35px;margin-bottom:15px}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   my-peertube-checkbox[_ngcontent-%COMP%]{margin-right:5px}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer;margin-top:10px}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input.focus-visible[_ngcontent-%COMP%], .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active, .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input.disabled[_ngcontent-%COMP%], .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:#fff}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:#fff}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:#fff}.dropdown-menu[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:#fff}@media screen and (min-width:800px){.expanded[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%], .expanded   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{display:none}.expanded[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%], .expanded   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%]{display:inline-flex}}@media screen and (max-width:800px){.expanded[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%], .expanded   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{display:none}.expanded[_nghost-%COMP%]   .video.playing[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%], .expanded   [_nghost-%COMP%]   .video.playing[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{display:inline-flex;height:-webkit-max-content;height:max-content;margin:auto}.expanded[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%], .expanded   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%]{display:none}}@media screen and (max-width:500px){.expanded[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit, .expanded   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit{padding:0 13px}.expanded[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit .button-label, .expanded   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit .button-label{display:none}}@media screen and (min-width:1040px){.main-col:not(.expanded)[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{display:none}.main-col:not(.expanded)[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%]{display:inline-flex}}@media screen and (max-width:1040px){.main-col:not(.expanded)[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{display:none}.main-col:not(.expanded)[_nghost-%COMP%]   .video.playing[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video.playing[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{display:inline-flex;height:-webkit-max-content;height:max-content;margin:auto}.main-col:not(.expanded)[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%]{display:none}}@media screen and (max-width:740px){.main-col:not(.expanded)[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit, .main-col:not(.expanded)   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit{padding:0 13px}.main-col:not(.expanded)[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit .button-label, .main-col:not(.expanded)   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit .button-label{display:none}}'],changeDetection:0}),t})()},"4Yo8":function(t,n,e){"use strict";e.d(n,"a",function(){return T});var o=e("NOtv"),i=e("BeL+"),a=e("jtHE"),c=e("XNiG"),l=e("VRyK"),s=e("D0XW"),r=e("LRne"),d=e("/uUt"),g=e("OsX3"),p=e("pLZG"),m=e("lJxs"),u=e("pxpQ"),b=e("eIep"),h=e("w1tV"),P=e("JIr8"),C=e("vkgz"),v=e("tk/3"),O=e("ey9i"),y=e("6rF9"),_=e("xMQD"),M=e("AytR"),f=e("DQE6"),x=e("a9tR"),w=e("fXoL");const k=o("peertube:playlists:VideoPlaylistService");let T=(()=>{class t{constructor(t,n,e,o,r){this.authHttp=t,this.serverService=n,this.restExtractor=e,this.restService=o,this.ngZone=r,this.videoExistsInPlaylistNotifier=new a.a(1),this.videoExistsInPlaylistCacheSubject=new c.a,this.videoExistsObservableCache={},this.videoExistsCache={},this.myAccountPlaylistCache=void 0,this.myAccountPlaylistCacheSubject=new c.a,this.videoExistsInPlaylistObservable=Object(l.a)(this.videoExistsInPlaylistNotifier.pipe(Object(d.a)(),Object(g.a)(500,Object(y.k)(this.ngZone,s.b)),Object(p.a)(t=>0!==t.length),Object(m.a)(t=>Object(i.a)(t)),Object(u.b)(Object(y.d)(this.ngZone,s.b)),Object(b.a)(t=>this.doVideosExistInPlaylist(t)),Object(h.a)()),this.videoExistsInPlaylistCacheSubject)}listChannelPlaylists(t,n){const e=_.n.BASE_VIDEO_CHANNEL_URL+t.nameWithHost+"/video-playlists",o=this.restService.componentPaginationToRestPagination(n);let i=new v.f;return i=this.restService.addRestGetParams(i,o),this.authHttp.get(e,{params:i}).pipe(Object(b.a)(t=>this.extractPlaylists(t)),Object(P.a)(t=>this.restExtractor.handleError(t)))}listMyPlaylistWithCache(t,n){if(!n){if(this.myAccountPlaylistCacheRunning)return this.myAccountPlaylistCacheRunning;if(this.myAccountPlaylistCache)return Object(r.a)(this.myAccountPlaylistCache)}const e=this.listAccountPlaylists(t.account,void 0,"-updatedAt",n).pipe(Object(C.a)(t=>{n||(this.myAccountPlaylistCacheRunning=void 0,this.myAccountPlaylistCache=t)}),Object(h.a)());return n||(this.myAccountPlaylistCacheRunning=e),e}listAccountPlaylists(t,n,e,o){const i=_.b.BASE_ACCOUNT_URL+t.nameWithHost+"/video-playlists",a=n?this.restService.componentPaginationToRestPagination(n):void 0;let c=new v.f;return c=this.restService.addRestGetParams(c,a,e),o&&(c=this.restService.addObjectParams(c,{search:o})),this.authHttp.get(i,{params:c}).pipe(Object(b.a)(t=>this.extractPlaylists(t)),Object(P.a)(t=>this.restExtractor.handleError(t)))}getVideoPlaylist(n){return this.authHttp.get(t.BASE_VIDEO_PLAYLIST_URL+n).pipe(Object(b.a)(t=>this.extractPlaylist(t)),Object(P.a)(t=>this.restExtractor.handleError(t)))}createVideoPlaylist(n){const e=Object(y.n)(n);return this.authHttp.post(t.BASE_VIDEO_PLAYLIST_URL,e).pipe(Object(C.a)(t=>{this.myAccountPlaylistCache&&(this.myAccountPlaylistCache.total++,this.myAccountPlaylistCache.data.push({id:t.videoPlaylist.id,displayName:n.displayName}),this.myAccountPlaylistCacheSubject.next(this.myAccountPlaylistCache))}),Object(P.a)(t=>this.restExtractor.handleError(t)))}updateVideoPlaylist(n,e){const o=Object(y.n)(e);return this.authHttp.put(t.BASE_VIDEO_PLAYLIST_URL+n.id,o).pipe(Object(m.a)(this.restExtractor.extractDataBool),Object(C.a)(()=>{this.myAccountPlaylistCache&&(this.myAccountPlaylistCache.data.find(t=>t.id===n.id).displayName=e.displayName,this.myAccountPlaylistCacheSubject.next(this.myAccountPlaylistCache))}),Object(P.a)(t=>this.restExtractor.handleError(t)))}removeVideoPlaylist(n){return this.authHttp.delete(t.BASE_VIDEO_PLAYLIST_URL+n.id).pipe(Object(m.a)(this.restExtractor.extractDataBool),Object(C.a)(()=>{this.myAccountPlaylistCache&&(this.myAccountPlaylistCache.total--,this.myAccountPlaylistCache.data=this.myAccountPlaylistCache.data.filter(t=>t.id!==n.id),this.myAccountPlaylistCacheSubject.next(this.myAccountPlaylistCache))}),Object(P.a)(t=>this.restExtractor.handleError(t)))}addVideoInPlaylist(n,e){return this.authHttp.post(t.BASE_VIDEO_PLAYLIST_URL+n+"/videos",e).pipe(Object(C.a)(t=>{this.videoExistsCache[e.videoId].push({playlistId:n,playlistElementId:t.videoPlaylistElement.id,startTimestamp:e.startTimestamp,stopTimestamp:e.stopTimestamp}),this.runPlaylistCheck(e.videoId)}),Object(P.a)(t=>this.restExtractor.handleError(t)))}updateVideoOfPlaylist(n,e,o,i){return this.authHttp.put(t.BASE_VIDEO_PLAYLIST_URL+n+"/videos/"+e,o).pipe(Object(m.a)(this.restExtractor.extractDataBool),Object(C.a)(()=>{const t=this.videoExistsCache[i];if(t){const n=t.find(t=>t.playlistElementId===e);n.startTimestamp=o.startTimestamp,n.stopTimestamp=o.stopTimestamp}this.runPlaylistCheck(i)}),Object(P.a)(t=>this.restExtractor.handleError(t)))}removeVideoFromPlaylist(n,e,o){return this.authHttp.delete(t.BASE_VIDEO_PLAYLIST_URL+n+"/videos/"+e).pipe(Object(m.a)(this.restExtractor.extractDataBool),Object(C.a)(()=>{o&&(this.videoExistsCache[o]&&(this.videoExistsCache[o]=this.videoExistsCache[o].filter(t=>t.playlistElementId!==e)),this.runPlaylistCheck(o))}),Object(P.a)(t=>this.restExtractor.handleError(t)))}reorderPlaylist(n,e,o){return this.authHttp.post(t.BASE_VIDEO_PLAYLIST_URL+n+"/videos/reorder",{startPosition:e,insertAfterPosition:o}).pipe(Object(m.a)(this.restExtractor.extractDataBool),Object(P.a)(t=>this.restExtractor.handleError(t)))}getPlaylistVideos(n,e){const o=t.BASE_VIDEO_PLAYLIST_URL+n+"/videos",i=this.restService.componentPaginationToRestPagination(e);let a=new v.f;return a=this.restService.addRestGetParams(a,i),this.authHttp.get(o,{params:a}).pipe(Object(b.a)(t=>this.extractVideoPlaylistElements(t)),Object(P.a)(t=>this.restExtractor.handleError(t)))}listenToMyAccountPlaylistsChange(){return this.myAccountPlaylistCacheSubject.asObservable()}listenToVideoPlaylistChange(t){if(this.videoExistsObservableCache[t])return this.videoExistsObservableCache[t];const n=this.videoExistsInPlaylistObservable.pipe(Object(m.a)(n=>n[t]),Object(p.a)(t=>!!t),Object(C.a)(n=>this.videoExistsCache[t]=n));return this.videoExistsObservableCache[t]=n,n}runPlaylistCheck(t){return k("Running playlist check."),this.videoExistsCache[t]?(k("Found cache for %d.",t),this.videoExistsInPlaylistCacheSubject.next({[t]:this.videoExistsCache[t]})):(k("Fetching from network for %d.",t),this.videoExistsInPlaylistNotifier.next(t))}extractPlaylists(t){return this.serverService.getServerLocale().pipe(Object(m.a)(n=>{const e=t.data,o=t.total,i=[];for(const t of e)i.push(new x.a(t,n));return{data:i,total:o}}))}extractPlaylist(t){return this.serverService.getServerLocale().pipe(Object(m.a)(n=>new x.a(t,n)))}extractVideoPlaylistElements(t){return this.serverService.getServerLocale().pipe(Object(m.a)(n=>{const e=t.data,o=t.total,i=[];for(const t of e)i.push(new f.a(t,n));return{total:o,data:i}}))}doVideosExistInPlaylist(n){const e=t.MY_VIDEO_PLAYLIST_URL+"videos-exist";let o=new v.f;return o=this.restService.addObjectParams(o,{videoIds:n}),this.authHttp.get(e,{params:o,headers:{ignoreLoadingBar:""}}).pipe(Object(P.a)(t=>this.restExtractor.handleError(t)))}}return t.BASE_VIDEO_PLAYLIST_URL=M.a.apiUrl+"/api/v1/video-playlists/",t.MY_VIDEO_PLAYLIST_URL=M.a.apiUrl+"/api/v1/users/me/video-playlists/",t.\u0275fac=function(n){return new(n||t)(w.hc(v.b),w.hc(O.x),w.hc(O.r),w.hc(O.s),w.hc(w.C))},t.\u0275prov=w.Mb({token:t,factory:t.\u0275fac}),t})()},"BeL+":function(t,n,e){"use strict";var o=e("msdH"),i=function(t){return t!=t},a=function(t,n){return!(null==t||!t.length)&&function(t,n,e){return n==n?function(t,n,e){for(var o=-1,i=t.length;++o<i;)if(t[o]===n)return o;return-1}(t,n):function(t,n,e,o){for(var i=t.length,a=-1;++a<i;)if(n(t[a],a,t))return a;return-1}(t,i)}(t,n)>-1},c=e("ZWiB"),l=e("pVw1"),s=e("GYlH"),r=l.a&&1/Object(s.a)(new l.a([,-0]))[1]==1/0?function(t){return new l.a(t)}:function(){};n.a=function(t){return t&&t.length?function(t,n,e){var i=-1,l=a,d=t.length,g=!0,p=[],m=p;if(d>=200){var u=r(t);if(u)return Object(s.a)(u);g=!1,l=c.a,m=new o.a}else m=p;t:for(;++i<d;){var b=t[i],h=b;if(b=0!==b?b:0,g&&h==h){for(var P=m.length;P--;)if(m[P]===h)continue t;p.push(b)}else l(m,h,e)||(m!==p&&m.push(h),p.push(b))}return p}(t):[]}},DQE6:function(t,n,e){"use strict";e.d(n,"a",function(){return i});var o=e("xMQD");class i{constructor(t,n){this.id=t.id,this.position=t.position,this.startTimestamp=t.startTimestamp,this.stopTimestamp=t.stopTimestamp,this.type=t.type,t.video&&(this.video=new o.k(t.video,n))}}},DTAc:function(t,n,e){"use strict";e.d(n,"a",function(){return k});var o=e("NOtv"),i=e("XNiG"),a=e("Kj3r"),c=e("pLZG"),l=e("ey9i"),s=e("sWvm"),r=e("H9+z"),d=e("Pehk"),g=e("4Yo8"),p=e("fXoL"),m=e("3Pt+"),u=e("ofXK"),b=e("UkmY"),h=e("/xt7"),P=e("C8Cb");function C(t,n){if(1&t){const t=p.Xb();p.Wb(0,"div",19),p.kc("click",function(n){p.Kc(t);const e=p.oc().$implicit,o=p.oc();return n.stopPropagation(),o.toggleOptionalRow(e)}),p.Rb(1,"my-global-icon",10),p.Vb()}}function v(t,n){if(1&t){const t=p.Xb();p.Wb(0,"div"),p.Wb(1,"my-peertube-checkbox",25),p.kc("click",function(e){p.Kc(t);const o=n.$implicit,i=p.Ic(3),a=p.Ic(5),c=p.oc(2).$implicit;return p.oc().toggleOptionalPlaylist(e,c,o,i.timestamp,a.timestamp)}),p.Vb(),p.Wb(2,"my-timestamp-input",26,27),p.kc("ngModelChange",function(t){return n.$implicit.startTimestamp=t})("inputBlur",function(){p.Kc(t);const e=n.$implicit,o=p.oc(2).$implicit;return p.oc().onElementTimestampUpdate(o,e)}),p.Vb(),p.Wb(4,"my-timestamp-input",26,28),p.kc("ngModelChange",function(t){return n.$implicit.stopTimestamp=t})("inputBlur",function(){p.Kc(t);const e=n.$implicit,o=p.oc(2).$implicit;return p.oc().onElementTimestampUpdate(o,e)}),p.Vb(),p.Vb()}if(2&t){const t=n.$implicit,e=p.oc(2).$implicit,o=p.oc();p.Db(1),p.vc("inputName",o.getOptionalInputName(e,t))("ngModel",t.enabled)("onPushWorkaround",!0),p.Db(1),p.vc("maxTimestamp",o.video.duration)("ngModel",t.startTimestamp),p.Db(2),p.vc("maxTimestamp",o.video.duration)("ngModel",t.stopTimestamp)}}function O(t,n){if(1&t&&(p.Wb(0,"div",20),p.Wb(1,"div",21),p.Wb(2,"div"),p.ac(3,22),p.Vb(),p.Wb(4,"div"),p.ac(5,23),p.Vb(),p.Vb(),p.Rc(6,v,6,7,"div",24),p.Vb()),2&t){const t=p.oc().$implicit,n=p.oc();p.Db(6),p.vc("ngForOf",n.buildOptionalRowElements(t))}}const y=function(t){return{"has-optional-row":t}};function _(t,n){if(1&t){const t=p.Xb();p.Wb(0,"div",13),p.Wb(1,"div",14),p.kc("click",function(e){p.Kc(t);const o=n.$implicit;return p.oc().toggleMainPlaylist(e,o)}),p.Rb(2,"my-peertube-checkbox",15),p.Wb(3,"label",16),p.Tc(4),p.Vb(),p.Rc(5,C,2,0,"div",17),p.Vb(),p.Rc(6,O,7,1,"div",18),p.Vb()}if(2&t){const t=n.$implicit,e=p.oc();p.vc("ngClass",p.zc(8,y,t.optionalRowDisplayed)),p.Db(2),p.vc("disabled",e.isPresentMultipleTimes(t)||t.optionalRowDisplayed)("inputName",e.getPrimaryInputName(t))("ngModel",e.isPrimaryCheckboxChecked(t))("onPushWorkaround",!0),p.Db(2),p.Vc(" ",t.displayName," "),p.Db(1),p.vc("ngIf",e.isPrimaryCheckboxChecked(t)),p.Db(1),p.vc("ngIf",t.optionalRowDisplayed)}}function M(t,n){if(1&t&&(p.Wb(0,"div",36),p.Tc(1),p.Vb()),2&t){const t=p.oc(2);p.Db(1),p.Vc(" ",t.formErrors.displayName," ")}}const f=function(t){return{"input-error":t}};function x(t,n){if(1&t){const t=p.Xb();p.Wb(0,"form",29),p.kc("ngSubmit",function(){return p.Kc(t),p.oc().createPlaylist()}),p.Wb(1,"div",30),p.Wb(2,"label",31),p.ac(3,32),p.Vb(),p.Rb(4,"input",33),p.Rc(5,M,2,1,"div",34),p.Vb(),p.Rb(6,"input",35),p.Vb()}if(2&t){const t=p.oc();p.vc("formGroup",t.form),p.Db(4),p.vc("ngClass",p.zc(4,f,t.formErrors.displayName)),p.Db(1),p.vc("ngIf",t.formErrors.displayName),p.Db(1),p.vc("disabled",!t.form.valid)}}const w=o("peertube:playlists:VideoAddToPlaylistComponent");let k=(()=>{class t extends s.a{constructor(t,n,e,o,a){super(),this.formValidatorService=t,this.authService=n,this.notifier=e,this.videoPlaylistService=o,this.cd=a,this.lazyLoad=!1,this.isNewPlaylistBlockOpened=!1,this.videoPlaylistSearchChanged=new i.a,this.videoPlaylists=[],this.disabled=!1,this.playlistsData=[]}get user(){return this.authService.getUser()}ngOnInit(){this.buildForm({displayName:d.c}),this.videoPlaylistService.listenToMyAccountPlaylistsChange().subscribe(t=>{this.playlistsData=t.data,this.videoPlaylistService.runPlaylistCheck(this.video.id)}),this.videoPlaylistSearchChanged.pipe(Object(a.a)(500)).subscribe(()=>this.load()),!1===this.lazyLoad&&this.load()}ngOnChanges(t){t.video&&this.reload()}ngOnDestroy(){this.unsubscribePlaylistChanges()}disableForReuse(){this.disabled=!0}enabledForReuse(){this.disabled=!1}reload(){w("Reloading component"),this.videoPlaylists=[],this.videoPlaylistSearch=void 0,this.load(),this.cd.markForCheck()}load(){w("Loading component"),this.listenToVideoPlaylistChange(),this.videoPlaylistService.listMyPlaylistWithCache(this.user,this.videoPlaylistSearch).subscribe(t=>{this.playlistsData=t.data,this.videoPlaylistService.runPlaylistCheck(this.video.id)})}openChange(t){!1===t&&(this.isNewPlaylistBlockOpened=!1)}openCreateBlock(t){t.preventDefault(),this.isNewPlaylistBlockOpened=!0}toggleMainPlaylist(t,n){t.preventDefault(),this.isPresentMultipleTimes(n)||n.optionalRowDisplayed||(0===n.elements.length?this.addVideoInPlaylist(n,{enabled:!0,playlistElementId:void 0,startTimestamp:0,stopTimestamp:this.video.duration}):(this.removeVideoFromPlaylist(n,n.elements[0].playlistElementId),n.elements=[]),this.cd.markForCheck())}toggleOptionalPlaylist(t,n,e,o,i){t.preventDefault(),e.enabled?(this.removeVideoFromPlaylist(n,e.playlistElementId),e.enabled=!1,!1===this.isPrimaryCheckboxChecked(n)&&(n.optionalRowDisplayed=!1)):this.addVideoInPlaylist(n,{enabled:!0,playlistElementId:void 0,startTimestamp:o,stopTimestamp:i}),this.cd.markForCheck()}createPlaylist(){this.videoPlaylistService.createVideoPlaylist({displayName:this.form.value.displayName,privacy:3}).subscribe(()=>{this.isNewPlaylistBlockOpened=!1,this.cd.markForCheck()},t=>this.notifier.error(t.message))}onVideoPlaylistSearchChanged(){this.videoPlaylistSearchChanged.next()}isPrimaryCheckboxChecked(t){return 0!==t.elements.filter(t=>t.enabled).length}toggleOptionalRow(t){t.optionalRowDisplayed=!t.optionalRowDisplayed,this.cd.markForCheck()}getPrimaryInputName(t){return"in-playlist-primary-"+t.id}getOptionalInputName(t,n){return"in-playlist-optional-"+t.id+(n?"-"+n.playlistElementId:"")}buildOptionalRowElements(t){const n=t.elements,e=0===n.length?void 0:n[n.length-1];return e&&!0!==e.enabled||n.push({enabled:!1,startTimestamp:0,stopTimestamp:this.video.duration}),n}isPresentMultipleTimes(t){return t.elements.filter(t=>!0===t.enabled).length>1}onElementTimestampUpdate(t,n){n.playlistElementId&&!1!==n.enabled&&this.videoPlaylistService.updateVideoOfPlaylist(t.id,n.playlistElementId,{startTimestamp:n.startTimestamp,stopTimestamp:n.stopTimestamp},this.video.id).subscribe(()=>{this.notifier.success("\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u044B \u0432\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435 \u043C\u0435\u0442\u043A\u0438")},t=>{this.notifier.error(t.message)},()=>this.cd.markForCheck())}isOptionalRowDisplayed(t){const n=t.elements.filter(t=>t.enabled);if(n.length>1)return!0;if(1===n.length){const t=n[0];if(t.startTimestamp&&0!==t.startTimestamp||t.stopTimestamp&&t.stopTimestamp!==this.video.duration)return!0}return!1}removeVideoFromPlaylist(t,n){this.videoPlaylistService.removeVideoFromPlaylist(t.id,n,this.video.id).subscribe(()=>{this.notifier.success("\u0412\u0438\u0434\u0435\u043E \u0443\u0434\u0430\u043B\u0435\u043D\u043E \u0441 \n          " + t.displayName + "\n        ")},t=>{this.notifier.error(t.message)},()=>this.cd.markForCheck())}listenToVideoPlaylistChange(){this.unsubscribePlaylistChanges(),this.listenToPlaylistChangeSub=this.videoPlaylistService.listenToVideoPlaylistChange(this.video.id).pipe(Object(c.a)(()=>!1===this.disabled)).subscribe(t=>this.rebuildPlaylists(t))}unsubscribePlaylistChanges(){this.listenToPlaylistChangeSub&&(this.listenToPlaylistChangeSub.unsubscribe(),this.listenToPlaylistChangeSub=void 0)}rebuildPlaylists(t){w("Got existing results for %d.",this.video.id,t);const n=this.videoPlaylists;this.videoPlaylists=[];for(const e of this.playlistsData){const o=t.filter(t=>t.playlistId===e.id),i={id:e.id,optionalRowDisplayed:!1,displayName:e.displayName,elements:o.map(t=>({enabled:!0,playlistElementId:t.playlistElementId,startTimestamp:t.startTimestamp||0,stopTimestamp:t.stopTimestamp||this.video.duration}))},a=n.find(t=>t.id===e.id);i.optionalRowDisplayed=a?a.optionalRowDisplayed:this.isOptionalRowDisplayed(i),this.videoPlaylists.push(i)}w("Rebuilt playlist state for video %d.",this.video.id,this.videoPlaylists),this.cd.markForCheck()}addVideoInPlaylist(t,n){const e={videoId:this.video.id};n.startTimestamp&&(e.startTimestamp=n.startTimestamp),n.stopTimestamp&&n.stopTimestamp!==this.video.duration&&(e.stopTimestamp=n.stopTimestamp),this.videoPlaylistService.addVideoInPlaylist(t.id,e).subscribe(o=>{const i=e.startTimestamp||e.stopTimestamp?"\u0412\u0438\u0434\u0435\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E \u0432 " + t.displayName + " \u0441 \u0432\u0440\u0435\u043C\u0435\u043D\u043D\u043E\u0439 \u043C\u0435\u0442\u043A\u043E\u0439 " + this.formatTimestamp(n) + "":"\u0412\u0438\u0434\u0435\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E \u0432 \n          " + t.displayName + "\n        ";this.notifier.success(i),n&&(n.playlistElementId=o.videoPlaylistElement.id)},t=>{this.notifier.error(t.message)},()=>this.cd.markForCheck())}formatTimestamp(t){return`(${t.startTimestamp?Object(r.j)(t.startTimestamp):""}-${t.stopTimestamp?Object(r.j)(t.stopTimestamp):""})`}}return t.\u0275fac=function(n){return new(n||t)(p.Qb(s.b),p.Qb(l.a),p.Qb(l.m),p.Qb(g.a),p.Qb(p.h))},t.\u0275cmp=p.Kb({type:t,selectors:[["my-video-add-to-playlist"]],inputs:{video:"video",currentVideoTimestamp:"currentVideoTimestamp",lazyLoad:"lazyLoad"},features:[p.Ab,p.Bb],decls:14,vars:4,consts:function(){let t,n,e,o,i,a,c;return t="\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432",n="\u0418\u0441\u043A\u0430\u0442\u044C \u043F\u043B\u0435\u0439\u043B\u0438\u0441\u0442\u044B",e="\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043F\u0440\u0438\u0432\u0430\u0442\u043D\u044B\u0439 \u043F\u043B\u0435\u0439\u043B\u0438\u0441\u0442",o="\u041D\u0430\u0447\u0430\u043B\u043E \u0432",i="\u041A\u043E\u043D\u0435\u0446 \u0432",a="\u041E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0435\u043C\u043E\u0435 \u0438\u043C\u044F",c="\u0421\u043E\u0437\u0434\u0430\u0442\u044C",[[1,"root"],[1,"header"],[1,"first-row"],[1,"title"],t,[1,"input-container"],["type","text","placeholder",n,3,"ngModel","ngModelChange"],[1,"playlists"],["class","playlist dropdown-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"new-playlist-button","dropdown-item",3,"hidden","click"],["iconName","add","aria-hidden","true"],e,["class","new-playlist-block dropdown-item",3,"formGroup","ngSubmit",4,"ngIf"],[1,"playlist","dropdown-item",3,"ngClass"],[1,"primary-row",3,"click"],[3,"disabled","inputName","ngModel","onPushWorkaround"],[1,"display-name"],["class","optional-row-icon",3,"click",4,"ngIf"],["class","optional-rows",4,"ngIf"],[1,"optional-row-icon",3,"click"],[1,"optional-rows"],[1,"labels"],o,i,[4,"ngFor","ngForOf"],[3,"inputName","ngModel","onPushWorkaround","click"],[3,"maxTimestamp","ngModel","ngModelChange","inputBlur"],["startAt",""],["stopAt",""],[1,"new-playlist-block","dropdown-item",3,"formGroup","ngSubmit"],[1,"form-group"],["for","displayName"],a,["type","text","id","displayName","formControlName","displayName",3,"ngClass"],["class","form-error",4,"ngIf"],["type","submit","value",c,3,"disabled"],[1,"form-error"]]},template:function(t,n){1&t&&(p.Wb(0,"div",0),p.Wb(1,"div",1),p.Wb(2,"div",2),p.Wb(3,"div",3),p.ac(4,4),p.Vb(),p.Vb(),p.Vb(),p.Wb(5,"div",5),p.Wb(6,"input",6),p.kc("ngModelChange",function(t){return n.videoPlaylistSearch=t})("ngModelChange",function(){return n.onVideoPlaylistSearchChanged()}),p.Vb(),p.Vb(),p.Wb(7,"div",7),p.Rc(8,_,7,10,"div",8),p.Vb(),p.Wb(9,"div",9),p.kc("click",function(t){return n.openCreateBlock(t)}),p.Rb(10,"my-global-icon",10),p.Wb(11,"span"),p.ac(12,11),p.Vb(),p.Vb(),p.Rc(13,x,7,6,"form",12),p.Vb()),2&t&&(p.Db(6),p.vc("ngModel",n.videoPlaylistSearch),p.Db(2),p.vc("ngForOf",n.videoPlaylists),p.Db(1),p.vc("hidden",n.isNewPlaylistBlockOpened),p.Db(4),p.vc("ngIf",n.isNewPlaylistBlockOpened))},directives:[m.b,m.m,m.p,u.m,b.a,u.n,u.l,h.a,P.a,m.y,m.n,m.h,m.f],styles:['.dropdown-item[_ngcontent-%COMP%], .header[_ngcontent-%COMP%], .input-container[_ngcontent-%COMP%]{padding:8px 24px}.dropdown-item[_ngcontent-%COMP%]:active{color:inherit}.header[_ngcontent-%COMP%]{min-width:240px;margin-bottom:10px;border-bottom:1px solid rgba(0,0,0,.1)}.header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;align-items:center}.header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:18px;flex-grow:1}.playlists[_ngcontent-%COMP%]{max-height:180px;overflow-y:auto}.playlist[_ngcontent-%COMP%]{padding:0}.playlist[_ngcontent-%COMP%] > .primary-row[_ngcontent-%COMP%]{padding:8px 10px 8px 24px}.playlist[_ngcontent-%COMP%] > .optional-rows[_ngcontent-%COMP%]{padding-left:24px}.playlist.has-optional-row[_ngcontent-%COMP%]:hover{background-color:inherit}.optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .primary-row[_ngcontent-%COMP%]{display:flex}.optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   my-peertube-checkbox[_ngcontent-%COMP%], .primary-row[_ngcontent-%COMP%]   my-peertube-checkbox[_ngcontent-%COMP%]{margin-right:10px;align-self:center}.optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%], .primary-row[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{display:flex;align-items:flex-end;flex-grow:1;margin:0;font-weight:400;cursor:pointer}.optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%], .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:14px;cursor:pointer}.optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%], .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{width:19px;height:19px;margin-right:0}.optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material, .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:#333}.optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"], .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:#333}.optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"], .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:#333}.optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"], .primary-row[_ngcontent-%COMP%]   .optional-row-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:#333}.optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%], .primary-row[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%]{margin-right:10px}.optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%]     .ui-inputtext, .primary-row[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%]     .ui-inputtext{padding:0;width:50px}.optional-rows[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:8px 5px 5px 10px}.optional-rows[_ngcontent-%COMP%]   my-peertube-checkbox[_ngcontent-%COMP%]{display:block;width:34px;margin-right:0!important}.optional-rows[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]{margin-left:34px;font-size:13px;color:var(--greyForegroundColor);padding-top:5px;padding-bottom:0}.optional-rows[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:10px;width:50px}.new-playlist-block[_ngcontent-%COMP%], .new-playlist-button[_ngcontent-%COMP%]{padding-top:10px;border-top:1px solid rgba(0,0,0,.1)}.new-playlist-button[_ngcontent-%COMP%]{cursor:pointer}.new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;left:-1px;top:-1px;margin-right:4px;width:21px;height:21px}.new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:#333}.new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:#333}.new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:#333}.new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:#333}input[type=text][_ngcontent-%COMP%]{display:inline-block;height:30px;width:200px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;display:block}input[type=text][_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}input[type=text][readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width:200px){input[type=text][_ngcontent-%COMP%]{width:100%}}input[type=submit][_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}input[type=submit].focus-visible[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}input[type=submit][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}input[type=submit].disabled[_ngcontent-%COMP%], input[type=submit][disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:#fff}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:#fff}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:#fff}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:#fff}'],changeDetection:0}),t})()},OsX3:function(t,n,e){"use strict";e.d(n,"a",function(){return c});var o=e("D0XW"),i=e("7o/Q"),a=e("z+Ro");function c(t){let n=arguments.length,e=o.a;Object(a.a)(arguments[arguments.length-1])&&(e=arguments[arguments.length-1],n--);let i=null;n>=2&&(i=arguments[1]);let c=Number.POSITIVE_INFINITY;return n>=3&&(c=arguments[2]),function(n){return n.lift(new l(t,i,c,e))}}class l{constructor(t,n,e,o){this.bufferTimeSpan=t,this.bufferCreationInterval=n,this.maxBufferSize=e,this.scheduler=o}call(t,n){return n.subscribe(new r(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))}}class s{constructor(){this.buffer=[]}}class r extends i.a{constructor(t,n,e,o,i){super(t),this.bufferTimeSpan=n,this.bufferCreationInterval=e,this.maxBufferSize=o,this.scheduler=i,this.contexts=[];const a=this.openContext();if(this.timespanOnly=null==e||e<0,this.timespanOnly)this.add(a.closeAction=i.schedule(d,n,{subscriber:this,context:a,bufferTimeSpan:n}));else{const t={bufferTimeSpan:n,bufferCreationInterval:e,subscriber:this,scheduler:i};this.add(a.closeAction=i.schedule(p,n,{subscriber:this,context:a})),this.add(i.schedule(g,e,t))}}_next(t){const n=this.contexts,e=n.length;let o;for(let i=0;i<e;i++){const e=n[i],a=e.buffer;a.push(t),a.length==this.maxBufferSize&&(o=e)}o&&this.onBufferFull(o)}_error(t){this.contexts.length=0,super._error(t)}_complete(){const{contexts:t,destination:n}=this;for(;t.length>0;){const e=t.shift();n.next(e.buffer)}super._complete()}_unsubscribe(){this.contexts=null}onBufferFull(t){this.closeContext(t);const n=t.closeAction;if(n.unsubscribe(),this.remove(n),!this.closed&&this.timespanOnly){t=this.openContext();const n=this.bufferTimeSpan;this.add(t.closeAction=this.scheduler.schedule(d,n,{subscriber:this,context:t,bufferTimeSpan:n}))}}openContext(){const t=new s;return this.contexts.push(t),t}closeContext(t){this.destination.next(t.buffer);const n=this.contexts;(n?n.indexOf(t):-1)>=0&&n.splice(n.indexOf(t),1)}}function d(t){const n=t.subscriber,e=t.context;e&&n.closeContext(e),n.closed||(t.context=n.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function g(t){const{bufferCreationInterval:n,bufferTimeSpan:e,subscriber:o,scheduler:i}=t,a=o.openContext();o.closed||(o.add(a.closeAction=i.schedule(p,e,{subscriber:o,context:a})),this.schedule(t,n))}function p(t){const{subscriber:n,context:e}=t;n.closeContext(e)}},PcNq:function(t,n,e){"use strict";e.d(n,"a",function(){return c}),e("qZuT");var o=e("P8w3"),i=e("Nmku"),a=e("fXoL");let c=(()=>{class t{}return t.\u0275mod=a.Ob({type:t}),t.\u0275inj=a.Nb({factory:function(n){return new(n||t)},providers:[],imports:[[i.a,o.a]]}),t})()},Pehk:function(t,n,e){"use strict";e.d(n,"c",function(){return i}),e.d(n,"d",function(){return a}),e.d(n,"b",function(){return c}),e.d(n,"a",function(){return l}),e.d(n,"e",function(){return s});var o=e("3Pt+");const i={VALIDATORS:[o.w.required,o.w.minLength(1),o.w.maxLength(120)],MESSAGES:{required:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0435\u043C\u043E\u0435 \u0438\u043C\u044F.",minlength:"\u041E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0435\u043C\u043E\u0435 \u0438\u043C\u044F \u0434\u043E\u043B\u0436\u043D\u043E \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 1 \u0441\u0438\u043C\u0432\u043E\u043B\u0430.",maxlength:"\u0414\u043B\u0438\u043D\u0430 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0435\u043C\u043E\u0433\u043E \u0438\u043C\u0435\u043D\u0438 \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u0430 \u043F\u0440\u0435\u0432\u044B\u0448\u0430\u0442\u044C 120 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432."}},a={VALIDATORS:[o.w.required],MESSAGES:{required:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F \u043A\u043E\u043D\u0444\u0438\u0434\u0435\u043D\u0446\u0438\u0430\u043B\u044C\u043D\u043E\u0441\u0442\u044C."}},c={VALIDATORS:[o.w.minLength(3),o.w.maxLength(1e3)],MESSAGES:{minlength:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 3 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432.",maxlength:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 1000 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432."}},l={VALIDATORS:[],MESSAGES:{required:"\u041A\u0430\u043D\u0430\u043B \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C, \u0435\u0441\u043B\u0438 \u043F\u043B\u0435\u0439\u043B\u0438\u0441\u0442 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043E\u0431\u0449\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u043C."}};function s(t,n){n.toString()===1..toString()?t.setValidators([o.w.required]):t.setValidators(null),t.markAsDirty(),t.updateValueAndValidity()}},SZgj:function(t,n,e){"use strict";e("DTAc"),e("2Qox"),e("DQE6"),e("dTdE"),e("a9tR");var o=e("4Yo8");e.d(n,"b",function(){return o.a});var i=e("aW0q");e.d(n,"a",function(){return i.a})},a9tR:function(t,n,e){"use strict";e.d(n,"a",function(){return c});var o=e("6rF9"),i=e("xMQD"),a=e("UozT");class c{constructor(t,n){const e=Object(o.e)();this.id=t.id,this.uuid=t.uuid,this.isLocal=t.isLocal,this.displayName=t.displayName,this.description=t.description,this.privacy=t.privacy,this.thumbnailPath=t.thumbnailPath,this.thumbnailPath?(this.thumbnailUrl=e+t.thumbnailPath,this.originThumbnailUrl=this.thumbnailUrl):this.thumbnailUrl=window.location.origin+"/client/assets/images/default-playlist.jpg",this.embedPath=t.embedPath,this.embedUrl=Object(o.f)()+t.embedPath,this.videosLength=t.videosLength,this.type=t.type,this.createdAt=new Date(t.createdAt),this.updatedAt=new Date(t.updatedAt),this.ownerAccount=t.ownerAccount,this.ownerBy=i.c.CREATE_BY_STRING(t.ownerAccount.name,t.ownerAccount.host),this.ownerAvatarUrl=i.a.GET_ACTOR_AVATAR_URL(this.ownerAccount),t.videoChannel&&(this.videoChannel=t.videoChannel,this.videoChannelBy=i.c.CREATE_BY_STRING(t.videoChannel.name,t.videoChannel.host),this.videoChannelAvatarUrl=i.m.GET_ACTOR_AVATAR_URL(this.videoChannel)),this.privacy.label=Object(a.h)(this.privacy.label,n),2===this.type.id&&(this.displayName=Object(a.h)(this.displayName,n))}refreshThumbnail(){this.originThumbnailUrl&&(this.thumbnailVersion||(this.thumbnailVersion=0),this.thumbnailVersion++,this.thumbnailUrl=this.originThumbnailUrl+"?v"+this.thumbnailVersion)}}},aW0q:function(t,n,e){"use strict";e.d(n,"a",function(){return r});var o=e("sWvm"),i=e("P8w3"),a=e("Nmku"),c=e("PcNq"),l=e("4Yo8"),s=e("fXoL");let r=(()=>{class t{}return t.\u0275mod=s.Ob({type:t}),t.\u0275inj=s.Nb({factory:function(n){return new(n||t)},providers:[l.a],imports:[[a.a,o.c,c.a,i.a]]}),t})()},dTdE:function(t,n,e){"use strict";e.d(n,"a",function(){return p}),e("a9tR");var o=e("fXoL"),i=e("ofXK"),a=e("tyNb"),c=e("LsvZ");const l=function(t){return["/video-channels",t]};function s(t,n){if(1&t&&(o.Wb(0,"a",15),o.ac(1,16),o.Vb()),2&t){const t=o.oc();o.vc("routerLink",o.zc(2,l,t.playlist.videoChannelBy)),o.Db(1),o.ec(t.playlist.videoChannelBy),o.bc(1)}}function r(t,n){if(1&t&&(o.Wb(0,"span",17),o.Tc(1),o.Vb()),2&t){const t=o.oc();o.Db(1),o.Uc(t.playlist.privacy.label)}}function d(t,n){if(1&t&&(o.Wb(0,"div",18),o.Tc(1),o.Vb()),2&t){const t=o.oc();o.Db(1),o.Uc(t.playlist.description)}}const g=function(t,n){return{"no-videos":t,"to-manage":n}};let p=(()=>{class t{constructor(){this.toManage=!1,this.displayChannel=!1,this.displayDescription=!1,this.displayPrivacy=!1}getPlaylistUrl(){return this.toManage?["/my-library/video-playlists",this.playlist.uuid]:0===this.playlist.videosLength?null:["/videos/watch/playlist",this.playlist.uuid]}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["my-video-playlist-miniature"]],inputs:{playlist:"playlist",toManage:"toManage",displayChannel:"displayChannel",displayDescription:"displayDescription",displayPrivacy:"displayPrivacy"},decls:18,vars:19,consts:function(){let t,n,e;return t="{VAR_PLURAL, plural, =0 {\u041D\u0435\u0442 \u0432\u0438\u0434\u0435\u043E} other {{INTERPOLATION} \u0432\u0438\u0434\u0435\u043E}}",t=o.fc(t,{VAR_PLURAL:"\ufffd0\ufffd",INTERPOLATION:"\ufffd1\ufffd"}),n="\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E " + "\ufffd0\ufffd" + "",e="" + "\ufffd0\ufffd" + " ",[[1,"miniature",3,"ngClass"],[1,"miniature-thumbnail",3,"routerLink"],["alt",""],[1,"miniature-playlist-info-overlay"],t,[1,"play-overlay"],[1,"icon"],[1,"miniature-info"],["tabindex","-1",1,"miniature-name",3,"routerLink"],["class","by",3,"routerLink",4,"ngIf"],[1,"privacy-date"],["class","video-info-privacy",4,"ngIf"],[1,"updated-at"],n,["class","video-info-description",4,"ngIf"],[1,"by",3,"routerLink"],e,[1,"video-info-privacy"],[1,"video-info-description"]]},template:function(t,n){1&t&&(o.Wb(0,"div",0),o.Wb(1,"a",1),o.Rb(2,"img",2),o.Wb(3,"div",3),o.Ub(4),o.ac(5,4),o.Tb(),o.Vb(),o.Wb(6,"div",5),o.Rb(7,"div",6),o.Vb(),o.Vb(),o.Wb(8,"div",7),o.Wb(9,"a",8),o.Tc(10),o.Vb(),o.Rc(11,s,2,4,"a",9),o.Wb(12,"div",10),o.Rc(13,r,2,1,"span",11),o.Wb(14,"span",12),o.ac(15,13),o.pc(16,"myFromNow"),o.Vb(),o.Vb(),o.Rc(17,d,2,1,"div",14),o.Vb(),o.Vb()),2&t&&(o.vc("ngClass",o.Ac(16,g,0===n.playlist.videosLength,n.toManage)),o.Db(1),o.vc("routerLink",n.getPlaylistUrl()),o.Eb("title",n.playlist.description),o.Db(1),o.Eb("aria-labelledby",n.playlist.displayName)("src",n.playlist.thumbnailUrl,o.Mc),o.Db(3),o.ec(n.playlist.videosLength)(n.playlist.videosLength),o.bc(5),o.Db(4),o.vc("routerLink",n.getPlaylistUrl()),o.Eb("title",n.playlist.description),o.Db(1),o.Vc(" ",n.playlist.displayName," "),o.Db(1),o.vc("ngIf",n.displayChannel&&n.playlist.videoChannelBy),o.Db(2),o.vc("ngIf",n.displayPrivacy),o.Db(3),o.ec(o.qc(16,14,n.playlist.updatedAt)),o.bc(15),o.Db(1),o.vc("ngIf",n.displayDescription))},directives:[i.l,a.k,i.n],pipes:[c.a],styles:['.miniature[_ngcontent-%COMP%]{display:inline-block}.miniature.no-videos[_ngcontent-%COMP%]:not(.to-manage)   a[_ngcontent-%COMP%]{cursor:default!important}.miniature.no-videos[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .miniature.to-manage[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{display:none}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:filter .2s ease}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]:hover{text-decoration:none!important}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{filter:blur(20px);transform:scale(1.03)}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]   .miniature-playlist-info-overlay[_ngcontent-%COMP%]{display:inline-block;background-color:rgba(0,0,0,.7);color:#fff;position:absolute;right:0;bottom:0;height:122px;padding:0 10px;display:flex;align-items:center;font-size:14px;font-weight:600}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]{width:200px;margin-top:2px;line-height:normal}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .miniature-name[_ngcontent-%COMP%]{max-height:2.2em;font-size:1.1em;line-height:1.1em;transition:color .2s;font-weight:600;color:var(--mainForegroundColor);display:block;display:-webkit-box;max-height:2.6em;font-size:1.3em;line-height:1.3em;overflow:hidden;text-overflow:ellipsis;margin:0}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .miniature-name[_ngcontent-%COMP%]:hover{text-decoration:none}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .miniature-name.blur-filter[_ngcontent-%COMP%]{filter:blur(3px);padding-left:4px}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .by[_ngcontent-%COMP%]{display:block;color:var(--greyForegroundColor)}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .by[_ngcontent-%COMP%]:active, .miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .by[_ngcontent-%COMP%]:focus, .miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .by[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .privacy-date[_ngcontent-%COMP%]{margin-top:5px}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .privacy-date[_ngcontent-%COMP%]   .video-info-privacy[_ngcontent-%COMP%]{font-size:14px;font-weight:600}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .privacy-date[_ngcontent-%COMP%]   .video-info-privacy[_ngcontent-%COMP%]:after{content:"-";margin:0 3px}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .video-info-description[_ngcontent-%COMP%]{margin-top:10px;color:var(--greyForegroundColor)}']}),t})()},qZuT:function(t,n,e){"use strict";e.d(n,"a",function(){return k});var o=e("fXoL"),i=e("ey9i"),a=(e("xMQD"),e("ofXK")),c=e("tyNb"),l=e("1kSV"),s=e("UkmY");function r(t,n){1&t&&o.Sb(0)}function d(t,n){if(1&t&&(o.Wb(0,"a",3),o.Rc(1,r,1,0,"ng-container",4),o.Vb()),2&t){const t=o.oc(),n=o.Ic(3);o.vc("routerLink",t.getVideoRouterLink())("queryParams",t.queryParams),o.Db(1),o.vc("ngTemplateOutlet",n)}}function g(t,n){1&t&&o.Sb(0)}function p(t,n){if(1&t&&(o.Wb(0,"a",5),o.Rc(1,g,1,0,"ng-container",4),o.Vb()),2&t){const t=o.oc(),n=o.Ic(3);o.vc("href",t.videoHref,o.Mc)("target",t.videoTarget),o.Db(1),o.vc("ngTemplateOutlet",n)}}function m(t,n){if(1&t){const t=o.Xb();o.Ub(0),o.Wb(1,"div",17),o.kc("click",function(n){return o.Kc(t),o.oc(3).onWatchLaterClick(n)}),o.Rb(2,"my-global-icon",18),o.Vb(),o.Tb()}if(2&t){const t=o.oc(3);o.Db(1),o.vc("ngbTooltip",t.addToWatchLaterText),o.Db(1),o.Eb("aria-label",t.addToWatchLaterText)}}function u(t,n){if(1&t){const t=o.Xb();o.Ub(0),o.Wb(1,"div",17),o.kc("click",function(n){return o.Kc(t),o.oc(3).onWatchLaterClick(n)}),o.Rb(2,"my-global-icon",19),o.Vb(),o.Tb()}if(2&t){const t=o.oc(3);o.Db(1),o.vc("ngbTooltip",t.addedToWatchLaterText),o.Db(1),o.Eb("aria-label",t.addedToWatchLaterText)}}function b(t,n){if(1&t&&(o.Wb(0,"div",15),o.Rc(1,m,3,2,"ng-container",16),o.Rc(2,u,3,2,"ng-container",16),o.Vb()),2&t){const t=o.oc(2);o.Db(1),o.vc("ngIf",!0!==t.inWatchLaterPlaylist),o.Db(1),o.vc("ngIf",!0===t.inWatchLaterPlaylist)}}function h(t,n){if(1&t&&(o.Wb(0,"div",20),o.Tc(1),o.Vb()),2&t){const t=o.oc(2);o.Db(1),o.Uc(t.video.durationLabel)}}function P(t,n){1&t&&(o.Ub(0),o.ac(1,22),o.Tb())}function C(t,n){1&t&&(o.Ub(0),o.ac(1,23),o.Tb())}const v=function(t){return{"live-ended":t}};function O(t,n){if(1&t&&(o.Wb(0,"div",21),o.Rc(1,P,2,0,"ng-container",16),o.Rc(2,C,2,0,"ng-container",16),o.Vb()),2&t){const t=o.oc(2);o.vc("ngClass",o.zc(3,v,t.isLiveEnded())),o.Db(1),o.vc("ngIf",!t.isLiveEnded()),o.Db(1),o.vc("ngIf",t.isLiveEnded())}}const y=function(t){return{"width.%":t}};function _(t,n){if(1&t&&(o.Wb(0,"div",24),o.Rb(1,"div",25),o.Vb()),2&t){const t=o.oc(2);o.Db(1),o.vc("ngStyle",o.zc(1,y,t.getProgressPercent()))}}const M=function(t){return{"blur-filter":t}};function f(t,n){if(1&t&&(o.Rb(0,"img",6),o.Rc(1,b,3,2,"div",7),o.Wb(2,"div",8),o.tc(3),o.Vb(),o.Wb(4,"div",9),o.tc(5,1),o.Vb(),o.Rc(6,h,2,1,"div",10),o.Rc(7,O,3,5,"div",11),o.Wb(8,"div",12),o.Rb(9,"div",13),o.Vb(),o.Rc(10,_,2,3,"div",14)),2&t){const t=o.oc();o.vc("ngClass",o.zc(7,M,t.nsfw)),o.Eb("aria-label",t.video.name)("src",t.getImageUrl(),o.Mc),o.Db(1),o.vc("ngIf",t.displayWatchLaterPlaylist),o.Db(5),o.vc("ngIf",!t.video.isLive),o.Db(1),o.vc("ngIf",t.video.isLive),o.Db(3),o.vc("ngIf",null==t.video.userHistory?null:t.video.userHistory.currentTime)}}const x=[[["label-warning"]],[["label-danger"]]],w=["label-warning","label-danger"];let k=(()=>{class t{constructor(t){this.screenService=t,this.nsfw=!1,this.watchLaterClick=new o.n,this.addToWatchLaterText="\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C, \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u043F\u043E\u0437\u0436\u0435",this.addedToWatchLaterText="\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0441 \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430 \u043F\u043E\u0437\u0436\u0435"}isLiveEnded(){if(this.video.state)return 5===this.video.state.id}getImageUrl(){return this.video?this.screenService.isInMobileView()?this.video.previewUrl:this.video.thumbnailUrl:""}getProgressPercent(){return this.video.userHistory?this.video.userHistory.currentTime/this.video.duration*100:0}getVideoRouterLink(){return this.videoRouterLink?this.videoRouterLink:["/videos/watch",this.video.uuid]}onWatchLaterClick(t){return this.watchLaterClick.emit(this.inWatchLaterPlaylist),t.stopPropagation(),!1}}return t.\u0275fac=function(n){return new(n||t)(o.Qb(i.v))},t.\u0275cmp=o.Kb({type:t,selectors:[["my-video-thumbnail"]],inputs:{video:"video",nsfw:"nsfw",videoRouterLink:"videoRouterLink",queryParams:"queryParams",videoHref:"videoHref",videoTarget:"videoTarget",displayWatchLaterPlaylist:"displayWatchLaterPlaylist",inWatchLaterPlaylist:"inWatchLaterPlaylist"},outputs:{watchLaterClick:"watchLaterClick"},ngContentSelectors:w,decls:4,vars:2,consts:function(){let t,n;return t="\u0412 \u042D\u0424\u0418\u0420\u0415",n="\u042D\u0424\u0418\u0420 \u0417\u0410\u0412\u0415\u0420\u0428\u0415\u041D",[["class","video-thumbnail",3,"routerLink","queryParams",4,"ngIf"],["class","video-thumbnail",3,"href","target",4,"ngIf"],["aContent",""],[1,"video-thumbnail",3,"routerLink","queryParams"],[4,"ngTemplateOutlet"],[1,"video-thumbnail",3,"href","target"],["alt","",3,"ngClass"],["class","video-thumbnail-actions-overlay",4,"ngIf"],[1,"video-thumbnail-label-overlay","warning"],[1,"video-thumbnail-label-overlay","danger"],["class","video-thumbnail-duration-overlay",4,"ngIf"],["class","video-thumbnail-live-overlay",3,"ngClass",4,"ngIf"],[1,"play-overlay"],[1,"icon"],["class","progress-bar",4,"ngIf"],[1,"video-thumbnail-actions-overlay"],[4,"ngIf"],["placement","left","container","body",1,"video-thumbnail-watch-later-overlay",3,"ngbTooltip","click"],["iconName","clock","role","button"],["iconName","tick","role","button"],[1,"video-thumbnail-duration-overlay"],[1,"video-thumbnail-live-overlay",3,"ngClass"],t,n,[1,"progress-bar"],[3,"ngStyle"]]},template:function(t,n){1&t&&(o.uc(x),o.Rc(0,d,2,3,"a",0),o.Rc(1,p,2,3,"a",1),o.Rc(2,f,11,9,"ng-template",null,2,o.Sc)),2&t&&(o.vc("ngIf",!n.videoHref),o.Db(1),o.vc("ngIf",n.videoHref))},directives:[a.n,c.k,a.s,a.l,l.D,s.a,a.o],styles:['.video-thumbnail[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:filter .2s ease}.video-thumbnail[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.video-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .video-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.video-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.video-thumbnail[_ngcontent-%COMP%]:hover{text-decoration:none!important}.video-thumbnail[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.video-thumbnail[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.video-thumbnail.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.video-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.video-thumbnail[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{filter:blur(20px);transform:scale(1.03)}.video-thumbnail[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:3px;width:100%;position:absolute;bottom:0;background-color:rgba(0,0,0,.2)}.video-thumbnail[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:100%;background-color:var(--mainColor)}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-duration-overlay[_ngcontent-%COMP%], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-label-overlay[_ngcontent-%COMP%], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-live-overlay[_ngcontent-%COMP%], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]{display:inline-block;background-color:rgba(0,0,0,.7);color:#fff;border-radius:3px;font-size:12px;font-weight:600;line-height:1.1;z-index:10}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-label-overlay[_ngcontent-%COMP%]{position:absolute;padding:0 5px;left:5px;top:5px;font-weight:700}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-label-overlay.warning[_ngcontent-%COMP%]{background-color:orange}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-label-overlay.danger[_ngcontent-%COMP%]{background-color:red}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-duration-overlay[_ngcontent-%COMP%], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-live-overlay[_ngcontent-%COMP%]{position:absolute;padding:0 3px;right:5px;bottom:5px}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-live-overlay[_ngcontent-%COMP%]{font-weight:600;color:#fff}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-live-overlay[_ngcontent-%COMP%]:not(.live-ended){background-color:rgba(224,8,8,.7)}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:column;right:5px;top:5px;opacity:0}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:not(:first-child){margin-top:2px}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]{padding:3px}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{width:22px;height:22px}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:#fff}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:#fff}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:#fff}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:#fff}']}),t})()}}]);