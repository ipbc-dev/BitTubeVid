(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"25cm":function(e,t,r){"use strict";var o=r("tPH9"),n=r("/1FC");t.a=function(e,t,r){var i=t(e);return Object(n.a)(e)?i:Object(o.a)(i,r(e))}},"2L7+":function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var o=r("mrSG"),n=r("fXoL"),i=r("ey9i"),c=(r("xMQD"),r("GxWh")),a=r("QLwe"),s=r("Imgh"),l=r("ofXK"),u=r("EcKj");const d=["userBanModal"],b=function(e,t){return{user:e,account:t}};function h(e,t){if(1&e){const e=n.Xb();n.Ub(0),n.Wb(1,"my-user-ban-modal",1,2),n.kc("userBanned",(function(){return n.Kc(e),n.oc().onUserBanned()})),n.Vb(),n.Rb(3,"my-action-dropdown",3),n.Tb()}if(2&e){const e=n.oc();n.Db(3),n.vc("actions",e.userActions)("entry",n.Ac(6,b,e.user,e.account))("buttonSize",e.buttonSize)("placement",e.placement)("label",e.label)("container",e.container)}}let f=(()=>{class e{constructor(e,t,r,o,i,c,a){this.authService=e,this.notifier=t,this.confirmService=r,this.serverService=o,this.userService=i,this.blocklistService=c,this.bulkService=a,this.buttonSize="normal",this.placement="right-top right-bottom auto",this.container=void 0,this.userChanged=new n.n,this.userDeleted=new n.n,this.userActions=[]}get requiresEmailVerification(){return this.serverConfig.signup.requiresEmailVerification}ngOnInit(){this.serverConfig=this.serverService.getTmpConfig(),this.serverService.getConfig().subscribe(e=>this.serverConfig=e)}ngOnChanges(){this.buildActions()}openBanUserModal(e){"root"!==e.username?this.userBanModal.openModal(e):this.notifier.error("\u0412\u044B \u043D\u0435 \u043C\u043E\u0436\u0435\u0442\u0435 \u0437\u0430\u043F\u0440\u0435\u0442\u0438\u0442\u044C root.")}onUserBanned(){this.userChanged.emit()}unbanUser(e){return Object(o.a)(this,void 0,void 0,(function*(){!1!==(yield this.confirmService.confirm("Do you really want to unban \n          " + e.username + "?\n        ","\u0420\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C"))&&this.userService.unbanUsers(e).subscribe(()=>{this.notifier.success("User \n          " + e.username + " unbanned.\n        "),this.userChanged.emit()},e=>this.notifier.error(e.message))}))}removeUser(e){return Object(o.a)(this,void 0,void 0,(function*(){if("root"===e.username)return void this.notifier.error("\u0412\u044B \u043D\u0435 \u043C\u043E\u0436\u0435\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C root.");const t="If you remove this user, you will not be able to create another with the same username!";!1!==(yield this.confirmService.confirm(t,"Delete"))&&this.userService.removeUser(e).subscribe(()=>{this.notifier.success("User \n          " + e.username + " deleted.\n        "),this.userDeleted.emit()},e=>this.notifier.error(e.message))}))}setEmailAsVerified(e){this.userService.updateUser(e.id,{emailVerified:!0}).subscribe(()=>{this.notifier.success("User \n          " + e.username + " email set as verified\n        "),this.userChanged.emit()},e=>this.notifier.error(e.message))}blockAccountByUser(e){this.blocklistService.blockAccountByUser(e).subscribe(()=>{this.notifier.success("\u0410\u043A\u043A\u0430\u0443\u043D\u0442 \n          " + e.nameWithHost + " \u0437\u0430\u0433\u043B\u0443\u0448\u0435\u043D.\n        "),this.account.mutedByUser=!0,this.userChanged.emit()},e=>this.notifier.error(e.message))}unblockAccountByUser(e){this.blocklistService.unblockAccountByUser(e).subscribe(()=>{this.notifier.success("\u0410\u043A\u043A\u0430\u0443\u043D\u0442 \n          " + e.nameWithHost + " \u0431\u044B\u043B \u0440\u0430\u0437\u0433\u043B\u0443\u0448\u0435\u043D.\n        "),this.account.mutedByUser=!1,this.userChanged.emit()},e=>this.notifier.error(e.message))}blockServerByUser(e){this.blocklistService.blockServerByUser(e).subscribe(()=>{this.notifier.success("Instance \n          " + e + " muted.\n        "),this.account.mutedServerByUser=!0,this.userChanged.emit()},e=>this.notifier.error(e.message))}unblockServerByUser(e){this.blocklistService.unblockServerByUser(e).subscribe(()=>{this.notifier.success("\u0421\u0435\u0440\u0432\u0435\u0440 \n          " + e + " \u0431\u044B\u043B \u0440\u0430\u0437\u0433\u043B\u0443\u0448\u0435\u043D.\n        "),this.account.mutedServerByUser=!1,this.userChanged.emit()},e=>this.notifier.error(e.message))}blockAccountByInstance(e){this.blocklistService.blockAccountByInstance(e).subscribe(()=>{this.notifier.success("\u0410\u043A\u043A\u0430\u0443\u043D\u0442 \n          " + e.nameWithHost + " \u0437\u0430\u0433\u043B\u0443\u0448\u0435\u043D \u0441\u0435\u0440\u0432\u0435\u0440\u043E\u043C.\n        "),this.account.mutedByInstance=!0,this.userChanged.emit()},e=>this.notifier.error(e.message))}unblockAccountByInstance(e){this.blocklistService.unblockAccountByInstance(e).subscribe(()=>{this.notifier.success("\u0410\u043A\u043A\u0430\u0443\u043D\u0442 \n          " + e.nameWithHost + " \u0440\u0430\u0437\u0433\u043B\u0443\u0448\u0435\u043D \u0441\u0435\u0440\u0432\u0435\u0440\u043E\u043C.\n        "),this.account.mutedByInstance=!1,this.userChanged.emit()},e=>this.notifier.error(e.message))}blockServerByInstance(e){this.blocklistService.blockServerByInstance(e).subscribe(()=>{this.notifier.success("\u0421\u0435\u0440\u0432\u0435\u0440 \n          " + e + " \u0437\u0430\u0433\u043B\u0443\u0448\u0435\u043D \u0441\u0435\u0440\u0432\u0435\u0440\u043E\u043C.\n        "),this.account.mutedServerByInstance=!0,this.userChanged.emit()},e=>this.notifier.error(e.message))}unblockServerByInstance(e){this.blocklistService.unblockServerByInstance(e).subscribe(()=>{this.notifier.success("\u0421\u0435\u0440\u0432\u0435\u0440 \n          " + e + " \u0440\u0430\u0437\u0433\u043B\u0443\u0448\u0435\u043D \u0441\u0435\u0440\u0432\u0435\u0440\u043E\u043C.\n        "),this.account.mutedServerByInstance=!1,this.userChanged.emit()},e=>this.notifier.error(e.message))}bulkRemoveCommentsOf(e){return Object(o.a)(this,void 0,void 0,(function*(){const t="Are you sure you want to remove all the comments of this account?";!1!==(yield this.confirmService.confirm(t,"Delete account comments"))&&this.bulkService.removeCommentsOf(e).subscribe(()=>{this.notifier.success("Will remove comments of this account (may take several minutes).")},e=>this.notifier.error(e.message))}))}getRouterUserEditLink(e){return["/admin","users","update",e.id]}buildActions(){if(this.userActions=[],this.prependActions&&(this.userActions=[this.prependActions]),this.authService.isLoggedIn()){const e=this.authService.getUser();if(this.user&&e.id===this.user.id)return;if(this.user&&e.hasRight(1)&&e.canManage(this.user)&&this.userActions.push([{label:"Edit user",description:"Change quota, role, and more.",linkBuilder:({user:e})=>this.getRouterUserEditLink(e)},{label:"Delete user",description:"\u0412\u0438\u0434\u0435\u043E \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043B\u0435\u043D\u043E, \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0438 \u0431\u0443\u0434\u0443\u0442 \u0437\u0430\u043C\u043E\u0440\u043E\u0436\u0435\u043D\u044B.",handler:({user:e})=>this.removeUser(e)},{label:"Ban",description:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0431\u043E\u043B\u044C\u0448\u0435 \u043D\u0435 \u0441\u043C\u043E\u0436\u0435\u0442 \u0432\u043E\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443, \u043D\u043E \u0432\u0438\u0434\u0435\u043E \u0438 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0438 \u0431\u0443\u0434\u0443\u0442 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u044B \u043A\u0430\u043A \u0435\u0441\u0442\u044C.",handler:({user:e})=>this.openBanUserModal(e),isDisplayed:({user:e})=>!e.blocked},{label:"Unban user",description:"Allow the user to login and create videos/comments again",handler:({user:e})=>this.unbanUser(e),isDisplayed:({user:e})=>e.blocked},{label:"\u041F\u043E\u043C\u0435\u0442\u0438\u0442\u044C \u044D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u0443\u044E \u043F\u043E\u0447\u0442\u0443 \u043A\u0430\u043A \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0451\u043D\u043D\u0443\u044E",handler:({user:e})=>this.setEmailAsVerified(e),isDisplayed:({user:e})=>this.requiresEmailVerification&&!e.blocked&&!1===e.emailVerified}]),this.account){this.userActions.push([{label:"\u0417\u0430\u0433\u043B\u0443\u0448\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u0430\u043A\u043A\u0430\u0443\u043D\u0442",description:"Hide any content from that user for you.",isDisplayed:({account:e})=>!1===e.mutedByUser,handler:({account:e})=>this.blockAccountByUser(e)},{label:"\u0420\u0430\u0437\u0433\u043B\u0443\u0448\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u0430\u043A\u043A\u0430\u0443\u043D\u0442",description:"Show back content from that user for you.",isDisplayed:({account:e})=>!0===e.mutedByUser,handler:({account:e})=>this.unblockAccountByUser(e)},{label:"\u0417\u0430\u0433\u043B\u0443\u0448\u0438\u0442\u044C \u0441\u0435\u0440\u0432\u0435\u0440",description:"Hide any content from that instance for you.",isDisplayed:({account:e})=>!e.userId&&!1===e.mutedServerByInstance,handler:({account:e})=>this.blockServerByUser(e.host)},{label:"\u0420\u0430\u0437\u0433\u043B\u0443\u0448\u0438\u0442\u044C \u0441\u0435\u0440\u0432\u0435\u0440",description:"Show back content from that instance for you.",isDisplayed:({account:e})=>!e.userId&&!0===e.mutedServerByInstance,handler:({account:e})=>this.unblockServerByUser(e.host)},{label:"Remove comments from your videos",description:"Remove comments of this account from your videos.",handler:({account:e})=>this.bulkRemoveCommentsOf({accountName:e.nameWithHost,scope:"my-videos"})}]);let t=[];e.hasRight(9)&&(t=t.concat([{label:"\u0417\u0430\u0433\u043B\u0443\u0448\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u0430\u043A\u043A\u0430\u0443\u043D\u0442 \u0432\u0430\u0448\u0438\u043C \u0441\u0435\u0440\u0432\u0435\u0440\u043E\u043C",description:"Hide any content from that user for you, your instance and its users.",isDisplayed:({account:e})=>!1===e.mutedByInstance,handler:({account:e})=>this.blockAccountByInstance(e)},{label:"\u0420\u0430\u0437\u0433\u043B\u0443\u0448\u0438\u0442\u044C \u044D\u0442\u043E\u0442 \u0430\u043A\u043A\u0430\u0443\u043D\u0442 \u0432\u0430\u0448\u0438\u043C \u0441\u0435\u0440\u0432\u0435\u0440\u043E\u043C",description:"Show back content from that user for you, your instance and its users.",isDisplayed:({account:e})=>!0===e.mutedByInstance,handler:({account:e})=>this.unblockAccountByInstance(e)}])),e.hasRight(10)&&(t=t.concat([{label:"\u0417\u0430\u0433\u043B\u0443\u0448\u0438\u0442\u044C \u0441\u0435\u0440\u0432\u0435\u0440 \u0432\u0430\u0448\u0438\u043C \u0441\u0435\u0440\u0432\u0435\u0440\u043E\u043C",description:"Hide any content from that instance for you, your instance and its users.",isDisplayed:({account:e})=>!e.userId&&!1===e.mutedServerByInstance,handler:({account:e})=>this.blockServerByInstance(e.host)},{label:"\u0420\u0430\u0437\u0433\u043B\u0443\u0448\u0438\u0442\u044C \u0441\u0435\u0440\u0432\u0435\u0440 \u0432\u0430\u0448\u0438\u043C \u0441\u0435\u0440\u0432\u0435\u0440\u043E\u043C",description:"Show back content from that instance for you, your instance and its users.",isDisplayed:({account:e})=>!e.userId&&!0===e.mutedServerByInstance,handler:({account:e})=>this.unblockServerByInstance(e.host)}])),e.hasRight(15)&&(t=t.concat([{label:"Remove comments from your instance",description:"Remove comments of this account from your instance.",handler:({account:e})=>this.bulkRemoveCommentsOf({accountName:e.nameWithHost,scope:"instance"})}])),0!==t.length&&this.userActions.push(t)}}}}return e.\u0275fac=function(t){return new(t||e)(n.Qb(i.AuthService),n.Qb(i.Notifier),n.Qb(i.ConfirmService),n.Qb(i.ServerService),n.Qb(i.UserService),n.Qb(c.b),n.Qb(a.a))},e.\u0275cmp=n.Kb({type:e,selectors:[["my-user-moderation-dropdown"]],viewQuery:function(e,t){var r;1&e&&n.Zc(d,!0),2&e&&n.Hc(r=n.lc())&&(t.userBanModal=r.first)},inputs:{user:"user",account:"account",prependActions:"prependActions",buttonSize:"buttonSize",placement:"placement",label:"label",container:"container"},outputs:{userChanged:"userChanged",userDeleted:"userDeleted"},features:[n.Bb],decls:1,vars:1,consts:[[4,"ngIf"],[3,"userBanned"],["userBanModal",""],[3,"actions","entry","buttonSize","placement","label","container"]],template:function(e,t){1&e&&n.Tc(0,h,4,9,"ng-container",0),2&e&&n.vc("ngIf",0!==t.userActions.length)},directives:[l.u,s.a,u.a],encapsulation:2}),e})()},"3/ER":function(e,t,r){"use strict";(function(e){var o=r("Ju5/"),n="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=n&&"object"==typeof e&&e&&!e.nodeType&&e,c=i&&i.exports===n?o.a.Buffer:void 0,a=c?c.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var r=e.length,o=a?a(r):new e.constructor(r);return e.copy(o),o}}).call(this,r("3UD+")(e))},"3ZlK":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));const o={violentOrRepulsive:1,hatefulOrAbusive:2,spamOrMisleading:3,privacy:4,rights:5,serverRules:6,thumbnails:7,captions:8}},"4/q3":function(e,t,r){"use strict";var o=r("7gMY"),n=r("IzLi"),i=r("pyRK"),c=Object.prototype.hasOwnProperty,a=r("5WsY");t.a=function(e){return Object(a.a)(e)?Object(o.a)(e,!0):function(e){if(!Object(n.a)(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=Object(i.a)(e),r=[];for(var o in e)("constructor"!=o||!t&&c.call(e,o))&&r.push(o);return r}(e)}},"4joM":function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return c}));var o=r("3Pt+");const n={VALIDATORS:[o.G.required,o.G.minLength(2),o.G.maxLength(3e3)],MESSAGES:{required:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F \u043F\u0440\u0438\u0447\u0438\u043D\u0430 \u0436\u0430\u043B\u043E\u0431\u044B.",minlength:"\u041F\u0440\u0438\u0447\u0438\u043D\u0430 \u0436\u0430\u043B\u043E\u0431\u044B \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 2 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432.",maxlength:"\u041F\u0440\u0438\u0447\u0438\u043D\u0430 \u0436\u0430\u043B\u043E\u0431\u044B \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 3000 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432."}},i={VALIDATORS:[o.G.required,o.G.minLength(2),o.G.maxLength(3e3)],MESSAGES:{required:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430.",minlength:"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430 \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 2 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432.",maxlength:"\u041A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u0430 \u043D\u0435 \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 3000 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432."}},c={VALIDATORS:[o.G.required,o.G.minLength(2),o.G.maxLength(3e3)],MESSAGES:{required:"Abuse message is required.",minlength:"Abuse message must be at least 2 characters long.",maxlength:"Abuse message cannot be more than 3000 characters long."}}},"5WsY":function(e,t,r){"use strict";var o=r("vJtL"),n=r("Js68");t.a=function(e){return null!=e&&Object(n.a)(e.length)&&!Object(o.a)(e)}},"7gMY":function(e,t,r){"use strict";var o=r("9f76"),n=r("/1FC"),i=r("WOAq"),c=r("cSlR"),a=r("oYcn"),s=Object.prototype.hasOwnProperty;t.a=function(e,t){var r=Object(n.a)(e),l=!r&&Object(o.a)(e),u=!r&&!l&&Object(i.a)(e),d=!r&&!l&&!u&&Object(a.a)(e),b=r||l||u||d,h=b?function(e,t){for(var r=-1,o=Array(e);++r<e;)o[r]=t(r);return o}(e.length,String):[],f=h.length;for(var m in e)!t&&!s.call(e,m)||b&&("length"==m||u&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||Object(c.a)(m,f))||h.push(m);return h}},"8i4Y":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var o=r("6rF9"),n=r("xMQD");class i{constructor(e){if(this.id=e.id,this.url=e.url,this.text=e.text,this.threadId=e.threadId,this.inReplyToCommentId=e.inReplyToCommentId,this.videoId=e.videoId,this.createdAt=new Date(e.createdAt.toString()),this.updatedAt=new Date(e.updatedAt.toString()),this.deletedAt=e.deletedAt?new Date(e.deletedAt.toString()):null,this.isDeleted=e.isDeleted,this.account=e.account,this.totalRepliesFromVideoAuthor=e.totalRepliesFromVideoAuthor,this.totalReplies=e.totalReplies,this.account){this.by=n.Actor.CREATE_BY_STRING(this.account.name,this.account.host),this.accountAvatarUrl=n.Actor.GET_ACTOR_AVATAR_URL(this.account);const e=Object(o.e)(),t=new URL(e).host;this.isLocal=this.account.host.trim()===t}}}},"9BXX":function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));var o=r("TSHB"),n=r("u3oV"),i=r("ey9i"),c=r("4joM"),a=r("sWvm"),s=(r("xMQD"),r("3ZlK")),l=r("9dYW"),u=r("fXoL"),d=r("1kSV"),b=r("UkmY"),h=r("3Pt+"),f=r("ofXK"),m=r("/xt7"),p=r("BLxp");const v=["modal"];function g(e,t){if(1&e&&u.Rb(0,"div",29),2&e){const e=u.oc(2).$implicit;u.vc("innerHTML",e.help,u.Lc)}}function y(e,t){1&e&&u.Tc(0,g,1,1,"ng-template",28)}function O(e,t){if(1&e&&(u.Ub(0,30),u.Rb(1,"div",29),u.Tb()),2&e){const e=u.oc().$implicit;u.Db(1),u.vc("innerHTML",e.description,u.Lc)}}function S(e,t){if(1&e&&(u.Wb(0,"div",17),u.Wb(1,"my-peertube-checkbox",26),u.Tc(2,y,1,0,void 0,16),u.Tc(3,O,2,1,"ng-container",27),u.Vb(),u.Vb()),2&e){const e=t.$implicit;u.Db(1),u.vc("inputName",e.id)("formControlName",e.id)("labelText",e.label),u.Db(1),u.vc("ngIf",e.help),u.Db(1),u.vc("ngIf",e.description)}}function A(e,t){if(1&e&&(u.gc(0,15,1),u.Sb(1),u.dc()),2&e){const e=u.oc(2);u.Db(1),u.ec(e.originHost),u.bc(0)}}function j(e,t){if(1&e&&(u.Wb(0,"div",31),u.Vc(1),u.Vb()),2&e){const e=u.oc(2);u.Db(1),u.Xc(" ",e.formErrors.reason," ")}}const x=function(e){return{"input-error":e}};function E(e,t){if(1&e){const e=u.Xb();u.Wb(0,"div",1),u.Wb(1,"h4",2),u.Vc(2),u.Vb(),u.Wb(3,"my-global-icon",3),u.kc("click",(function(){return u.Kc(e),u.oc().hide()})),u.Vb(),u.Vb(),u.Wb(4,"div",4),u.Wb(5,"form",5),u.kc("ngSubmit",(function(){return u.Kc(e),u.oc().report()})),u.Wb(6,"div",6),u.Wb(7,"div",7),u.Wb(8,"label",8),u.ac(9,9),u.Vb(),u.Wb(10,"div",10),u.Ub(11,11),u.Tc(12,S,4,5,"div",12),u.Tb(),u.Vb(),u.Vb(),u.Wb(13,"div",13),u.Wb(14,"div",14),u.gc(15,15),u.Tc(16,A,2,1,"ng-container",16),u.dc(),u.Vb(),u.Wb(17,"div",17),u.Wb(18,"textarea",18),u.cc(19,19),u.Vb(),u.Tc(20,j,2,1,"div",20),u.Vb(),u.Vb(),u.Vb(),u.Wb(21,"div",21),u.Wb(22,"input",22),u.cc(23,23),u.kc("click",(function(){return u.Kc(e),u.oc().hide()}))("key.enter",(function(){return u.Kc(e),u.oc().hide()})),u.Vb(),u.Wb(24,"input",24),u.cc(25,25),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&e){const e=u.oc();u.Db(2),u.Wc(e.modalTitle),u.Db(3),u.vc("formGroup",e.form),u.Db(7),u.vc("ngForOf",e.predefinedReasons),u.Db(4),u.vc("ngIf",e.isRemote()),u.ec(e.currentHost),u.bc(15),u.Db(2),u.vc("ngClass",u.zc(8,x,e.formErrors.reason)),u.Db(2),u.vc("ngIf",e.formErrors.reason),u.Db(4),u.vc("disabled",!e.form.valid)}}let k=(()=>{class e extends a.a{constructor(e,t,r,o){super(),this.formValidatorService=e,this.modalService=t,this.abuseService=r,this.notifier=o,this.account=null,this.error=null,this.predefinedReasons=[]}get currentHost(){return window.location.host}get originHost(){return this.isRemote()?this.account.host:""}ngOnInit(){this.modalTitle="Report \n          " + this.account.displayName + "\n        ",this.buildForm({reason:c.c,predefinedReasons:Object(o.a)(s.a,e=>null)}),this.predefinedReasons=this.abuseService.getPrefefinedReasons("account")}show(){this.openedModal=this.modalService.open(this.modal,{centered:!0,keyboard:!1,size:"lg"})}hide(){this.openedModal.close(),this.openedModal=null}report(){const e=this.form.get("reason").value,t=Object.keys(Object(n.a)(this.form.get("predefinedReasons").value));this.abuseService.reportVideo({reason:e,predefinedReasons:t,account:{id:this.account.id}}).subscribe(()=>{this.notifier.success("Account reported."),this.hide()},e=>this.notifier.error(e.message))}isRemote(){return!this.account.isLocal}}return e.\u0275fac=function(t){return new(t||e)(u.Qb(a.b),u.Qb(d.k),u.Qb(l.a),u.Qb(i.Notifier))},e.\u0275cmp=u.Kb({type:e,selectors:[["my-account-report"]],viewQuery:function(e,t){var r;1&e&&u.Qc(v,!0),2&e&&u.Hc(r=u.lc())&&(t.modal=r.first)},inputs:{account:"account"},features:[u.Ab],decls:2,vars:0,consts:function(){var e,t,r,o;return e="What is the issue?",t="\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043E\u043F\u0438\u0448\u0438\u0442\u0435 \u044D\u0442\u0443 \u043F\u0440\u043E\u0431\u043B\u0435\u043C\u0443...",r="Cancel",o="\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C",[["modal",""],[1,"modal-header"],[1,"modal-title"],["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-5","form-group"],["for","reportPredefinedReasons"],e,[1,"ml-2","mt-2","d-flex","flex-column"],["formGroupName","predefinedReasons"],["class","form-group",4,"ngFor","ngForOf"],[1,"col-7"],[1,"information"],"\n          Your report will be sent to moderators of \n          " + "\ufffd0\ufffd" + "\n          " + "\ufffd*16:1\ufffd\ufffd#1:1\ufffd" + " and will be forwarded to the comment origin (\n          " + "\ufffd0:1\ufffd" + ") too\n          " + "\ufffd/#1:1\ufffd\ufffd/*16:1\ufffd" + ".\n        \n        ",[4,"ngIf"],[1,"form-group"],["formControlName","reason","ngbAutofocus","",1,"form-control",3,"ngClass",6,"placeholder"],["placeholder",t],["class","form-error",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button",1,"action-button","action-button-cancel",3,"click","key.enter",6,"value"],["value",r],["type","submit",1,"action-button-submit",3,"disabled",6,"value"],["value",o],[3,"inputName","formControlName","labelText"],["ngProjectAs","description",5,["description"],4,"ngIf"],["ptTemplate","help"],[3,"innerHTML"],["ngProjectAs","description",5,["description"]],[1,"form-error"]]},template:function(e,t){1&e&&u.Tc(0,E,26,10,"ng-template",null,0,u.Uc)},directives:[b.a,h.I,h.t,h.l,h.m,f.t,f.u,h.c,h.s,h.j,f.r,m.a,p.a],styles:[".information[_ngcontent-%COMP%]{margin-bottom:20px}textarea[_ngcontent-%COMP%]{display:inline-block;height:30px;width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;color:var(--textareaForegroundColor);background-color:var(--textareaBackgroundColor);height:100px;padding:5px 15px;font-size:15px}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}textarea[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width:100%){textarea[_ngcontent-%COMP%]{width:100%}}.start-at[_ngcontent-%COMP%], .stop-at[_ngcontent-%COMP%]{width:300px;display:flex;align-items:center}.start-at[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%], .stop-at[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%]{margin-left:10px}.screenratio[_ngcontent-%COMP%]{position:relative;height:0;width:100%;padding-top:56%}.screenratio[_ngcontent-%COMP%]     iframe, .screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}"]}),e})()},"9dYW":function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var o=r("m8R6"),n=r("JIr8"),i=r("lJxs"),c=r("tk/3"),a=r("ey9i"),s=r("AytR"),l=r("fXoL");let u=(()=>{class e{constructor(e,t,r){this.authHttp=e,this.restService=t,this.restExtractor=r}getAdminAbuses(t){const{pagination:r,sort:o,search:i}=t,a=e.BASE_ABUSE_URL;let s=new c.f;return s=this.restService.addRestGetParams(s,r,o),i&&(s=this.buildParamsFromSearch(i,s)),this.authHttp.get(a,{params:s}).pipe(Object(n.a)(e=>this.restExtractor.handleError(e)))}getUserAbuses(t){const{pagination:r,sort:o,search:i}=t,a=e.BASE_MY_ABUSE_URL;let s=new c.f;return s=this.restService.addRestGetParams(s,r,o),i&&(s=this.buildParamsFromSearch(i,s)),this.authHttp.get(a,{params:s}).pipe(Object(n.a)(e=>this.restExtractor.handleError(e)))}reportVideo(t){const r=e.BASE_ABUSE_URL,c=Object(o.a)(t,["id"]);return this.authHttp.post(r,c).pipe(Object(i.a)(this.restExtractor.extractDataBool),Object(n.a)(e=>this.restExtractor.handleError(e)))}updateAbuse(t,r){return this.authHttp.put(e.BASE_ABUSE_URL+"/"+t.id,r).pipe(Object(i.a)(this.restExtractor.extractDataBool),Object(n.a)(e=>this.restExtractor.handleError(e)))}removeAbuse(t){return this.authHttp.delete(e.BASE_ABUSE_URL+"/"+t.id).pipe(Object(i.a)(this.restExtractor.extractDataBool),Object(n.a)(e=>this.restExtractor.handleError(e)))}addAbuseMessage(t,r){return this.authHttp.post(e.BASE_ABUSE_URL+"/"+t.id+"/messages",{message:r}).pipe(Object(i.a)(this.restExtractor.extractDataBool),Object(n.a)(e=>this.restExtractor.handleError(e)))}listAbuseMessages(t){return this.authHttp.get(e.BASE_ABUSE_URL+"/"+t.id+"/messages").pipe(Object(n.a)(e=>this.restExtractor.handleError(e)))}deleteAbuseMessage(t,r){return this.authHttp.delete(e.BASE_ABUSE_URL+"/"+t.id+"/messages/"+r.id).pipe(Object(i.a)(this.restExtractor.extractDataBool),Object(n.a)(e=>this.restExtractor.handleError(e)))}getPrefefinedReasons(e){let t=[{id:"violentOrRepulsive",label:"Violent or repulsive",help:"Contains offensive, violent, or coarse language or iconography."},{id:"hatefulOrAbusive",label:"Hateful or abusive",help:"Contains abusive, racist or sexist language or iconography."},{id:"spamOrMisleading",label:"Spam, ad or false news",help:"Contains marketing, spam, purposefully deceitful news, or otherwise misleading thumbnail/text/tags. Please provide reputable sources to report hoaxes."},{id:"privacy",label:"Privacy breach or doxxing",help:"Contains personal information that could be used to track, identify, contact or impersonate someone (e.g. name, address, phone number, email, or credit card details)."},{id:"rights",label:"Copyright",help:"Infringes your copyright wrt. the regional laws with which the server must comply."},{id:"serverRules",label:"Breaks server rules",description:"Anything not included in the above that breaks the terms of service, code of conduct, or general rules in place on the server."}];return"video"===e&&(t=t.concat([{id:"thumbnails",label:"Thumbnails",help:"The above can only be seen in thumbnails."},{id:"captions",label:"Captions",help:"The above can only be seen in captions (please describe which)."}])),t}buildParamsFromSearch(e,t){const r=this.restService.parseQueryStringFilter(e,{id:{prefix:"#"},state:{prefix:"state:",handler:e=>"accepted"===e?3:"pending"===e?1:"rejected"===e?2:void 0},videoIs:{prefix:"videoIs:",handler:e=>"deleted"===e||"blacklisted"===e?e:void 0},searchReporter:{prefix:"reporter:"},searchReportee:{prefix:"reportee:"},predefinedReason:{prefix:"tag:"}});return this.restService.addObjectParams(t,r)}}return e.BASE_ABUSE_URL=s.a.apiUrl+"/api/v1/abuses",e.BASE_MY_ABUSE_URL=s.a.apiUrl+"/api/v1/users/me/abuses",e.\u0275fac=function(t){return new(t||e)(l.hc(c.b),l.hc(a.RestService),l.hc(a.RestExtractor))},e.\u0275prov=l.Mb({token:e,factory:e.\u0275fac}),e})()},BYvb:function(e,t,r){"use strict";r.d(t,"a",(function(){return B}));var o=r("TSHB"),n=r("u3oV"),i=r("H9+z"),c=r("ey9i"),a=r("4joM"),s=r("sWvm"),l=r("3ZlK"),u=(r("xMQD"),r("9dYW")),d=r("fXoL"),b=r("1kSV"),h=r("jhN1"),f=r("UkmY"),m=r("3Pt+"),p=r("ofXK"),v=r("/xt7"),g=r("C8Cb"),y=r("BLxp");const O=["modal"];function S(e,t){if(1&e&&d.Rb(0,"div",18),2&e){const e=d.oc(2).$implicit;d.vc("innerHTML",e.help,d.Lc)}}function A(e,t){1&e&&d.Tc(0,S,1,1,"ng-template",38)}function j(e,t){if(1&e&&(d.Ub(0,39),d.Rb(1,"div",18),d.Tb()),2&e){const e=d.oc().$implicit;d.Db(1),d.vc("innerHTML",e.description,d.Lc)}}function x(e,t){if(1&e&&(d.Wb(0,"div",27),d.Wb(1,"my-peertube-checkbox",36),d.Tc(2,A,1,0,void 0,26),d.Tc(3,j,2,1,"ng-container",37),d.Vb(),d.Vb()),2&e){const e=t.$implicit;d.Db(1),d.vc("inputName",e.id)("formControlName",e.id)("labelText",e.label),d.Db(1),d.vc("ngIf",e.help),d.Db(1),d.vc("ngIf",e.description)}}function E(e,t){if(1&e&&(d.Wb(0,"div",40),d.Wb(1,"my-peertube-checkbox",41),d.cc(2,42),d.Vb(),d.Rb(3,"my-timestamp-input",43),d.Vb()),2&e){const e=d.oc(2);d.Db(3),d.vc("timestamp",e.timestamp.endAt)("maxTimestamp",e.video.duration)}}function k(e,t){if(1&e&&(d.gc(0,25,1),d.Sb(1),d.dc()),2&e){const e=d.oc(2);d.Db(1),d.ec(e.originHost),d.bc(0)}}function _(e,t){if(1&e&&(d.Wb(0,"div",44),d.Vc(1),d.Vb()),2&e){const e=d.oc(2);d.Db(1),d.Xc(" ",e.formErrors.reason," ")}}const R=function(e){return{"input-error":e}};function C(e,t){if(1&e){const e=d.Xb();d.Wb(0,"div",1),d.Wb(1,"h4",2),d.ac(2,3),d.Vb(),d.Wb(3,"my-global-icon",4),d.kc("click",(function(){return d.Kc(e),d.oc().hide()})),d.Vb(),d.Vb(),d.Wb(4,"div",5),d.Wb(5,"form",6),d.kc("ngSubmit",(function(){return d.Kc(e),d.oc().report()})),d.Wb(6,"div",7),d.Wb(7,"div",8),d.Wb(8,"label",9),d.ac(9,10),d.Vb(),d.Wb(10,"div",11),d.Ub(11,12),d.Tc(12,x,4,5,"div",13),d.Tb(),d.Vb(),d.Vb(),d.Wb(13,"div",14),d.Wb(14,"div",15),d.Wb(15,"div",16),d.Wb(16,"div",17),d.Rb(17,"div",18),d.Vb(),d.Vb(),d.Vb(),d.Wb(18,"div",19),d.Wb(19,"my-peertube-checkbox",20),d.cc(20,21),d.Vb(),d.Rb(21,"my-timestamp-input",22),d.Vb(),d.Tc(22,E,4,2,"div",23),d.Wb(23,"div",24),d.gc(24,25),d.Tc(25,k,2,1,"ng-container",26),d.dc(),d.Vb(),d.Wb(26,"div",27),d.Wb(27,"textarea",28),d.cc(28,29),d.Vb(),d.Tc(29,_,2,1,"div",30),d.Vb(),d.Vb(),d.Vb(),d.Wb(30,"div",31),d.Wb(31,"input",32),d.cc(32,33),d.kc("click",(function(){return d.Kc(e),d.oc().hide()}))("key.enter",(function(){return d.Kc(e),d.oc().hide()})),d.Vb(),d.Wb(33,"input",34),d.cc(34,35),d.Vb(),d.Vb(),d.Vb(),d.Vb()}if(2&e){const e=d.oc();d.Db(2),d.ec(e.video.name),d.bc(2),d.Db(3),d.vc("formGroup",e.form),d.Db(7),d.vc("ngForOf",e.predefinedReasons),d.Db(5),d.vc("innerHTML",e.embedHtml,d.Lc),d.Db(4),d.vc("timestamp",e.timestamp.startAt)("maxTimestamp",e.video.duration),d.Db(1),d.vc("ngIf",e.timestamp.hasStart),d.Db(3),d.vc("ngIf",e.isRemote()),d.ec(e.currentHost),d.bc(24),d.Db(2),d.vc("ngClass",d.zc(12,R,e.formErrors.reason)),d.Db(2),d.vc("ngIf",e.formErrors.reason),d.Db(4),d.vc("disabled",!e.form.valid)}}let B=(()=>{class e extends s.a{constructor(e,t,r,o,n){super(),this.formValidatorService=e,this.modalService=t,this.abuseService=r,this.notifier=o,this.sanitizer=n,this.video=null,this.error=null,this.predefinedReasons=[]}get currentHost(){return window.location.host}get originHost(){return this.isRemote()?this.video.account.host:""}get timestamp(){return this.form.get("timestamp").value}getVideoEmbed(){return this.sanitizer.bypassSecurityTrustHtml(Object(i.c)(Object(i.b)({baseUrl:this.video.embedUrl,title:!1,warningTitle:!1})))}ngOnInit(){this.buildForm({reason:a.c,predefinedReasons:Object(o.a)(l.a,e=>null),timestamp:{hasStart:null,startAt:null,hasEnd:null,endAt:null}}),this.predefinedReasons=this.abuseService.getPrefefinedReasons("video"),this.embedHtml=this.getVideoEmbed()}show(){this.openedModal=this.modalService.open(this.modal,{centered:!0,keyboard:!1,size:"lg"})}hide(){this.openedModal.close(),this.openedModal=null}report(){const e=this.form.get("reason").value,t=Object.keys(Object(n.a)(this.form.get("predefinedReasons").value)),{hasStart:r,startAt:o,hasEnd:i,endAt:c}=this.form.get("timestamp").value;this.abuseService.reportVideo({reason:e,predefinedReasons:t,video:{id:this.video.id,startAt:r&&o?o:void 0,endAt:i&&c?c:void 0}}).subscribe(()=>{this.notifier.success("\u0412\u0438\u0434\u0435\u043E \u043E\u0431\u0436\u0430\u043B\u043E\u0432\u0430\u043D\u043E."),this.hide()},e=>this.notifier.error(e.message))}isRemote(){return!this.video.isLocal}}return e.\u0275fac=function(t){return new(t||e)(d.Qb(s.b),d.Qb(b.k),d.Qb(u.a),d.Qb(c.Notifier),d.Qb(h.b))},e.\u0275cmp=d.Kb({type:e,selectors:[["my-video-report"]],viewQuery:function(e,t){var r;1&e&&d.Qc(O,!0),2&e&&d.Hc(r=d.lc())&&(t.modal=r.first)},inputs:{video:"video"},features:[d.Ab],decls:2,vars:0,consts:function(){var e,t,r,o,n,i,c;return e="Report video \"\n          " + "\ufffd0\ufffd" + "\"\n        ",t="What is the issue?",r="\u041D\u0430\u0447\u0430\u043B\u043E \u0432",o="\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043E\u043F\u0438\u0448\u0438\u0442\u0435 \u044D\u0442\u0443 \u043F\u0440\u043E\u0431\u043B\u0435\u043C\u0443...",n="Cancel",i="\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C",c="\u041A\u043E\u043D\u0435\u0446 \u0432",[["modal",""],[1,"modal-header"],[1,"modal-title"],e,["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-5","form-group"],["for","reportPredefinedReasons"],t,[1,"ml-2","mt-2","d-flex","flex-column"],["formGroupName","predefinedReasons"],["class","form-group",4,"ngFor","ngForOf"],[1,"col-7"],[1,"row","justify-content-center"],[1,"col-12","col-lg-9","mb-2"],[1,"screenratio"],[3,"innerHTML"],["formGroupName","timestamp",1,"mb-1","start-at"],["formControlName","hasStart",6,"labelText"],["labelText",r],["formControlName","startAt","inputName","startAt",3,"timestamp","maxTimestamp"],["class","mb-3 stop-at","formGroupName","timestamp",4,"ngIf"],[1,"information"],"\n          Your report will be sent to moderators of \n          " + "\ufffd0\ufffd" + "\n          " + "\ufffd*25:1\ufffd\ufffd#1:1\ufffd" + " and will be forwarded to the video origin (\n          " + "\ufffd0:1\ufffd" + ") too\n          " + "\ufffd/#1:1\ufffd\ufffd/*25:1\ufffd" + ".\n        \n        ",[4,"ngIf"],[1,"form-group"],["formControlName","reason","ngbAutofocus","",1,"form-control",3,"ngClass",6,"placeholder"],["placeholder",o],["class","form-error",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button",1,"action-button","action-button-cancel",3,"click","key.enter",6,"value"],["value",n],["type","submit",1,"action-button-submit",3,"disabled",6,"value"],["value",i],[3,"inputName","formControlName","labelText"],["ngProjectAs","description",5,["description"],4,"ngIf"],["ptTemplate","help"],["ngProjectAs","description",5,["description"]],["formGroupName","timestamp",1,"mb-3","stop-at"],["formControlName","hasEnd",6,"labelText"],["labelText",c],["formControlName","endAt","inputName","endAt",3,"timestamp","maxTimestamp"],[1,"form-error"]]},template:function(e,t){1&e&&d.Tc(0,C,35,14,"ng-template",null,0,d.Uc)},directives:[f.a,m.I,m.t,m.l,m.m,p.t,v.a,m.s,m.j,g.a,p.u,m.c,p.r,y.a],styles:[".information[_ngcontent-%COMP%]{margin-bottom:20px}textarea[_ngcontent-%COMP%]{display:inline-block;height:30px;width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;color:var(--textareaForegroundColor);background-color:var(--textareaBackgroundColor);height:100px;padding:5px 15px;font-size:15px}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}textarea[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width:100%){textarea[_ngcontent-%COMP%]{width:100%}}.start-at[_ngcontent-%COMP%], .stop-at[_ngcontent-%COMP%]{width:300px;display:flex;align-items:center}.start-at[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%], .stop-at[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%]{margin-left:10px}.screenratio[_ngcontent-%COMP%]{position:relative;height:0;width:100%;padding-top:56%}.screenratio[_ngcontent-%COMP%]     iframe, .screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}"]}),e})()},Ce4a:function(e,t,r){"use strict";var o=r("Ju5/");t.a=o.a.Uint8Array},"E/r9":function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var o=r("fXoL"),n=r("sWvm"),i=r("3Pt+");function c(e){return e.split("\n").filter(e=>e&&0!==e.length)}const a={VALIDATORS:[i.G.required,e=>{if(!e.value)return null;const t=[],r=c(e.value);for(const n of r)!1===(o=n,new RegExp("^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]).)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$").test(o))&&t.push("\n          " + n + " \u043D\u0435\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u0435\u043D\n        ");var o;return 0!==t.length?{validDomains:{reason:"invalid",value:t.join(". ")+"."}}:null},e=>{if(!e.value)return null;const t=c(e.value);return t.every(e=>t.indexOf(e)===t.lastIndexOf(e))?null:{uniqueDomains:{reason:"invalid"}}}],MESSAGES:{required:"Domain is required.",validDomains:"Domains entered are invalid.",uniqueDomains:"Domains entered contain duplicates."}};var s=r("1kSV"),l=r("UkmY"),u=r("ofXK");const d=["modal"];function b(e,t){if(1&e&&(o.Wb(0,"div"),o.Vc(1),o.Vb()),2&e){const e=o.oc(3);o.Db(1),o.Xc(" ",e.form.controls.domains.errors.validDomains.value," ")}}function h(e,t){if(1&e&&(o.Wb(0,"div",16),o.Vc(1),o.Tc(2,b,2,1,"div",17),o.Vb()),2&e){const e=o.oc(2);o.Db(1),o.Xc(" ",e.formErrors.domains," "),o.Db(1),o.vc("ngIf",e.form.controls.domains.errors.validDomains)}}const f=function(e){return{"input-error":e}};function m(e,t){if(1&e){const e=o.Xb();o.Wb(0,"div",1),o.Wb(1,"h4",2),o.ac(2,3),o.Vb(),o.Wb(3,"my-global-icon",4),o.kc("click",(function(){return o.Kc(e),o.oc().hide()})),o.Vb(),o.Vb(),o.Wb(4,"div",5),o.Wb(5,"form",6),o.kc("ngSubmit",(function(){return o.Kc(e),o.oc().submit()})),o.Wb(6,"div",7),o.Wb(7,"label",8),o.ac(8,9),o.Vb(),o.Rb(9,"textarea",10),o.Tc(10,h,3,2,"div",11),o.Vb(),o.tc(11),o.Wb(12,"div",12),o.Wb(13,"input",13),o.cc(14,14),o.kc("click",(function(){return o.Kc(e),o.oc().hide()}))("key.enter",(function(){return o.Kc(e),o.oc().hide()})),o.Vb(),o.Rb(15,"input",15),o.Vb(),o.Vb(),o.Vb()}if(2&e){const e=o.oc();o.Db(2),o.ec(e.action),o.bc(2),o.Db(3),o.vc("formGroup",e.form),o.Db(4),o.vc("placeholder",e.placeholder)("ngClass",o.zc(7,f,e.formErrors.domains)),o.Db(1),o.vc("ngIf",e.formErrors.domains),o.Db(5),o.vc("value",e.action)("disabled",!e.form.valid)}}const p=[[["warning"]]],v=["warning"];let g=(()=>{class e extends n.a{constructor(e,t){super(),this.formValidatorService=e,this.modalService=t,this.placeholder="example.com",this.domains=new o.n}ngOnInit(){this.action||(this.action="Process domains"),this.buildForm({domains:a})}openModal(){this.openedModal=this.modalService.open(this.modal,{centered:!0})}hide(){this.openedModal.close()}submit(){this.domains.emit(c(this.form.controls.domains.value)),this.form.reset(),this.hide()}}return e.\u0275fac=function(t){return new(t||e)(o.Qb(n.b),o.Qb(s.k))},e.\u0275cmp=o.Kb({type:e,selectors:[["my-batch-domains-modal"]],viewQuery:function(e,t){var r;1&e&&o.Qc(d,!0),2&e&&o.Hc(r=o.lc())&&(t.modal=r.first)},inputs:{placeholder:"placeholder",action:"action"},outputs:{domains:"domains"},features:[o.Ab],ngContentSelectors:v,decls:2,vars:0,consts:function(){return[["modal",""],[1,"modal-header"],[1,"modal-title"],"\n          " + "\ufffd0\ufffd" + "\n        ",["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group"],["for","hosts"],"1 \u0445\u043E\u0441\u0442 (\u0431\u0435\u0437 \"http://\") \u043D\u0430 \u043E\u0434\u043D\u043E\u0439 \u0441\u0442\u0440\u043E\u043A\u0435",["formControlName","domains","type","text","id","hosts","name","hosts","ngbAutofocus","",1,"form-control",3,"placeholder","ngClass"],["class","form-error",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button",1,"action-button","action-button-cancel",3,"click","key.enter",6,"value"],["value","Cancel"],["type","submit",1,"action-button-submit",3,"value","disabled"],[1,"form-error"],[4,"ngIf"]]},template:function(e,t){1&e&&(o.uc(p),o.Tc(0,m,16,9,"ng-template",null,0,o.Uc))},directives:[l.a,i.I,i.t,i.l,i.c,i.s,i.j,u.r,u.u],styles:["textarea[_ngcontent-%COMP%]{height:200px}"]}),e})()},GYlH:function(e,t,r){"use strict";t.a=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},GeT4:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var o=r("lJxs"),n=r("JIr8"),i=r("tk/3"),c=r("ey9i"),a=r("6rF9"),s=r("AytR"),l=r("8i4Y"),u=r("fXoL");let d=(()=>{class e{constructor(e,t,r){this.authHttp=e,this.restExtractor=t,this.restService=r}addCommentThread(t,r){const i=e.BASE_VIDEO_URL+t+"/comment-threads",c=Object(a.l)(r,"text");return this.authHttp.post(i,c).pipe(Object(o.a)(e=>this.extractVideoComment(e.comment)),Object(n.a)(e=>this.restExtractor.handleError(e)))}addCommentReply(t,r,i){const c=e.BASE_VIDEO_URL+t+"/comments/"+r,s=Object(a.l)(i,"text");return this.authHttp.post(c,s).pipe(Object(o.a)(e=>this.extractVideoComment(e.comment)),Object(n.a)(e=>this.restExtractor.handleError(e)))}getVideoCommentThreads(t){const{videoId:r,componentPagination:c,sort:a}=t,s=this.restService.componentPaginationToRestPagination(c);let l=new i.f;return l=this.restService.addRestGetParams(l,s,a),this.authHttp.get(e.BASE_VIDEO_URL+r+"/comment-threads",{params:l}).pipe(Object(o.a)(e=>this.extractVideoComments(e)),Object(n.a)(e=>this.restExtractor.handleError(e)))}getVideoThreadComments(t){const{videoId:r,threadId:i}=t;return this.authHttp.get(`${e.BASE_VIDEO_URL+r}/comment-threads/${i}`).pipe(Object(o.a)(e=>this.extractVideoCommentTree(e)),Object(n.a)(e=>this.restExtractor.handleError(e)))}deleteVideoComment(t,r){return this.authHttp.delete(`${e.BASE_VIDEO_URL+t}/comments/${r}`).pipe(Object(o.a)(this.restExtractor.extractDataBool),Object(n.a)(e=>this.restExtractor.handleError(e)))}getVideoCommentsFeeds(t){const r=[{format:"xml",label:"rss 2.0",url:e.BASE_FEEDS_URL+"xml".toLowerCase()},{format:"atom",label:"atom 1.0",url:e.BASE_FEEDS_URL+"atom".toLowerCase()},{format:"json",label:"json 1.0",url:e.BASE_FEEDS_URL+"json".toLowerCase()}];if(void 0!==t)for(const e of r)e.url+="?videoId="+t;return r}extractVideoComment(e){return new l.a(e)}extractVideoComments(e){const t=e.data,r=e.total,o=[];for(const n of t)o.push(new l.a(n));return{data:o,total:r}}extractVideoCommentTree(e){return e?(e.comment=new l.a(e.comment),e.children.forEach(e=>this.extractVideoCommentTree(e)),e):e}}return e.BASE_VIDEO_URL=s.a.apiUrl+"/api/v1/videos/",e.BASE_FEEDS_URL=s.a.apiUrl+"/feeds/video-comments.",e.\u0275fac=function(t){return new(t||e)(u.hc(i.b),u.hc(c.RestExtractor),u.hc(c.RestService))},e.\u0275prov=u.Mb({token:e,factory:e.\u0275fac}),e})()},GxWh:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return d}));var o=r("lJxs"),n=r("JIr8"),i=r("tk/3"),c=r("ey9i"),a=r("AytR"),s=r("xHIW"),l=r("fXoL"),u=function(e){return e[e.Account=0]="Account",e[e.Instance=1]="Instance",e}({});let d=(()=>{class e{constructor(e,t,r){this.authHttp=e,this.restExtractor=t,this.restService=r}getUserAccountBlocklist(t){const{pagination:r,sort:c,search:a}=t;let s=new i.f;return s=this.restService.addRestGetParams(s,r,c),a&&(s=s.append("search",a)),this.authHttp.get(e.BASE_USER_BLOCKLIST_URL+"/accounts",{params:s}).pipe(Object(o.a)(e=>this.restExtractor.convertResultListDateToHuman(e)),Object(o.a)(e=>this.restExtractor.applyToResultListData(e,this.formatAccountBlock.bind(this))),Object(n.a)(e=>this.restExtractor.handleError(e)))}blockAccountByUser(t){return this.authHttp.post(e.BASE_USER_BLOCKLIST_URL+"/accounts",{accountName:t.nameWithHost}).pipe(Object(n.a)(e=>this.restExtractor.handleError(e)))}unblockAccountByUser(t){return this.authHttp.delete(e.BASE_USER_BLOCKLIST_URL+"/accounts/"+t.nameWithHost).pipe(Object(n.a)(e=>this.restExtractor.handleError(e)))}getUserServerBlocklist(t){const{pagination:r,sort:c,search:a}=t;let s=new i.f;return s=this.restService.addRestGetParams(s,r,c),a&&(s=s.append("search",a)),this.authHttp.get(e.BASE_USER_BLOCKLIST_URL+"/servers",{params:s}).pipe(Object(o.a)(e=>this.restExtractor.convertResultListDateToHuman(e)),Object(n.a)(e=>this.restExtractor.handleError(e)))}blockServerByUser(t){return this.authHttp.post(e.BASE_USER_BLOCKLIST_URL+"/servers",{host:t}).pipe(Object(n.a)(e=>this.restExtractor.handleError(e)))}unblockServerByUser(t){return this.authHttp.delete(e.BASE_USER_BLOCKLIST_URL+"/servers/"+t).pipe(Object(n.a)(e=>this.restExtractor.handleError(e)))}getInstanceAccountBlocklist(t){const{pagination:r,sort:c,search:a}=t;let s=new i.f;return s=this.restService.addRestGetParams(s,r,c),a&&(s=s.append("search",a)),this.authHttp.get(e.BASE_SERVER_BLOCKLIST_URL+"/accounts",{params:s}).pipe(Object(o.a)(e=>this.restExtractor.convertResultListDateToHuman(e)),Object(o.a)(e=>this.restExtractor.applyToResultListData(e,this.formatAccountBlock.bind(this))),Object(n.a)(e=>this.restExtractor.handleError(e)))}blockAccountByInstance(t){return this.authHttp.post(e.BASE_SERVER_BLOCKLIST_URL+"/accounts",{accountName:t.nameWithHost}).pipe(Object(n.a)(e=>this.restExtractor.handleError(e)))}unblockAccountByInstance(t){return this.authHttp.delete(e.BASE_SERVER_BLOCKLIST_URL+"/accounts/"+t.nameWithHost).pipe(Object(n.a)(e=>this.restExtractor.handleError(e)))}getInstanceServerBlocklist(t){const{pagination:r,sort:c,search:a}=t;let s=new i.f;return s=this.restService.addRestGetParams(s,r,c),a&&(s=s.append("search",a)),this.authHttp.get(e.BASE_SERVER_BLOCKLIST_URL+"/servers",{params:s}).pipe(Object(o.a)(e=>this.restExtractor.convertResultListDateToHuman(e)),Object(n.a)(e=>this.restExtractor.handleError(e)))}blockServerByInstance(t){return this.authHttp.post(e.BASE_SERVER_BLOCKLIST_URL+"/servers",{host:t}).pipe(Object(n.a)(e=>this.restExtractor.handleError(e)))}unblockServerByInstance(t){return this.authHttp.delete(e.BASE_SERVER_BLOCKLIST_URL+"/servers/"+t).pipe(Object(n.a)(e=>this.restExtractor.handleError(e)))}formatAccountBlock(e){return new s.a(e)}}return e.BASE_USER_BLOCKLIST_URL=a.a.apiUrl+"/api/v1/users/me/blocklist",e.BASE_SERVER_BLOCKLIST_URL=a.a.apiUrl+"/api/v1/server/blocklist",e.\u0275fac=function(t){return new(t||e)(l.hc(i.b),l.hc(c.RestExtractor),l.hc(c.RestService))},e.\u0275prov=l.Mb({token:e,factory:e.\u0275fac}),e})()},HIM4:function(e,t,r){"use strict";r.d(t,"a",(function(){return o.a})),r.d(t,"d",(function(){return s})),r.d(t,"b",(function(){return c.a})),r.d(t,"c",(function(){return c.b})),r.d(t,"e",(function(){return d})),r.d(t,"g",(function(){return b.a})),r.d(t,"f",(function(){return v})),r("9BXX"),r("re7S"),r("BYvb");var o=r("9dYW"),n=(r("xHIW"),r("ey9i")),i=r("xMQD"),c=r("GxWh"),a=r("fXoL");let s=(()=>{class e extends n.RestTable{constructor(e,t){super(),this.notifier=e,this.blocklistService=t,this.blockedAccounts=[],this.totalRecords=0,this.sort={field:"createdAt",order:-1},this.pagination={count:this.rowsPerPage,start:0}}ngOnInit(){this.initialize()}switchToDefaultAvatar(e){e.target.src=i.Actor.GET_DEFAULT_AVATAR_URL()}unblockAccount(e){const t=e.blockedAccount;(this.mode===c.a.Account?this.blocklistService.unblockAccountByUser(t):this.blocklistService.unblockAccountByInstance(t)).subscribe(()=>{this.notifier.success(this.mode===c.a.Account?"\u0410\u043A\u043A\u0430\u0443\u043D\u0442 \n          " + t.nameWithHost + " \u0431\u044B\u043B \u0440\u0430\u0437\u0433\u043B\u0443\u0448\u0435\u043D.\n        ":"\u0410\u043A\u043A\u0430\u0443\u043D\u0442 \n          " + t.nameWithHost + " \u0431\u044B\u043B \u0440\u0430\u0437\u0433\u043B\u0443\u0448\u0451\u043D \u043D\u0430 \u0432\u0430\u0448\u0435\u043C \u0441\u0435\u0440\u0432\u0435\u0440\u0435.\n        "),this.loadData()})}loadData(){return(this.mode===c.a.Account?this.blocklistService.getUserAccountBlocklist({pagination:this.pagination,sort:this.sort,search:this.search}):this.blocklistService.getInstanceAccountBlocklist({pagination:this.pagination,sort:this.sort,search:this.search})).subscribe(e=>{this.blockedAccounts=e.data,this.totalRecords=e.total},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(n.Notifier),a.Qb(c.b))},e.\u0275dir=a.Lb({type:e,features:[a.Ab]}),e})();r("E/r9");var l=r("QLwe");const u=["batchDomainsModal"];let d=(()=>{class e extends n.RestTable{constructor(e,t){super(),this.notifier=e,this.blocklistService=t,this.blockedServers=[],this.totalRecords=0,this.sort={field:"createdAt",order:-1},this.pagination={count:this.rowsPerPage,start:0}}ngOnInit(){this.initialize()}unblockServer(e){const t=e.blockedServer.host;(e=>this.mode===c.a.Account?this.blocklistService.unblockServerByUser(e):this.blocklistService.unblockServerByInstance(e))(t).subscribe(()=>{this.notifier.success(this.mode===c.a.Account?"\u0421\u0435\u0440\u0432\u0435\u0440 \n          " + t + " \u0431\u044B\u043B \u0440\u0430\u0437\u0433\u043B\u0443\u0448\u0435\u043D.\n        ":"\u0421\u0435\u0440\u0432\u0435\u0440 \n          " + t + " \u0431\u044B\u043B \u0440\u0430\u0437\u0433\u043B\u0443\u0448\u0451\u043D \u043D\u0430 \u0432\u0430\u0448\u0435\u043C \u0441\u0435\u0440\u0432\u0435\u0440\u0435.\n        "),this.loadData()})}addServersToBlock(){this.batchDomainsModal.openModal()}onDomainsToBlock(e){const t=e=>this.mode===c.a.Account?this.blocklistService.blockServerByUser(e):this.blocklistService.blockServerByInstance(e);e.forEach(e=>{t(e).subscribe(()=>{this.notifier.success(this.mode===c.a.Account?"Instance \n          " + e + " muted.\n        ":"Instance \n          " + e + " muted by your instance.\n        "),this.loadData()})})}loadData(){return(this.mode===c.a.Account?this.blocklistService.getUserServerBlocklist({pagination:this.pagination,sort:this.sort,search:this.search}):this.blocklistService.getInstanceServerBlocklist({pagination:this.pagination,sort:this.sort,search:this.search})).subscribe(e=>{this.blockedServers=e.data,this.totalRecords=e.total},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Qb(n.Notifier),a.Qb(c.b))},e.\u0275dir=a.Lb({type:e,viewQuery:function(e,t){var r;1&e&&a.Zc(u,!0),2&e&&a.Hc(r=a.lc())&&(t.batchDomainsModal=r.first)},features:[a.Ab]}),e})();r("Imgh"),r("2L7+"),r("XZU/");var b=r("d8Kw"),h=r("N/VM"),f=r("P8w3"),m=r("Nmku"),p=r("ix8N");let v=(()=>{class e{}return e.\u0275mod=a.Ob({type:e}),e.\u0275inj=a.Nb({factory:function(t){return new(t||e)},providers:[c.b,l.a,o.a,b.a],imports:[[m.a,h.a,f.a,p.a]]}),e})()},Imgh:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var o=r("mrSG"),n=r("fXoL"),i=r("ey9i"),c=r("sWvm"),a=r("nnN+"),s=r("1kSV"),l=r("UkmY"),u=r("3Pt+"),d=r("ofXK");const b=["modal"];function h(e,t){if(1&e&&(n.Wb(0,"div",17),n.Vc(1),n.Vb()),2&e){const e=n.oc(2);n.Db(1),n.Xc(" ",e.formErrors.reason," ")}}const f=function(e){return{"input-error":e}};function m(e,t){if(1&e){const e=n.Xb();n.Wb(0,"div",1),n.Wb(1,"h4",2),n.ac(2,3),n.Vb(),n.Wb(3,"my-global-icon",4),n.kc("click",(function(){return n.Kc(e),n.oc().hide()})),n.Vb(),n.Vb(),n.Wb(4,"div",5),n.Wb(5,"form",6),n.kc("ngSubmit",(function(){return n.Kc(e),n.oc().banUser()})),n.Wb(6,"div",7),n.Wb(7,"textarea",8),n.cc(8,9),n.Vb(),n.Tc(9,h,2,1,"div",10),n.Vb(),n.Wb(10,"div"),n.ac(11,11),n.Vb(),n.Wb(12,"div",12),n.Wb(13,"input",13),n.cc(14,14),n.kc("click",(function(){return n.Kc(e),n.oc().hide()}))("key.enter",(function(){return n.Kc(e),n.oc().hide()})),n.Vb(),n.Wb(15,"input",15),n.cc(16,16),n.Vb(),n.Vb(),n.Vb(),n.Vb()}if(2&e){const e=n.oc();n.Db(5),n.vc("formGroup",e.form),n.Db(2),n.vc("ngClass",n.zc(4,f,e.formErrors.reason)),n.Db(2),n.vc("ngIf",e.formErrors.reason),n.Db(6),n.vc("disabled",!e.form.valid)}}let p=(()=>{class e extends c.a{constructor(e,t,r,o){super(),this.formValidatorService=e,this.modalService=t,this.notifier=r,this.userService=o,this.userBanned=new n.n}ngOnInit(){this.buildForm({reason:a.a})}openModal(e){this.usersToBan=e,this.openedModal=this.modalService.open(this.modal,{centered:!0})}hide(){this.usersToBan=void 0,this.openedModal.close()}banUser(){return Object(o.a)(this,void 0,void 0,(function*(){this.userService.banUsers(this.usersToBan,this.form.value.reason||void 0).subscribe(()=>{const e=Array.isArray(this.usersToBan)?"\n          " + this.usersToBan.length + " users banned.\n        ":"User \n          " + this.usersToBan.username + " banned.\n        ";this.notifier.success(e),this.userBanned.emit(this.usersToBan),this.hide()},e=>this.notifier.error(e.message))}))}}return e.\u0275fac=function(t){return new(t||e)(n.Qb(c.b),n.Qb(s.k),n.Qb(i.Notifier),n.Qb(i.UserService))},e.\u0275cmp=n.Kb({type:e,selectors:[["my-user-ban-modal"]],viewQuery:function(e,t){var r;1&e&&n.Qc(b,!0),2&e&&n.Hc(r=n.lc())&&(t.modal=r.first)},outputs:{userBanned:"userBanned"},features:[n.Ab],decls:2,vars:0,consts:function(){return[["modal",""],[1,"modal-header"],[1,"modal-title"],"Ban",["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group"],["formControlName","reason",1,"form-control",3,"ngClass",6,"placeholder"],["placeholder","\u041F\u0440\u0438\u0447\u0438\u043D\u0430..."],["class","form-error",4,"ngIf"],"\n        \u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0439 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0431\u043E\u043B\u044C\u0448\u0435 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u0442\u044C\u0441\u044F.\n      ",[1,"form-group","inputs"],["type","button","role","button",1,"action-button","action-button-cancel",3,"click","key.enter",6,"value"],["value","Cancel"],["type","submit",1,"action-button-submit",3,"disabled",6,"value"],["value","\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u044D\u0442\u043E\u0433\u043E \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"],[1,"form-error"]]},template:function(e,t){1&e&&n.Tc(0,m,17,6,"ng-template",null,0,n.Uc)},directives:[l.a,u.I,u.t,u.l,u.c,u.s,u.j,d.r,d.u],styles:["textarea[_ngcontent-%COMP%]{display:inline-block;height:30px;width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;color:var(--textareaForegroundColor);background-color:var(--textareaBackgroundColor);height:60px;padding:5px 15px;font-size:15px}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}textarea[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width:100%){textarea[_ngcontent-%COMP%]{width:100%}}"]}),e})()},L3Qv:function(e,t,r){"use strict";t.a=function(){return!1}},QLwe:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var o=r("JIr8"),n=r("ey9i"),i=r("AytR"),c=r("fXoL"),a=r("tk/3");let s=(()=>{class e{constructor(e,t){this.authHttp=e,this.restExtractor=t}removeCommentsOf(t){return this.authHttp.post(e.BASE_BULK_URL+"/remove-comments-of",t).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}}return e.BASE_BULK_URL=i.a.apiUrl+"/api/v1/bulk",e.\u0275fac=function(t){return new(t||e)(c.hc(a.b),c.hc(n.RestExtractor))},e.\u0275prov=c.Mb({token:e,factory:e.\u0275fac}),e})()},TFwu:function(e,t,r){"use strict";var o=r("25cm"),n=r("jN84"),i=r("mkut");t.a=function(e){return Object(o.a)(e,i.a,n.a)}},TSHB:function(e,t,r){"use strict";var o=r("uE2L"),n=r("mkut"),i=r("fywt");t.a=function(e,t){var r={};return t=Object(i.a)(t,3),function(e,t){e&&function(e,t,r){for(var o=-1,n=Object(e),i=r(e),c=i.length;c--;){var a=i[++o];if(!1===t(n[a],a,n))break}}(e,t,n.a)}(e,(function(e,n,i){Object(o.a)(r,n,t(e,n,i))})),r}},TnHx:function(e,t,r){"use strict";var o=r("25cm"),n=r("n561"),i=r("4/q3");t.a=function(e){return Object(o.a)(e,i.a,n.a)}},U6JX:function(e,t,r){"use strict";t.a=function(e,t){return function(r){return e(t(r))}}},UudT:function(e,t,r){"use strict";var o=r("U6JX"),n=Object(o.a)(Object.getPrototypeOf,Object);t.a=n},WJ6P:function(e,t,r){"use strict";t.a=function(){return[]}},WOAq:function(e,t,r){"use strict";(function(e){var o=r("Ju5/"),n=r("L3Qv"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,c=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=c&&c.exports===i?o.a.Buffer:void 0;t.a=(a?a.isBuffer:void 0)||n.a}).call(this,r("3UD+")(e))},"XZU/":function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var o=r("fXoL"),n=r("ey9i"),i=r("sWvm"),c=(r("xMQD"),r("3Pt+"));const a={VALIDATORS:[c.G.minLength(2),c.G.maxLength(300)],MESSAGES:{minlength:"Block reason must be at least 2 characters long.",maxlength:"Block reason cannot be more than 300 characters long."}};var s=r("d8Kw"),l=r("1kSV"),u=r("UkmY"),d=r("ofXK"),b=r("/xt7");const h=["modal"];function f(e,t){if(1&e&&(o.Wb(0,"div",17),o.Vc(1),o.Vb()),2&e){const e=o.oc(2);o.Db(1),o.Xc(" ",e.formErrors.reason," ")}}function m(e,t){1&e&&(o.Wb(0,"div",7),o.Wb(1,"my-peertube-checkbox",18),o.cc(2,19),o.Ub(3,20),o.Wb(4,"span"),o.ac(5,21),o.Vb(),o.Tb(),o.Vb(),o.Vb())}const p=function(e){return{"input-error":e}};function v(e,t){if(1&e){const e=o.Xb();o.Wb(0,"div",1),o.Wb(1,"h4",2),o.ac(2,3),o.Vb(),o.Wb(3,"my-global-icon",4),o.kc("click",(function(){return o.Kc(e),o.oc().hide()})),o.Vb(),o.Vb(),o.Wb(4,"div",5),o.Wb(5,"form",6),o.kc("ngSubmit",(function(){return o.Kc(e),o.oc().block()})),o.Wb(6,"div",7),o.Wb(7,"textarea",8),o.cc(8,9),o.Vb(),o.Tc(9,f,2,1,"div",10),o.Vb(),o.Tc(10,m,6,0,"div",11),o.Wb(11,"div",12),o.Wb(12,"input",13),o.cc(13,14),o.kc("click",(function(){return o.Kc(e),o.oc().hide()}))("key.enter",(function(){return o.Kc(e),o.oc().hide()})),o.Vb(),o.Wb(14,"input",15),o.cc(15,16),o.Vb(),o.Vb(),o.Vb(),o.Vb()}if(2&e){const e=o.oc();o.Db(2),o.ec(e.video.name),o.bc(2),o.Db(3),o.vc("formGroup",e.form),o.Db(2),o.vc("ngClass",o.zc(6,p,e.formErrors.reason)),o.Db(2),o.vc("ngIf",e.formErrors.reason),o.Db(1),o.vc("ngIf",e.video.isLocal),o.Db(4),o.vc("disabled",!e.form.valid)}}let g=(()=>{class e extends i.a{constructor(e,t,r,n){super(),this.formValidatorService=e,this.modalService=t,this.videoBlocklistService=r,this.notifier=n,this.video=null,this.videoBlocked=new o.n,this.error=null}ngOnInit(){this.buildForm({reason:a,unfederate:null},{unfederate:"true"})}show(){this.openedModal=this.modalService.open(this.modal,{centered:!0,keyboard:!1})}hide(){this.openedModal.close(),this.openedModal=null}block(){const e=this.form.value.reason||void 0;this.videoBlocklistService.blockVideo(this.video.id,e,this.video.isLocal?this.form.value.unfederate:void 0).subscribe(()=>{this.notifier.success("Video blocked."),this.hide(),this.video.blacklisted=!0,this.video.blockedReason=e,this.videoBlocked.emit()},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(o.Qb(i.b),o.Qb(l.k),o.Qb(s.a),o.Qb(n.Notifier))},e.\u0275cmp=o.Kb({type:e,selectors:[["my-video-block"]],viewQuery:function(e,t){var r;1&e&&o.Qc(h,!0),2&e&&o.Hc(r=o.lc())&&(t.modal=r.first)},inputs:{video:"video"},outputs:{videoBlocked:"videoBlocked"},features:[o.Ab],decls:2,vars:0,consts:function(){return[["modal",""],[1,"modal-header"],[1,"modal-title"],"Block video \"\n          " + "\ufffd0\ufffd" + "\"\n        ",["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group"],["formControlName","reason",1,"form-control",3,"ngClass",6,"placeholder"],["placeholder","Please describe the reason..."],["class","form-error",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button",1,"action-button","action-button-cancel",3,"click","key.enter",6,"value"],["value","Cancel"],["type","submit",1,"action-button-submit",3,"disabled",6,"value"],["value","\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C"],[1,"form-error"],["inputName","unfederate","formControlName","unfederate",6,"labelText"],["labelText","Unfederate the video"],["ngProjectAs","description",5,["description"]],"This will ask remote instances to delete it"]},template:function(e,t){1&e&&o.Tc(0,v,16,8,"ng-template",null,0,o.Uc)},directives:[u.a,c.I,c.t,c.l,c.c,c.s,c.j,d.r,d.u,b.a],styles:["textarea[_ngcontent-%COMP%]{display:inline-block;height:30px;width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;color:var(--textareaForegroundColor);background-color:var(--textareaBackgroundColor);height:100px;padding:5px 15px;font-size:15px}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}textarea[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width:100%){textarea[_ngcontent-%COMP%]{width:100%}}"]}),e})()},YM6B:function(e,t,r){"use strict";var o=r("Y7yP"),n=r("Ju5/"),i=Object(o.a)(n.a,"DataView"),c=r("3cmB"),a=Object(o.a)(n.a,"Promise"),s=r("pVw1"),l=Object(o.a)(n.a,"WeakMap"),u=r("8M4i"),d=r("dLWn"),b=Object(d.a)(i),h=Object(d.a)(c.a),f=Object(d.a)(a),m=Object(d.a)(s.a),p=Object(d.a)(l),v=u.a;(i&&"[object DataView]"!=v(new i(new ArrayBuffer(1)))||c.a&&"[object Map]"!=v(new c.a)||a&&"[object Promise]"!=v(a.resolve())||s.a&&"[object Set]"!=v(new s.a)||l&&"[object WeakMap]"!=v(new l))&&(v=function(e){var t=Object(u.a)(e),r="[object Object]"==t?e.constructor:void 0,o=r?Object(d.a)(r):"";if(o)switch(o){case b:return"[object DataView]";case h:return"[object Map]";case f:return"[object Promise]";case m:return"[object Set]";case p:return"[object WeakMap]"}return t}),t.a=v},ZWiB:function(e,t,r){"use strict";t.a=function(e,t){return e.has(t)}},d8Kw:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var o=r("Cfvw"),n=r("lJxs"),i=r("JIr8"),c=r("bOdf"),a=r("IAdc"),s=r("tk/3"),l=r("ey9i"),u=r("AytR"),d=r("fXoL");let b=(()=>{class e{constructor(e,t,r){this.authHttp=e,this.restService=t,this.restExtractor=r}listBlocks(t){const{pagination:r,sort:o,search:c,type:a}=t;let l=new s.f;if(l=this.restService.addRestGetParams(l,r,o),c){const e=this.restService.parseQueryStringFilter(c,{type:{prefix:"type:",handler:e=>"manual"===e?1:"auto"===e?2:void 0}});l=this.restService.addObjectParams(l,e)}return a&&(l=l.append("type",a.toString())),this.authHttp.get(e.BASE_VIDEOS_URL+"blacklist",{params:l}).pipe(Object(n.a)(e=>this.restExtractor.convertResultListDateToHuman(e)),Object(i.a)(e=>this.restExtractor.handleError(e)))}unblockVideo(t){const r=Array.isArray(t)?t:[t];return Object(o.a)(r).pipe(Object(c.a)(t=>this.authHttp.delete(e.BASE_VIDEOS_URL+t+"/blacklist")),Object(a.a)(),Object(i.a)(e=>this.restExtractor.handleError(e)))}blockVideo(t,r,o){return this.authHttp.post(e.BASE_VIDEOS_URL+t+"/blacklist",{unfederate:o,reason:r}).pipe(Object(n.a)(this.restExtractor.extractDataBool),Object(i.a)(e=>this.restExtractor.handleError(e)))}}return e.BASE_VIDEOS_URL=u.a.apiUrl+"/api/v1/videos/",e.\u0275fac=function(t){return new(t||e)(d.hc(s.b),d.hc(l.RestService),d.hc(l.RestExtractor))},e.\u0275prov=d.Mb({token:e,factory:e.\u0275fac}),e})()},fywt:function(e,t,r){"use strict";var o=r("oSzE"),n=r("msdH"),i=function(e,t){for(var r=-1,o=null==e?0:e.length;++r<o;)if(t(e[r],r,e))return!0;return!1},c=r("ZWiB"),a=function(e,t,r,o,a,s){var l=1&r,u=e.length,d=t.length;if(u!=d&&!(l&&d>u))return!1;var b=s.get(e);if(b&&s.get(t))return b==t;var h=-1,f=!0,m=2&r?new n.a:void 0;for(s.set(e,t),s.set(t,e);++h<u;){var p=e[h],v=t[h];if(o)var g=l?o(v,p,h,t,e,s):o(p,v,h,e,t,s);if(void 0!==g){if(g)continue;f=!1;break}if(m){if(!i(t,(function(e,t){if(!Object(c.a)(m,t)&&(p===e||a(p,e,r,o,s)))return m.push(t)}))){f=!1;break}}else if(p!==v&&!a(p,v,r,o,s)){f=!1;break}}return s.delete(e),s.delete(t),f},s=r("ylTp"),l=r("Ce4a"),u=r("YHEm"),d=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,o){r[++t]=[o,e]})),r},b=r("GYlH"),h=s.a?s.a.prototype:void 0,f=h?h.valueOf:void 0,m=r("TFwu"),p=Object.prototype.hasOwnProperty,v=r("YM6B"),g=r("/1FC"),y=r("WOAq"),O=r("oYcn"),S="[object Object]",A=Object.prototype.hasOwnProperty,j=r("EUcb"),x=function e(t,r,n,i,c){return t===r||(null==t||null==r||!Object(j.a)(t)&&!Object(j.a)(r)?t!=t&&r!=r:function(e,t,r,n,i,c){var s=Object(g.a)(e),h=Object(g.a)(t),j=s?"[object Array]":Object(v.a)(e),x=h?"[object Array]":Object(v.a)(t),E=(j="[object Arguments]"==j?S:j)==S,k=(x="[object Arguments]"==x?S:x)==S,_=j==x;if(_&&Object(y.a)(e)){if(!Object(y.a)(t))return!1;s=!0,E=!1}if(_&&!E)return c||(c=new o.a),s||Object(O.a)(e)?a(e,t,r,n,i,c):function(e,t,r,o,n,i,c){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new l.a(e),new l.a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Object(u.a)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=d;case"[object Set]":if(s||(s=b.a),e.size!=t.size&&!(1&o))return!1;var h=c.get(e);if(h)return h==t;o|=2,c.set(e,t);var m=a(s(e),s(t),o,n,i,c);return c.delete(e),m;case"[object Symbol]":if(f)return f.call(e)==f.call(t)}return!1}(e,t,j,r,n,i,c);if(!(1&r)){var R=E&&A.call(e,"__wrapped__"),C=k&&A.call(t,"__wrapped__");if(R||C){var B=R?e.value():e,w=C?t.value():t;return c||(c=new o.a),i(B,w,r,n,c)}}return!!_&&(c||(c=new o.a),function(e,t,r,o,n,i){var c=1&r,a=Object(m.a)(e),s=a.length;if(s!=Object(m.a)(t).length&&!c)return!1;for(var l=s;l--;){var u=a[l];if(!(c?u in t:p.call(t,u)))return!1}var d=i.get(e);if(d&&i.get(t))return d==t;var b=!0;i.set(e,t),i.set(t,e);for(var h=c;++l<s;){var f=e[u=a[l]],v=t[u];if(o)var g=c?o(v,f,u,t,e,i):o(f,v,u,e,t,i);if(!(void 0===g?f===v||n(f,v,r,o,i):g)){b=!1;break}h||(h="constructor"==u)}if(b&&!h){var y=e.constructor,O=t.constructor;y==O||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof O&&O instanceof O||(b=!1)}return i.delete(e),i.delete(t),b}(e,t,r,n,i,c))}(t,r,n,i,e,c))},E=r("IzLi"),k=function(e){return e==e&&!Object(E.a)(e)},_=r("mkut"),R=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}},C=r("UTJH"),B=r("K160"),w=r("vY+C"),z=r("Tchk"),T=r("+Xah"),I=r("FSIP");t.a=function(e){return"function"==typeof e?e:null==e?T.a:"object"==typeof e?Object(g.a)(e)?(n=e[0],i=e[1],Object(w.a)(n)&&k(i)?R(Object(z.a)(n),i):function(e){var t=function(e,t,r){var o=null==e?void 0:Object(C.a)(e,t);return void 0===o?void 0:o}(e,n);return void 0===t&&t===i?Object(B.a)(e,n):x(i,t,3)}):1==(r=function(e){for(var t=Object(_.a)(e),r=t.length;r--;){var o=t[r],n=e[o];t[r]=[o,n,k(n)]}return t}(t=e)).length&&r[0][2]?R(r[0][0],r[0][1]):function(e){return e===t||function(e,t,r,n){var i=r.length,c=i;if(null==e)return!c;for(e=Object(e);i--;){var a=r[i];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<c;){var s=(a=r[i])[0],l=e[s],u=a[1];if(a[2]){if(void 0===l&&!(s in e))return!1}else{var d,b=new o.a;if(!(void 0===d?x(u,l,3,void 0,b):d))return!1}}return!0}(e,0,r)}:function(e){return Object(w.a)(e)?Object(I.a)(Object(z.a)(e)):function(e){return function(t){return Object(C.a)(t,e)}}(e)}(e);var t,r,n,i}},ix8N:function(e,t,r){"use strict";r.d(t,"c",(function(){return o.a})),r.d(t,"b",(function(){return n.a})),r.d(t,"a",(function(){return a}));var o=r("GeT4"),n=r("8i4Y"),i=r("Nmku"),c=r("fXoL");let a=(()=>{class e{}return e.\u0275mod=c.Ob({type:e}),e.\u0275inj=c.Nb({factory:function(t){return new(t||e)},providers:[o.a],imports:[[i.a]]}),e})()},jN84:function(e,t,r){"use strict";var o=r("WJ6P"),n=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols;t.a=i?function(e){return null==e?[]:(e=Object(e),function(t,r){for(var o=-1,i=null==t?0:t.length,c=0,a=[];++o<i;){var s=t[o];n.call(e,s)&&(a[c++]=s)}return a}(i(e)))}:o.a},m8R6:function(e,t,r){"use strict";var o=r("twO/"),n=r("oSzE"),i=r("23KU"),c=r("uE2L"),a=function(e,t,r,o){var n=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var l=t[a],u=o?o(r[l],e[l],l,r,e):void 0;void 0===u&&(u=e[l]),n?Object(c.a)(r,l,u):Object(i.a)(r,l,u)}return r},s=r("mkut"),l=r("4/q3"),u=r("3/ER"),d=r("jN84"),b=r("n561"),h=r("TFwu"),f=r("TnHx"),m=r("YM6B"),p=Object.prototype.hasOwnProperty,v=r("Ce4a"),g=function(e){var t=new e.constructor(e.byteLength);return new v.a(t).set(new v.a(e)),t},y=/\w*$/,O=r("ylTp"),S=O.a?O.a.prototype:void 0,A=S?S.valueOf:void 0,j=r("IzLi"),x=Object.create,E=function(){function e(){}return function(t){if(!Object(j.a)(t))return{};if(x)return x(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),k=r("UudT"),_=r("pyRK"),R=r("/1FC"),C=r("WOAq"),B=r("EUcb"),w=r("ovuK"),z=r("xutz"),T=z.a&&z.a.isMap,I=T?Object(w.a)(T):function(e){return Object(B.a)(e)&&"[object Map]"==Object(m.a)(e)},V=z.a&&z.a.isSet,$=V?Object(w.a)(V):function(e){return Object(B.a)(e)&&"[object Set]"==Object(m.a)(e)},L={};L["[object Arguments]"]=L["[object Array]"]=L["[object ArrayBuffer]"]=L["[object DataView]"]=L["[object Boolean]"]=L["[object Date]"]=L["[object Float32Array]"]=L["[object Float64Array]"]=L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Map]"]=L["[object Number]"]=L["[object Object]"]=L["[object RegExp]"]=L["[object Set]"]=L["[object String]"]=L["[object Symbol]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0,L["[object Error]"]=L["[object Function]"]=L["[object WeakMap]"]=!1;var U=function e(t,r,o,c,v,O){var S,x=1&r,B=2&r,w=4&r;if(o&&(S=v?o(t,c,v,O):o(t)),void 0!==S)return S;if(!Object(j.a)(t))return t;var z=Object(R.a)(t);if(z){if(S=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&p.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(t),!x)return function(e,t){var r=-1,o=e.length;for(t||(t=Array(o));++r<o;)t[r]=e[r];return t}(t,S)}else{var T=Object(m.a)(t),V="[object Function]"==T||"[object GeneratorFunction]"==T;if(Object(C.a)(t))return Object(u.a)(t,x);if("[object Object]"==T||"[object Arguments]"==T||V&&!v){if(S=B||V?{}:function(e){return"function"!=typeof e.constructor||Object(_.a)(e)?{}:E(Object(k.a)(e))}(t),!x)return B?function(e,t){return a(e,Object(b.a)(e),t)}(t,function(e,t){return e&&a(t,Object(l.a)(t),e)}(S,t)):function(e,t){return a(e,Object(d.a)(e),t)}(t,function(e,t){return e&&a(t,Object(s.a)(t),e)}(S,t))}else{if(!L[T])return v?t:{};S=function(e,t,r){var o,n,i=e.constructor;switch(t){case"[object ArrayBuffer]":return g(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function(e,t){var r=t?g(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var r=t?g(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return(n=new(o=e).constructor(o.source,y.exec(o))).lastIndex=o.lastIndex,n;case"[object Set]":return new i;case"[object Symbol]":return A?Object(A.call(e)):{}}}(t,T,x)}}O||(O=new n.a);var U=O.get(t);if(U)return U;O.set(t,S),$(t)?t.forEach((function(n){S.add(e(n,r,o,n,t,O))})):I(t)&&t.forEach((function(n,i){S.set(i,e(n,r,o,i,t,O))}));var D=w?B?f.a:h.a:B?keysIn:s.a,M=z?void 0:D(t);return function(e,t){for(var r=-1,o=null==e?0:e.length;++r<o&&!1!==t(e[r],r););}(M||t,(function(n,c){M&&(n=t[c=n]),Object(i.a)(S,c,e(n,r,o,c,t,O))})),S},D=r("IlA0"),M=r("UTJH"),P=r("5iG2"),W=r("Tchk"),G=function(e,t){return null==(e=function(e,t){return t.length<2?e:Object(M.a)(e,Object(P.a)(t,0,-1))}(e,t=Object(D.a)(t,e)))||delete e[Object(W.a)((r=t,o=null==r?0:r.length,o?r[o-1]:void 0))];var r,o},H=r("8M4i"),N=Function.prototype.toString,K=Object.prototype.hasOwnProperty,Q=N.call(Object),F=function(e){return function(e){if(!Object(B.a)(e)||"[object Object]"!=Object(H.a)(e))return!1;var t=Object(k.a)(e);if(null===t)return!0;var r=K.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&N.call(r)==Q}(e)?void 0:e},q=r("Tjpy"),X=Object(q.a)((function(e,t){var r={};if(null==e)return r;var n=!1;t=Object(o.a)(t,(function(t){return t=Object(D.a)(t,e),n||(n=t.length>1),t})),a(e,Object(f.a)(e),r),n&&(r=U(r,7,F));for(var i=t.length;i--;)G(r,t[i]);return r}));t.a=X},mkut:function(e,t,r){"use strict";var o=r("7gMY"),n=r("pyRK"),i=r("U6JX"),c=Object(i.a)(Object.keys,Object),a=Object.prototype.hasOwnProperty,s=r("5WsY");t.a=function(e){return Object(s.a)(e)?Object(o.a)(e):function(e){if(!Object(n.a)(e))return c(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}},msdH:function(e,t,r){"use strict";var o=r("DlmY");function n(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new o.a;++t<r;)this.add(e[t])}n.prototype.add=n.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},n.prototype.has=function(e){return this.__data__.has(e)},t.a=n},n561:function(e,t,r){"use strict";var o=r("tPH9"),n=r("UudT"),i=r("jN84"),c=r("WJ6P");t.a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Object(o.a)(t,Object(i.a)(e)),e=Object(n.a)(e);return t}:c.a},"nnN+":function(e,t,r){"use strict";r.d(t,"k",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"f",(function(){return c})),r.d(t,"h",(function(){return a})),r.d(t,"g",(function(){return s})),r.d(t,"c",(function(){return l})),r.d(t,"m",(function(){return u})),r.d(t,"l",(function(){return d})),r.d(t,"i",(function(){return b})),r.d(t,"e",(function(){return h})),r.d(t,"d",(function(){return f})),r.d(t,"j",(function(){return m})),r.d(t,"a",(function(){return p}));var o=r("3Pt+");const n={VALIDATORS:[o.G.required,o.G.minLength(1),o.G.maxLength(50),o.G.pattern(/^[a-z0-9][a-z0-9._]*$/)],MESSAGES:{required:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F \u0438\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F.",minlength:"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u0434\u043E\u043B\u0436\u043D\u043E \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 1 \u0441\u0438\u043C\u0432\u043E\u043B\u0430.",maxlength:"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 50 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432.",pattern:"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u0441\u0442\u0440\u043E\u0447\u043D\u044B\u043C \u0431\u0443\u043A\u0432\u0435\u043D\u043D\u043E\u0446\u0438\u0444\u0440\u043E\u0432\u044B\u043C; \u0442\u043E\u0447\u043A\u0438 \u0438 \u0437\u043D\u0430\u043A\u0438 \u043F\u043E\u0434\u0447\u0451\u0440\u043A\u0438\u0432\u0430\u043D\u0438\u044F \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u044B."}},i={VALIDATORS:[o.G.required,o.G.minLength(1),o.G.maxLength(50),o.G.pattern(/^[a-z0-9][a-z0-9._]*$/)],MESSAGES:{required:"Channel name is required.",minlength:"Channel name must be at least 1 character long.",maxlength:"Channel name cannot be more than 50 characters long.",pattern:"Channel name should be lowercase alphanumeric; dots and underscores are allowed."}},c={VALIDATORS:[o.G.required,o.G.email],MESSAGES:{required:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F \u044D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u0430\u044F \u043F\u043E\u0447\u0442\u0430.",email:"\u042D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u0430\u044F \u043F\u043E\u0447\u0442\u0430 \u0434\u043E\u043B\u0436\u043D\u0430 \u0431\u044B\u0442\u044C \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0439."}},a={VALIDATORS:[o.G.required,o.G.minLength(6),o.G.maxLength(255)],MESSAGES:{required:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F \u043F\u0430\u0440\u043E\u043B\u044C.",minlength:"\u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432.",maxlength:"\u041F\u0430\u0440\u043E\u043B\u044C \u043D\u0435 \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 255 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432."}},s={VALIDATORS:[o.G.minLength(6),o.G.maxLength(255)],MESSAGES:{minlength:"\u041F\u0430\u0440\u043E\u043B\u044C \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432.",maxlength:"\u041F\u0430\u0440\u043E\u043B\u044C \u043D\u0435 \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 255 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432."}},l={VALIDATORS:[],MESSAGES:{matchPassword:"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C \u0438 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u043F\u0430\u0440\u043E\u043B\u044F \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442."}},u={VALIDATORS:[o.G.required,o.G.min(-1)],MESSAGES:{required:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F \u043A\u0432\u043E\u0442\u0430 \u0432\u0438\u0434\u0435\u043E.",min:"\u041A\u0432\u043E\u0442\u0430 \u0434\u043E\u043B\u0436\u043D\u0430 \u0431\u044B\u0442\u044C \u0431\u043E\u043B\u0435\u0435 -1."}},d={VALIDATORS:[o.G.required,o.G.min(-1)],MESSAGES:{required:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F \u0434\u043D\u0435\u0432\u043D\u043E\u0439 \u043B\u0438\u043C\u0438\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043E\u043A.",min:"\u0414\u043D\u0435\u0432\u043D\u043E\u0439 \u043B\u0438\u043C\u0438\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043E\u043A \u0434\u043E\u043B\u0436\u0435\u043D \u0431\u044B\u0442\u044C \u0431\u043E\u043B\u0435\u0435 -1."}},b={VALIDATORS:[o.G.required],MESSAGES:{required:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F \u0440\u043E\u043B\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F."}},h=function(e){const t={VALIDATORS:[o.G.minLength(1),o.G.maxLength(120)],MESSAGES:{required:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0435\u043C\u043E\u0435 \u0438\u043C\u044F.",minlength:"\u041E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0435\u043C\u043E\u0435 \u0438\u043C\u044F \u0434\u043E\u043B\u0436\u043D\u043E \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 1 \u0441\u0438\u043C\u0432\u043E\u043B\u0430.",maxlength:"\u041E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0435\u043C\u043E\u0435 \u0438\u043C\u044F \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 50 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432."}};return t.VALIDATORS.push(o.G.required),t}(),f={VALIDATORS:[o.G.minLength(3),o.G.maxLength(1e3)],MESSAGES:{minlength:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 3 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432.",maxlength:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 1000 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432."}},m={VALIDATORS:[o.G.requiredTrue],MESSAGES:{required:"\u0412\u044B \u0434\u043E\u043B\u0436\u043D\u044B \u0441\u043E\u0433\u043B\u0430\u0441\u0438\u0442\u044C\u0441\u044F \u0441 \u0443\u0441\u043B\u043E\u0432\u0438\u044F\u043C\u0438 \u044D\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440\u0430, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 \u043D\u0435\u043C."}},p={VALIDATORS:[o.G.minLength(3),o.G.maxLength(250)],MESSAGES:{minlength:"\u041F\u0440\u0438\u0447\u0438\u043D\u0430 \u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0438 \u0434\u043E\u043B\u0436\u043D\u043E \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 3 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432.",maxlength:"\u041F\u0440\u0438\u0447\u0438\u043D\u0430 \u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0438 \u043D\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 250 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432."}}},oSzE:function(e,t,r){"use strict";var o=r("nLtN"),n=r("3cmB"),i=r("DlmY");function c(e){var t=this.__data__=new o.a(e);this.size=t.size}c.prototype.clear=function(){this.__data__=new o.a,this.size=0},c.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},c.prototype.get=function(e){return this.__data__.get(e)},c.prototype.has=function(e){return this.__data__.has(e)},c.prototype.set=function(e,t){var r=this.__data__;if(r instanceof o.a){var c=r.__data__;if(!n.a||c.length<199)return c.push([e,t]),this.size=++r.size,this;r=this.__data__=new i.a(c)}return r.set(e,t),this.size=r.size,this},t.a=c},oYcn:function(e,t,r){"use strict";var o=r("8M4i"),n=r("Js68"),i=r("EUcb"),c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c["[object Arguments]"]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c["[object Map]"]=c["[object Number]"]=c["[object Object]"]=c["[object RegExp]"]=c["[object Set]"]=c["[object String]"]=c["[object WeakMap]"]=!1;var a=r("ovuK"),s=r("xutz"),l=s.a&&s.a.isTypedArray,u=l?Object(a.a)(l):function(e){return Object(i.a)(e)&&Object(n.a)(e.length)&&!!c[Object(o.a)(e)]};t.a=u},pVw1:function(e,t,r){"use strict";var o=r("Y7yP"),n=r("Ju5/"),i=Object(o.a)(n.a,"Set");t.a=i},pyRK:function(e,t,r){"use strict";var o=Object.prototype;t.a=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||o)}},re7S:function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));var o=r("TSHB"),n=r("u3oV"),i=r("ey9i"),c=r("4joM"),a=r("sWvm"),s=(r("ix8N"),r("3ZlK")),l=r("9dYW"),u=r("fXoL"),d=r("1kSV"),b=r("UkmY"),h=r("3Pt+"),f=r("ofXK"),m=r("/xt7"),p=r("BLxp");const v=["modal"];function g(e,t){if(1&e&&u.Rb(0,"div",29),2&e){const e=u.oc(2).$implicit;u.vc("innerHTML",e.help,u.Lc)}}function y(e,t){1&e&&u.Tc(0,g,1,1,"ng-template",28)}function O(e,t){if(1&e&&(u.Ub(0,30),u.Rb(1,"div",29),u.Tb()),2&e){const e=u.oc().$implicit;u.Db(1),u.vc("innerHTML",e.description,u.Lc)}}function S(e,t){if(1&e&&(u.Wb(0,"div",17),u.Wb(1,"my-peertube-checkbox",26),u.Tc(2,y,1,0,void 0,16),u.Tc(3,O,2,1,"ng-container",27),u.Vb(),u.Vb()),2&e){const e=t.$implicit;u.Db(1),u.vc("inputName",e.id)("formControlName",e.id)("labelText",e.label),u.Db(1),u.vc("ngIf",e.help),u.Db(1),u.vc("ngIf",e.description)}}function A(e,t){if(1&e&&(u.gc(0,15,1),u.Sb(1),u.dc()),2&e){const e=u.oc(2);u.Db(1),u.ec(e.originHost),u.bc(0)}}function j(e,t){if(1&e&&(u.Wb(0,"div",31),u.Vc(1),u.Vb()),2&e){const e=u.oc(2);u.Db(1),u.Xc(" ",e.formErrors.reason," ")}}const x=function(e){return{"input-error":e}};function E(e,t){if(1&e){const e=u.Xb();u.Wb(0,"div",1),u.Wb(1,"h4",2),u.Vc(2),u.Vb(),u.Wb(3,"my-global-icon",3),u.kc("click",(function(){return u.Kc(e),u.oc().hide()})),u.Vb(),u.Vb(),u.Wb(4,"div",4),u.Wb(5,"form",5),u.kc("ngSubmit",(function(){return u.Kc(e),u.oc().report()})),u.Wb(6,"div",6),u.Wb(7,"div",7),u.Wb(8,"label",8),u.ac(9,9),u.Vb(),u.Wb(10,"div",10),u.Ub(11,11),u.Tc(12,S,4,5,"div",12),u.Tb(),u.Vb(),u.Vb(),u.Wb(13,"div",13),u.Wb(14,"div",14),u.gc(15,15),u.Tc(16,A,2,1,"ng-container",16),u.dc(),u.Vb(),u.Wb(17,"div",17),u.Wb(18,"textarea",18),u.cc(19,19),u.Vb(),u.Tc(20,j,2,1,"div",20),u.Vb(),u.Vb(),u.Vb(),u.Wb(21,"div",21),u.Wb(22,"input",22),u.cc(23,23),u.kc("click",(function(){return u.Kc(e),u.oc().hide()}))("key.enter",(function(){return u.Kc(e),u.oc().hide()})),u.Vb(),u.Wb(24,"input",24),u.cc(25,25),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&e){const e=u.oc();u.Db(2),u.Wc(e.modalTitle),u.Db(3),u.vc("formGroup",e.form),u.Db(7),u.vc("ngForOf",e.predefinedReasons),u.Db(4),u.vc("ngIf",e.isRemote()),u.ec(e.currentHost),u.bc(15),u.Db(2),u.vc("ngClass",u.zc(8,x,e.formErrors.reason)),u.Db(2),u.vc("ngIf",e.formErrors.reason),u.Db(4),u.vc("disabled",!e.form.valid)}}let k=(()=>{class e extends a.a{constructor(e,t,r,o){super(),this.formValidatorService=e,this.modalService=t,this.abuseService=r,this.notifier=o,this.comment=null,this.error=null,this.predefinedReasons=[]}get currentHost(){return window.location.host}get originHost(){return this.isRemote()?this.comment.account.host:""}ngOnInit(){this.modalTitle="Report comment",this.buildForm({reason:c.c,predefinedReasons:Object(o.a)(s.a,e=>null)}),this.predefinedReasons=this.abuseService.getPrefefinedReasons("comment")}show(){this.openedModal=this.modalService.open(this.modal,{centered:!0,keyboard:!1,size:"lg"})}hide(){this.openedModal.close(),this.openedModal=null}report(){const e=this.form.get("reason").value,t=Object.keys(Object(n.a)(this.form.get("predefinedReasons").value));this.abuseService.reportVideo({reason:e,predefinedReasons:t,comment:{id:this.comment.id}}).subscribe(()=>{this.notifier.success("Comment reported."),this.hide()},e=>this.notifier.error(e.message))}isRemote(){return!this.comment.isLocal}}return e.\u0275fac=function(t){return new(t||e)(u.Qb(a.b),u.Qb(d.k),u.Qb(l.a),u.Qb(i.Notifier))},e.\u0275cmp=u.Kb({type:e,selectors:[["my-comment-report"]],viewQuery:function(e,t){var r;1&e&&u.Qc(v,!0),2&e&&u.Hc(r=u.lc())&&(t.modal=r.first)},inputs:{comment:"comment"},features:[u.Ab],decls:2,vars:0,consts:function(){var e,t,r,o;return e="What is the issue?",t="\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043E\u043F\u0438\u0448\u0438\u0442\u0435 \u044D\u0442\u0443 \u043F\u0440\u043E\u0431\u043B\u0435\u043C\u0443...",r="Cancel",o="\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C",[["modal",""],[1,"modal-header"],[1,"modal-title"],["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-5","form-group"],["for","reportPredefinedReasons"],e,[1,"ml-2","mt-2","d-flex","flex-column"],["formGroupName","predefinedReasons"],["class","form-group",4,"ngFor","ngForOf"],[1,"col-7"],[1,"information"],"\n          Your report will be sent to moderators of \n          " + "\ufffd0\ufffd" + "\n          " + "\ufffd*16:1\ufffd\ufffd#1:1\ufffd" + " and will be forwarded to the comment origin (\n          " + "\ufffd0:1\ufffd" + ") too\n          " + "\ufffd/#1:1\ufffd\ufffd/*16:1\ufffd" + ".\n        \n        ",[4,"ngIf"],[1,"form-group"],["formControlName","reason","ngbAutofocus","",1,"form-control",3,"ngClass",6,"placeholder"],["placeholder",t],["class","form-error",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button",1,"action-button","action-button-cancel",3,"click","key.enter",6,"value"],["value",r],["type","submit",1,"action-button-submit",3,"disabled",6,"value"],["value",o],[3,"inputName","formControlName","labelText"],["ngProjectAs","description",5,["description"],4,"ngIf"],["ptTemplate","help"],[3,"innerHTML"],["ngProjectAs","description",5,["description"]],[1,"form-error"]]},template:function(e,t){1&e&&u.Tc(0,E,26,10,"ng-template",null,0,u.Uc)},directives:[b.a,h.I,h.t,h.l,h.m,f.t,f.u,h.c,h.s,h.j,f.r,m.a,p.a],styles:[".information[_ngcontent-%COMP%]{margin-bottom:20px}textarea[_ngcontent-%COMP%]{display:inline-block;height:30px;width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;color:var(--textareaForegroundColor);background-color:var(--textareaBackgroundColor);height:100px;padding:5px 15px;font-size:15px}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}textarea[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width:100%){textarea[_ngcontent-%COMP%]{width:100%}}.start-at[_ngcontent-%COMP%], .stop-at[_ngcontent-%COMP%]{width:300px;display:flex;align-items:center}.start-at[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%], .stop-at[_ngcontent-%COMP%]   my-timestamp-input[_ngcontent-%COMP%]{margin-left:10px}.screenratio[_ngcontent-%COMP%]{position:relative;height:0;width:100%;padding-top:56%}.screenratio[_ngcontent-%COMP%]     iframe, .screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}"]}),e})()},u3oV:function(e,t,r){"use strict";var o=r("twO/"),n=r("fywt"),i=r("MKnB"),c=r("TnHx");t.a=function(e,t){if(null==e)return{};var r=Object(o.a)(Object(c.a)(e),(function(e){return[e]}));return t=Object(n.a)(t),Object(i.a)(e,r,(function(e,r){return t(e,r[0])}))}},xHIW:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var o=r("xMQD");class n{constructor(e){this.byAccount=new o.Account(e.byAccount),this.blockedAccount=new o.Account(e.blockedAccount),this.createdAt=e.createdAt}}}}]);