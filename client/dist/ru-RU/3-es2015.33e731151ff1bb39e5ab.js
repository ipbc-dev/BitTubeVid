(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"5rWp":function(e,t,n){"use strict";var o=n("b613");n.d(t,"b",function(){return o.a}),n("Dmbs"),n("gY50");var i=n("hHkf");n.d(t,"a",function(){return i.a})},"9RWm":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n("fXoL");let i=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["my-live-documentation-link"]],decls:3,vars:0,consts:function(){let e;return e=" See " + "\ufffd#2\ufffd" + "the documentation" + "\ufffd/#2\ufffd" + " to learn how to use the PeerTube live streaming feature.\n",[e,["href","https://docs.joinpeertube.org/#/use-create-upload-video?id=publish-a-live-in-peertube-gt-v3","target","_blank","rel","noopener noreferrer"]]},template:function(e,t){1&e&&(o.Vb(0,"div"),o.fc(1,0),o.Qb(2,"a",1),o.cc(),o.Ub())},encapsulation:2}),e})()},Dmbs:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var o=n("cp0P"),i=n("GyhO"),c=n("VRyK"),a=n("ey9i"),s=n("xMQD"),r=n("b613"),l=n("fXoL"),d=n("tyNb"),b=n("ofXK"),u=n("1kSV"),g=n("gY50"),p=n("gCBE");function h(e,t){1&e&&l.Rb(0)}function v(e,t){1&e&&l.Zb(0,23)}function f(e,t){if(1&e&&(l.Vb(0,"span"),l.Uc(1),l.Tb(2),l.Zb(3,25),l.Sb(),l.Ub()),2&e){const e=l.nc(3);l.Cb(1),l.Xc("",e.subscribeStatus(!0).length,"/",e.subscribed.size," ")}}function m(e,t){if(1&e&&(l.Vb(0,"span"),l.Zb(1,24),l.Ub(),l.Sc(2,f,4,2,"span",10)),2&e){const e=l.nc(2);l.Cb(2),l.uc("ngIf",e.isAtLeastOneChannelSubscribed)}}function C(e,t){if(1&e&&(l.Vb(0,"span",26),l.Uc(1),l.oc(2,"myNumberFormatter"),l.Ub()),2&e){const e=l.nc(2);l.Cb(1),l.Wc(" ",l.pc(2,1,e.videoChannels[0].followersCount)," ")}}const O=function(e){return{"extra-text":e}};function P(e,t){if(1&e&&(l.Vb(0,"span",18),l.Sc(1,h,1,0,"ng-container",19),l.Sc(2,v,1,0,"ng-template",null,20,l.Tc),l.Sc(4,m,3,1,"ng-template",null,21,l.Tc),l.Ub(),l.Sc(6,C,3,3,"span",22)),2&e){const e=l.Hc(3),t=l.Hc(5),n=l.nc();l.uc("ngClass",l.yc(5,O,n.isAtLeastOneChannelSubscribed)),l.Cb(1),l.uc("ngIf",n.account)("ngIfThen",t)("ngIfElse",e),l.Cb(5),l.uc("ngIf",!n.isBigButton&&n.displayFollowers&&n.videoChannels.length>1&&0!==n.videoChannel.followersCount)}}function M(e,t){}function _(e,t){if(1&e){const e=l.Wb();l.Vb(0,"button",29),l.jc("click",function(){return l.Jc(e),l.nc(2).subscribe()}),l.Sc(1,M,0,0,"ng-template",30),l.Ub()}if(2&e){l.nc(2);const e=l.Hc(2);l.Cb(1),l.uc("ngTemplateOutlet",e)}}function y(e,t){if(1&e){const e=l.Wb();l.Vb(0,"button",31),l.jc("click",function(){return l.Jc(e),l.nc(2).unsubscribe()}),l.Tb(1),l.Zb(2,32),l.Sb(),l.Ub()}if(2&e){const e=l.nc(2);l.Cb(2),l.dc(e.account+""),l.ac(2)}}function w(e,t){if(1&e&&(l.Sc(0,_,2,1,"button",27),l.Sc(1,y,3,1,"button",28)),2&e){const e=l.nc();l.uc("ngIf",!e.isAllChannelsSubscribed),l.Cb(1),l.uc("ngIf",e.isAllChannelsSubscribed)}}function S(e,t){1&e&&l.Rb(0)}function k(e,t){1&e&&l.Rb(0)}function U(e,t){1&e&&(l.Vb(0,"span"),l.Zb(1,33),l.Ub())}function V(e,t){1&e&&(l.Vb(0,"span"),l.Zb(1,34),l.Ub())}const I=function(e,t,n){return{"subscribe-button":e,"unsubscribe-button":t,big:n}};let x=(()=>{class e{constructor(e,t,n,o,i){this.authService=e,this.router=t,this.notifier=n,this.userSubscriptionService=o,this.videoService=i,this.displayFollowers=!1,this.size="normal",this.subscribed=new Map}get handle(){return this.account?this.account.nameWithHost:this.videoChannel.name+"@"+this.videoChannel.host}get channelHandle(){return this.getChannelHandler(this.videoChannel)}get uri(){return this.account?this.account.url:this.videoChannels[0].url}get rssUri(){return(this.account?this.videoService.getAccountFeedUrls(this.account.id).find(e=>"xml"===e.format):this.videoService.getVideoChannelFeedUrls(this.videoChannels[0].id).find(e=>"xml"===e.format)).url}get videoChannel(){return this.videoChannels[0]}get isAllChannelsSubscribed(){return this.subscribeStatus(!0).length===this.videoChannels.length}get isAtLeastOneChannelSubscribed(){return this.subscribeStatus(!0).length>0}get isBigButton(){return this.isUserLoggedIn()&&this.videoChannels.length>1&&this.isAtLeastOneChannelSubscribed}ngOnInit(){this.loadSubscribedStatus()}ngOnChanges(){this.ngOnInit()}subscribe(){return this.isUserLoggedIn()?this.localSubscribe():this.gotoLogin()}localSubscribe(){const e=this.subscribeStatus(!1),t=this.videoChannels.map(e=>this.getChannelHandler(e)).filter(t=>e.includes(t)).map(e=>this.userSubscriptionService.addSubscription(e));Object(o.a)(t).subscribe(()=>{this.notifier.success(this.account?"\u041F\u043E\u0434\u043F\u0438\u0441\u0430\u043D \u043D\u0430 \u0432\u0441\u0435 \u0442\u0435\u043A\u0443\u0449\u0438\u0435 \u043A\u0430\u043D\u0430\u043B\u044B " + this.account.displayName + ". \u0412\u044B \u0431\u0443\u0434\u0435\u0442\u0435 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u044B \u043E\u0431\u043E \u0432\u0441\u0435\u0445 \u0438\u0445 \u043D\u043E\u0432\u044B\u0445 \u0432\u0438\u0434\u0435\u043E.":"\u041F\u043E\u0434\u043F\u0438\u0441\u0430\u043D \u043D\u0430 " + this.videoChannels[0].displayName + ". \u0412\u044B \u0431\u0443\u0434\u0435\u0442\u0435 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u044B \u043E\u0431\u043E \u0432\u0441\u0435\u0445 \u0438\u0445 \u043D\u043E\u0432\u044B\u0445 \u0432\u0438\u0434\u0435\u043E.","\u041F\u043E\u0434\u043F\u0438\u0441\u043A\u0430")},e=>this.notifier.error(e.message))}unsubscribe(){this.isUserLoggedIn()&&this.localUnsubscribe()}localUnsubscribe(){const e=this.subscribeStatus(!0),t=this.videoChannels.map(e=>this.getChannelHandler(e)).filter(t=>e.includes(t)).map(e=>this.userSubscriptionService.deleteSubscription(e));Object(i.a)(...t).subscribe({complete:()=>{this.notifier.success(this.account?"\u041E\u0442\u043F\u0438\u0441\u0430\u0442\u044C\u0441\u044F \u043E\u0442 \u0432\u0441\u0435\u0445 \u043A\u0430\u043D\u0430\u043B\u043E\u0432 " + this.account.nameWithHost + " ":"\u0412\u044B \u043E\u0442\u043F\u0438\u0441\u0430\u043B\u0438\u0441\u044C \u043E\u0442 \n          " + this.videoChannels[0].nameWithHost + "\n        ","\u041E\u0442\u043A\u0430\u0437 \u043E\u0442 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0438")},error:e=>this.notifier.error(e.message)})}isUserLoggedIn(){return this.authService.isLoggedIn()}gotoLogin(){this.router.navigate(["/login"])}subscribeStatus(e){const t=[];for(const[n,o]of this.subscribed.entries())o===e&&t.push(n);return t}getChannelHandler(e){return e.name+"@"+e.host}loadSubscribedStatus(){if(this.isUserLoggedIn())for(const e of this.videoChannels){const t=this.getChannelHandler(e);this.subscribed.set(t,!1),Object(c.a)(this.userSubscriptionService.listenToSubscriptionCacheChange(t),this.userSubscriptionService.doesSubscriptionExist(t)).subscribe(e=>this.subscribed.set(t,e),e=>this.notifier.error(e.message))}}}return e.\u0275fac=function(t){return new(t||e)(l.Pb(a.a),l.Pb(d.h),l.Pb(a.m),l.Pb(r.a),l.Pb(s.s))},e.\u0275cmp=l.Jb({type:e,selectors:[["my-subscribe-button"]],inputs:{account:"account",videoChannels:"videoChannels",displayFollowers:"displayFollowers",size:"size"},features:[l.Ab],decls:23,vars:14,consts:function(){let e,t,n,o,i,c,a,s,r,d,b,u;return e="Multiple ways to subscribe to the current channel",t="Open subscription dropdown",n="\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u044F \u0430\u043A\u043A\u0430\u0443\u043D\u0442 ActivityPub",o="\u041F\u043E\u0434\u043F\u0438\u0441\u0430\u0442\u044C\u0441\u044F \u0441 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430 Mastodon:",i="\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u044F \u043A\u0430\u043D\u0430\u043B \u0440\u0430\u0441\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u0438\u044F",c="\u041F\u043E\u0434\u043F\u0438\u0441\u0430\u0442\u044C\u0441\u044F \u043F\u043E RSS",a="\u041F\u043E\u0434\u043F\u0438\u0441\u0430\u0442\u044C\u0441\u044F",s="\u041F\u043E\u0434\u043F\u0438\u0441\u0430\u0442\u044C\u0441\u044F \u043D\u0430 \u0432\u0441\u0435 \u043A\u0430\u043D\u0430\u043B\u044B",r="\u043F\u043E\u0434\u043F\u0438\u0441\u0430\u043D \u043D\u0430 \u043A\u0430\u043D\u0430\u043B\u044B",d="{VAR_SELECT, select, undefined {Unsubscribe} other {Unsubscribe from all channels}}",d=l.ec(d,{VAR_SELECT:"\ufffd0\ufffd"}),b="\u041F\u043E\u0434\u043F\u0438\u0441\u0430\u0442\u044C\u0441\u044F \u0441 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430 \u043D\u0430 \u044D\u0442\u043E\u043C \u044D\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440\u0435",u="\u041F\u043E\u0434\u043F\u0438\u0441\u0430\u0442\u044C\u0441\u044F \u0441 \u0432\u0430\u0448\u0435\u0433\u043E \u043B\u043E\u043A\u0430\u043B\u044C\u043D\u043E\u0433\u043E \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430",[[1,"btn-group-subscribe","btn-group",3,"ngClass"],["userLoggedOut",""],["userLoggedIn",""],[4,"ngIf","ngIfThen"],["ngbDropdown","","autoClose","outside","placement","bottom-right","role","group","aria-label",e,1,"btn-group"],["ngbDropdownToggle","","aria-label",t,1,"btn","btn-sm","dropdown-toggle-split"],["ngbDropdownMenu","",1,"dropdown-menu"],[1,"dropdown-header"],n,[1,"dropdown-item",3,"click"],[4,"ngIf"],[1,"dropdown-item","dropdown-item-neutral"],o,[3,"showHelp","uri"],[1,"dropdown-divider"],i,["target","_blank",1,"dropdown-item",3,"href"],c,[3,"ngClass"],[4,"ngIf","ngIfThen","ngIfElse"],["single",""],["multiple",""],["class","followers-count",4,"ngIf"],a,s,r,[1,"followers-count"],["type","button","class","btn btn-sm",3,"click",4,"ngIf"],["type","button","class","btn btn-sm","role","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm",3,"click"],[3,"ngTemplateOutlet"],["type","button","role","button",1,"btn","btn-sm",3,"click"],d,b,u]},template:function(e,t){if(1&e&&(l.Vb(0,"div",0),l.Sc(1,P,7,7,"ng-template",null,1,l.Tc),l.Sc(3,w,2,2,"ng-template",null,2,l.Tc),l.Sc(5,S,1,0,"ng-container",3),l.Vb(6,"div",4),l.Vb(7,"button",5),l.Sc(8,k,1,0,"ng-container",3),l.Ub(),l.Vb(9,"div",6),l.Vb(10,"h6",7),l.Zb(11,8),l.Ub(),l.Vb(12,"button",9),l.jc("click",function(){return t.subscribe()}),l.Sc(13,U,2,0,"span",10),l.Sc(14,V,2,0,"span",10),l.Ub(),l.Vb(15,"button",11),l.Zb(16,12),l.Ub(),l.Qb(17,"my-remote-subscribe",13),l.Qb(18,"div",14),l.Vb(19,"h6",7),l.Zb(20,15),l.Ub(),l.Vb(21,"a",16),l.Zb(22,17),l.Ub(),l.Ub(),l.Ub(),l.Ub()),2&e){const e=l.Hc(2),n=l.Hc(4);l.uc("ngClass",l.Ac(10,I,!t.isAllChannelsSubscribed,t.isAllChannelsSubscribed,t.isBigButton)),l.Cb(5),l.uc("ngIf",t.isUserLoggedIn())("ngIfThen",n),l.Cb(3),l.uc("ngIf",!t.isUserLoggedIn())("ngIfThen",e),l.Cb(5),l.uc("ngIf",!t.isUserLoggedIn()),l.Cb(1),l.uc("ngIf",t.isUserLoggedIn()),l.Cb(3),l.uc("showHelp",!0)("uri",t.uri),l.Cb(4),l.uc("href",t.rssUri,l.Lc)}},directives:[b.l,b.n,u.f,u.l,u.j,g.a,b.s],pipes:[p.a],styles:['.btn-group-subscribe[_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;cursor:pointer;float:right;padding:0}.btn-group-subscribe[_ngcontent-%COMP%]:active, .btn-group-subscribe[_ngcontent-%COMP%]:focus, .btn-group-subscribe[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.btn-group-subscribe[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%], .btn-group-subscribe[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%] > .dropdown-toggle[_ngcontent-%COMP%]{font-size:15px}.btn-group-subscribe[_ngcontent-%COMP%]:not(.big){white-space:nowrap}.btn-group-subscribe.big[_ngcontent-%COMP%]{height:35px}.btn-group-subscribe.big[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:first-child{width:175px}.btn-group-subscribe.big[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .extra-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{line-height:80%}.btn-group-subscribe.big[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .extra-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(:first-child){font-size:75%}.btn-group-subscribe[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%] > .dropdown-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-right:3px}.btn-group-subscribe[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{padding-right:4px}.btn-group-subscribe[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%] + .dropdown[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{padding-left:2px}.btn-group-subscribe[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%] + .dropdown[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:after{position:relative;top:1px}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-weight:600}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn.focus-visible[_ngcontent-%COMP%], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active, .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn.disabled[_ngcontent-%COMP%], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:#fff}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:#fff}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:#fff}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:#fff}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   span.followers-count[_ngcontent-%COMP%]{padding-left:5px}.btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#e5e5e5;color:var(--greyForegroundColor);font-weight:600}.btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn.focus-visible[_ngcontent-%COMP%], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(88,88,88,.05)}.btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn.disabled[_ngcontent-%COMP%], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active, .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus, .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover, .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[disabled][_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:#efefef}.btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn.disabled[_ngcontent-%COMP%], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[disabled][_ngcontent-%COMP%]{cursor:default}.btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:var(--greyForegroundColor)}.btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:var(--greyForegroundColor)}.btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:var(--greyForegroundColor)}.btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:var(--greyForegroundColor)}.btn-group-subscribe[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{cursor:default}.btn-group-subscribe[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer}.btn-group-subscribe[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item-neutral[_ngcontent-%COMP%]{cursor:default}.btn-group-subscribe[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item-neutral[_ngcontent-%COMP%]:focus, .btn-group-subscribe[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item-neutral[_ngcontent-%COMP%]:hover{background-color:inherit}.btn-group-subscribe[_ngcontent-%COMP%]     form{padding:.25rem 1rem}.btn-group-subscribe[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px}.btn-group-subscribe[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.btn-group-subscribe[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}.btn-group-subscribe[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width:100%){.btn-group-subscribe[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.extra-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.extra-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{line-height:75%}.extra-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(:first-child){font-size:60%;text-align:left}']}),e})()},HZcR:function(e,t,n){"use strict";n.d(t,"a",function(){return S});var o=n("mrSG"),i=n("fXoL"),c=n("ey9i"),a=n("HIM4"),s=n("xMQD"),r=(n("hDKA"),n("SZgj"),n("tTqN")),l=n("ofXK"),d=n("EcKj"),b=n("BYvb"),u=n("XZU/"),g=n("1kSV"),p=n("DTAc"),h=n("S51W");const v=["playlistDropdown"],f=["playlistAdd"],m=["videoDownloadModal"],C=["videoReportModal"],O=["videoBlockModal"],P=["liveStreamInformationModal"];function M(e,t){if(1&e){const e=i.Wb();i.Vb(0,"div",8,9),i.jc("openChange",function(t){return i.Jc(e),i.Hc(5).openChange(t)}),i.Qb(2,"span",10),i.Vb(3,"div",11),i.Qb(4,"my-video-add-to-playlist",12,13),i.Ub(),i.Ub()}if(2&e){const e=i.nc(2);i.uc("placement",e.getPlaylistDropdownPlacement()),i.Cb(4),i.uc("video",e.video)("lazyLoad",!0)}}function _(e,t){1&e&&i.Qb(0,"my-live-stream-information",null,14)}const y=function(e){return{video:e}};function w(e,t){if(1&e){const e=i.Wb();i.Tb(0),i.Sc(1,M,6,3,"div",1),i.Vb(2,"my-action-dropdown",2),i.jc("click",function(){return i.Jc(e),i.nc().loadDropdownInformation()}),i.Ub(),i.Qb(3,"my-video-download",null,3),i.Qb(5,"my-video-report",4,5),i.Vb(7,"my-video-block",6,7),i.jc("videoBlocked",function(){return i.Jc(e),i.nc().onVideoBlocked()}),i.Ub(),i.Sc(9,_,2,0,"my-live-stream-information",0),i.Sb()}if(2&e){const e=i.nc();i.Cb(1),i.uc("ngIf",e.isUserLoggedIn()&&e.displayOptions.playlist),i.Cb(1),i.uc("actions",e.videoActions)("label",e.label)("entry",i.yc(11,y,e.video))("buttonSize",e.buttonSize)("placement",e.placement)("buttonDirection",e.buttonDirection)("buttonStyled",e.buttonStyled),i.Cb(3),i.uc("video",e.video),i.Cb(2),i.uc("video",e.video),i.Cb(2),i.uc("ngIf",e.displayOptions.liveInfo)}}let S=(()=>{class e{constructor(e,t,n,o,c,a,s,r){this.authService=e,this.notifier=t,this.confirmService=n,this.blocklistService=o,this.videoBlocklistService=c,this.screenService=a,this.videoService=s,this.redundancyService=r,this.videoCaptions=[],this.displayOptions={playlist:!1,download:!0,update:!0,blacklist:!0,delete:!0,report:!0,duplicate:!0,mute:!0,liveInfo:!1},this.placement="left",this.buttonStyled=!1,this.buttonSize="normal",this.buttonDirection="vertical",this.videoRemoved=new i.n,this.videoUnblocked=new i.n,this.videoBlocked=new i.n,this.videoAccountMuted=new i.n,this.modalOpened=new i.n,this.videoActions=[],this.loaded=!1}get user(){return this.authService.getUser()}ngOnChanges(){this.loaded&&(this.loaded=!1,this.playlistAdd&&this.playlistAdd.reload()),this.buildActions()}isUserLoggedIn(){return this.authService.isLoggedIn()}loadDropdownInformation(){this.isUserLoggedIn()&&!0!==this.loaded&&(this.loaded=!0,this.displayOptions.playlist&&this.playlistAdd.load())}showDownloadModal(){this.modalOpened.emit(),this.videoDownloadModal.show(this.video,this.videoCaptions)}showReportModal(){this.modalOpened.emit(),this.videoReportModal.show()}showBlockModal(){this.modalOpened.emit(),this.videoBlockModal.show()}showLiveInfoModal(e){this.modalOpened.emit(),this.liveStreamInformationModal.show(e)}isVideoUpdatable(){return this.video.isUpdatableBy(this.user)}isVideoRemovable(){return this.video.isRemovableBy(this.user)}isVideoBlockable(){return this.video.isBlockableBy(this.user)}isVideoUnblockable(){return this.video.isUnblockableBy(this.user)}isVideoLiveInfoAvailable(){return this.video.isLiveInfoAvailableBy(this.user)}isVideoDownloadable(){return this.video&&!0!==this.video.isLive&&this.video instanceof s.o&&this.video.downloadEnabled}canVideoBeDuplicated(){return!this.video.isLive&&this.video.canBeDuplicatedBy(this.user)}isVideoAccountMutable(){return this.video.account.id!==this.user.account.id}unblockVideo(){return Object(o.a)(this,void 0,void 0,function*(){const e="\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0440\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u044D\u0442\u043E \u0432\u0438\u0434\u0435\u043E? \u041E\u043D\u043E \u0441\u043D\u043E\u0432\u0430 \u0431\u0443\u0434\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u043E \u0432 \u0441\u043F\u0438\u0441\u043A\u0435 \u0432\u0438\u0434\u0435\u043E.";!1!==(yield this.confirmService.confirm(e,"\u0420\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C"))&&this.videoBlocklistService.unblockVideo(this.video.id).subscribe(()=>{this.notifier.success("\u0412\u0438\u0434\u0435\u043E " + this.video.name + " \u0440\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043E."),this.video.blacklisted=!1,this.video.blockedReason=null,this.videoUnblocked.emit()},e=>this.notifier.error(e.message))})}removeVideo(){return Object(o.a)(this,void 0,void 0,function*(){this.modalOpened.emit();let e="\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u044D\u0442\u043E \u0432\u0438\u0434\u0435\u043E?";this.video.isLive&&(e+=" "+"\u041F\u0440\u044F\u043C\u0430\u044F \u0442\u0440\u0430\u043D\u0441\u043B\u044F\u0446\u0438\u044F \u0431\u0443\u0434\u0435\u0442 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430."),!1!==(yield this.confirmService.confirm(e,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"))&&this.videoService.removeVideo(this.video.id).subscribe(()=>{this.notifier.success("\u0412\u0438\u0434\u0435\u043E " + this.video.name + " \u0431\u044B\u043B\u043E \u0443\u0434\u0430\u043B\u0435\u043D\u043E."),this.videoRemoved.emit()},e=>this.notifier.error(e.message))})}duplicateVideo(){this.redundancyService.addVideoRedundancy(this.video).subscribe(()=>{const e="\u042D\u0442\u043E \u0432\u0438\u0434\u0435\u043E \u0431\u0443\u0434\u0435\u0442 \u043F\u0440\u043E\u0434\u0443\u0431\u043B\u0438\u0440\u043E\u0432\u0430\u043D\u043E \u0432\u0430\u0448\u0438\u043C \u044D\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440\u043E\u043C.";this.notifier.success(e)},e=>this.notifier.error(e.message))}muteVideoAccount(){const e={nameWithHost:s.c.CREATE_BY_STRING(this.video.account.name,this.video.account.host)};this.blocklistService.blockAccountByUser(e).subscribe(()=>{this.notifier.success("\u0410\u043A\u043A\u0430\u0443\u043D\u0442 " + e.nameWithHost + " \u0437\u0430\u0433\u043B\u0443\u0448\u0435\u043D."),this.videoAccountMuted.emit()},e=>this.notifier.error(e.message))}onVideoBlocked(){this.videoBlocked.emit()}getPlaylistDropdownPlacement(){return this.screenService.isInSmallView()?"bottom-right":"bottom-left bottom-right"}buildActions(){this.videoActions=[[{label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u043F\u043B\u0435\u0439\u043B\u0438\u0441\u0442",handler:()=>this.playlistDropdown.toggle(),isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.playlist,iconName:"playlist-add"}],[{label:"\u0421\u043A\u0430\u0447\u0430\u0442\u044C",handler:()=>this.showDownloadModal(),isDisplayed:()=>this.displayOptions.download&&this.isVideoDownloadable(),iconName:"download"},{label:"Display live information",handler:({video:e})=>this.showLiveInfoModal(e),isDisplayed:()=>this.displayOptions.liveInfo&&this.isVideoLiveInfoAvailable(),iconName:"live"},{label:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C",linkBuilder:({video:e})=>["/videos/update",e.uuid],iconName:"edit",isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.update&&this.isVideoUpdatable()},{label:"\u0411\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C",handler:()=>this.showBlockModal(),iconName:"no",isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.blacklist&&this.isVideoBlockable()},{label:"\u0420\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C",handler:()=>this.unblockVideo(),iconName:"undo",isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.blacklist&&this.isVideoUnblockable()},{label:"\u0417\u0435\u0440\u043A\u0430\u043B\u043E",handler:()=>this.duplicateVideo(),isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.duplicate&&this.canVideoBeDuplicated(),iconName:"cloud-download"},{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",handler:()=>this.removeVideo(),isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.delete&&this.isVideoRemovable(),iconName:"delete"},{label:"\u041E\u0442\u0447\u0435\u0442",handler:()=>this.showReportModal(),isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.report,iconName:"flag"}],[{label:"\u041E\u0442\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0430\u043A\u043A\u0430\u0443\u043D\u0442",handler:()=>this.muteVideoAccount(),isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.mute&&this.isVideoAccountMutable(),iconName:"no"}]]}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(c.a),i.Pb(c.m),i.Pb(c.d),i.Pb(a.c),i.Pb(a.h),i.Pb(c.v),i.Pb(s.s),i.Pb(s.g))},e.\u0275cmp=i.Jb({type:e,selectors:[["my-video-actions-dropdown"]],viewQuery:function(e,t){if(1&e&&(i.Yc(v,!0),i.Yc(f,!0),i.Yc(m,!0),i.Yc(C,!0),i.Yc(O,!0),i.Yc(P,!0)),2&e){let e;i.Gc(e=i.kc())&&(t.playlistDropdown=e.first),i.Gc(e=i.kc())&&(t.playlistAdd=e.first),i.Gc(e=i.kc())&&(t.videoDownloadModal=e.first),i.Gc(e=i.kc())&&(t.videoReportModal=e.first),i.Gc(e=i.kc())&&(t.videoBlockModal=e.first),i.Gc(e=i.kc())&&(t.liveStreamInformationModal=e.first)}},inputs:{video:"video",videoCaptions:"videoCaptions",displayOptions:"displayOptions",placement:"placement",label:"label",buttonStyled:"buttonStyled",buttonSize:"buttonSize",buttonDirection:"buttonDirection"},outputs:{videoRemoved:"videoRemoved",videoUnblocked:"videoUnblocked",videoBlocked:"videoBlocked",videoAccountMuted:"videoAccountMuted",modalOpened:"modalOpened"},features:[i.Ab],decls:1,vars:1,consts:function(){let e,t;return e="Open video actions",t="Open video actions",[[4,"ngIf"],["role","button","aria-label",e,"class","playlist-dropdown","ngbDropdown","","autoClose","outside",3,"placement","openChange",4,"ngIf"],[3,"actions","label","entry","buttonSize","placement","buttonDirection","buttonStyled","click"],["videoDownloadModal",""],[3,"video"],["videoReportModal",""],[3,"video","videoBlocked"],["videoBlockModal",""],["role","button","aria-label",t,"ngbDropdown","","autoClose","outside",1,"playlist-dropdown",3,"placement","openChange"],["playlistDropdown","ngbDropdown"],["ngbDropdownAnchor","",1,"anchor"],["ngbDropdownMenu",""],[3,"video","lazyLoad"],["playlistAdd",""],["liveStreamInformationModal",""]]},template:function(e,t){1&e&&i.Sc(0,w,10,13,"ng-container",0),2&e&&i.uc("ngIf",0!==t.videoActions.length)},directives:[l.n,d.a,r.a,b.a,u.a,g.f,g.g,g.j,p.a,h.a],styles:[".playlist-dropdown[_ngcontent-%COMP%]{position:absolute}.playlist-dropdown[_ngcontent-%COMP%]   .anchor[_ngcontent-%COMP%]{display:block;opacity:0}  .icon-playlist-add{left:2px}"]}),e})()},JEFd:function(e,t,n){"use strict";n.d(t,"a",function(){return o.a}),n.d(t,"b",function(){return g});var o=n("s/vm"),i=(n("HZcR"),n("tTqN"),n("MUmz"),n("UT6+"),n("sWvm")),c=n("P8w3"),a=n("Nmku"),s=n("HIM4"),r=n("h3Oa"),l=n("PcNq"),d=n("hDKA"),b=n("aW0q"),u=n("fXoL");let g=(()=>{class e{}return e.\u0275mod=u.Nb({type:e}),e.\u0275inj=u.Mb({factory:function(t){return new(t||e)},providers:[],imports:[[a.a,i.c,s.g,b.a,l.a,c.a,d.b,r.a]]}),e})()},MUmz:function(e,t,n){"use strict";n.d(t,"a",function(){return A});var o=n("eIep"),i=n("fXoL"),c=n("ey9i"),a=(n("xMQD"),n("SZgj")),s=n("ofXK"),r=n("qZuT"),l=n("tyNb"),d=n("4Gki"),b=n("SecD"),u=n("HZcR");function g(e,t){1&e&&(i.Tb(0,23),i.Zb(1,24),i.Sb())}function p(e,t){1&e&&(i.Tb(0,25),i.Zb(1,26),i.Sb())}const h=function(e){return["/video-channels",e]};function v(e,t){if(1&e&&(i.Vb(0,"a",27),i.Qb(1,"img",28),i.Ub()),2&e){const e=i.nc();i.uc("routerLink",i.yc(3,h,e.video.byVideoChannel))("title",e.channelLinkTitle),i.Cb(1),i.uc("src",e.getAvatarUrl(),i.Lc)}}const f=function(e){return{"blur-filter":e}};function m(e,t){if(1&e&&(i.Vb(0,"a",29),i.Uc(1),i.Ub()),2&e){const e=i.nc();i.uc("routerLink",e.videoRouterLink)("ngClass",i.yc(4,f,e.isVideoBlur)),i.Db("title",e.video.name),i.Cb(1),i.Vc(e.video.name)}}function C(e,t){if(1&e&&(i.Vb(0,"a",30),i.Uc(1),i.Ub()),2&e){const e=i.nc();i.uc("href",e.videoHref,i.Lc)("target",e.videoTarget)("ngClass",i.yc(5,f,e.isVideoBlur)),i.Db("title",e.video.name),i.Cb(1),i.Vc(e.video.name)}}function O(e,t){if(1&e&&i.Qb(0,"my-date-toggle",31),2&e){const e=i.nc();i.uc("date",e.video.publishedAt)}}function P(e,t){1&e&&(i.Tb(0),i.Uc(1," \u2022 "),i.Sb())}function M(e,t){if(1&e&&i.Qb(0,"my-video-views-counter",32),2&e){const e=i.nc();i.uc("video",e.video)}}const _=function(e){return["/accounts",e]};function y(e,t){if(1&e&&(i.Vb(0,"a",33),i.Uc(1),i.Ub()),2&e){const e=i.nc();i.uc("routerLink",i.yc(2,_,e.video.byAccount)),i.Cb(1),i.Wc(" ",e.video.byAccount," ")}}function w(e,t){if(1&e&&(i.Vb(0,"a",34),i.Uc(1),i.Ub()),2&e){const e=i.nc();i.uc("routerLink",i.yc(2,h,e.video.byVideoChannel)),i.Cb(1),i.Wc(" ",e.video.byVideoChannel," ")}}function S(e,t){if(1&e&&(i.Tb(0),i.Uc(1),i.Sb()),2&e){const e=i.nc();i.Cb(1),i.Vc(e.video.privacy.label)}}function k(e,t){1&e&&(i.Tb(0),i.Uc(1," - "),i.Sb())}function U(e,t){if(1&e&&(i.Tb(0),i.Uc(1),i.Sb()),2&e){const e=i.nc();i.Cb(1),i.Vc(e.getStateLabel(e.video))}}function V(e,t){if(1&e&&(i.Vb(0,"span",39),i.Uc(1),i.Ub()),2&e){const e=i.nc(2);i.Cb(1),i.Vc(e.video.blockedReason)}}function I(e,t){if(1&e&&(i.Vb(0,"div",35),i.Vb(1,"span",36),i.Zb(2,37),i.Ub(),i.Sc(3,V,2,1,"span",38),i.Ub()),2&e){const e=i.nc();i.Cb(3),i.uc("ngIf",e.video.blockedReason)}}function x(e,t){1&e&&(i.Vb(0,"div",40),i.Zb(1,41),i.Ub())}function L(e,t){if(1&e){const e=i.Wb();i.Vb(0,"my-video-actions-dropdown",42),i.jc("videoRemoved",function(){return i.Jc(e),i.nc().onVideoRemoved()})("videoBlocked",function(){return i.Jc(e),i.nc().onVideoBlocked()})("videoUnblocked",function(){return i.Jc(e),i.nc().onVideoUnblocked()})("videoAccountMuted",function(){return i.Jc(e),i.nc().onVideoAccountMuted()}),i.Ub()}if(2&e){const e=i.nc();i.uc("video",e.video)("displayOptions",e.videoActionsDisplayOptions)}}const T=function(e,t){return{"display-as-row":e,"fit-width":t}};let A=(()=>{class e{constructor(e,t,n,o,c,a){this.screenService=e,this.serverService=t,this.authService=n,this.videoPlaylistService=o,this.cd=c,this.localeId=a,this.ownerDisplayType="account",this.displayOptions={date:!0,views:!0,by:!0,avatar:!1,privacyLabel:!1,privacyText:!1,state:!1,blacklistInfo:!1},this.displayAsRow=!1,this.displayVideoActions=!0,this.fitWidth=!1,this.videoLinkType="internal",this.videoBlocked=new i.n,this.videoUnblocked=new i.n,this.videoRemoved=new i.n,this.videoAccountMuted=new i.n,this.videoActionsDisplayOptions={playlist:!0,download:!1,update:!0,blacklist:!0,delete:!0,report:!0,duplicate:!0,mute:!0},this.showActions=!1,this.channelLinkTitle="",this.videoRouterLink=[]}get isVideoBlur(){return this.video.isVideoNSFWForUser(this.user,this.serverConfig)}ngOnInit(){this.serverConfig=this.serverService.getTmpConfig(),this.serverService.getConfig().subscribe(e=>{this.serverConfig=e,this.buildVideoLink()}),this.setUpBy(),this.channelLinkTitle="" + this.video.channel.name + " (\u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0430 \u043A\u0430\u043D\u0430\u043B\u0430) ",this.screenService.isInTouchScreen()&&this.loadActions()}buildVideoLink(){if("internal"!==this.videoLinkType&&this.video.url)return"external"===this.videoLinkType?(this.videoRouterLink=null,this.videoHref=this.video.url,void(this.videoTarget="_blank")):void(this.videoRouterLink=["/search/lazy-load-video",{url:this.video.url}]);this.videoRouterLink=["/videos/watch",this.video.uuid]}displayOwnerAccount(){return"account"===this.ownerDisplayTypeChosen}displayOwnerVideoChannel(){return"videoChannel"===this.ownerDisplayTypeChosen}isUnlistedVideo(){return 2===this.video.privacy.id}isPrivateVideo(){return 3===this.video.privacy.id}getStateLabel(e){if(!e.state)return"";if(3!==e.privacy.id&&1===e.state.id)return "\u041E\u043F\u0443\u0431\u043B\u0438\u043A\u043E\u0432\u0430\u043D\u043E";if(e.scheduledUpdate){const t=new Date(e.scheduledUpdate.updateAt.toString()).toLocaleString(this.localeId);return "\u041F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F \u0437\u0430\u043F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0430 \u043D\u0430"+t}return 2===e.state.id&&!0===e.waitTranscoding?"\u041E\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044F \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430":2===e.state.id?"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430":3===e.state.id?"\u0418\u043C\u043F\u043E\u0440\u0442 \u0444\u0430\u0439\u043B\u0430":""}getAvatarUrl(){return"account"===this.ownerDisplayTypeChosen?this.video.accountAvatarUrl:this.video.videoChannelAvatarUrl}loadActions(){this.displayVideoActions&&(this.showActions=!0),this.loadWatchLater()}onVideoBlocked(){this.videoBlocked.emit()}onVideoUnblocked(){this.videoUnblocked.emit()}onVideoRemoved(){this.videoRemoved.emit()}onVideoAccountMuted(){this.videoAccountMuted.emit()}isUserLoggedIn(){return this.authService.isLoggedIn()}onWatchLaterClick(e){!0===e?this.removeFromWatchLater():this.addToWatchLater(),this.inWatchLaterPlaylist=!e}addToWatchLater(){this.videoPlaylistService.addVideoInPlaylist(this.watchLaterPlaylist.id,{videoId:this.video.id}).subscribe(e=>{this.watchLaterPlaylist.playlistElementId=e.videoPlaylistElement.id})}removeFromWatchLater(){this.videoPlaylistService.removeVideoFromPlaylist(this.watchLaterPlaylist.id,this.watchLaterPlaylist.playlistElementId,this.video.id).subscribe(e=>{})}isWatchLaterPlaylistDisplayed(){return this.displayVideoActions&&this.isUserLoggedIn()&&void 0!==this.inWatchLaterPlaylist}setUpBy(){this.ownerDisplayTypeChosen="account"!==this.ownerDisplayType&&"videoChannel"!==this.ownerDisplayType?this.video.channel.name===`${this.video.account.name}_channel`||this.video.channel.name.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/)?"account":"videoChannel":this.ownerDisplayType}loadWatchLater(){this.isUserLoggedIn()&&void 0===this.inWatchLaterPlaylist&&(this.authService.userInformationLoaded.pipe(Object(o.a)(()=>this.videoPlaylistService.listenToVideoPlaylistChange(this.video.id))).subscribe(e=>{const t=this.authService.getUser().specialPlaylists.find(e=>2===e.type),n=e.find(e=>e.playlistId===t.id);this.inWatchLaterPlaylist=!1,this.watchLaterPlaylist={id:t.id},n&&(this.inWatchLaterPlaylist=!0,this.watchLaterPlaylist.playlistElementId=n.playlistElementId),this.cd.markForCheck()}),this.videoPlaylistService.runPlaylistCheck(this.video.id))}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(c.v),i.Pb(c.x),i.Pb(c.a),i.Pb(a.b),i.Pb(i.h),i.Pb(i.v))},e.\u0275cmp=i.Jb({type:e,selectors:[["my-video-miniature"]],inputs:{user:"user",video:"video",ownerDisplayType:"ownerDisplayType",displayOptions:"displayOptions",displayAsRow:"displayAsRow",displayVideoActions:"displayVideoActions",fitWidth:"fitWidth",videoLinkType:"videoLinkType"},outputs:{videoBlocked:"videoBlocked",videoUnblocked:"videoUnblocked",videoRemoved:"videoRemoved",videoAccountMuted:"videoAccountMuted"},decls:26,vars:28,consts:function(){let e,t,n,o;return e="\u0421\u043A\u0440\u044B\u0442\u044B\u0439",t="\u041F\u0440\u0438\u0432\u0430\u0442\u043D\u044B\u0439",n="\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043E",o="\u0427\u0443\u0432\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439",[[1,"video-miniature",3,"ngClass","mouseenter"],[3,"video","nsfw","videoRouterLink","videoHref","videoTarget","displayWatchLaterPlaylist","inWatchLaterPlaylist","watchLaterClick"],["ngProjectAs","label-warning",5,["label-warning"],4,"ngIf"],["ngProjectAs","label-danger",5,["label-danger"],4,"ngIf"],[1,"video-bottom"],[1,"video-miniature-information"],[1,"d-inline-flex","video-miniature-meta"],["class","avatar",3,"routerLink","title",4,"ngIf"],[1,"w-100","d-flex","flex-column"],["tabindex","-1","class","video-miniature-name",3,"routerLink","ngClass",4,"ngIf"],["tabindex","-1","class","video-miniature-name",3,"href","target","ngClass",4,"ngIf"],[1,"video-miniature-created-at-views"],[3,"date",4,"ngIf"],[1,"views",3,"title"],[4,"ngIf"],[3,"video",4,"ngIf"],["tabindex","-1","class","video-miniature-account",3,"routerLink",4,"ngIf"],["tabindex","-1","class","video-miniature-channel",3,"routerLink",4,"ngIf"],[1,"video-info-privacy"],["class","video-info-blocked",4,"ngIf"],["class","video-info-nsfw",4,"ngIf"],[1,"video-actions"],["placement","bottom-left bottom-right left auto",3,"video","displayOptions","videoRemoved","videoBlocked","videoUnblocked","videoAccountMuted",4,"ngIf"],["ngProjectAs","label-warning",5,["label-warning"]],e,["ngProjectAs","label-danger",5,["label-danger"]],t,[1,"avatar",3,"routerLink","title"],["alt","",3,"src"],["tabindex","-1",1,"video-miniature-name",3,"routerLink","ngClass"],["tabindex","-1",1,"video-miniature-name",3,"href","target","ngClass"],[3,"date"],[3,"video"],["tabindex","-1",1,"video-miniature-account",3,"routerLink"],["tabindex","-1",1,"video-miniature-channel",3,"routerLink"],[1,"video-info-blocked"],[1,"blocked-label"],n,["class","blocked-reason",4,"ngIf"],[1,"blocked-reason"],[1,"video-info-nsfw"],o,["placement","bottom-left bottom-right left auto",3,"video","displayOptions","videoRemoved","videoBlocked","videoUnblocked","videoAccountMuted"]]},template:function(e,t){1&e&&(i.Vb(0,"div",0),i.jc("mouseenter",function(){return t.loadActions()}),i.Vb(1,"my-video-thumbnail",1),i.jc("watchLaterClick",function(e){return t.onWatchLaterClick(e)}),i.Sc(2,g,2,0,"ng-container",2),i.Sc(3,p,2,0,"ng-container",3),i.Ub(),i.Vb(4,"div",4),i.Vb(5,"div",5),i.Vb(6,"div",6),i.Sc(7,v,2,5,"a",7),i.Vb(8,"div",8),i.Sc(9,m,2,6,"a",9),i.Sc(10,C,2,7,"a",10),i.Vb(11,"span",11),i.Sc(12,O,1,1,"my-date-toggle",12),i.Vb(13,"span",13),i.Sc(14,P,2,0,"ng-container",14),i.Sc(15,M,1,1,"my-video-views-counter",15),i.Ub(),i.Ub(),i.Sc(16,y,2,4,"a",16),i.Sc(17,w,2,4,"a",17),i.Vb(18,"div",18),i.Sc(19,S,2,1,"ng-container",14),i.Sc(20,k,2,0,"ng-container",14),i.Sc(21,U,2,1,"ng-container",14),i.Ub(),i.Ub(),i.Ub(),i.Sc(22,I,4,1,"div",19),i.Sc(23,x,2,0,"div",20),i.Ub(),i.Vb(24,"div",21),i.Sc(25,L,1,2,"my-video-actions-dropdown",22),i.Ub(),i.Ub(),i.Ub()),2&e&&(i.uc("ngClass",i.zc(25,T,t.displayAsRow,t.fitWidth)),i.Cb(1),i.uc("video",t.video)("nsfw",t.isVideoBlur)("videoRouterLink",t.videoRouterLink)("videoHref",t.videoHref)("videoTarget",t.videoTarget)("displayWatchLaterPlaylist",t.isWatchLaterPlaylistDisplayed())("inWatchLaterPlaylist",t.inWatchLaterPlaylist),i.Cb(1),i.uc("ngIf",t.displayOptions.privacyLabel&&t.isUnlistedVideo()),i.Cb(1),i.uc("ngIf",t.displayOptions.privacyLabel&&t.isPrivateVideo()),i.Cb(4),i.uc("ngIf",t.displayOptions.avatar),i.Cb(2),i.uc("ngIf",!t.videoHref),i.Cb(1),i.uc("ngIf",t.videoHref),i.Cb(2),i.uc("ngIf",t.displayOptions.date),i.Cb(1),i.uc("title",t.video.getExactNumberOfViews()),i.Cb(1),i.uc("ngIf",t.displayOptions.date&&t.displayOptions.views),i.Cb(1),i.uc("ngIf",t.displayOptions.views),i.Cb(1),i.uc("ngIf",t.displayOptions.by&&t.displayOwnerAccount()),i.Cb(1),i.uc("ngIf",t.displayOptions.by&&t.displayOwnerVideoChannel()),i.Cb(2),i.uc("ngIf",t.displayOptions.privacyText),i.Cb(1),i.uc("ngIf",t.displayOptions.privacyText&&t.displayOptions.state&&t.getStateLabel(t.video)),i.Cb(1),i.uc("ngIf",t.displayOptions.state),i.Cb(1),i.uc("ngIf",t.displayOptions.blacklistInfo&&t.video.blacklisted),i.Cb(1),i.uc("ngIf",t.displayOptions.nsfw&&t.video.nsfw),i.Cb(2),i.uc("ngIf",t.showActions))},directives:[s.l,r.a,s.n,l.k,d.a,b.a,u.a],styles:['.video-miniature[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;padding-bottom:15px;vertical-align:top}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]{display:flex}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]{width:183px;line-height:normal}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin:10px 10px 0 0}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;border-radius:50%;width:40px;height:40px;min-width:40px;min-height:40px}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-name[_ngcontent-%COMP%]{display:block;display:-webkit-box;max-height:2.2em;font-size:1.1em;line-height:1.1em;overflow:hidden;text-overflow:ellipsis;transition:color .2s;font-weight:600;color:var(--mainForegroundColor);margin-top:10px;margin-bottom:5px;width:calc(100% - 40px)}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-name[_ngcontent-%COMP%]:hover{text-decoration:none}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-name.blur-filter[_ngcontent-%COMP%]{filter:blur(3px);padding-left:4px}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-meta[_ngcontent-%COMP%]{width:calc(100% + 40px);overflow:hidden}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-created-at-views[_ngcontent-%COMP%]{display:block;font-size:13px}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-account[_ngcontent-%COMP%], .video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-channel[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;font-size:13px;color:var(--greyForegroundColor)}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-account[_ngcontent-%COMP%]:active, .video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-account[_ngcontent-%COMP%]:focus, .video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-account[_ngcontent-%COMP%]:hover, .video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-channel[_ngcontent-%COMP%]:active, .video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-channel[_ngcontent-%COMP%]:focus, .video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-channel[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-account[_ngcontent-%COMP%]:hover, .video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-channel[_ngcontent-%COMP%]:hover{color:#303030}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-info-blocked[_ngcontent-%COMP%]   .blocked-label[_ngcontent-%COMP%], .video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-info-nsfw[_ngcontent-%COMP%], .video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-info-privacy[_ngcontent-%COMP%]{font-weight:600}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-info-blocked[_ngcontent-%COMP%]{color:red}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-info-blocked[_ngcontent-%COMP%]   .blocked-reason[_ngcontent-%COMP%]:before{content:" - "}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-info-nsfw[_ngcontent-%COMP%]{color:red}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]{margin-top:3px;width:40px;height:30px}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]     .dropdown-root:not(.show){opacity:0}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]     .playlist-dropdown.show+my-action-dropdown .dropdown-root{opacity:1}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]     .more-icon{opacity:.6}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]     .more-icon:hover{opacity:1}@media screen and (max-width:800px){.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]{margin:0 10px}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]{margin:0;top:-3px}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]     .dropdown-root{opacity:1!important}}.video-miniature[_ngcontent-%COMP%]:hover   .video-bottom[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]     .dropdown-root, .video-miniature[_ngcontent-%COMP%]:hover     .video-thumbnail .video-thumbnail-actions-overlay{opacity:1}.video-miniature.fit-width[_ngcontent-%COMP%]{width:100%}.video-miniature.fit-width[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]{width:100%!important}.video-miniature.fit-width[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]{width:calc(100% - 40px)!important}.video-miniature.fit-width[_ngcontent-%COMP%]   my-video-thumbnail[_ngcontent-%COMP%]{position:relative;height:0;width:100%;padding-top:56%}.video-miniature.fit-width[_ngcontent-%COMP%]   my-video-thumbnail[_ngcontent-%COMP%]     .video-thumbnail{position:absolute;width:100%;height:100%;top:0}.video-miniature.display-as-row[_ngcontent-%COMP%]{flex-direction:row;padding-bottom:0;height:auto;display:flex;flex-grow:1}.video-miniature.display-as-row[_ngcontent-%COMP%]   my-video-thumbnail[_ngcontent-%COMP%]{margin-right:10px}@media screen and (min-width:800px){.video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]{width:auto;min-width:500px}}.video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-name[_ngcontent-%COMP%]{display:block;display:-webkit-box;max-height:2.6em;font-size:1.3em;line-height:1.3em;overflow:hidden;text-overflow:ellipsis;margin-top:2px;margin-bottom:5px}.video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-account[_ngcontent-%COMP%], .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-channel[_ngcontent-%COMP%], .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-created-at-views[_ngcontent-%COMP%]{font-size:95%;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-info-privacy[_ngcontent-%COMP%], .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-created-at-views[_ngcontent-%COMP%] + .video-miniature-channel[_ngcontent-%COMP%]{margin-top:5px}.video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-info-blocked[_ngcontent-%COMP%]{margin-top:3px}.video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]{margin:0;top:-3px}@media screen and (max-width:800px){.video-miniature.display-as-row[_ngcontent-%COMP%]{flex-direction:column;height:auto}.video-miniature.display-as-row[_ngcontent-%COMP%]   my-video-thumbnail[_ngcontent-%COMP%]{margin-right:0}.video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]{min-width:0}}'],changeDetection:0}),e})()},S51W:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var o=n("nEQH"),i=n("fXoL"),c=n("1kSV"),a=n("UkmY"),s=n("ofXK"),r=n("l9Pe"),l=n("tyNb"),d=n("9RWm"),b=n("RM9B");const u=["modal"];function g(e,t){1&e&&(i.Vb(0,"div",22),i.Zb(1,23),i.Ub())}function p(e,t){1&e&&(i.Vb(0,"div",22),i.Zb(1,24),i.Ub())}function h(e,t){if(1&e&&(i.Vb(0,"div",10),i.Vb(1,"div"),i.Sc(2,g,2,0,"div",11),i.Sc(3,p,2,0,"div",11),i.Ub(),i.Vb(4,"div",12),i.Qb(5,"my-live-documentation-link"),i.Ub(),i.Vb(6,"div",13),i.Vb(7,"label",14),i.Zb(8,15),i.Ub(),i.Qb(9,"my-input-toggle-hidden",16),i.Ub(),i.Vb(10,"div",13),i.Vb(11,"label",17),i.Zb(12,18),i.Ub(),i.Qb(13,"my-input-toggle-hidden",19),i.Vb(14,"div",20),i.Zb(15,21),i.Ub(),i.Ub(),i.Ub()),2&e){const e=i.nc(2);i.Cb(2),i.uc("ngIf",e.live.permanentLive),i.Cb(1),i.uc("ngIf",e.live.saveReplay),i.Cb(6),i.uc("value",e.live.rtmpUrl)("withToggle",!1)("withCopy",!0)("show",!0)("readonly",!0),i.Cb(4),i.uc("value",e.live.streamKey)("withCopy",!0)("readonly",!0)}}const v=function(e){return["/videos","update",e]};function f(e,t){if(1&e&&(i.Vb(0,"div",1),i.Vb(1,"h4",2),i.Zb(2,3),i.Ub(),i.Vb(3,"my-global-icon",4),i.jc("click",function(){return(0,t.dismiss)()}),i.Ub(),i.Ub(),i.Sc(4,h,16,10,"div",5),i.Vb(5,"div",6),i.Vb(6,"div",7),i.Vb(7,"input",8),i.jc("click",function(){return(0,t.dismiss)()}),i.Ub(),i.Vb(8,"my-edit-button",9),i.jc("click",function(){return(0,t.dismiss)()}),i.Ub(),i.Ub(),i.Ub()),2&e){const e=i.nc();i.Cb(4),i.uc("ngIf",e.live),i.Cb(4),i.uc("routerLink",i.yc(2,v,e.video.uuid))}}let m=(()=>{class e{constructor(e,t){this.modalService=e,this.liveVideoService=t}show(e){this.video=e,this.live=void 0,this.loadLiveInfo(e),this.modalService.open(this.modal,{centered:!0})}loadLiveInfo(e){this.liveVideoService.getVideoLive(e.id).subscribe(e=>this.live=e)}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(c.m),i.Pb(o.a))},e.\u0275cmp=i.Jb({type:e,selectors:[["my-live-stream-information"]],viewQuery:function(e,t){if(1&e&&i.Pc(u,!0),2&e){let e;i.Gc(e=i.kc())&&(t.modal=e.first)}},decls:2,vars:0,consts:function(){let e,t,n,o,i,c,a,s;return e="Live information",t="\u0417\u0430\u043A\u0440\u044B\u0442\u044C",n="\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u044D\u0444\u0438\u0440\u0430",o="Live RTMP Url",i="Live stream key",c="\u26A0\uFE0F Never share your stream key with anyone.",a="Permanent live",s="Replay will be saved",[["modal",""],[1,"modal-header"],[1,"modal-title"],e,["iconName","cross","aria-label","Close","role","button",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"form-group","inputs"],["type","button","role","button","value",t,1,"action-button","action-button-cancel",3,"click"],["label",n,3,"routerLink","click"],[1,"modal-body"],["class","badge badge-info",4,"ngIf"],[1,"alert","alert-info"],[1,"form-group"],["for","liveVideoRTMPUrl"],o,["inputId","liveVideoRTMPUrl",3,"value","withToggle","withCopy","show","readonly"],["for","liveVideoStreamKey"],i,["inputId","liveVideoStreamKey",3,"value","withCopy","readonly"],[1,"form-group-description"],c,[1,"badge","badge-info"],a,s]},template:function(e,t){1&e&&i.Sc(0,f,9,4,"ng-template",null,0,i.Tc)},directives:[a.a,s.n,r.a,l.i,d.a,b.a],styles:["p-autocomplete[_ngcontent-%COMP%]{display:block}.form-group[_ngcontent-%COMP%]{margin:20px 0}.alert-info[_ngcontent-%COMP%]{margin:1rem 0}.badge[_ngcontent-%COMP%]{font-size:13px}"]}),e})()},SecD:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n("xMQD");var o=n("fXoL"),i=n("ofXK"),c=n("gCBE");function a(e,t){if(1&e&&(o.Tb(0),o.Zb(1,2),o.oc(2,"myNumberFormatter"),o.Sb()),2&e){const e=o.nc();o.Cb(2),o.dc(e.video.views)(o.pc(2,2,e.video.views)),o.ac(1)}}function s(e,t){if(1&e&&(o.Tb(0),o.Zb(1,3),o.oc(2,"myNumberFormatter"),o.Sb()),2&e){const e=o.nc();o.Cb(2),o.dc(e.video.views)(o.pc(2,2,e.video.views)),o.ac(1)}}let r=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Jb({type:e,selectors:[["my-video-views-counter"]],inputs:{video:"video"},decls:3,vars:3,consts:function(){let e,t,n,i;return e="{VAR_PLURAL, plural, =1 {1 \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440} other {{INTERPOLATION} \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u043E\u0432}}",e=o.ec(e,{VAR_PLURAL:"\ufffd0\ufffd",INTERPOLATION:"\ufffd1\ufffd"}),t=" " + e + " ",n="{VAR_PLURAL, plural, =1 {1 viewer} other {{INTERPOLATION} viewers}}",n=o.ec(n,{VAR_PLURAL:"\ufffd0\ufffd",INTERPOLATION:"\ufffd1\ufffd"}),i=" " + n + " ",[[3,"title"],[4,"ngIf"],t,i]},template:function(e,t){1&e&&(o.Vb(0,"span",0),o.Sc(1,a,3,4,"ng-container",1),o.Sc(2,s,3,4,"ng-container",1),o.Ub()),2&e&&(o.uc("title",t.video.getExactNumberOfViews()),o.Cb(1),o.uc("ngIf",!t.video.isLive),o.Cb(1),o.uc("ngIf",t.video.isLive))},directives:[i.n],pipes:[c.a],styles:[""]}),e})()},"UT6+":function(e,t,n){"use strict";n.d(t,"a",function(){return O});var o=n("fXoL"),i=n("ey9i"),c=n("xMQD"),a=n("s/vm"),s=n("tyNb"),r=n("ofXK"),l=n("UjHu"),d=n("/xt7"),b=n("3Pt+"),u=n("MUmz");function g(e,t){1&e&&(o.Vb(0,"div",3),o.Zb(1,4),o.Ub())}function p(e,t){1&e&&o.Rb(0)}function h(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",11),o.Vb(1,"div",12),o.Vb(2,"span",13),o.jc("click",function(){return o.Jc(e),o.nc(2).abortSelectionMode()}),o.Zb(3,14),o.Ub(),o.Sc(4,p,1,0,"ng-container",15),o.Ub(),o.Ub()}if(2&e){const e=o.nc(2);o.Cb(4),o.uc("ngTemplateOutlet",e.globalButtonsTemplate)}}function v(e,t){1&e&&o.Rb(0)}const f=function(e){return{$implicit:e}};function m(e,t){if(1&e&&(o.Tb(0),o.Sc(1,v,1,0,"ng-container",16),o.Sb()),2&e){const e=o.nc().$implicit,t=o.nc();o.Cb(1),o.uc("ngTemplateOutlet",t.rowButtonsTemplate)("ngTemplateOutletContext",o.yc(2,f,e))}}function C(e,t){if(1&e){const e=o.Wb();o.Vb(0,"div",5),o.Vb(1,"div",6),o.Vb(2,"my-peertube-checkbox",7),o.jc("ngModelChange",function(n){o.Jc(e);const i=t.$implicit;return o.nc()._selection[i.id]=n}),o.Ub(),o.Ub(),o.Qb(3,"my-video-miniature",8),o.Sc(4,h,5,1,"div",9),o.Sc(5,m,2,4,"ng-container",10),o.Ub()}if(2&e){const e=t.$implicit,n=t.index,i=o.nc();o.Cb(2),o.uc("inputName","video-check-"+e.id)("ngModel",i._selection[e.id]),o.Cb(1),o.uc("video",e)("displayAsRow",!0)("displayOptions",i.miniatureDisplayOptions)("displayVideoActions",!1)("ownerDisplayType",i.ownerDisplayType),o.Cb(1),o.uc("ngIf",!0===i.isInSelectionMode()&&0===n),o.Cb(1),o.uc("ngIf",!1===i.isInSelectionMode())}}let O=(()=>{class e extends a.a{constructor(e,t,n,i,c,a,s,r){super(),this.router=e,this.route=t,this.notifier=n,this.authService=i,this.userService=c,this.screenService=a,this.storageService=s,this.serverService=r,this.selectionChange=new o.n,this.videosModelChange=new o.n,this._selection={}}get selection(){return this._selection}set selection(e){this._selection=e,this.selectionChange.emit(this._selection)}get videosModel(){return this.videos}set videosModel(e){this.videos=e,this.videosModelChange.emit(this.videos)}ngOnInit(){super.ngOnInit()}ngAfterContentInit(){{const e=this.templates.find(e=>"rowButtons"===e.name);e&&(this.rowButtonsTemplate=e.template)}{const e=this.templates.find(e=>"globalButtons"===e.name);e&&(this.globalButtonsTemplate=e.template)}}ngOnDestroy(){super.ngOnDestroy()}getVideosObservable(e){return this.getVideosObservableFunction(e,this.sort)}abortSelectionMode(){this._selection={}}isInSelectionMode(){return Object.keys(this._selection).some(e=>!0===this._selection[e])}generateSyndicationList(){throw new Error("Method not implemented.")}onMoreVideos(){this.videosModel=this.videos}}return e.\u0275fac=function(t){return new(t||e)(o.Pb(s.h),o.Pb(s.a),o.Pb(i.m),o.Pb(i.a),o.Pb(i.D),o.Pb(i.v),o.Pb(i.h),o.Pb(i.x))},e.\u0275cmp=o.Jb({type:e,selectors:[["my-videos-selection"]],contentQueries:function(e,t,n){if(1&e&&o.Ib(n,c.f,!1),2&e){let e;o.Gc(e=o.kc())&&(t.templates=e)}},inputs:{pagination:"pagination",titlePage:"titlePage",miniatureDisplayOptions:"miniatureDisplayOptions",ownerDisplayType:"ownerDisplayType",getVideosObservableFunction:"getVideosObservableFunction",selection:"selection",videosModel:"videosModel"},outputs:{selectionChange:"selectionChange",videosModelChange:"videosModelChange"},features:[o.zb],decls:3,vars:5,consts:function(){let e,t;return e="\u041D\u0435\u0442 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u043E\u0432.",t="\n          \u041E\u0442\u043C\u0435\u043D\u0430\n        ",[["class","no-results",4,"ngIf"],["myInfiniteScroller","",1,"videos",3,"autoInit","dataObservable","nearOfBottom"],["class","video",4,"ngFor","ngForOf","ngForTrackBy"],[1,"no-results"],e,[1,"video"],[1,"checkbox-container"],[3,"inputName","ngModel","ngModelChange"],[3,"video","displayAsRow","displayOptions","displayVideoActions","ownerDisplayType"],["class","action-selection-mode",4,"ngIf"],[4,"ngIf"],[1,"action-selection-mode"],[1,"action-selection-mode-child"],[1,"action-button","action-button-cancel-selection",3,"click"],t,[4,"ngTemplateOutlet"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]]},template:function(e,t){1&e&&(o.Sc(0,g,2,0,"div",0),o.Vb(1,"div",1),o.jc("nearOfBottom",function(){return t.onNearOfBottom()}),o.Sc(2,C,6,9,"div",2),o.Ub()),2&e&&(o.uc("ngIf",t.hasDoneFirstQuery&&0===t.videos.length),o.Cb(1),o.uc("autoInit",!0)("dataObservable",t.onDataSubject.asObservable()),o.Cb(1),o.uc("ngForOf",t.videos)("ngForTrackBy",t.videoById))},directives:[r.n,l.a,r.m,d.a,b.m,b.p,u.a,r.s],styles:['.action-selection-mode[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;flex-grow:1}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]{position:fixed}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{display:block;margin-left:55px}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer;background-color:#e5e5e5;color:var(--greyForegroundColor)}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection.focus-visible[_ngcontent-%COMP%], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(88,88,88,.05)}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection.disabled[_ngcontent-%COMP%], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]:active, .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]:focus, .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]:hover, .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[disabled][_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:#efefef}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection.disabled[_ngcontent-%COMP%], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[disabled][_ngcontent-%COMP%]{cursor:default}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:var(--greyForegroundColor)}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:var(--greyForegroundColor)}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:var(--greyForegroundColor)}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]{display:flex;min-height:130px;padding-bottom:20px;margin-bottom:20px;border-bottom:1px solid #c6c6c6}@media screen and (max-width:800px){.video[_ngcontent-%COMP%]{flex-direction:column;height:auto;align-items:center}}.video[_ngcontent-%COMP%]:first-child{margin-top:47px}.video[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:20px;margin-left:12px}.video[_ngcontent-%COMP%]   my-video-miniature[_ngcontent-%COMP%]{flex-grow:1}@media screen and (max-width:800px){.video[_ngcontent-%COMP%]{flex-direction:column;height:auto}.video[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{display:none}.video[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%]{margin-top:10px}.action-selection-mode[_ngcontent-%COMP%]{display:none}}']}),e})()},b613:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var o=n("NOtv"),i=n("BeL+"),c=n("jtHE"),a=n("XNiG"),s=n("VRyK"),r=n("D0XW"),l=n("LRne"),d=n("OsX3"),b=n("pLZG"),u=n("lJxs"),g=n("pxpQ"),p=n("eIep"),h=n("w1tV"),v=n("JIr8"),f=n("vkgz"),m=n("tk/3"),C=n("ey9i"),O=n("6rF9"),P=n("xMQD"),M=n("AytR"),_=n("fXoL");const y=o("peertube:subscriptions:UserSubscriptionService");let w=(()=>{class e{constructor(e,t,n,o,l){this.authHttp=e,this.restExtractor=t,this.videoService=n,this.restService=o,this.ngZone=l,this.existsSubject=new c.a(1),this.myAccountSubscriptionCache={},this.myAccountSubscriptionCacheObservable={},this.myAccountSubscriptionCacheSubject=new a.a,this.existsObservable=Object(s.a)(this.existsSubject.pipe(Object(d.a)(500,Object(O.k)(this.ngZone,r.b)),Object(b.a)(e=>0!==e.length),Object(u.a)(e=>Object(i.a)(e)),Object(g.b)(Object(O.d)(this.ngZone,r.b)),Object(p.a)(e=>this.doSubscriptionsExist(e)),Object(h.a)()),this.myAccountSubscriptionCacheSubject)}getUserSubscriptionVideos(t){const{videoPagination:n,sort:o,skipCount:i}=t,c=this.restService.componentPaginationToRestPagination(n);let a=new m.f;return a=this.restService.addRestGetParams(a,c,o),i&&(a=a.set("skipCount",i+"")),this.authHttp.get(e.BASE_USER_SUBSCRIPTIONS_URL+"/videos",{params:a}).pipe(Object(p.a)(e=>this.videoService.extractVideos(e)),Object(v.a)(e=>this.restExtractor.handleError(e)))}deleteSubscription(t){return this.authHttp.delete(e.BASE_USER_SUBSCRIPTIONS_URL+"/"+t).pipe(Object(u.a)(this.restExtractor.extractDataBool),Object(f.a)(()=>{this.myAccountSubscriptionCache[t]=!1,this.myAccountSubscriptionCacheSubject.next(this.myAccountSubscriptionCache)}),Object(v.a)(e=>this.restExtractor.handleError(e)))}addSubscription(t){return this.authHttp.post(e.BASE_USER_SUBSCRIPTIONS_URL,{uri:t}).pipe(Object(u.a)(this.restExtractor.extractDataBool),Object(f.a)(()=>{this.myAccountSubscriptionCache[t]=!0,this.myAccountSubscriptionCacheSubject.next(this.myAccountSubscriptionCache)}),Object(v.a)(e=>this.restExtractor.handleError(e)))}listSubscriptions(t){const{pagination:n,search:o}=t,i=e.BASE_USER_SUBSCRIPTIONS_URL,c=this.restService.componentPaginationToRestPagination(n);let a=new m.f;return a=this.restService.addRestGetParams(a,c),o&&(a=a.append("search",o)),this.authHttp.get(i,{params:a}).pipe(Object(u.a)(e=>P.n.extractVideoChannels(e)),Object(v.a)(e=>this.restExtractor.handleError(e)))}listenToMyAccountSubscriptionCacheSubject(){return this.myAccountSubscriptionCacheSubject.asObservable()}listenToSubscriptionCacheChange(e){if(e in this.myAccountSubscriptionCacheObservable)return this.myAccountSubscriptionCacheObservable[e];const t=this.existsObservable.pipe(Object(b.a)(t=>void 0!==t[e]),Object(u.a)(t=>t[e]));return this.myAccountSubscriptionCacheObservable[e]=t,t}doesSubscriptionExist(e){return y("Running subscription check for %d.",e),e in this.myAccountSubscriptionCache?(y("Found cache for %d.",e),Object(l.a)(this.myAccountSubscriptionCache[e])):(this.existsSubject.next(e),y("Fetching from network for %d.",e),this.existsObservable.pipe(Object(b.a)(t=>void 0!==t[e]),Object(u.a)(t=>t[e]),Object(f.a)(t=>this.myAccountSubscriptionCache[e]=t)))}doSubscriptionsExist(t){const n=e.BASE_USER_SUBSCRIPTIONS_URL+"/exist";let o=new m.f;return o=this.restService.addObjectParams(o,{uris:t}),this.authHttp.get(n,{params:o}).pipe(Object(f.a)(e=>{this.myAccountSubscriptionCache=Object.assign(Object.assign({},this.myAccountSubscriptionCache),e)}),Object(v.a)(e=>this.restExtractor.handleError(e)))}}return e.BASE_USER_SUBSCRIPTIONS_URL=M.a.apiUrl+"/api/v1/users/me/subscriptions",e.\u0275fac=function(t){return new(t||e)(_.gc(m.b),_.gc(C.r),_.gc(P.s),_.gc(C.s),_.gc(_.B))},e.\u0275prov=_.Lb({token:e,factory:e.\u0275fac}),e})()},gY50:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n("sWvm"),i=n("nnN+"),c=n("fXoL"),a=n("3Pt+"),s=n("ofXK"),r=n("1lk2"),l=n("BLxp");function d(e,t){1&e&&(c.fc(0,4,1),c.Qb(1,"span"),c.cc())}function b(e,t){1&e&&(c.fc(0,4,2),c.Qb(1,"span"),c.cc())}function u(e,t){1&e&&(c.Tb(0),c.fc(1,7),c.Qb(2,"br"),c.Qb(3,"br"),c.cc(),c.Sb())}function g(e,t){1&e&&(c.Vb(0,"my-help"),c.Sc(1,u,4,0,"ng-template",6),c.Ub())}function p(e,t){1&e&&(c.Tb(0),c.fc(1,8),c.Qb(2,"br"),c.Qb(3,"br"),c.cc(),c.Sb())}function h(e,t){1&e&&(c.Vb(0,"my-help"),c.Sc(1,p,4,0,"ng-template",6),c.Ub())}let v=(()=>{class e extends o.a{constructor(e){super(),this.formValidatorService=e,this.interact=!1,this.showHelp=!1}ngOnInit(){this.buildForm({text:i.f})}onValidKey(){this.check(),this.form.valid&&this.formValidated()}formValidated(){const e=this.form.value.text,[t,n]=e.split("@");fetch(`https://${n}/.well-known/webfinger?resource=acct:${t}@${n}`).then(e=>e.json()).then(e=>new Promise((t,n)=>{if(e&&Array.isArray(e.links)){const n=e.links.find(e=>e&&"string"==typeof e.template&&"http://ostatus.org/schema/1.0/subscribe"===e.rel);n&&n.template.includes("{uri}")&&t(n.template.replace("{uri}",encodeURIComponent(this.uri)))}n()})).then(window.open).catch(e=>console.error(e))}}return e.\u0275fac=function(t){return new(t||e)(c.Pb(o.b))},e.\u0275cmp=c.Jb({type:e,selectors:[["my-remote-subscribe"]],inputs:{uri:"uri",interact:"interact",showHelp:"showHelp"},features:[c.zb],decls:9,vars:6,consts:function(){let e,t,n;return e="" + "\ufffd*5:1\ufffd\ufffd#1:1\ufffd" + "\u0423\u0434\u0430\u043B\u0451\u043D\u043D\u0430\u044F \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0430" + "[\ufffd/#1:1\ufffd\ufffd/*5:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*6:2\ufffd]" + " " + "\ufffd*6:2\ufffd\ufffd#1:2\ufffd" + "\u0423\u0434\u0430\u043B\u0451\u043D\u043D\u043E\u0435 \u0432\u0437\u0430\u0438\u043C\u043E\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435" + "[\ufffd/#1:1\ufffd\ufffd/*5:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*6:2\ufffd]" + "",e=c.ec(e),t="\u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043F\u043E\u0434\u043F\u0438\u0441\u0430\u0442\u044C\u0441\u044F \u043D\u0430 \u043A\u0430\u043D\u0430\u043B \u0447\u0435\u0440\u0435\u0437 \u043B\u044E\u0431\u043E\u0439 \u044D\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440 \u0441 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u043E\u0439 ActivityPub. " + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + " \u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, \u0441 Mastodon \u0438\u043B\u0438 Pleroma \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0432\u0432\u0435\u0441\u0442\u0438 URL-\u0430\u0434\u0440\u0435\u0441 \u043A\u0430\u043D\u0430\u043B\u0430 \u0432 \u043F\u043E\u043B\u0435 \u043F\u043E\u0438\u0441\u043A\u0430 \u0438 \u043F\u043E\u0434\u043F\u0438\u0441\u0430\u0442\u044C\u0441\u044F \u0442\u0430\u043C. ",t=c.ec(t),n="\u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0432\u0437\u0430\u0438\u043C\u043E\u0434\u0435\u0439\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0447\u0435\u0440\u0435\u0437 \u043B\u044E\u0431\u043E\u0439 \u044D\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440 \u0441 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u043E\u0439 ActivityPub. " + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + " \u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, \u0441 Mastodon \u0438\u043B\u0438 Pleroma \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0432\u0432\u0435\u0441\u0442\u0438 \u0442\u0435\u043A\u0443\u0449\u0438\u0439 URL-\u0430\u0434\u0440\u0435\u0441 \u0432 \u043F\u043E\u043B\u0435 \u043F\u043E\u0438\u0441\u043A\u0430 \u0438 \u0432\u0437\u0430\u0438\u043C\u043E\u0434\u0435\u0439\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0441 \u043D\u0438\u043C \u0442\u0430\u043C. ",n=c.ec(n),[["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group","mb-2"],["type","email","formControlName","text","placeholder","jane_doe@example.com",1,"form-control",3,"keyup.control.enter","keyup.meta.enter"],["type","submit",1,"btn","btn-sm","btn-remote-follow",3,"disabled"],e,[4,"ngIf"],["ptTemplate","customHtml"],t,n]},template:function(e,t){1&e&&(c.Vb(0,"form",0),c.jc("ngSubmit",function(){return t.formValidated()}),c.Vb(1,"div",1),c.Vb(2,"input",2),c.jc("keyup.control.enter",function(){return t.onValidKey()})("keyup.meta.enter",function(){return t.onValidKey()}),c.Ub(),c.Ub(),c.Vb(3,"button",3),c.fc(4,4),c.Sc(5,d,2,0,"span",5),c.Sc(6,b,2,0,"span",5),c.cc(),c.Ub(),c.Sc(7,g,2,0,"my-help",5),c.Sc(8,h,2,0,"my-help",5),c.Ub()),2&e&&(c.uc("formGroup",t.form),c.Cb(3),c.uc("disabled",!t.form.valid),c.Cb(2),c.uc("ngIf",!t.interact),c.Cb(1),c.uc("ngIf",t.interact),c.Cb(1),c.uc("ngIf",!t.interact&&t.showHelp),c.Cb(1),c.uc("ngIf",t.showHelp&&t.interact))},directives:[a.y,a.n,a.h,a.b,a.m,a.f,s.n,r.a,l.a],styles:['.btn-remote-follow[_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.btn-remote-follow.focus-visible[_ngcontent-%COMP%], .btn-remote-follow[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.btn-remote-follow[_ngcontent-%COMP%], .btn-remote-follow[_ngcontent-%COMP%]:active, .btn-remote-follow[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.btn-remote-follow[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.btn-remote-follow.disabled[_ngcontent-%COMP%], .btn-remote-follow[disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}.btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:#fff}.btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:#fff}.btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:#fff}.btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:#fff}']}),e})()},h3Oa:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n("Nmku"),i=n("fXoL");let c=(()=>{class e{}return e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({factory:function(t){return new(t||e)},imports:[[o.a]]}),e})()},hDKA:function(e,t,n){"use strict";n.d(t,"a",function(){return o.a}),n.d(t,"b",function(){return r});var o=n("nEQH"),i=(n("S51W"),n("sWvm")),c=n("P8w3"),a=n("Nmku"),s=n("fXoL");let r=(()=>{class e{}return e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({factory:function(t){return new(t||e)},providers:[o.a],imports:[[a.a,i.c,c.a]]}),e})()},hHkf:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n("sWvm"),i=n("Nmku"),c=n("b613"),a=n("fXoL");let s=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},providers:[c.a],imports:[[i.a,o.c]]}),e})()},nEQH:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n("JIr8"),i=n("ey9i"),c=n("AytR"),a=n("fXoL"),s=n("tk/3");let r=(()=>{class e{constructor(e,t){this.authHttp=e,this.restExtractor=t}goLive(t){return this.authHttp.post(e.BASE_VIDEO_LIVE_URL,t).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}getVideoLive(t){return this.authHttp.get(e.BASE_VIDEO_LIVE_URL+t).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}updateLive(t,n){return this.authHttp.put(e.BASE_VIDEO_LIVE_URL+t,n).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}}return e.BASE_VIDEO_LIVE_URL=c.a.apiUrl+"/api/v1/videos/live/",e.\u0275fac=function(t){return new(t||e)(a.gc(s.b),a.gc(i.r))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac}),e})()},"s/vm":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n("XNiG"),i=n("xgIS"),c=n("Kj3r"),a=n("eIep"),s=n("vkgz");function r(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function l(e,t){return(e.getTime()-t.getTime())/864e5}var d=n("fXoL"),b=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.TODAY=1]="TODAY",e[e.YESTERDAY=2]="YESTERDAY",e[e.THIS_WEEK=3]="THIS_WEEK",e[e.THIS_MONTH=4]="THIS_MONTH",e[e.LAST_MONTH=5]="LAST_MONTH",e[e.OLDER=6]="OLDER",e}({});let u=(()=>{class e{constructor(){this.pagination={currentPage:1,itemsPerPage:25},this.sort="-publishedAt",this.defaultSort="-publishedAt",this.syndicationItems=[],this.loadOnInit=!0,this.useUserVideoPreferences=!1,this.ownerDisplayType="account",this.displayModerationBlock=!1,this.displayVideoActions=!0,this.groupByDate=!1,this.videos=[],this.hasDoneFirstQuery=!1,this.disabled=!1,this.displayOptions={date:!0,views:!0,by:!0,avatar:!1,privacyLabel:!0,privacyText:!1,state:!1,blacklistInfo:!1},this.actions=[],this.onDataSubject=new o.a,this.groupedDates={}}ngOnInit(){this.serverConfig=this.serverService.getTmpConfig(),this.serverService.getConfig().subscribe(e=>this.serverConfig=e),this.groupedDateLabels={[b.UNKNOWN]:null,[b.TODAY]:"\u0421\u0435\u0433\u043E\u0434\u043D\u044F",[b.YESTERDAY]:"\u0412\u0447\u0435\u0440\u0430",[b.THIS_WEEK]:"This week",[b.THIS_MONTH]:"This month",[b.LAST_MONTH]:"\u0411\u043E\u043B\u044C\u0448\u0435 \u043C\u0435\u0441\u044F\u0446\u0430",[b.OLDER]:"\u0411\u043E\u043B\u0435\u0435 \u0441\u0442\u0430\u0440\u044B\u0435"},this.loadRouteParams(this.route.snapshot.queryParams),this.resizeSubscription=Object(i.a)(window,"resize").pipe(Object(c.a)(500)).subscribe(()=>this.calcPageSizes()),this.calcPageSizes();const e=this.loadUserAndSettings();!0===this.loadOnInit&&e.subscribe(()=>this.loadMoreVideos()),this.userService.listenAnonymousUpdate().pipe(Object(a.a)(()=>this.loadUserAndSettings())).subscribe(()=>{this.hasDoneFirstQuery&&this.reloadVideos()}),this.screenService.isInMobileView()&&(this.displayOptions.avatar=!0)}ngOnDestroy(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}disableForReuse(){this.disabled=!0}enabledForReuse(){this.disabled=!1}videoById(e,t){return t.id}onNearOfBottom(){this.disabled||void 0!==this.lastQueryLength&&this.lastQueryLength<this.pagination.itemsPerPage||(this.pagination.currentPage+=1,this.setScrollRouteParams(),this.loadMoreVideos())}loadMoreVideos(e=!1){this.getVideosObservable(this.pagination.currentPage).subscribe(({data:t})=>{this.hasDoneFirstQuery=!0,this.lastQueryLength=t.length,e&&(this.videos=[]),this.videos=this.videos.concat(t),this.groupByDate&&this.buildGroupedDateLabels(),this.onMoreVideos(),this.onDataSubject.next(t)},e=>{const t="\u041D\u0435 \u0443\u0434\u0430\u0435\u0442\u0441\u044F \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0431\u043E\u043B\u044C\u0448\u0435 \u0432\u0438\u0434\u0435\u043E. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437 \u043F\u043E\u0437\u0436\u0435.";console.error(t,{error:e}),this.notifier.error(t)})}reloadVideos(){this.pagination.currentPage=1,this.loadMoreVideos(!0)}removeVideoFromArray(e){this.videos=this.videos.filter(t=>t.id!==e.id)}buildGroupedDateLabels(){let e=b.UNKNOWN;const t=[{value:b.TODAY,validator:e=>function(e){return r(e,new Date)}(e)},{value:b.YESTERDAY,validator:e=>function(e){const t=new Date;return t.setDate(t.getDate()-1),r(e,t)}(e)},{value:b.THIS_WEEK,validator:e=>function(e){return l(new Date,e)<=7}(e)},{value:b.THIS_MONTH,validator:e=>function(e){const t=(new Date).getMonth();return e.getMonth()===t}(e)},{value:b.LAST_MONTH,validator:e=>function(e){return l(new Date,e)<=30}(e)},{value:b.OLDER,validator:()=>!0}];for(const n of this.videos){const o=n.publishedAt;for(let i=0;i<t.length;i++){const c=t[i];if(e<=c.value&&c.validator(o)){e!==c.value&&(e=c.value,this.groupedDates[n.id]=e);break}}}}getCurrentGroupedDateLabel(e){if(!1!==this.groupByDate)return this.groupedDateLabels[this.groupedDates[e.id]]}toggleModerationDisplay(){throw new Error("toggleModerationDisplay is not implemented")}onMoreVideos(){}loadRouteParams(e){this.sort=e.sort||this.defaultSort,this.categoryOneOf=e.categoryOneOf,this.angularState=e["a-state"]}buildLocalFilter(e,t){return"local"===t?"local"===e?"all-local":"local":"all"===e?null:"all"}enableAllFilterIfPossible(){this.authService.isLoggedIn()&&this.authService.userInformationLoaded.subscribe(()=>{const e=this.authService.getUser();this.displayModerationBlock=e.hasRight(19)})}calcPageSizes(){this.screenService.isInMobileView()&&(this.pagination.itemsPerPage=5)}setScrollRouteParams(){if(this.angularState)return;this.angularState=42;let e=this.router.url;e&&"/"!==e||(e=this.serverConfig.instance.defaultClientRoute),this.router.navigate([e],{queryParams:{"a-state":this.angularState,categoryOneOf:this.categoryOneOf},replaceUrl:!0,queryParamsHandling:"merge"})}loadUserAndSettings(){return this.userService.getAnonymousOrLoggedUser().pipe(Object(s.a)(e=>{this.userMiniature=e,this.useUserVideoPreferences&&(this.languageOneOf=e.videoLanguages,this.nsfwPolicy=e.nsfwPolicy)}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=d.Kb({type:e}),e})()},tTqN:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var o=n("mrSG"),i=n("TSHB"),c=n("Bw5p"),a=n("ey9i"),s=n("xMQD"),r=n("fXoL"),l=n("1kSV"),d=n("ofXK"),b=n("UkmY"),u=n("UXJo"),g=n("3Pt+");const p=["modal"];function h(e,t){if(1&e){const e=r.Wb();r.Vb(0,"button",25),r.jc("click",function(){return r.Jc(e),r.nc(3).switchToType("subtitles")}),r.Zb(1,26),r.Ub()}}function v(e,t){if(1&e){const e=r.Wb();r.Vb(0,"button",25),r.jc("click",function(){return r.Jc(e),r.nc(3).switchToType("video")}),r.Zb(1,27),r.Ub()}}function f(e,t){if(1&e&&(r.Vb(0,"div",21),r.Vb(1,"span",22),r.Uc(2),r.Ub(),r.Vb(3,"div",23),r.Sc(4,h,2,0,"button",24),r.Sc(5,v,2,0,"button",24),r.Ub(),r.Ub()),2&e){const e=r.nc(2);r.Cb(2),r.Wc(" ",e.type," "),r.Cb(2),r.uc("ngIf","video"===e.type),r.Cb(1),r.uc("ngIf","subtitles"===e.type)}}function m(e,t){if(1&e&&(r.Vb(0,"option",30),r.Uc(1),r.Ub()),2&e){const e=t.$implicit;r.uc("value",e.resolution.id),r.Cb(1),r.Vc(e.resolution.label)}}function C(e,t){if(1&e){const e=r.Wb();r.Vb(0,"select",28),r.jc("ngModelChange",function(t){return r.Jc(e),r.nc(2).resolutionId=t})("ngModelChange",function(){return r.Jc(e),r.nc(2).onResolutionIdChange()}),r.Sc(1,m,2,2,"option",29),r.Ub()}if(2&e){const e=r.nc(2);r.uc("ngModel",e.resolutionId),r.Cb(1),r.uc("ngForOf",e.getVideoFiles())}}function O(e,t){if(1&e&&(r.Vb(0,"option",30),r.Uc(1),r.Ub()),2&e){const e=t.$implicit;r.uc("value",e.language.id),r.Cb(1),r.Vc(e.language.label)}}function P(e,t){if(1&e){const e=r.Wb();r.Vb(0,"select",28),r.jc("ngModelChange",function(t){return r.Jc(e),r.nc(2).subtitleLanguageId=t}),r.Sc(1,O,2,2,"option",29),r.Ub()}if(2&e){const e=r.nc(2);r.uc("ngModel",e.subtitleLanguageId),r.Cb(1),r.uc("ngForOf",e.videoCaptions)}}function M(e,t){if(1&e&&(r.Vb(0,"div",43),r.Vb(1,"span",44),r.Zb(2,45),r.Ub(),r.Vb(3,"span",46),r.Uc(4),r.Ub(),r.Ub()),2&e){const e=t.$implicit;r.Cb(2),r.dc(e.value.label),r.ac(2),r.Cb(2),r.Vc(e.value.value)}}function _(e,t){if(1&e&&(r.Vb(0,"div",41),r.Sc(1,M,5,2,"div",42),r.oc(2,"keyvalue"),r.Ub()),2&e){const e=r.nc(3);r.Cb(1),r.uc("ngForOf",r.pc(2,1,e.videoFileMetadataFormat))}}function y(e,t){if(1&e&&(r.Vb(0,"div",43),r.Vb(1,"span",44),r.Zb(2,47),r.Ub(),r.Vb(3,"span",46),r.Uc(4),r.Ub(),r.Ub()),2&e){const e=t.$implicit;r.Cb(2),r.dc(e.value.label),r.ac(2),r.Cb(2),r.Vc(e.value.value)}}function w(e,t){if(1&e&&(r.Vb(0,"div",41),r.Sc(1,y,5,2,"div",42),r.oc(2,"keyvalue"),r.Ub()),2&e){const e=r.nc(3);r.Cb(1),r.uc("ngForOf",r.pc(2,1,e.videoFileMetadataVideoStream))}}function S(e,t){if(1&e&&(r.Vb(0,"div",43),r.Vb(1,"span",44),r.Zb(2,48),r.Ub(),r.Vb(3,"span",46),r.Uc(4),r.Ub(),r.Ub()),2&e){const e=t.$implicit;r.Cb(2),r.dc(e.value.label),r.ac(2),r.Cb(2),r.Vc(e.value.value)}}function k(e,t){if(1&e&&(r.Vb(0,"div",41),r.Sc(1,S,5,2,"div",42),r.oc(2,"keyvalue"),r.Ub()),2&e){const e=r.nc(3);r.Cb(1),r.uc("ngForOf",r.pc(2,1,e.videoFileMetadataAudioStream))}}function U(e,t){if(1&e&&(r.Tb(0),r.Vb(1,"div",31,32),r.Tb(3,33),r.Vb(4,"a",34),r.Zb(5,35),r.Ub(),r.Sc(6,_,3,3,"ng-template",36),r.Sb(),r.Tb(7,37),r.Vb(8,"a",34),r.Zb(9,38),r.Ub(),r.Sc(10,w,3,3,"ng-template",36),r.Sb(),r.Tb(11,37),r.Vb(12,"a",34),r.Zb(13,39),r.Ub(),r.Sc(14,k,3,3,"ng-template",36),r.Sb(),r.Ub(),r.Qb(15,"div",40),r.Sb()),2&e){const e=r.Hc(2),t=r.nc(2);r.Cb(7),r.uc("disabled",void 0===t.videoFileMetadataVideoStream),r.Cb(4),r.uc("disabled",void 0===t.videoFileMetadataAudioStream),r.Cb(4),r.uc("ngbNavOutlet",e)}}function V(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",49),r.Vb(1,"div",50),r.Vb(2,"input",51),r.jc("ngModelChange",function(t){return r.Jc(e),r.nc(2).downloadType=t}),r.Ub(),r.Vb(3,"label",52),r.Zb(4,53),r.Ub(),r.Ub(),r.Vb(5,"div",50),r.Vb(6,"input",54),r.jc("ngModelChange",function(t){return r.Jc(e),r.nc(2).downloadType=t}),r.Ub(),r.Vb(7,"label",55),r.Zb(8,56),r.Ub(),r.Ub(),r.Ub()}if(2&e){const e=r.nc(2);r.Cb(2),r.uc("ngModel",e.downloadType),r.Cb(4),r.uc("ngModel",e.downloadType)}}function I(e,t){if(1&e){const e=r.Wb();r.Vb(0,"div",1),r.Vb(1,"h4",2),r.Tb(2),r.Zb(3,3),r.Sb(),r.Sc(4,f,6,3,"div",4),r.Ub(),r.Vb(5,"my-global-icon",5),r.jc("click",function(){return(0,t.close)()}),r.Ub(),r.Ub(),r.Vb(6,"div",6),r.Vb(7,"div",7),r.Vb(8,"div",8),r.Vb(9,"div",9),r.Sc(10,C,2,2,"select",10),r.Sc(11,P,2,2,"select",10),r.Ub(),r.Vb(12,"input",11,12),r.jc("click",function(){return r.Jc(e),r.Hc(13).select()}),r.Ub(),r.Vb(14,"div",13),r.Vb(15,"button",14),r.jc("click",function(){return r.Jc(e),r.nc().activateCopiedMessage()}),r.Qb(16,"span",15),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Sc(17,U,16,3,"ng-container",16),r.Sc(18,V,9,2,"div",17),r.Ub(),r.Vb(19,"div",18),r.Vb(20,"input",19),r.jc("click",function(){return(0,t.close)()})("key.enter",function(){return(0,t.close)()}),r.Ub(),r.Vb(21,"input",20),r.jc("click",function(){return r.Jc(e),r.nc().download()}),r.Ub(),r.Ub()}if(2&e){const e=r.Hc(13),t=r.nc();r.Cb(4),r.uc("ngIf",t.videoCaptions),r.Cb(6),r.uc("ngIf","video"===t.type),r.Cb(1),r.uc("ngIf","subtitles"===t.type),r.Cb(1),r.uc("value",t.getLink()),r.Cb(3),r.uc("cdkCopyToClipboard",e.value),r.Cb(2),r.uc("ngIf","video"===t.type&&(null==t.videoFile?null:t.videoFile.metadata)),r.Cb(1),r.uc("ngIf","video"===t.type)}}let x=(()=>{class e{constructor(e,t,n,o){this.notifier=e,this.modalService=t,this.videoService=n,this.auth=o,this.downloadType="torrent",this.resolutionId=-1,this.type="video",this.bytesPipe=new s.d,this.numbersPipe=new s.e}get typeText(){return"video"===this.type?"\u0432\u0438\u0434\u0435\u043E":"\u0441\u0443\u0431\u0442\u0438\u0442\u0440\u044B"}getVideoFiles(){return this.video?this.video.getFiles():[]}show(e,t){this.video=e,this.videoCaptions=t&&t.length?t:void 0,this.activeModal=this.modalService.open(this.modal,{centered:!0}),this.resolutionId=this.getVideoFiles()[0].resolution.id,this.onResolutionIdChange(),this.videoCaptions&&(this.subtitleLanguageId=this.videoCaptions[0].language.id)}onClose(){this.video=void 0,this.videoCaptions=void 0}download(){window.location.assign(this.getLink()),this.activeModal.close()}getLink(){return"subtitles"===this.type&&this.videoCaptions?this.getSubtitlesLink():this.getVideoFileLink()}onResolutionIdChange(){return Object(o.a)(this,void 0,void 0,function*(){this.videoFile=this.getVideoFile(),!this.videoFile.metadata&&this.videoFile.metadataUrl&&(yield this.hydrateMetadataFromMetadataUrl(this.videoFile),this.videoFileMetadataFormat=this.videoFile?this.getMetadataFormat(this.videoFile.metadata.format):void 0,this.videoFileMetadataVideoStream=this.videoFile?this.getMetadataStream(this.videoFile.metadata.streams,"video"):void 0,this.videoFileMetadataAudioStream=this.videoFile?this.getMetadataStream(this.videoFile.metadata.streams,"audio"):void 0)})}getVideoFile(){this.resolutionId=parseInt(this.resolutionId.toString(),10);const e=this.getVideoFiles().find(e=>e.resolution.id===this.resolutionId);if(e)return e;console.error("Could not find file with resolution %d.",this.resolutionId)}getVideoFileLink(){const e=this.videoFile;if(!e)return;const t=3===this.video.privacy.id||4===this.video.privacy.id?"?access_token="+this.auth.getAccessToken():"";switch(this.downloadType){case"direct":return e.fileDownloadUrl+t;case"torrent":return e.torrentDownloadUrl+t}}getSubtitlesLink(){return window.location.origin+this.videoCaptions.find(e=>e.language.id===this.subtitleLanguageId).captionPath}activateCopiedMessage(){this.notifier.success("\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u043E")}switchToType(e){this.type=e}getMetadataFormat(e){const t={encoder:e=>({label:"\u041A\u043E\u0434\u0438\u0440\u043E\u0432\u0449\u0438\u043A",value:e}),format_long_name:e=>({label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0444\u043E\u0440\u043C\u0430\u0442\u0430",value:e}),size:e=>({label:"\u0420\u0430\u0437\u043C\u0435\u0440",value:this.bytesPipe.transform(e,2)}),bit_rate:e=>({label:"\u0411\u0438\u0442\u0440\u0435\u0439\u0442",value:`${this.numbersPipe.transform(e)}bps`})},n=Object.assign(e,e.tags);return delete n.tags,Object(i.a)(Object(c.a)(n,Object.keys(t)),(e,n)=>t[n](e))}getMetadataStream(e,t){const n=e.find(e=>e.codec_type===t);if(!n)return;let o={codec_long_name:e=>({label:"\u041A\u043E\u0434\u0435\u043A",value:e}),profile:e=>({label:"\u041F\u0440\u043E\u0444\u0438\u043B\u044C",value:e}),bit_rate:e=>({label:"\u0411\u0438\u0442\u0440\u0435\u0439\u0442",value:`${this.numbersPipe.transform(e)}bps`})};return o=Object.assign(o,"video"===t?{width:e=>({label:"\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043D\u0438\u0435",value:`${e}x${n.height}`}),display_aspect_ratio:e=>({label:"\u0421\u043E\u043E\u0442\u043D\u043E\u0448\u0435\u043D\u0438\u0435 \u0441\u0442\u043E\u0440\u043E\u043D",value:e}),avg_frame_rate:e=>({label:"\u0421\u0440\u0435\u0434\u043D\u044F\u044F \u0447\u0430\u0441\u0442\u043E\u0442\u0430 \u043A\u0430\u0434\u0440\u043E\u0432",value:e}),pix_fmt:e=>({label:"\u0424\u043E\u0440\u043C\u0430\u0442 \u043F\u0438\u043A\u0441\u0435\u043B\u0435\u0439",value:e})}:{sample_rate:e=>({label:"\u0427\u0430\u0441\u0442\u043E\u0442\u0430 \u0434\u0438\u0441\u043A\u0440\u0435\u0442\u0438\u0437\u0430\u0446\u0438\u0438",value:e}),channel_layout:e=>({label:"\u041C\u0430\u043A\u0435\u0442 \u043A\u0430\u043D\u0430\u043B\u0430",value:e})}),Object(i.a)(Object(c.a)(n,Object.keys(o)),(e,t)=>o[t](e))}hydrateMetadataFromMetadataUrl(e){const t=this.videoService.getVideoFileMetadata(e.metadataUrl);return t.subscribe(t=>e.metadata=t),t.toPromise()}}return e.\u0275fac=function(t){return new(t||e)(r.Pb(a.m),r.Pb(l.m),r.Pb(s.s),r.Pb(a.a))},e.\u0275cmp=r.Jb({type:e,selectors:[["my-video-download"]],viewQuery:function(e,t){if(1&e&&r.Pc(p,!0),2&e){let e;r.Gc(e=r.kc())&&(t.modal=e.first)}},decls:2,vars:0,consts:function(){let e,t,n,o,i,c,a,s,r,l,d,b,u;return e="\u0421\u043A\u0430\u0447\u0430\u0442\u044C",t="\u041E\u0442\u043C\u0435\u043D\u0430",n="\u0421\u043A\u0430\u0447\u0430\u0442\u044C",o="\u0441\u0443\u0431\u0442\u0438\u0442\u0440\u044B",i="\u0432\u0438\u0434\u0435\u043E",c="\u0424\u043E\u0440\u043C\u0430\u0442",a="\u0412\u0438\u0434\u0435\u043E\u043F\u043E\u0442\u043E\u043A",s="\u0410\u0443\u0434\u0438\u043E\u043F\u043E\u0442\u043E\u043A",r="" + "\ufffd0\ufffd" + " ",l="" + "\ufffd0\ufffd" + " ",d="" + "\ufffd0\ufffd" + " ",b="\u041F\u0440\u044F\u043C\u043E\u0435 \u0441\u043A\u0430\u0447\u0438\u0432\u0430\u043D\u0438\u0435",u="\u0422\u043E\u0440\u0440\u0435\u043D\u0442 (.torrent \u0444\u0430\u0439\u043B)",[["modal",""],[1,"modal-header"],[1,"modal-title"],e,["ngbDropdown","","class","d-inline-block",4,"ngIf"],["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],[1,"form-group"],[1,"input-group","input-group-sm"],[1,"input-group-prepend","peertube-select-container"],[3,"ngModel","ngModelChange",4,"ngIf"],["type","text","readonly","",1,"form-control","input-sm","readonly",3,"value","click"],["urlInput",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"cdkCopyToClipboard","click"],[1,"glyphicon","glyphicon-copy"],[4,"ngIf"],["class","download-type",4,"ngIf"],[1,"modal-footer","inputs"],["type","button","role","button","value",t,1,"action-button","action-button-cancel",3,"click","key.enter"],["type","submit","value",n,1,"action-button-submit",3,"click"],["ngbDropdown","",1,"d-inline-block"],["id","dropdownDownloadType","ngbDropdownToggle",""],["ngbDropdownMenu","","aria-labelledby","dropdownDownloadType"],["ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","",3,"click"],o,i,[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["ngbNav","",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],c,["ngbNavContent",""],["ngbNavItem","",3,"disabled"],a,s,[3,"ngbNavOutlet"],[1,"file-metadata"],["class","metadata-attribute metadata-attribute-tags",4,"ngFor","ngForOf"],[1,"metadata-attribute","metadata-attribute-tags"],[1,"metadata-attribute-label"],r,[1,"metadata-attribute-value"],l,d,[1,"download-type"],[1,"peertube-radio-container"],["type","radio","name","download","id","download-direct","value","direct",3,"ngModel","ngModelChange"],["for","download-direct"],b,["type","radio","name","download","id","download-torrent","value","torrent",3,"ngModel","ngModelChange"],["for","download-torrent"],u]},template:function(e,t){1&e&&r.Sc(0,I,22,7,"ng-template",null,0,r.Tc)},directives:[d.n,b.a,u.a,l.f,l.l,l.j,l.i,g.v,g.m,g.p,d.m,g.q,g.x,l.p,l.r,l.s,l.q,l.u,g.s,g.b],pipes:[d.h],styles:['.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:100px;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;font-size:15px;border-top-right-radius:0;border-bottom-right-radius:0;border-right:none}.peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}@media screen and (max-width:100px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid transparent;border-top-color:#000;margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 35px 0 12px;position:relative;border:1px solid #c6c6c6;background:transparent none;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:30px;text-overflow:ellipsis;color:var(--mainForegroundColor)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]{background-color:#e5e5e5;color:var(--greyForegroundColor)}.peertube-select-container.peertube-select-button.focus-visible[_ngcontent-%COMP%], .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(88,88,88,.05)}.peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%], .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:active, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:focus, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]:hover, .peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:#efefef}.peertube-select-container.peertube-select-button.disabled[_ngcontent-%COMP%], .peertube-select-container.peertube-select-button[disabled][_ngcontent-%COMP%]{cursor:default}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:var(--greyForegroundColor)}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:var(--greyForegroundColor)}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:var(--greyForegroundColor)}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:var(--greyForegroundColor)}.peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .peertube-select-container.peertube-select-button[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-weight:600;color:var(--greyForegroundColor);border:none}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:inherit}#dropdownDownloadType[_ngcontent-%COMP%]{cursor:pointer}.download-type[_ngcontent-%COMP%]{margin-top:30px}.download-type[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%]{display:inline-block;margin-right:30px}.download-type[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{display:none}.download-type[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{font-weight:400;cursor:pointer}.download-type[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{position:relative;top:-2px;content:"";background:#fff;border-radius:100%;border:1px solid #000;display:inline-block;width:15px;height:15px;vertical-align:middle;cursor:pointer;text-align:center;margin-right:10px}.download-type[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{background-color:#000;box-shadow:inset 0 0 0 4px #fff}.download-type[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%]:before{outline:none;border-color:#000}.file-metadata[_ngcontent-%COMP%]{padding:1rem}.file-metadata[_ngcontent-%COMP%]   .metadata-attribute[_ngcontent-%COMP%]{font-size:13px;display:block;margin-bottom:12px}.file-metadata[_ngcontent-%COMP%]   .metadata-attribute[_ngcontent-%COMP%]   .metadata-attribute-label[_ngcontent-%COMP%]{min-width:142px;padding-right:5px;display:inline-block;color:var(--greyForegroundColor);font-weight:700}.file-metadata[_ngcontent-%COMP%]   .metadata-attribute[_ngcontent-%COMP%]   a.metadata-attribute-value[_ngcontent-%COMP%]{color:var(--mainForegroundColor)}.file-metadata[_ngcontent-%COMP%]   .metadata-attribute[_ngcontent-%COMP%]   a.metadata-attribute-value[_ngcontent-%COMP%]:active, .file-metadata[_ngcontent-%COMP%]   .metadata-attribute[_ngcontent-%COMP%]   a.metadata-attribute-value[_ngcontent-%COMP%]:focus, .file-metadata[_ngcontent-%COMP%]   .metadata-attribute[_ngcontent-%COMP%]   a.metadata-attribute-value[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.file-metadata[_ngcontent-%COMP%]   .metadata-attribute[_ngcontent-%COMP%]   a.metadata-attribute-value[_ngcontent-%COMP%]:hover{opacity:.9}.file-metadata[_ngcontent-%COMP%]   .metadata-attribute.metadata-attribute-tags[_ngcontent-%COMP%]   .metadata-attribute-value[_ngcontent-%COMP%]:not(:nth-child(2)):before{content:", "}']}),e})()}}]);