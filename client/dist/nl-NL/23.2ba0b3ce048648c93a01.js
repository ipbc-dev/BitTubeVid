(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"+X0y":function(t,e){var n={"":!0,up:!0};function i(t){return"number"==typeof t&&t>=0&&t<=100}t.exports=function(){var t=100,e=3,o=0,r=100,s=0,a=100,c="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!i(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return e},set:function(t){if("number"!=typeof t)throw new TypeError("Lines must be set to a number.");e=t}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(t){if(!i(t))throw new Error("RegionAnchorX must be between 0 and 100.");r=t}},regionAnchorX:{enumerable:!0,get:function(){return o},set:function(t){if(!i(t))throw new Error("RegionAnchorY must be between 0 and 100.");o=t}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(t){if(!i(t))throw new Error("ViewportAnchorY must be between 0 and 100.");a=t}},viewportAnchorX:{enumerable:!0,get:function(){return s},set:function(t){if(!i(t))throw new Error("ViewportAnchorX must be between 0 and 100.");s=t}},scroll:{enumerable:!0,get:function(){return c},set:function(t){var e=function(t){return"string"==typeof t&&!!n[t.toLowerCase()]&&t.toLowerCase()}(t);!1===e?console.warn("Scroll: an invalid or illegal string was specified."):c=e}}})}},"+g+W":function(t,e,n){var i=n("q0Rj"),o=n("s9h0");function r(e,n,s){return o()?(t.exports=r=Reflect.construct,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=r=function(t,e,n){var o=[null];o.push.apply(o,e);var r=new(Function.bind.apply(t,o));return n&&i(r,n.prototype),r},t.exports.default=t.exports,t.exports.__esModule=!0),r.apply(null,arguments)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0},"0CxO":function(t,e,n){var i=n("7zRj"),o=Object.create||function(){function t(){}return function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function r(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}function s(t){function e(t,e,n,i){return 3600*(0|t)+60*(0|e)+(0|n)+(0|i)/1e3}var n=t.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}function a(){this.values=o(null)}function c(t,e,n,i){var o=i?t.split(i):[t];for(var r in o)if("string"==typeof o[r]){var s=o[r].split(n);2===s.length&&e(s[0],s[1])}}function l(t,e,n){var i=t;function o(){var e=s(t);if(null===e)throw new r(r.Errors.BadTimeStamp,"Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function l(){t=t.replace(/^\s+/,"")}if(l(),e.startTime=o(),l(),"--\x3e"!==t.substr(0,3))throw new r(r.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);t=t.substr(3),l(),e.endTime=o(),l(),function(t,e){var i=new a;c(t,function(t,e){switch(t){case"region":for(var o=n.length-1;o>=0;o--)if(n[o].id===e){i.set(t,n[o].region);break}break;case"vertical":i.alt(t,e,["rl","lr"]);break;case"line":var r=e.split(","),s=r[0];i.integer(t,s),i.percent(t,s)&&i.set("snapToLines",!1),i.alt(t,s,["auto"]),2===r.length&&i.alt("lineAlign",r[1],["start","center","end"]);break;case"position":r=e.split(","),i.percent(t,r[0]),2===r.length&&i.alt("positionAlign",r[1],["start","center","end"]);break;case"size":i.percent(t,e);break;case"align":i.alt(t,e,["start","center","end","left","right"])}},/:/,/\s/),e.region=i.get("region",null),e.vertical=i.get("vertical","");try{e.line=i.get("line","auto")}catch(o){}e.lineAlign=i.get("lineAlign","start"),e.snapToLines=i.get("snapToLines",!0),e.size=i.get("size",100);try{e.align=i.get("align","center")}catch(o){e.align=i.get("align","middle")}try{e.position=i.get("position","auto")}catch(o){e.position=i.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},e.align)}e.positionAlign=i.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},e.align)}(t,e)}(r.prototype=o(Error.prototype)).constructor=r,r.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},a.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var i=0;i<n.length;++i)if(e===n[i]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var d=i.createElement("textarea"),u={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},h={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},p={v:"title",lang:"lang"},f={rt:"ruby"};function g(t,e){function n(){if(!e)return null;var t,n=e.match(/^([^<]*)(<[^>]*>?)?/);return e=e.substr((t=n[1]?n[1]:n[2]).length),t}function i(t,e){return!f[e.localName]||f[e.localName]===t.localName}function o(e,n){var i=u[e];if(!i)return null;var o=t.document.createElement(i),r=p[e];return r&&n&&(o[r]=n.trim()),o}for(var r,a,c=t.document.createElement("div"),l=c,g=[];null!==(r=n());)if("<"!==r[0])l.appendChild(t.document.createTextNode((d.innerHTML=r,a=d.textContent,d.textContent="",a)));else{if("/"===r[1]){g.length&&g[g.length-1]===r.substr(2).replace(">","")&&(g.pop(),l=l.parentNode);continue}var v,m=s(r.substr(1,r.length-2));if(m){v=t.document.createProcessingInstruction("timestamp",m),l.appendChild(v);continue}var b=r.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!b)continue;if(!(v=o(b[1],b[3])))continue;if(!i(l,v))continue;if(b[2]){var y=b[2].split(".");y.forEach(function(t){var e=/^bg_/.test(t),n=e?t.slice(3):t;h.hasOwnProperty(n)&&(v.style[e?"background-color":"color"]=h[n])}),v.className=y.join(" ")}g.push(b[1]),l.appendChild(v),l=v}return c}var v=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function m(t){for(var e=0;e<v.length;e++){var n=v[e];if(t>=n[0]&&t<=n[1])return!0}return!1}function b(t){var e=[],n="";if(!t||!t.childNodes)return"ltr";function i(t,e){for(var n=e.childNodes.length-1;n>=0;n--)t.push(e.childNodes[n])}function o(t){if(!t||!t.length)return null;var e=t.pop(),n=e.textContent||e.innerText;if(n){var r=n.match(/^.*(\n|\r)/);return r?(t.length=0,r[0]):n}return"ruby"===e.tagName?o(t):e.childNodes?(i(t,e),o(t)):void 0}for(i(e,t);n=o(e);)for(var r=0;r<n.length;r++)if(m(n.charCodeAt(r)))return"rtl";return"ltr"}function y(){}function _(t,e,n){y.call(this),this.cue=e,this.cueDiv=g(t,e.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=t.document.createElement("div"),i={direction:b(this.cueDiv),writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===e.align?"center":e.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var o=0;switch(e.positionAlign){case"start":o=e.position;break;case"center":o=e.position-e.size/2;break;case"end":o=e.position-e.size}this.applyStyles(""===e.vertical?{left:this.formatStyle(o,"%"),width:this.formatStyle(e.size,"%")}:{top:this.formatStyle(o,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function C(t){var e,n,i,o;if(t.div){n=t.div.offsetHeight,i=t.div.offsetWidth,o=t.div.offsetTop;var r=(r=t.div.childNodes)&&(r=r[0])&&r.getClientRects&&r.getClientRects();t=t.div.getBoundingClientRect(),e=r?Math.max(r[0]&&r[0].height||0,t.height/r.length):0}this.left=t.left,this.right=t.right,this.top=t.top||o,this.height=t.height||n,this.bottom=t.bottom||o+(t.height||n),this.width=t.width||i,this.lineHeight=void 0!==e?e:t.lineHeight}function P(t,e,n,i){var o=new C(e),r=e.cue,s=function(t){if("number"==typeof t.line&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,n=e.textTrackList,i=0,o=0;o<n.length&&n[o]!==e;o++)"showing"===n[o].mode&&i++;return-1*++i}(r),a=[];if(r.snapToLines){var c;switch(r.vertical){case"":a=["+y","-y"],c="height";break;case"rl":a=["+x","-x"],c="width";break;case"lr":a=["-x","+x"],c="width"}var l=o.lineHeight,d=l*Math.round(s),u=n[c]+l,h=a[0];Math.abs(d)>u&&(d=d<0?-1:1,d*=Math.ceil(u/l)*l),s<0&&(d+=""===r.vertical?n.height:n.width,a=a.reverse()),o.move(h,d)}else{var p=o.lineHeight/n.height*100;switch(r.lineAlign){case"center":s-=p/2;break;case"end":s-=p}switch(r.vertical){case"":e.applyStyles({top:e.formatStyle(s,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(s,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(s,"%")})}a=["+y","-x","+x","-y"],o=new C(e)}var f=function(t,e){for(var o,r=new C(t),s=1,a=0;a<e.length;a++){for(;t.overlapsOppositeAxis(n,e[a])||t.within(n)&&t.overlapsAny(i);)t.move(e[a]);if(t.within(n))return t;var c=t.intersectPercentage(n);s>c&&(o=new C(t),s=c),t=new C(r)}return o||r}(o,a);e.move(f.toCSSCompatValues(n))}function T(){}y.prototype.applyStyles=function(t,e){for(var n in e=e||this.div,t)t.hasOwnProperty(n)&&(e.style[n]=t[n])},y.prototype.formatStyle=function(t,e){return 0===t?0:t+e},(_.prototype=o(y.prototype)).constructor=_,C.prototype.move=function(t,e){switch(e=void 0!==e?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e}},C.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},C.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1},C.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},C.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},C.prototype.intersectPercentage=function(t){return Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left))*Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top))/(this.height*this.width)},C.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},C.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,n=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,i=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;return{left:(t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t).left,right:t.right,top:t.top||i,height:t.height||e,bottom:t.bottom||i+(t.height||e),width:t.width||n}},T.StringDecoder=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}},T.convertCueToDOMTree=function(t,e){return t&&e?g(t,e):null},T.processCues=function(t,e,n){if(!t||!e||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var i=t.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",n.appendChild(i),function(t){for(var e=0;e<t.length;e++)if(t[e].hasBeenReset||!t[e].displayState)return!0;return!1}(e)){var o=[],r=C.getSimpleBoxPosition(i),s={font:Math.round(.05*r.height*100)/100+"px sans-serif"};!function(){for(var n,a,c=0;c<e.length;c++)n=new _(t,a=e[c],s),i.appendChild(n.div),P(0,n,r,o),a.displayState=n.div,o.push(C.getSimpleBoxPosition(n))}()}else for(var a=0;a<e.length;a++)i.appendChild(e[a].displayState)},(T.Parser=function(t,e,n){n||(n=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(t){if(!(t instanceof r))throw t;this.onparsingerror&&this.onparsingerror(t)},parse:function(t){var e,n=this;function i(){for(var t=n.buffer,e=0;e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var i=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,n.buffer=t.substr(e),i}t&&(n.buffer+=n.decoder.decode(t,{stream:!0}));try{var o;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var d=(o=i()).match(/^WEBVTT([ \t].*)?$/);if(!d||!d[0])throw new r(r.Errors.BadSignature);n.state="HEADER"}for(var u=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(u?u=!1:o=i(),n.state){case"HEADER":/:/.test(o)?(e=o).match(/X-TIMESTAMP-MAP/)?c(e,function(t,e){switch(t){case"X-TIMESTAMP-MAP":!function(t){var e=new a;c(t,function(t,n){switch(t){case"MPEGT":e.integer(t+"S",n);break;case"LOCA":e.set(t+"L",s(n))}},/[^\d]:/,/,/),n.ontimestampmap&&n.ontimestampmap({MPEGTS:e.get("MPEGTS"),LOCAL:e.get("LOCAL")})}(e)}},/=/):c(e,function(t,e){switch(t){case"Region":!function(t){var e=new a;if(c(t,function(t,n){switch(t){case"id":e.set(t,n);break;case"width":e.percent(t,n);break;case"lines":e.integer(t,n);break;case"regionanchor":case"viewportanchor":var i=n.split(",");if(2!==i.length)break;var o=new a;if(o.percent("x",i[0]),o.percent("y",i[1]),!o.has("x")||!o.has("y"))break;e.set(t+"X",o.get("x")),e.set(t+"Y",o.get("y"));break;case"scroll":e.alt(t,n,["up"])}},/=/,/\s/),e.has("id")){var i=new(n.vttjs.VTTRegion||n.window.VTTRegion);i.width=e.get("width",100),i.lines=e.get("lines",3),i.regionAnchorX=e.get("regionanchorX",0),i.regionAnchorY=e.get("regionanchorY",100),i.viewportAnchorX=e.get("viewportanchorX",0),i.viewportAnchorY=e.get("viewportanchorY",100),i.scroll=e.get("scroll",""),n.onregion&&n.onregion(i),n.regionList.push({id:e.get("id"),region:i})}}(e)}},/:/):o||(n.state="ID");continue;case"NOTE":o||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(o)){n.state="NOTE";break}if(!o)continue;n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,"");try{n.cue.align="center"}catch(p){n.cue.align="middle"}if(n.state="CUE",-1===o.indexOf("--\x3e")){n.cue.id=o;continue}case"CUE":try{l(o,n.cue,n.regionList)}catch(p){n.reportOrThrowError(p),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var h=-1!==o.indexOf("--\x3e");if(!o||h&&(u=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=o.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":o||(n.state="ID");continue}}}catch(p){n.reportOrThrowError(p),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new r(r.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}},t.exports=T},"3zPy":function(t,e){function n(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return s[t];var n,r=String(t);return(n=i[r.toLowerCase()])?n:(n=o[r.toLowerCase()])||(1===r.length?r.charCodeAt(0):void 0)}n.isEventKey=function(t,e){if(t&&"object"==typeof t){var n=t.which||t.keyCode||t.charCode;if(null==n)return!1;if("string"==typeof e){var r;if(r=i[e.toLowerCase()])return r===n;if(r=o[e.toLowerCase()])return r===n}else if("number"==typeof e)return e===n;return!1}};var i=(e=t.exports=n).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},o=e.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(r=97;r<123;r++)i[String.fromCharCode(r)]=r-32;for(var r=48;r<58;r++)i[r-48]=r;for(r=1;r<13;r++)i["f"+r]=r+111;for(r=0;r<10;r++)i["numpad "+r]=r+96;var s=e.names=e.title={};for(r in i)s[i[r]]=r;for(var a in o)i[a]=o[a]},6:function(t,e){},7:function(t,e){},"7zRj":function(t,e,n){var i,o="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},r=n(7);"undefined"!=typeof document?i=document:(i=o["__GLOBAL_DOCUMENT_CACHE@4"])||(i=o["__GLOBAL_DOCUMENT_CACHE@4"]=r),t.exports=i},BF8C:function(t,e,n){"use strict";var i=n("vgmO"),o=n("SM4Z"),r=n("g2LC");function s(t,e,n){var i=t;return r(e)?(n=e,"string"==typeof t&&(i={uri:t})):i=o({},e,{uri:t}),i.callback=n,i}function a(t,e,n){return c(e=s(t,e,n))}function c(t){if(void 0===t.callback)throw new Error("callback argument missing");var e=!1,n=function(n,i,o){e||(e=!0,t.callback(n,i,o))};function i(){var t=void 0;if(t=l.response?l.response:l.responseText||function(t){try{if("document"===t.responseType)return t.responseXML;if(""===t.responseType&&(!t.responseXML||"parsererror"!==t.responseXML.documentElement.nodeName))return t.responseXML}catch(e){}return null}(l),v)try{t=JSON.parse(t)}catch(e){}return t}function o(t){return clearTimeout(d),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,n(t,m)}function r(){if(!c){var e;clearTimeout(d);var o=m,r=null;return 0!==(e=t.useXDR&&void 0===l.status?200:1223===l.status?204:l.status)?(o={body:i(),statusCode:e,method:h,headers:{},url:u,rawRequest:l},l.getAllResponseHeaders&&(o.headers=function(t){var e={};return t?(t.trim().split("\n").forEach(function(t){var n=t.indexOf(":"),i=t.slice(0,n).trim().toLowerCase(),o=t.slice(n+1).trim();void 0===e[i]?e[i]=o:Array.isArray(e[i])?e[i].push(o):e[i]=[e[i],o]}),e):e}(l.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),n(r,o,o.body)}}var s,c,l=t.xhr||null;l||(l=t.cors||t.useXDR?new a.XDomainRequest:new a.XMLHttpRequest);var d,u=l.url=t.uri||t.url,h=l.method=t.method||"GET",p=t.body||t.data,f=l.headers=t.headers||{},g=!!t.sync,v=!1,m={body:void 0,headers:{},statusCode:0,method:h,url:u,rawRequest:l};if("json"in t&&!1!==t.json&&(v=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),p=JSON.stringify(!0===t.json?p:t.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(r,0)},l.onload=r,l.onerror=o,l.onprogress=function(){},l.onabort=function(){c=!0},l.ontimeout=o,l.open(h,u,!g,t.username,t.password),g||(l.withCredentials=!!t.withCredentials),!g&&t.timeout>0&&(d=setTimeout(function(){if(!c){c=!0,l.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",o(t)}},t.timeout)),l.setRequestHeader)for(s in f)f.hasOwnProperty(s)&&l.setRequestHeader(s,f[s]);else if(t.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(l.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(l),l.send(p||null),l}t.exports=a,t.exports.default=a,a.XMLHttpRequest=i.XMLHttpRequest||function(){},a.XDomainRequest="withCredentials"in new a.XMLHttpRequest?a.XMLHttpRequest:i.XDomainRequest,function(t,e){for(var n=0;n<t.length;n++)e(t[n])}(["get","put","post","patch","head","delete"],function(t){a["delete"===t?"del":t]=function(e,n,i){return(n=s(e,n,i)).method=t.toUpperCase(),c(n)}})},"GE+h":function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},K4wu:function(t,e,n){var i=n("vgmO"),o=t.exports={WebVTT:n("0CxO"),VTTCue:n("sDzi"),VTTRegion:n("+X0y")};i.vttjs=o,i.WebVTT=o.WebVTT;var r=o.VTTCue,s=o.VTTRegion,a=i.VTTCue,c=i.VTTRegion;o.shim=function(){i.VTTCue=r,i.VTTRegion=s},o.restore=function(){i.VTTCue=a,i.VTTRegion=c},i.VTTCue||o.shim()},QPJ2:function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},R3rJ:function(t,e,n){"use strict";n.r(e),n.d(e,"VideoWatchModule",function(){return Yi});var i=n("sWvm"),o=n("P8w3"),r=n("xMQD"),s=n("HIM4"),a=n("6maM"),c=n("5rWp"),l=n("h3Oa"),d=n("ix8N"),u=n("JEFd"),h=n("SZgj"),p=n("GeT4"),f=n("ofXK"),g=n("sKkf"),v=n("LRne"),m=n("lJxs"),b=n("eIep"),y=n("ey9i"),_=n("fXoL");let C=(()=>{class t{constructor(t,e,n,i){this.videos=t,this.searchService=e,this.userService=n,this.serverService=i,this.pageSize=5,this.config=this.serverService.getTmpConfig(),this.serverService.getConfig().subscribe(t=>this.config=t)}getRecommendations(t){return this.fetchPage(1,t).pipe(Object(m.a)(e=>e.filter(e=>e.uuid!==t.uuid).slice(0,this.pageSize)))}fetchPage(t,e){const n={currentPage:t,itemsPerPage:this.pageSize+1},i=this.videos.getVideos({videoPagination:n,sort:"-createdAt"}).pipe(Object(m.a)(t=>t.data)),o=e.tags,r=this.config.search.searchIndex;return!o||0===o.length||!0===r.enabled&&!0===r.disableLocalSearch?i:this.userService.getAnonymousOrLoggedUser().pipe(Object(m.a)(t=>({search:"",componentPagination:n,advancedSearch:new g.a({tagsOneOf:e.tags.join(","),sort:"-createdAt",searchTarget:"local",nsfw:t.nsfwPolicy?this.videos.nsfwPolicyToParam(t.nsfwPolicy):void 0})})),Object(b.a)(t=>this.searchService.searchVideos(t)),Object(m.a)(t=>t.data),Object(b.a)(t=>t.length<=1?i:Object(v.a)(t)))}}return t.\u0275fac=function(e){return new(e||t)(_.hc(r.s),_.hc(g.b),_.hc(y.D),_.hc(y.x))},t.\u0275prov=_.Mb({token:t,factory:t.\u0275fac}),t})();var P=n("jtHE"),T=n("IzEk"),O=n("UXun");let M=(()=>{class t{constructor(t){this.recommendations=t,this.requestsForLoad$$=new P.a(1),this.recommendations$=this.requestsForLoad$$.pipe(Object(b.a)(t=>this.recommendations.getRecommendations(t).pipe(Object(T.a)(1))),Object(O.a)()),this.hasRecommendations$=this.recommendations$.pipe(Object(m.a)(t=>t.length>0))}requestNewRecommendations(t){this.requestsForLoad$$.next(t)}}return t.\u0275fac=function(e){return new(e||t)(_.hc(C))},t.\u0275prov=_.Mb({token:t,factory:t.\u0275fac}),t})(),k=(()=>{class t{}return t.\u0275mod=_.Ob({type:t}),t.\u0275inj=_.Nb({factory:function(e){return new(e||t)},providers:[M,C],imports:[[f.c,r.h,g.c,h.a,u.b,i.c]]}),t})();var w=n("tyNb"),x=n("Phsq"),E=n("mrSG"),S=n("yl57"),I=n("cp0P"),j=n("JIr8"),R=n("ihI+"),D=n("dubb"),L=n("6rF9"),V=n("YpOa"),A=n("YbNa"),N=n("Trnl"),B=(n("cmjK"),n("7zRj")),z=n.n(B),W=n("x3Ew"),F=n.n(W);function H(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var U=1,$=function(){return U++},K=F.a.dom||F.a,q=F.a.registerPlugin||F.a.plugin,X=F.a.getComponent("Component"),Q=function(t){function e(e,n){var i;i=t.call(this,e,n)||this;var o=e.$(".vjs-tech");return o.setAttribute("aria-labelledby",i.title.id),o.setAttribute("aria-describedby",i.description.id),i}H(e,t);var n=e.prototype;return n.createEl=function(){var e=K.createEl("div",{className:"vjs-dock-title",title:this.options_.title,innerHTML:this.options_.title},{id:"vjs-dock-title-"+$()}),n=K.createEl("div",{className:"vjs-dock-description",title:this.options_.description,innerHTML:this.options_.description},{id:"vjs-dock-description-"+$()}),i=t.prototype.createEl.call(this,"div",{className:"vjs-dock-text"});return this.title=e,this.description=n,i.appendChild(e),i.appendChild(n),i},n.update=function(t,e){this.title.innerHTML="",this.description.innerHTML="",this.title.appendChild(z.a.createTextNode(t)),this.description.appendChild(z.a.createTextNode(e))},e}(X),G=function(t){function e(){return t.apply(this,arguments)||this}return H(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-dock-shelf"})},e}(X);F.a.registerComponent("Title",Q),F.a.registerComponent("Shelf",G);var Y=function(t){var e=t||{},n={title:{title:e.title||"",description:e.description||""}},i=this.title,o=this.shelf;this.addClass("vjs-dock");var r=this.children().indexOf(this.getChild("bigPlayButton")),s=r>0?r-1:null;o||(o=this.shelf=this.addChild("shelf",n,s)),i?i.update(n.title.title,n.title.description):i=this.title=this.addChild("title",n.title,s),this.one(i,"dispose",function(){this.title=null}),this.one(o,"dispose",function(){this.shelf=null})};Y.VERSION="2.1.4",q("dock",Y);var J=n("vgmO"),Z=n.n(J);function tt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var et=function(t){function e(){return t.apply(this,arguments)||this}return tt(e,t),e.prototype.handleClick=function(e){var n=this;t.prototype.handleClick.call(this),this.options_.listener(),Z.a.setTimeout(function(){n.player().contextmenuUI.menu.dispose()},1)},e}(F.a.getComponent("MenuItem")),nt=F.a.getComponent("Menu"),it=F.a.dom||F.a,ot=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).dispose=F.a.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(i),i.dispose),n.content.forEach(function(t){var n=function(){};"function"==typeof t.listener?n=t.listener:"string"==typeof t.href&&(n=function(){return Z.a.open(t.href)}),i.addItem(new et(e,{label:t.label,listener:F.a.bind(e,n)}))}),i}return tt(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this);return it.addClass(e,"vjs-contextmenu-ui-menu"),e.style.left=this.options_.position.left+"px",e.style.top=this.options_.position.top+"px",e},e}(nt),rt="5.2.0";function st(t){return t.hasOwnProperty("contextmenuUI")&&t.contextmenuUI.hasOwnProperty("menu")&&t.contextmenuUI.menu.el()}function at(t){var e=t.tagName.toLowerCase();return"input"===e||"textarea"===e}function ct(t){var e,n,i,o,r,s,a,c,l,d,u,h=this;if(st(this))this.contextmenuUI.menu.dispose();else if(!this.contextmenuUI.options_.excludeElements(t.target)){var p=(o=t,r={},s=function(t){var e;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};var n=z.a.documentElement,i=z.a.body,o=e.top+(Z.a.pageYOffset||i.scrollTop)-(n.clientTop||i.clientTop||0);return{left:Math.round(e.left+(Z.a.pageXOffset||i.scrollLeft)-(n.clientLeft||i.clientLeft||0)),top:Math.round(o)}}(i=this.el()),a=i.offsetWidth,c=i.offsetHeight,l=s.left,d=o.pageY,u=o.pageX,o.changedTouches&&(u=o.changedTouches[0].pageX,d=o.changedTouches[0].pageY),r.y=Math.max(0,Math.min(1,(s.top-d+c)/c)),r.x=Math.max(0,Math.min(1,(u-l)/a)),e=r,n=this.el().getBoundingClientRect(),{left:Math.round(n.width*e.x),top:Math.round(n.height-n.height*e.y)}),f=F.a.browser.IS_FIREFOX?z.a.documentElement:z.a;t.preventDefault();var g=this.contextmenuUI.menu=new ot(this,{content:this.contextmenuUI.content,position:p});this.contextmenuUI.closeMenu=function(){F.a.log.warn("player.contextmenuUI.closeMenu() is deprecated, please use player.contextmenuUI.menu.dispose() instead!"),g.dispose()},g.on("dispose",function(){F.a.off(f,["click","tap"],g.dispose),h.removeChild(g),delete h.contextmenuUI.menu}),this.addChild(g);var v=g.el_.getBoundingClientRect(),m=z.a.body.getBoundingClientRect();(this.contextmenuUI.keepInside||v.right>m.width||v.bottom>m.height)&&(g.el_.style.left=Math.floor(Math.min(p.left,this.player_.currentWidth()-g.currentWidth()))+"px",g.el_.style.top=Math.floor(Math.min(p.top,this.player_.currentHeight()-g.currentHeight()))+"px"),F.a.on(f,["click","tap"],g.dispose)}}function lt(t){var e=this;if(t=F.a.mergeOptions({keepInside:!0,excludeElements:at},t),!Array.isArray(t.content))throw new Error('"content" required');st(this)&&(this.contextmenuUI.menu.dispose(),this.off("contextmenu",this.contextmenuUI.onContextMenu),delete this.contextmenuUI);var n=this.contextmenuUI=function(){lt.apply(this,arguments)};n.onContextMenu=F.a.bind(this,ct),n.content=t.content,n.keepInside=t.keepInside,n.options_=t,n.VERSION=rt,this.on("contextmenu",n.onContextMenu),this.ready(function(){return e.addClass("vjs-contextmenu-ui")})}function dt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}F.a.registerPlugin("contextmenuUI",lt),lt.VERSION=rt;var ut=function t(e){var n=this;if(F.a.browser.IS_IE8)for(var i in n=z.a.createElement("custom"),t.prototype)"constructor"!==i&&(n[i]=t.prototype[i]);return n.id=e.id,n.label=n.id,n.width=e.width,n.height=e.height,n.bitrate=e.bandwidth,n.enabled_=e.enabled,Object.defineProperty(n,"enabled",{get:function(){return n.enabled_()},set:function(t){n.enabled_(t)}}),n},ht=function(t){var e,n;function i(){var e,n=dt(dt(e=t.call(this)||this));if(F.a.browser.IS_IE8)for(var o in n=z.a.createElement("custom"),i.prototype)"constructor"!==o&&(n[o]=i.prototype[o]);return n.levels_=[],n.selectedIndex_=-1,Object.defineProperty(n,"selectedIndex",{get:function(){return n.selectedIndex_}}),Object.defineProperty(n,"length",{get:function(){return n.levels_.length}}),n||dt(e)}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var o=i.prototype;return o.addQualityLevel=function(t){var e=this.getQualityLevelById(t.id);if(e)return e;var n=this.levels_.length;return e=new ut(t),""+n in this||Object.defineProperty(this,n,{get:function(){return this.levels_[n]}}),this.levels_.push(e),this.trigger({qualityLevel:e,type:"addqualitylevel"}),e},o.removeQualityLevel=function(t){for(var e=null,n=0,i=this.length;n<i;n++)if(this[n]===t){e=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return e&&this.trigger({qualityLevel:t,type:"removequalitylevel"}),e},o.getQualityLevelById=function(t){for(var e=0,n=this.length;e<n;e++){var i=this[e];if(i.id===t)return i}return null},o.dispose=function(){this.selectedIndex_=-1,this.levels_.length=0},i}(F.a.EventTarget);for(var pt in ht.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"},ht.prototype.allowedEvents_)ht.prototype["on"+pt]=null;var ft="2.0.9",gt=function(t){return e=this,F.a.mergeOptions({},t),n=e.qualityLevels,i=new ht,e.on("dispose",function t(){i.dispose(),e.qualityLevels=n,e.off("dispose",t)}),e.qualityLevels=function(){return i},e.qualityLevels.VERSION=ft,i;var e,n,i};(F.a.registerPlugin||F.a.plugin)("qualityLevels",gt),gt.VERSION=ft;const vt=F.a.getComponent("Component");F.a.registerComponent("EndCard",class extends vt{constructor(t,e){super(t,e),this.dashOffsetTotal=586,this.dashOffsetStart=293,this.interval=50,this.upNextEvents=new F.a.EventTarget,this.ticks=0,this.totalTicks=this.options_.timeout/this.interval,t.on("ended",e=>{this.options_.condition()&&(t.addClass("vjs-upnext--showing"),this.showCard(e=>{t.removeClass("vjs-upnext--showing"),this.container.style.display="none",e||this.options_.next()}))}),t.on("playing",()=>{this.upNextEvents.trigger("playing")})}createEl(){const t=super.createEl("div",{className:"vjs-upnext-content",innerHTML:(e=this.options_,`\n    <div class="vjs-upnext-top">\n      <span class="vjs-upnext-headtext">${e.headText}</span>\n      <div class="vjs-upnext-title"></div>\n    </div>\n    <div class="vjs-upnext-autoplay-icon">\n      <svg height="100%" version="1.1" viewbox="0 0 98 98" width="100%">\n        <circle class="vjs-upnext-svg-autoplay-circle" cx="49" cy="49" fill="#000" fill-opacity="0.8" r="48"></circle>\n        <circle class="vjs-upnext-svg-autoplay-ring" cx="-49" cy="49" fill-opacity="0" r="46.5" stroke="#FFFFFF" stroke-width="4" transform="rotate(-90)"></circle>\n        <polygon class="vjs-upnext-svg-autoplay-triangle" fill="#fff" points="32,27 72,49 32,71"></polygon></svg>\n    </div>\n    <span class="vjs-upnext-bottom">\n      <span class="vjs-upnext-cancel">\n        <button class="vjs-upnext-cancel-button" tabindex="0" aria-label="Cancel autoplay">${e.cancelText}</button>\n      </span>\n      <span class="vjs-upnext-suspended">${e.suspendedText}</span>\n    </span>\n  `)});var e;return this.container=t,t.style.display="none",this.autoplayRing=t.getElementsByClassName("vjs-upnext-svg-autoplay-ring")[0],this.title=t.getElementsByClassName("vjs-upnext-title")[0],this.cancelButton=t.getElementsByClassName("vjs-upnext-cancel-button")[0],this.suspendedMessage=t.getElementsByClassName("vjs-upnext-suspended")[0],this.nextButton=t.getElementsByClassName("vjs-upnext-autoplay-icon")[0],this.cancelButton.onclick=()=>{this.upNextEvents.trigger("cancel")},this.nextButton.onclick=()=>{this.upNextEvents.trigger("next")},t}showCard(t){let e;this.autoplayRing.setAttribute("stroke-dasharray",""+this.dashOffsetStart),this.autoplayRing.setAttribute("stroke-dashoffset",""+-this.dashOffsetStart),this.title.innerHTML=this.options_.getTitle(),this.upNextEvents.one("cancel",()=>{clearTimeout(e),t(!0)}),this.upNextEvents.one("playing",()=>{clearTimeout(e),t(!0)}),this.upNextEvents.one("next",()=>{clearTimeout(e),t(!1)});const n=t=>{const e=Math.max(-this.dashOffsetTotal,-this.dashOffsetStart-t*this.dashOffsetTotal/2/100);this.autoplayRing.setAttribute("stroke-dashoffset",""+e)},i=()=>{n(100*this.ticks++/this.totalTicks)},o=()=>{this.options_.suspended()?(this.suspendedMessage.innerText=this.options_.suspendedText,n(0),this.ticks=0,e=setTimeout(o.bind(this),300)):this.ticks>=this.totalTicks?(clearTimeout(e),t(!1)):(this.suspendedMessage.innerText="",i(),e=setTimeout(o.bind(this),this.interval))};this.container.style.display="block",e=setTimeout(o.bind(this),this.interval)}});const mt=F.a.getPlugin("plugin");F.a.registerPlugin("upnext",class extends mt{constructor(t,e={}){const n={next:e.next,getTitle:e.getTitle,timeout:e.timeout||5e3,cancelText:e.cancelText||"Cancel",headText:e.headText||"Up Next",suspendedText:e.suspendedText||"Autoplay is suspended",condition:e.condition,suspended:e.suspended};super(t),this.player.ready(()=>{t.addClass("vjs-upnext")}),t.addChild("EndCard",n)}});const bt=F.a.getComponent("Component");F.a.registerComponent("PauseBezel",class extends bt{constructor(t,e){super(t,e),t.on("pause",e=>{t.seeking()||t.ended()||(this.container.innerHTML='\n  <div class="vjs-bezels-pause">\n    <div class="vjs-bezel" role="status" aria-label="Pause">\n      <div class="vjs-bezel-icon">\n        <svg height="100%" version="1.1" viewBox="0 0 36 36" width="100%">\n          <use class="vjs-svg-shadow" xlink:href="#vjs-id-1"></use>\n          <path class="vjs-svg-fill" d="M 12,26 16,26 16,10 12,10 z M 21,26 25,26 25,10 21,10 z" id="vjs-id-1"></path>\n        </svg>\n      </div>\n    </div>\n  </div>\n  ',this.showBezel())}),t.on("play",e=>{t.seeking()||(this.container.innerHTML='\n  <div class="vjs-bezels-play">\n    <div class="vjs-bezel" role="status" aria-label="Play">\n      <div class="vjs-bezel-icon">\n        <svg height="100%" version="1.1" viewBox="0 0 36 36" width="100%">\n          <use class="vjs-svg-shadow" xlink:href="#vjs-id-2"></use>\n          <path class="vjs-svg-fill" d="M 12,26 18.5,22 18.5,14 12,10 z M 18.5,22 25,18 25,18 18.5,14 z" id="ytp-id-2"></path>\n        </svg>\n      </div>\n    </div>\n  </div>\n  ',this.showBezel())})}createEl(){return this.container=super.createEl("div",{className:"vjs-bezels-content"}),this.container.style.display="none",this.container}showBezel(){this.container.style.display="inherit",setTimeout(()=>{this.container.style.display="none"},500)}});const yt=F.a.getPlugin("plugin");F.a.registerPlugin("bezels",class extends yt{constructor(t,e){super(t),this.player.ready(()=>{t.addClass("vjs-bezels")}),t.addChild("PauseBezel",e)}});var _t=n("H9+z");const Ct=F.a.getComponent("MenuItem"),Pt=F.a.getComponent("Component");class Tt extends Ct{constructor(t,e){super(t,e),this.settingsButton=e.menuButton,this.dialog=this.settingsButton.dialog,this.mainMenu=this.settingsButton.menu,this.panel=this.dialog.getChild("settingsPanel"),this.panelChild=this.panel.getChild("settingsPanelChild"),this.panelChildEl=this.panelChild.el(),this.size=null,this.menuToLoad="mainmenu";const n=Object(_t.l)(e.entry),i=F.a.getComponent(n);if(!i)throw new Error(`Component ${n} does not exist`);const o=Object.assign({},e,{entry:e.menuButton,menuButton:this});this.subMenu=new i(this.player(),o);const r=this.subMenu.buildCSSClass().split(" ")[0];this.settingsSubMenuEl_.className+=" "+r,this.eventHandlers(),t.ready(()=>{setTimeout(()=>{this.player_&&(this.build(),t.on("ratechange",this.submenuClickHandler),"CaptionsButton"===n&&t.on("captionsChanged",()=>{setTimeout(()=>{this.settingsSubMenuEl_.innerHTML="",this.settingsSubMenuEl_.appendChild(this.subMenu.menu.el()),this.update(),this.bindClickEvents()},0)}),this.reset())},0)})}eventHandlers(){this.submenuClickHandler=this.onSubmenuClick.bind(this),this.transitionEndHandler=this.onTransitionEnd.bind(this)}onSubmenuClick(t){let e=null;e="tap"===t.type?t.target:t.currentTarget,e&&e.classList.contains("vjs-back-button")?this.loadMainMenu():(setTimeout(()=>this.update(t),0),this.subMenu.menu.removeClass("vjs-hidden"))}createEl(){const t=F.a.dom.createEl("li",{className:"vjs-menu-item"});return this.settingsSubMenuTitleEl_=F.a.dom.createEl("div",{className:"vjs-settings-sub-menu-title"}),t.appendChild(this.settingsSubMenuTitleEl_),this.settingsSubMenuValueEl_=F.a.dom.createEl("div",{className:"vjs-settings-sub-menu-value"}),t.appendChild(this.settingsSubMenuValueEl_),this.settingsSubMenuEl_=F.a.dom.createEl("div",{className:"vjs-settings-sub-menu"}),t}handleClick(t){this.menuToLoad="submenu",F.a.dom.removeClass(this.el(),"open"),super.handleClick(t),this.mainMenu.el().style.opacity="0",F.a.dom.hasClass(this.settingsSubMenuEl_,"vjs-hidden")?(F.a.dom.removeClass(this.settingsSubMenuEl_,"vjs-hidden"),setTimeout(()=>{this.settingsSubMenuEl_.style.opacity="1",this.settingsSubMenuEl_.style.marginRight="0px"},0),this.settingsButton.setDialogSize(this.size)):F.a.dom.addClass(this.settingsSubMenuEl_,"vjs-hidden")}createBackButton(){const t=this.subMenu.menu.addChild("MenuItem",{},0);t.addClass("vjs-back-button"),t.el().innerHTML=this.player().localize(this.subMenu.controlText())}PrefixedEvent(t,e,n,i="addEvent"){const o=["webkit","moz","MS","o",""];for(let r=0;r<o.length;r++)o[r]||(e=e.toLowerCase()),"addEvent"===i?t.addEventListener(o[r]+e,n,!1):"removeEvent"===i&&t.removeEventListener(o[r]+e,n,!1)}onTransitionEnd(t){"margin-right"===t.propertyName&&"mainmenu"===this.menuToLoad&&(F.a.dom.addClass(this.settingsSubMenuEl_,"vjs-hidden"),this.settingsSubMenuEl_.style.opacity="0")}reset(){F.a.dom.addClass(this.settingsSubMenuEl_,"vjs-hidden"),this.settingsSubMenuEl_.style.opacity="0",this.setMargin()}loadMainMenu(){const t=this.mainMenu.el();this.menuToLoad="mainmenu",this.mainMenu.show(),t.style.opacity="0";const e=this.mainMenu;this.settingsButton.setDialogSize([e.width,e.height]),setTimeout(()=>{this.setMargin(),t.style.opacity="1"},0)}build(){this.subMenu.on("updateLabel",()=>{this.update()}),this.subMenu.on("menuChanged",()=>{this.bindClickEvents(),this.setSize(),this.update()}),this.settingsSubMenuTitleEl_.innerHTML=this.player().localize(this.subMenu.controlText()),this.settingsSubMenuEl_.appendChild(this.subMenu.menu.el()),this.panelChildEl.appendChild(this.settingsSubMenuEl_),this.update(),this.createBackButton(),this.setSize(),this.bindClickEvents(),this.PrefixedEvent(this.settingsSubMenuEl_,"TransitionEnd",this.transitionEndHandler,"addEvent")}update(t){let e=null;const n=this.subMenu.name();if(t&&"tap"===t.type?e=t.target:t&&(e=t.currentTarget),"PlaybackRateMenuButton"===n){const t=this.subMenu.labelEl_.innerHTML;setTimeout(()=>this.settingsSubMenuValueEl_.innerHTML=t,250)}else for(const i of this.subMenu.menu.children_)if(i instanceof Pt&&i.hasClass("vjs-selected")){const t=i;if("function"==typeof t.getLabel){this.settingsSubMenuValueEl_.innerHTML=t.getLabel();break}this.settingsSubMenuValueEl_.innerHTML=t.options_.label}e&&!e.classList.contains("vjs-back-button")&&this.settingsButton.hideDialog()}bindClickEvents(){for(const t of this.subMenu.menu.children())t instanceof Pt&&t.on(["tap","click"],this.submenuClickHandler)}setSize(){this.dialog.removeClass("vjs-hidden"),F.a.dom.removeClass(this.settingsSubMenuEl_,"vjs-hidden"),this.size=this.settingsButton.getComponentSize(this.settingsSubMenuEl_),this.setMargin(),this.dialog.addClass("vjs-hidden"),F.a.dom.addClass(this.settingsSubMenuEl_,"vjs-hidden")}setMargin(){if(!this.size)return;const[t]=this.size;this.settingsSubMenuEl_.style.marginRight=`-${t}px`}hideSubMenu(){this.el()&&F.a.dom.hasClass(this.el(),"open")&&(F.a.dom.addClass(this.settingsSubMenuEl_,"vjs-hidden"),F.a.dom.removeClass(this.el(),"open"))}}Tt.prototype.contentElType="button",F.a.registerComponent("SettingsMenuItem",Tt);const Ot=F.a.getComponent("Button"),Mt=F.a.getComponent("Menu"),kt=F.a.getComponent("Component");kt.registerComponent("SettingsButton",class extends Ot{constructor(t,e){super(t,e),this.settingsButtonOptions=e,this.controlText("Settings"),this.dialog=this.player().addChild("settingsDialog"),this.dialogEl=this.dialog.el(),this.menu=null,this.panel=this.dialog.addChild("settingsPanel"),this.panelChild=this.panel.addChild("settingsPanelChild"),this.addClass("vjs-settings"),this.el().setAttribute("aria-label","Settings Button"),this.addSettingsItemHandler=this.onAddSettingsItem.bind(this),this.disposeSettingsItemHandler=this.onDisposeSettingsItem.bind(this),this.playerClickHandler=this.onPlayerClick.bind(this),this.userInactiveHandler=this.onUserInactive.bind(this),this.buildMenu(),this.bindEvents(),this.player().one("play",()=>this.hideDialog())}onPlayerClick(t){const e=t.target;e.classList.contains("vjs-settings")||e.parentElement.classList.contains("vjs-settings")||this.dialog.hasClass("vjs-hidden")||this.hideDialog()}onDisposeSettingsItem(t,e){if(void 0===e){const t=this.menu.children();for(;t.length>0;)t[0].dispose(),this.menu.removeChild(t[0]);this.addClass("vjs-hidden")}else{const t=this.menu.getChild(e);t&&(t.dispose(),this.menu.removeChild(t))}this.hideDialog(),0===this.settingsButtonOptions.entries.length&&this.addClass("vjs-hidden")}onAddSettingsItem(t,e){const[n,i]=e;this.addMenuItem(n,i),this.removeClass("vjs-hidden")}onUserInactive(){this.dialog.hasClass("vjs-hidden")||this.hideDialog()}bindEvents(){this.player().on("click",this.playerClickHandler),this.player().on("addsettingsitem",this.addSettingsItemHandler),this.player().on("disposesettingsitem",this.disposeSettingsItemHandler),this.player().on("userinactive",this.userInactiveHandler)}buildCSSClass(){return`vjs-icon-settings ${super.buildCSSClass()}`}handleClick(){this.dialog.hasClass("vjs-hidden")?this.showDialog():this.hideDialog()}showDialog(){this.player().peertube().onMenuOpen(),this.menu.el().style.opacity="1",this.dialog.show(),this.setDialogSize(this.getComponentSize(this.menu))}hideDialog(){this.player_.peertube().onMenuClosed(),this.dialog.hide(),this.setDialogSize(this.getComponentSize(this.menu)),this.menu.el().style.opacity="1",this.resetChildren()}getComponentSize(t){let e=null,n=null;if(t instanceof kt){const i=t.el();e=i.offsetWidth,n=i.offsetHeight,t.width=e,t.height=n}else e=t.offsetWidth,n=t.offsetHeight;return[e,n]}setDialogSize([t,e]){if("number"!=typeof e)return;const n=this.settingsButtonOptions.setup.maxHeightOffset,i=this.player().el().offsetHeight-n,o=this.panel.el();e>i?(t+=17,o.style.maxHeight=`${e=i}px`):""!==o.style.maxHeight&&(o.style.maxHeight=""),this.dialogEl.style.width=`${t}px`,this.dialogEl.style.height=`${e}px`}buildMenu(){this.menu=new Mt(this.player()),this.menu.addClass("vjs-main-menu");const t=this.settingsButtonOptions.entries;if(0===t.length)return this.addClass("vjs-hidden"),void this.panelChild.addChild(this.menu);for(const e of t)this.addMenuItem(e,this.settingsButtonOptions);this.panelChild.addChild(this.menu)}addMenuItem(t,e){e.name=Object(_t.l)(t);const n=Object.assign({},e,{entry:t,menuButton:this}),i=new Tt(this.player(),n);this.menu.addChild(i),i.on("click",F.a.bind(this,this.hideChildren)),i.on("click",function(){F.a.dom.hasClass(this.el_,"open")?F.a.dom.removeClass(this.el_,"open"):F.a.dom.addClass(this.el_,"open")})}resetChildren(){for(const t of this.menu.children())t.reset()}hideChildren(){for(const t of this.menu.children())t.hideSubMenu()}});const wt=F.a.getPlugin("plugin");F.a.registerPlugin("peertube",class extends wt{constructor(t,e){super(t),this.CONSTANTS={USER_WATCHING_VIDEO_INTERVAL:5e3},this.menuOpened=!1,this.mouseInControlBar=!1,this.videoViewUrl=e.videoViewUrl,this.videoDuration=e.videoDuration,this.videoCaptions=e.videoCaptions,this.isLive=e.isLive,this.savedInactivityTimeout=t.options_.inactivityTimeout,e.autoplay&&this.player.addClass("vjs-has-autoplay"),this.player.on("autoplay-failure",()=>{this.player.removeClass("vjs-has-autoplay")}),this.player.ready(()=>{const t=this.player.options_;"webtorrent"===e.mode&&(this.player.webtorrent().on("resolutionChange",(t,e)=>this.handleResolutionChange(e)),this.player.webtorrent().on("autoResolutionChange",(t,e)=>this.trigger("autoResolutionChange",e))),"p2p-media-loader"===e.mode&&this.player.p2pMediaLoader().on("resolutionChange",(t,e)=>this.handleResolutionChange(e));const n=Object(N.e)();this.player.tech(!0).on("loadedqualitydata",()=>{setTimeout(()=>{this.lastResolutionChange&&n&&"auto"!==n&&(this.lastResolutionChange.auto=!1,this.lastResolutionChange.resolutionId=parseInt(n),this.handleResolutionChange(this.lastResolutionChange))},10)});const i=Object(N.g)();void 0!==i&&this.player.volume(i);const o=void 0!==t.muted?t.muted:Object(N.c)();if(void 0!==o&&this.player.muted(o),this.defaultSubtitle=e.subtitle||Object(N.b)(),this.player.on("volumechange",()=>{Object(N.m)(this.player.volume()),Object(N.j)(this.player.muted())}),e.stopTime){const t=Object(_t.k)(e.stopTime),n=this;this.player.on("timeupdate",function e(){n.player.currentTime()>t&&(n.player.pause(),n.player.trigger("stopped"),n.player.off("timeupdate",e))})}this.player.textTracks().on("change",()=>{const t=this.player.textTracks().tracks_.find(t=>"captions"===t.kind&&"showing"===t.mode);t?Object(N.i)(t.language):Object(N.i)("off")}),this.player.on("sourcechange",()=>this.initCaptions()),this.player.duration(e.videoDuration),this.initializePlayer(),this.runViewAdd(),e.userWatching&&this.runUserWatchVideo(e.userWatching)})}dispose(){this.videoViewInterval&&clearInterval(this.videoViewInterval),this.userWatchingVideoInterval&&clearInterval(this.userWatchingVideoInterval)}onMenuOpen(){this.menuOpened=!1,this.alterInactivity()}onMenuClosed(){this.menuOpened=!0,this.alterInactivity()}initializePlayer(){Object(_t.g)()&&this.player.addClass("vjs-is-mobile"),this.initSmoothProgressBar(),this.initCaptions(),this.listenControlBarMouse()}runViewAdd(){this.clearVideoViewInterval();let t=30;!this.isLive&&this.videoDuration<t&&(t=3*this.videoDuration/4);let e=0;this.videoViewInterval=setInterval(()=>{this.player&&!this.player.paused()&&(e+=1,e>t&&(this.isLive?e=0:this.clearVideoViewInterval(),this.addViewToVideo().catch(t=>console.error(t))))},1e3)}runUserWatchVideo(t){let e=0;this.userWatchingVideoInterval=setInterval(()=>{const n=Math.floor(this.player.currentTime());n-e>=1&&(e=n,this.notifyUserIsWatching(n,t.url,t.authorizationHeader).catch(t=>console.error("Cannot notify user is watching.",t)))},this.CONSTANTS.USER_WATCHING_VIDEO_INTERVAL)}clearVideoViewInterval(){void 0!==this.videoViewInterval&&(clearInterval(this.videoViewInterval),this.videoViewInterval=void 0)}addViewToVideo(){return this.videoViewUrl?fetch(this.videoViewUrl,{method:"POST"}):Promise.resolve(void 0)}notifyUserIsWatching(t,e,n){const i=new URLSearchParams;i.append("currentTime",t.toString());const o=new Headers({Authorization:n});return fetch(e,{method:"PUT",body:i,headers:o})}handleResolutionChange(t){this.lastResolutionChange=t,!1===t.auto?Object(N.k)(t.resolutionId.toString()):Object(N.k)("auto");const e=this.player.qualityLevels();for(let n=0;n<e.length;n++)if(e[n].height===t.resolutionId){t.id=e[n].id;break}this.trigger("resolutionChange",t)}listenControlBarMouse(){this.player.controlBar.on("mouseenter",()=>{this.mouseInControlBar=!0,this.alterInactivity()}),this.player.controlBar.on("mouseleave",()=>{this.mouseInControlBar=!1,this.alterInactivity()})}alterInactivity(){this.menuOpened?this.player.options_.inactivityTimeout=this.savedInactivityTimeout:this.mouseInControlBar||this.isTouchEnabled()||(this.player.options_.inactivityTimeout=1)}isTouchEnabled(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}initCaptions(){for(const t of this.videoCaptions)this.player.addRemoteTextTrack({kind:"captions",label:t.label,language:t.language,id:t.language,src:t.src,default:this.defaultSubtitle===t.language},!1);this.player.trigger("captionsChanged")}initSmoothProgressBar(){const t=F.a.getComponent("SeekBar");t.prototype.getPercent=function(){const t=this.player_.currentTime()/this.player_.duration();return t>=1?1:t},t.prototype.handleMouseMove=function(t){let e=this.calculateDistance(t)*this.player_.duration();e===this.player_.duration()&&(e-=.1),this.player_.currentTime(e),this.update()}}});const xt=F.a.getComponent("Button");class Et extends xt{constructor(t,e){super(t,e),this.nextPreviousVideoButtonOptions=e,this.update()}createEl(){const t=this.options_.type,e=F.a.dom.createEl("button",{className:"vjs-"+t+"-video"}),n=F.a.dom.createEl("span",{className:"icon icon-"+t});return e.appendChild(n),e.title=this.player_.localize("next"===t?"Next video":"Previous video"),e}handleClick(){this.nextPreviousVideoButtonOptions.handler()}update(){this.nextPreviousVideoButtonOptions.isDisabled()?this.addClass("vjs-disabled"):this.removeClass("vjs-disabled")}}F.a.registerComponent("NextVideoButton",Et),F.a.registerComponent("PreviousVideoButton",Et);const St=F.a.getComponent("Button");F.a.registerComponent("P2PInfoButton",class extends St{createEl(){const t=F.a.dom.createEl("div",{className:"vjs-peertube"}),e=F.a.dom.createEl("div",{className:"vjs-peertube-hidden"});t.appendChild(e);const n=F.a.dom.createEl("span",{className:"icon icon-download"});e.appendChild(n);const i=F.a.dom.createEl("span",{className:"download-speed-text"}),o=F.a.dom.createEl("span",{className:"download-speed-number"}),r=F.a.dom.createEl("span");i.appendChild(o),i.appendChild(r),e.appendChild(i);const s=F.a.dom.createEl("span",{className:"icon icon-upload"});e.appendChild(s);const a=F.a.dom.createEl("span",{className:"upload-speed-text"}),c=F.a.dom.createEl("span",{className:"upload-speed-number"}),l=F.a.dom.createEl("span");a.appendChild(c),a.appendChild(l),e.appendChild(a);const d=F.a.dom.createEl("span",{className:"peers-text"}),u=F.a.dom.createEl("span",{className:"peers-number"});e.appendChild(u),e.appendChild(d);const h=F.a.dom.createEl("div",{className:"vjs-peertube-hidden"}),p=F.a.dom.createEl("span",{className:"http-fallback",textContent:"HTTP"});return h.appendChild(p),t.appendChild(h),this.player_.on("p2pInfo",(t,n)=>{if(!n)return h.className="vjs-peertube-displayed",void(e.className="vjs-peertube-hidden");const i=n.p2p,s=n.http,a=Object(_t.d)(i.downloadSpeed+s.downloadSpeed),p=Object(_t.d)(i.uploadSpeed+s.uploadSpeed),f=Object(_t.d)(i.downloaded+s.downloaded),g=Object(_t.d)(i.uploaded+s.uploaded),v=i.numPeers;if(e.title=this.player().localize("Total downloaded: ")+f.join(" ")+"\n","p2p-media-loader"===n.source){const t=Object(_t.d)(s.downloaded).join(" "),n=Object(_t.d)(i.downloaded).join(" ");e.title+=" * "+this.player().localize("From servers: ")+t+"\n * "+this.player().localize("From peers: ")+n+"\n"}e.title+=this.player().localize("Total uploaded: ")+g.join(" "),o.textContent=a[0],r.textContent=" "+a[1],c.textContent=p[0],l.textContent=" "+p[1],u.textContent=v.toString(),d.textContent=" "+(v>1?this.player().localize("peers"):this.player_.localize("peer")),h.className="vjs-peertube-hidden",e.className="vjs-peertube-displayed"}),t}});const It=F.a.getComponent("Button");F.a.registerComponent("PeerTubeLinkButton",class extends It{constructor(t,e){super(t,e)}createEl(){return this.buildElement()}updateHref(){this.el().setAttribute("href",Object(_t.b)({startTime:this.player().currentTime()}))}handleClick(){this.player().pause()}buildElement(){const t=F.a.dom.createEl("a",{href:Object(_t.b)(),innerHTML:"PeerTube",title:this.player().localize("Video page (new window)"),className:"vjs-peertube-link",target:"_blank"});return t.addEventListener("mouseenter",()=>this.updateHref()),t}});const jt=F.a.getComponent("Component");jt.registerComponent("PeerTubeLoadProgressBar",class extends jt{constructor(t,e){super(t,e),this.on(t,"progress",this.update)}createEl(){return super.createEl("div",{className:"vjs-load-progress",innerHTML:`<span class="vjs-control-text"><span>${this.localize("Loaded")}</span>: 0%</span>`})}dispose(){super.dispose()}update(){const t=this.player().webtorrent().getTorrent();t&&(this.el().style.width=100*t.progress+"%")}});const Rt=F.a.getComponent("MenuItem");class Dt extends Rt{constructor(t,e){e.selectable=!0,super(t,e),this.autoResolutionPossible=!0,this.currentResolutionLabel="",this.resolutionId=e.id,this.label=e.label,this.labels=e.labels,this.callback=e.callback,t.peertube().on("resolutionChange",(t,e)=>this.updateSelection(e)),-1===this.resolutionId&&t.peertube().on("autoResolutionChange",(t,e)=>this.updateAutoResolution(e))}handleClick(t){!1===this.autoResolutionPossible&&-1===this.resolutionId||(super.handleClick(t),this.callback(this.resolutionId,"video"))}updateSelection(t){-1===this.resolutionId&&(this.currentResolutionLabel=this.labels[t.id]),this.selected(!0!==t.auto?this.resolutionId===t.id:-1===this.resolutionId)}updateAutoResolution(t){!1===t.possible?this.addClass("disabled"):this.removeClass("disabled"),this.autoResolutionPossible=t.possible}getLabel(){return-1===this.resolutionId?this.label+" <small>"+this.currentResolutionLabel+"</small>":this.label}}F.a.registerComponent("ResolutionMenuItem",Dt);const Lt=F.a.getComponent("Menu"),Vt=F.a.getComponent("MenuButton");F.a.registerComponent("ResolutionMenuButton",class extends Vt{constructor(t,e){super(t,e),this.controlText("Quality"),t.tech(!0).on("loadedqualitydata",(t,e)=>this.buildQualities(e)),t.peertube().on("resolutionChange",()=>setTimeout(()=>this.trigger("updateLabel"),0))}createEl(){const t=super.createEl();return this.labelEl_=F.a.dom.createEl("div",{className:"vjs-resolution-value"}),t.appendChild(this.labelEl_),t}updateARIAAttributes(){this.el().setAttribute("aria-label","Quality")}createMenu(){return new Lt(this.player_)}buildCSSClass(){return super.buildCSSClass()+" vjs-resolution-button"}buildWrapperCSSClass(){return"vjs-resolution-control "+super.buildWrapperCSSClass()}addClickListener(t){t.on("click",()=>{const e=this.menu.children();for(const n of e)t!==n&&n.selected(!1)})}buildQualities(t){const e={};t.qualityData.video.sort((t,e)=>t.id>e.id?-1:t.id===e.id?0:1);for(const n of t.qualityData.video){if(-1===n.id)continue;const i="0p"===n.label?this.player().localize("Audio-only"):n.label;this.menu.addChild(new Dt(this.player_,{id:n.id,label:i,selected:n.selected,callback:t.qualitySwitchCallback})),e[n.id]=n.label}this.menu.addChild(new Dt(this.player_,{id:-1,label:this.player_.localize("Auto"),labels:e,callback:t.qualitySwitchCallback,selected:!0}));for(const n of this.menu.children())this.addClickListener(n);this.trigger("menuChanged")}});const At=F.a.getComponent("Component");At.registerComponent("SettingsDialog",class extends At{constructor(t){super(t),this.hide()}createEl(){const t=this.id();return super.createEl("div",{className:"vjs-settings-dialog vjs-modal-overlay",innerHTML:"",tabIndex:-1},{role:"dialog","aria-labelledby":"TTsettingsDialogLabel-"+t,"aria-describedby":"TTsettingsDialogDescription-"+t})}});const Nt=F.a.getComponent("Component");Nt.registerComponent("SettingsPanel",class extends Nt{constructor(t,e){super(t,e)}createEl(){return super.createEl("div",{className:"vjs-settings-panel",innerHTML:"",tabIndex:-1})}});const Bt=F.a.getComponent("Component");Bt.registerComponent("SettingsPanelChild",class extends Bt{constructor(t,e){super(t,e)}createEl(){return super.createEl("div",{className:"vjs-settings-panel-child",innerHTML:"",tabIndex:-1})}});const zt=F.a.getComponent("Button");F.a.registerComponent("TheaterButton",(()=>{class t extends zt{constructor(e,n){super(e,n);const i=Object(N.f)();!0===i&&(this.player().addClass(t.THEATER_MODE_CLASS),this.handleTheaterChange()),this.controlText("Theater mode"),this.player().theaterEnabled=i}buildCSSClass(){return`vjs-theater-control ${super.buildCSSClass()}`}handleTheaterChange(){const t=this.isTheaterEnabled();this.controlText(t?"Normal mode":"Theater mode"),Object(N.l)(t),this.player_.trigger("theaterChange",t)}handleClick(){this.player_.toggleClass(t.THEATER_MODE_CLASS),this.handleTheaterChange()}isTheaterEnabled(){return this.player_.hasClass(t.THEATER_MODE_CLASS)}}return t.THEATER_MODE_CLASS="vjs-theater-enabled",t})());const Wt=F.a.getComponent("ClickableComponent");class Ft extends Wt{constructor(t,e){super(t,e)}createEl(){this.wrapper=super.createEl("div",{className:"vjs-playlist-button",innerHTML:"",tabIndex:-1});const t=super.createEl("div",{className:"vjs-playlist-icon",innerHTML:"",tabIndex:-1});return this.playlistInfoElement=super.createEl("div",{className:"vjs-playlist-info",innerHTML:"",tabIndex:-1}),this.wrapper.appendChild(t),this.wrapper.appendChild(this.playlistInfoElement),this.update(),this.wrapper}update(){const t=this.options_;this.playlistInfoElement.innerHTML=t.getCurrentPosition()+"/"+t.playlist.videosLength,this.wrapper.title=this.player().localize("Playlist: {1}",[t.playlist.displayName])}handleClick(){this.getPlaylistMenu().open()}getPlaylistMenu(){return this.options_.playlistMenu}}F.a.registerComponent("PlaylistButton",Ft);const Ht=F.a.getComponent("Component");class Ut extends Ht{constructor(t,e){super(t,e),this.emitTapEvents(),this.element=e.element,this.on(["click","tap"],()=>this.switchPlaylistItem()),this.on("keydown",t=>this.handleKeyDown(t))}createEl(){const t=this.options_,e=super.createEl("li",{className:"vjs-playlist-menu-item",innerHTML:""});t.element.video||e.classList.add("vjs-disabled");const n=super.createEl("div",{className:"item-position-block"}),i=super.createEl("div",{className:"item-position",innerHTML:t.element.position});return n.appendChild(i),e.appendChild(n),t.element.video?this.buildAvailableVideo(e,n,t):this.buildUnavailableVideo(e),e}setSelected(t){t?this.addClass("vjs-selected"):this.removeClass("vjs-selected")}getElement(){return this.element}buildAvailableVideo(t,e,n){const i=n.element,o=super.createEl("div",{className:"item-player"});e.appendChild(o);const r=super.createEl("img",{src:window.location.origin+i.video.thumbnailPath}),s=super.createEl("div",{className:"info-block"}),a=super.createEl("div",{innerHTML:i.video.name,className:"title"}),c=super.createEl("div",{innerHTML:i.video.channel.displayName,className:"channel"});if(s.appendChild(a),s.appendChild(c),i.startTimestamp||i.stopTimestamp){let t="";i.startTimestamp&&(t+=Object(_t.j)(i.startTimestamp)),i.stopTimestamp&&(t+=" - "+Object(_t.j)(i.stopTimestamp));const e=super.createEl("div",{innerHTML:t,className:"timestamps"});s.append(e)}t.append(r),t.append(s)}buildUnavailableVideo(t){const e=super.createEl("div",{className:"item-unavailable",innerHTML:this.player().localize("Unavailable video")});t.appendChild(e)}handleKeyDown(t){"Space"!==t.code&&"Enter"!==t.code||this.switchPlaylistItem()}switchPlaylistItem(){this.options_.onClicked()}}Ht.registerComponent("PlaylistMenuItem",Ut);const $t=F.a.getComponent("Component");class Kt extends $t{constructor(t,e){super(t,e);const n=this;function i(){n.close()}this.el().addEventListener("mouseenter",()=>{this.player().off("userinactive",i)}),this.el().addEventListener("mouseleave",()=>{this.player().one("userinactive",i)}),this.player().on("click",t=>{let e=t.target;do{if(e.classList.contains("vjs-playlist-menu")||e.classList.contains("vjs-playlist-button"))return;e=e.parentElement}while(e);this.close()})}createEl(){this.menuItems=[];const t=this.getOptions(),e=super.createEl("div",{className:"vjs-playlist-menu",innerHTML:"",tabIndex:-1}),n=super.createEl("div",{className:"header"}),i=super.createEl("div"),o=super.createEl("div",{innerHTML:t.playlist.displayName,className:"title"}),r=t.playlist.videoChannel,s=super.createEl("div",{innerHTML:r?this.player().localize("By {1}",[r.displayName]):"",className:"channel"});i.appendChild(o),i.appendChild(s);const a=super.createEl("div",{className:"cross"});a.addEventListener("click",()=>this.close()),n.appendChild(i),n.appendChild(a);const c=super.createEl("ol");for(const l of t.elements){const t=new Ut(this.player(),{element:l,onClicked:()=>this.onItemClicked(l)});c.appendChild(t.el()),this.menuItems.push(t)}return e.appendChild(n),e.appendChild(c),e}update(){const t=this.getOptions();this.updateSelected(t.getCurrentPosition())}open(){this.player().addClass("playlist-menu-displayed")}close(){this.player().removeClass("playlist-menu-displayed")}updateSelected(t){for(const e of this.menuItems)e.setSelected(e.getElement().position===t)}getOptions(){return this.options_}onItemClicked(t){this.getOptions().onItemClicked(t)}}$t.registerComponent("PlaylistMenu",Kt);const qt=F.a.getPlugin("plugin");F.a.registerPlugin("playlist",class extends qt{constructor(t,e){super(t,e),this.options=e,this.player.ready(()=>{t.addClass("vjs-playlist")}),this.playlistMenu=new Kt(t,e),this.playlistButton=new Ft(t,Object.assign({},e,{playlistMenu:this.playlistMenu})),t.addChild(this.playlistMenu,e),t.addChild(this.playlistButton,e)}updateSelected(){this.playlistMenu.updateSelected(this.options.getCurrentPosition())}});var Xt=n("UozT"),Qt=n("nKAH");class Gt{constructor(t=[]){this.baseUrls=t}removeBySegmentUrl(t){console.log("Removing redundancy of segment URL %s.",t);const e=Object(Qt.dirname)(t);this.baseUrls=this.baseUrls.filter(t=>t!==e&&t!==e+"/")}buildUrl(t){const e=this.baseUrls.length+1,n=this.getRandomInt(e);if(n===e-1)return t;const i=this.baseUrls[n],o=i.endsWith("/")?"":"/";return i+o+Object(Qt.basename)(t)}countBaseUrls(){return this.baseUrls.length}getRandomInt(t){return Math.floor(Math.random()*Math.floor(t))}}function Yt(t){return function(e){return t.buildUrl(e.url)}}var Jt=n("rmSK");function Zt(t,e){let i=te(t);const o=/bytes=(\d+)-(\d+)/;return function r(s,a,c,l=1){return Object(E.a)(this,void 0,void 0,function*(){e&&(yield Object(Jt.d)(1e3));const d=Object(Qt.basename)(s.url),u=(yield i)[d];if(!u&&l>3)throw new Error(`Unknown segment name ${d} in segment validator`);if(!u)return console.log("Refetching sha segments for %s.",d),yield Object(Jt.d)(1e3),i=te(t),void(yield r(s,a,c,l+1));let h,p="";if("string"==typeof u)h=u;else{const t=o.exec(s.range);p=t[1]+"-"+t[2],h=u[p]}if(void 0===h)throw new Error(`Unknown segment name ${d}/${p} in segment validator`);const f=yield function(t){return Object(E.a)(this,void 0,void 0,function*(){if(t)return window.crypto.subtle?window.crypto.subtle.digest("SHA-256",t).then(t=>function(t){if(!t)return"";let e="";const n="0123456789abcdef";return new Uint8Array(t).forEach(t=>e+=n[t>>4]+n[15&t]),e}(t)):(new((yield Promise.all([n.e(4),n.e(25)]).then(n.t.bind(null,"afKu",7))).sha256)).update(Buffer.from(t)).digest("hex")})}(s.data);if(f!==h)throw new Error(`Hashes does not correspond for segment ${d}/${p}(expected: ${h} instead of ${f})`)})}}function te(t){return fetch(t).then(t=>t.json()).catch(t=>(console.error("Cannot get sha256 segments",t),{}))}let ee=(()=>{class t{static getServerTranslations(e,n){const i=t.getLocalePath(e,n);return i?fetch(i+"/server.json").then(t=>t.json()).catch(t=>{console.error("Cannot get server translations",t)}):Promise.resolve(void 0)}static loadLocaleInVideoJS(e,n,i){const o=t.getLocalePath(e,n);if(!o)return Promise.resolve(void 0);let r;r=t.videojsLocaleCache[o]?Promise.resolve(t.videojsLocaleCache[o]):fetch(o+"/player.json").then(t=>t.json()).then(e=>(t.videojsLocaleCache[o]=e,e)).catch(t=>{console.error("Cannot get player translations",t)});const s=Object(Xt.c)(n);return r.then(t=>i.addLanguage(Object(Xt.d)(s),t))}static getLocalePath(t,e){const n=Object(Xt.c)(e);if(Object(Xt.e)(n)&&!Object(Xt.g)(n))return t+"/client/locales/"+n}}return t.videojsLocaleCache={},t})();F.a.getComponent("PlaybackRateMenuButton").prototype.controlText_="Speed";const ne=F.a.getComponent("CaptionsButton");ne.prototype.controlText_="Subtitles/CC",ne.prototype.label_=" ";let ie=(()=>{class t{static initState(){t.alreadyPlayed=!1}static initialize(e,i,o){return Object(E.a)(this,void 0,void 0,function*(){let r;this.onPlayerChange=o,this.playerElementClassName=i.common.playerElement.className,"webtorrent"===e&&(yield Promise.all([n.e(4),n.e(6),n.e(10),n.e(12)]).then(n.bind(null,"ewd/"))),"p2p-media-loader"===e&&([r]=yield Promise.all([Promise.all([n.e(4),n.e(6),n.e(13)]).then(n.t.bind(null,"tlK4",7)),Promise.all([n.e(4),n.e(6),n.e(13),n.e(32)]).then(n.bind(null,"izw0"))]));const s=this.getVideojsOptions(e,i,r);yield ee.loadLocaleInVideoJS(i.common.serverUrl,i.common.language,F.a);const a=this;return new Promise(n=>{F()(i.common.playerElement,s,function(){const o=this;let r=!1;return o.tech(!0).one("error",()=>{r||a.maybeFallbackToWebTorrent(e,o,i),r=!0}),o.one("error",()=>{r||a.maybeFallbackToWebTorrent(e,o,i),r=!0}),o.one("play",()=>{t.alreadyPlayed=!0}),a.addContextMenu(e,o,i.common.embedUrl),o.bezels(),n(o)})})})}static maybeFallbackToWebTorrent(e,i,o){return Object(E.a)(this,void 0,void 0,function*(){if("webtorrent"===e)return;console.log("Fallback to webtorrent.");const r=document.createElement("video");r.className=this.playerElementClassName;let s=o.common.playerElement.parentNode;s||(s=document.getElementById(o.common.playerElement.id).parentNode),s.parentNode.insertBefore(r,s),o.common.playerElement=r,o.common.onPlayerElementChange(r),i.dispose(),yield Promise.all([n.e(4),n.e(6),n.e(10),n.e(12)]).then(n.bind(null,"ewd/"));const a="webtorrent",c=this.getVideojsOptions(a,o),l=this;F()(r,c,function(){l.addContextMenu(a,this,o.common.embedUrl),t.onPlayerChange(this)})})}static getVideojsOptions(e,n,i){const o=n.common,r="p2p-media-loader"===e;let s=this.getAutoPlayValue(o.autoplay),a={};const c={peertube:{mode:e,autoplay:s,videoViewUrl:o.videoViewUrl,videoDuration:o.videoDuration,userWatching:o.userWatching,subtitle:o.subtitle,videoCaptions:o.videoCaptions,stopTime:o.stopTime,isLive:o.isLive}};if(o.playlist&&(c.playlist=o.playlist),!0===o.enableHotkeys&&t.addHotkeysOptions(c),r){const{hlsjs:e}=t.addP2PMediaLoaderOptions(c,n,i);a=e.html5}"webtorrent"===e&&(t.addWebTorrentOptions(c,n),s=!1);const l={html5:a,textTrackSettings:!1,controls:void 0===o.controls||o.controls,loop:void 0!==o.loop&&o.loop,muted:void 0!==o.muted?o.muted:void 0,autoplay:this.getAutoPlayValue(s),poster:o.poster,inactivityTimeout:o.inactivityTimeout,playbackRates:[.5,.75,1,1.25,1.5,2],plugins:c,controlBar:{children:this.getControlBarChildren(e,{captions:o.captions,peertubeLink:o.peertubeLink,theaterButton:o.theaterButton,nextVideo:o.nextVideo,hasNextVideo:o.hasNextVideo,previousVideo:o.previousVideo,hasPreviousVideo:o.hasPreviousVideo})}};return o.language&&!Object(Xt.g)(o.language)&&Object.assign(l,{language:o.language}),l}static addP2PMediaLoaderOptions(t,e,n){const i=e.p2pMediaLoader,o=e.common,r=i.trackerAnnounce.filter(t=>t.startsWith("ws")),s=new Gt(e.p2pMediaLoader.redundancyBaseUrls),a={redundancyUrlManager:s,type:"application/x-mpegURL",startTime:o.startTime,src:i.playlistUrl};let c=!1;navigator&&navigator.connection&&"cellular"===navigator.connection.type&&(console.log("We are on a cellular connection: disabling seeding."),c=!0);const l={loader:{trackerAnnounce:r,segmentValidator:Zt(e.p2pMediaLoader.segmentsSha256Url,e.common.isLive),rtcConfig:Object(_t.e)(),requiredSegmentsPriority:1,segmentUrlBuilder:Yt(s),useP2P:Object(N.d)(),consumeOnly:c},segments:{swarmId:i.playlistUrl}},d={p2pMediaLoader:a,hlsjs:{levelLabelHandler:t=>{const e=Math.min(t.height||0,t.width||0),n=i.videoFiles.find(t=>t.resolution.id===e);if(!n)return t.height;let o=n.resolution.label;return n.fps>=50&&(o+=n.fps),o},html5:{hlsjsConfig:{capLevelToPlayerSize:!0,autoStartLoad:!1,liveSyncDurationCount:5,loader:new n.Engine(l).createLoaderClass()}}}};return Object.assign(t,d),d}static addWebTorrentOptions(t,e){const n=e.common,i=e.webtorrent,o="play"===this.getAutoPlayValue(n.autoplay);Object.assign(t,{webtorrent:{autoplay:o,videoDuration:n.videoDuration,playerElement:n.playerElement,videoFiles:i.videoFiles,startTime:n.startTime}})}static getControlBarChildren(t,e){const n=[],i="webtorrent"===t?"peerTubeLoadProgressBar":"loadProgressBar";n.push("playbackRateMenuButton"),!0===e.captions&&n.push("captionsButton"),n.push("resolutionMenuButton");const o={};return e.previousVideo&&Object.assign(o,{previousVideoButton:{type:"previous",handler:e.previousVideo,isDisabled:()=>!!e.hasPreviousVideo&&!e.hasPreviousVideo()}}),Object.assign(o,{playToggle:{}}),e.nextVideo&&Object.assign(o,{nextVideoButton:{type:"next",handler:e.nextVideo,isDisabled:()=>!!e.hasNextVideo&&!e.hasNextVideo()}}),Object.assign(o,{currentTimeDisplay:{},timeDivider:{},durationDisplay:{},liveDisplay:{},flexibleWidthSpacer:{},progressControl:{children:{seekBar:{children:{[i]:{},mouseTimeDisplay:{},playProgressBar:{}}}}},p2PInfoButton:{},muteToggle:{},volumeControl:{},settingsButton:{setup:{maxHeightOffset:40},entries:n}}),!0===e.peertubeLink&&Object.assign(o,{peerTubeLinkButton:{}}),!0===e.theaterButton&&Object.assign(o,{theaterButton:{}}),Object.assign(o,{fullscreenToggle:{}}),o}static addContextMenu(t,e,n){const i=[{label:e.localize("Copy the video URL"),listener:function(){Object(Jt.a)(Object(_t.b)())}},{label:e.localize("Copy the video URL at the current time"),listener:function(){Object(Jt.a)(Object(_t.b)({startTime:this.currentTime()}))}},{label:e.localize("Copy embed code"),listener:()=>{Object(Jt.a)(Object(_t.c)(n))}}];"webtorrent"===t&&i.push({label:e.localize("Copy magnet URI"),listener:function(){Object(Jt.a)(this.webtorrent().getCurrentVideoFile().magnetUri)}}),e.contextmenuUI({content:i})}static addHotkeysOptions(t){const e=(t,e)=>!(t.ctrlKey||t.altKey||t.metaKey||t.shiftKey||t.key!==e);Object.assign(t,{hotkeys:{skipInitialFocus:!0,enableInactiveFocus:!1,captureDocumentHotkeys:!0,documentHotkeysFocusElementFilter:t=>{const e=t.tagName.toLowerCase();return"content"===t.id||"body"===e||"video"===e},enableVolumeScroll:!1,enableModifiersForNumbers:!1,rewindKey:function(t){return e(t,"ArrowLeft")},forwardKey:function(t){return e(t,"ArrowRight")},fullscreenKey:function(t){return e(t,"f")||!t.altKey&&t.ctrlKey&&"Enter"===t.key},customKeys:{increasePlaybackRateKey:{key:function(t){return e(t,">")},handler:function(t){const e=Math.min(t.playbackRate()+.1,5);t.playbackRate(parseFloat(e.toFixed(2)))}},decreasePlaybackRateKey:{key:function(t){return e(t,"<")},handler:function(t){const e=Math.max(t.playbackRate()-.1,.1);t.playbackRate(parseFloat(e.toFixed(2)))}},frameByFrame:{key:function(t){return e(t,".")},handler:function(t){t.pause(),t.currentTime(t.currentTime()+1/30)}}}}})}static getAutoPlayValue(e){return!0!==e?e:Object(_t.f)()||Object(_t.h)()?!!t.alreadyPlayed&&"play":"play"}}return t.alreadyPlayed=!1,t})();var oe=n("AytR"),re=n("1kSV"),se=n("UkmY");const ae=["modal"];function ce(t,e){if(1&t&&(_.Wb(0,"div",1),_.Wb(1,"h4",2),_.ac(2,3),_.Vb(),_.Wb(3,"my-global-icon",4),_.kc("click",function(){return(0,e.close)()}),_.Vb(),_.Vb(),_.Rb(4,"div",5),_.Wb(5,"div",6),_.Wb(6,"input",7),_.kc("click",function(){return(0,e.close)()})("key.enter",function(){return(0,e.close)()}),_.Vb(),_.Vb()),2&t){const t=_.oc();_.Db(2),_.ec(t.video.account.displayName),_.bc(2),_.Db(2),_.vc("innerHTML",t.videoHTMLSupport,_.Lc)}}let le=(()=>{class t{constructor(t,e){this.markdownService=t,this.modalService=e,this.video=null,this.videoHTMLSupport=""}show(){const t=this.modalService.open(this.modal,{centered:!0});return this.markdownService.enhancedMarkdownToHTML(this.video.support).then(t=>this.videoHTMLSupport=t),t}}return t.\u0275fac=function(e){return new(e||t)(_.Qb(y.j),_.Qb(re.o))},t.\u0275cmp=_.Kb({type:t,selectors:[["my-video-support"]],viewQuery:function(t,e){if(1&t&&_.Xc(ae,3),2&t){let t;_.Hc(t=_.lc())&&(e.modal=t.first)}},inputs:{video:"video"},decls:2,vars:0,consts:function(){let t,e;return t="" + "\ufffd0\ufffd" + " ondersteunen",e="Misschien later",[["modal",""],[1,"modal-header"],[1,"modal-title"],t,["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body",3,"innerHTML"],[1,"modal-footer","inputs"],["type","button","role","button","value",e,1,"action-button","action-button-cancel",3,"click","key.enter"]]},template:function(t,e){1&t&&_.Rc(0,ce,7,2,"ng-template",null,0,_.Sc)},directives:[se.a],styles:[".action-button-cancel[_ngcontent-%COMP%]{margin-right:0!important}"]}),t})();var de=n("UjHu"),ue=n("2Qox");function he(t,e){1&t&&(_.Wb(0,"span",14),_.ac(1,15),_.Vb())}function pe(t,e){1&t&&(_.Wb(0,"span",16),_.ac(1,17),_.Vb())}function fe(t,e){1&t&&(_.Wb(0,"span",18),_.ac(1,19),_.Vb())}function ge(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div",20),_.Wb(1,"my-video-playlist-element-miniature",21),_.kc("elementRemoved",function(e){return _.Kc(t),_.oc(2).onElementRemoved(e)}),_.Vb(),_.Vb()}if(2&t){const t=e.$implicit,n=_.oc(2);_.vc("ngClass","element-"+t.position),_.Db(1),_.vc("playlistElement",t)("playlist",n.playlist)("owned",n.isPlaylistOwned())("playing",n.currentPlaylistPosition===t.position)("accountLink",!1)("position",t.position)("touchScreenEditButton",!0)}}function ve(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div",1),_.kc("nearOfBottom",function(){return _.Kc(t),_.oc().onPlaylistVideosNearOfBottom()}),_.Wb(1,"div",2),_.Wb(2,"div",3),_.Tc(3),_.Rc(4,he,2,0,"span",4),_.Rc(5,pe,2,0,"span",5),_.Rc(6,fe,2,0,"span",6),_.Vb(),_.Wb(7,"div",7),_.Wb(8,"div",8),_.Tc(9),_.Vb(),_.Wb(10,"div",9),_.Wb(11,"span"),_.Tc(12),_.Vb(),_.Wb(13,"span"),_.Tc(14),_.Vb(),_.Vb(),_.Vb(),_.Wb(15,"div",10),_.Wb(16,"my-global-icon",11),_.kc("click",function(){return _.Kc(t),_.oc().switchAutoPlayNextVideoPlaylist()}),_.Vb(),_.Wb(17,"my-global-icon",12),_.kc("click",function(){return _.Kc(t),_.oc().switchLoopPlaylist()}),_.Vb(),_.Vb(),_.Vb(),_.Rc(18,ge,2,8,"div",13),_.Vb()}if(2&t){const t=_.oc();_.vc("autoInit",!0)("onItself",!0),_.Db(3),_.Vc(" ",t.playlist.displayName," "),_.Db(1),_.vc("ngIf",t.isUnlistedPlaylist()),_.Db(1),_.vc("ngIf",t.isPrivatePlaylist()),_.Db(1),_.vc("ngIf",t.isPublicPlaylist()),_.Db(3),_.Uc(t.playlist.ownerBy),_.Db(3),_.Uc(t.currentPlaylistPosition),_.Db(2),_.Uc(t.playlistPagination.totalItems),_.Db(2),_.Ib("active",t.autoPlayNextVideoPlaylist),_.vc("ngbTooltip",t.autoPlayNextVideoPlaylistSwitchText),_.Db(1),_.Ib("active",t.loopPlaylist),_.vc("ngbTooltip",t.loopPlaylistSwitchText),_.Db(1),_.vc("ngForOf",t.playlistElements)}}let me=(()=>{class t{constructor(e,n,i,o,r,s,a){this.userService=e,this.auth=n,this.notifier=i,this.videoPlaylist=o,this.localStorageService=r,this.sessionStorageService=s,this.router=a,this.videoFound=new _.n,this.playlistElements=[],this.playlistPagination={currentPage:1,itemsPerPage:30,totalItems:null},this.autoPlayNextVideoPlaylistSwitchText="",this.loopPlaylistSwitchText="",this.noPlaylistVideos=!1,this.autoPlayNextVideoPlaylist=this.auth.isLoggedIn()?this.auth.getUser().autoPlayNextVideoPlaylist:"false"!==this.localStorageService.getItem(t.LOCAL_STORAGE_AUTO_PLAY_NEXT_VIDEO_PLAYLIST),this.setAutoPlayNextVideoPlaylistSwitchText(),this.loopPlaylist="true"===this.sessionStorageService.getItem(t.SESSION_STORAGE_AUTO_PLAY_NEXT_VIDEO_PLAYLIST),this.setLoopPlaylistSwitchText()}onPlaylistVideosNearOfBottom(t){this.playlistPagination.totalItems<=this.playlistPagination.currentPage*this.playlistPagination.itemsPerPage||(this.playlistPagination.currentPage+=1,this.loadPlaylistElements(this.playlist,!1,t))}onElementRemoved(t){this.playlistElements=this.playlistElements.filter(e=>e.id!==t.id),this.playlistPagination.totalItems--}isPlaylistOwned(){return!0===this.playlist.isLocal&&this.auth.isLoggedIn()&&this.playlist.ownerAccount.name===this.auth.getUser().username}isUnlistedPlaylist(){return 2===this.playlist.privacy.id}isPrivatePlaylist(){return 3===this.playlist.privacy.id}isPublicPlaylist(){return 1===this.playlist.privacy.id}loadPlaylistElements(t,e=!1,n){this.videoPlaylist.getPlaylistVideos(t.uuid,this.playlistPagination).subscribe(({total:t,data:i})=>{this.playlistElements=this.playlistElements.concat(i),this.playlistPagination.totalItems=t;const o=this.playlistElements.find(t=>!!t.video);o?(n&&this.updatePlaylistIndex(n),e&&this.router.navigate([],{queryParams:{start:o.startTimestamp,stop:o.stopTimestamp,playlistPosition:o.position},replaceUrl:!0})):this.noPlaylistVideos=!0})}updatePlaylistIndex(t){if(0!==this.playlistElements.length&&t){for(const e of this.playlistElements)if(e.video&&e.position>=t)return this.currentPlaylistPosition=e.position,this.videoFound.emit(e.video.uuid),void setTimeout(()=>{document.querySelector(".element-"+this.currentPlaylistPosition).scrollIntoView(!1)},0);this.onPlaylistVideosNearOfBottom(t)}}findNextPlaylistVideo(t=this.currentPlaylistPosition){if(this.currentPlaylistPosition>=this.playlistPagination.totalItems){if(!this.loopPlaylist)return;this.currentPlaylistPosition=t=0}const e=this.playlistElements.find(e=>e.position===t);return e&&e.video?e:this.findNextPlaylistVideo(t+1)}navigateToNextPlaylistVideo(){const t=this.findNextPlaylistVideo(this.currentPlaylistPosition+1);t&&this.router.navigate([],{queryParams:{playlistPosition:t.position,start:t.startTimestamp,stop:t.stopTimestamp}})}switchAutoPlayNextVideoPlaylist(){this.autoPlayNextVideoPlaylist=!this.autoPlayNextVideoPlaylist,this.setAutoPlayNextVideoPlaylistSwitchText(),V.a.setItem(t.LOCAL_STORAGE_AUTO_PLAY_NEXT_VIDEO_PLAYLIST,this.autoPlayNextVideoPlaylist.toString()),this.auth.isLoggedIn()&&this.userService.updateMyProfile({autoPlayNextVideoPlaylist:this.autoPlayNextVideoPlaylist}).subscribe(()=>{this.auth.refreshUserInformation()},t=>this.notifier.error(t.message))}switchLoopPlaylist(){this.loopPlaylist=!this.loopPlaylist,this.setLoopPlaylistSwitchText(),V.b.setItem(t.SESSION_STORAGE_AUTO_PLAY_NEXT_VIDEO_PLAYLIST,this.loopPlaylist.toString())}setAutoPlayNextVideoPlaylistSwitchText(){this.autoPlayNextVideoPlaylistSwitchText=this.autoPlayNextVideoPlaylist?"Automatisch afspelen volgende video stoppen":"Automatisch volgende video afspelen"}setLoopPlaylistSwitchText(){this.loopPlaylistSwitchText=this.loopPlaylist?"Stoppen met In lus afspelen van video's uit afspeellijst":"Video's uit afspeellijst in lus afspelen"}}return t.LOCAL_STORAGE_AUTO_PLAY_NEXT_VIDEO_PLAYLIST="auto_play_video_playlist",t.SESSION_STORAGE_AUTO_PLAY_NEXT_VIDEO_PLAYLIST="loop_playlist",t.\u0275fac=function(e){return new(e||t)(_.Qb(y.D),_.Qb(y.a),_.Qb(y.m),_.Qb(h.b),_.Qb(y.h),_.Qb(y.y),_.Qb(w.h))},t.\u0275cmp=_.Kb({type:t,selectors:[["my-video-watch-playlist"]],inputs:{playlist:"playlist"},outputs:{videoFound:"videoFound"},decls:1,vars:1,consts:function(){let t,e,n;return t="Onvermeld",e="Priv\xE9",n="Openbaar",[["class","playlist","myInfiniteScroller","",3,"autoInit","onItself","nearOfBottom",4,"ngIf"],["myInfiniteScroller","",1,"playlist",3,"autoInit","onItself","nearOfBottom"],[1,"playlist-info"],[1,"playlist-display-name"],["class","badge badge-warning",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["class","badge badge-info",4,"ngIf"],[1,"playlist-by-index"],[1,"playlist-by"],[1,"playlist-index"],[1,"playlist-controls"],["iconName","videos","placement","bottom auto","container","body",3,"ngbTooltip","click"],["iconName","repeat","placement","bottom auto","container","body",3,"ngbTooltip","click"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"badge","badge-warning"],t,[1,"badge","badge-danger"],e,[1,"badge","badge-info"],n,[3,"ngClass"],[3,"playlistElement","playlist","owned","playing","accountLink","position","touchScreenEditButton","elementRemoved"]]},template:function(t,e){1&t&&_.Rc(0,ve,19,16,"div",0),2&t&&_.vc("ngIf",e.playlist&&e.currentPlaylistPosition)},directives:[f.n,de.a,se.a,re.D,f.m,f.l,ue.a],styles:['.playlist[_ngcontent-%COMP%]{min-width:200px;max-width:470px;height:66vh;background-color:var(--mainBackgroundColor);overflow-y:auto;border-bottom:1px solid rgba(0,0,0,.1)}.playlist[_ngcontent-%COMP%]   .playlist-info[_ngcontent-%COMP%]{padding:5px 30px;background-color:#e4e4e4}.playlist[_ngcontent-%COMP%]   .playlist-info[_ngcontent-%COMP%]   .playlist-display-name[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin-bottom:5px}.playlist[_ngcontent-%COMP%]   .playlist-info[_ngcontent-%COMP%]   .playlist-by-index[_ngcontent-%COMP%]{color:var(--greyForegroundColor);display:flex}.playlist[_ngcontent-%COMP%]   .playlist-info[_ngcontent-%COMP%]   .playlist-by-index[_ngcontent-%COMP%]   .playlist-by[_ngcontent-%COMP%]{margin-right:5px}.playlist[_ngcontent-%COMP%]   .playlist-info[_ngcontent-%COMP%]   .playlist-by-index[_ngcontent-%COMP%]   .playlist-index[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child:after{content:"/";margin:0 3px}.playlist[_ngcontent-%COMP%]   .playlist-info[_ngcontent-%COMP%]   .playlist-controls[_ngcontent-%COMP%]{display:flex;margin:10px 0}.playlist[_ngcontent-%COMP%]   .playlist-info[_ngcontent-%COMP%]   .playlist-controls[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]:not(:last-child){margin-right:.5rem}.playlist[_ngcontent-%COMP%]   .playlist-info[_ngcontent-%COMP%]   .playlist-controls[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]:not(.active){opacity:.5}.playlist[_ngcontent-%COMP%]   .playlist-info[_ngcontent-%COMP%]   .playlist-controls[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]    {cursor:pointer}.playlist[_ngcontent-%COMP%]   my-video-playlist-element-miniature[_ngcontent-%COMP%]     .video .position{margin-right:0}.playlist[_ngcontent-%COMP%]   my-video-playlist-element-miniature[_ngcontent-%COMP%]     .video .video-info .video-info-name{font-size:15px}.playlist[_ngcontent-%COMP%]   my-video-playlist-element-miniature[_ngcontent-%COMP%]     .fake-thumbnail, .playlist[_ngcontent-%COMP%]   my-video-playlist-element-miniature[_ngcontent-%COMP%]     my-video-thumbnail   .video-thumbnail{width:90px;height:50px}']}),t})();var be=n("4Gki"),ye=n("SecD"),_e=n("mO09"),Ce=n("Dmbs");let Pe=(()=>{class t{constructor(){this.timestampClicked=new _.n}onClick(t){const e=t.target;if(!0!==e.hasAttribute("href"))return;const n=document.createElement("a");if(n.href=e.getAttribute("href"),n.host!==window.location.host)return;const i=new URLSearchParams(n.search);if(!0!==i.has("start"))return;const o=i.get("start").match(new RegExp("(\\d{1,9}["+["h","m","s"].join("")+"])","g")).map(t=>t.includes("h")?3600*parseInt(t,10):t.includes("m")?60*parseInt(t,10):parseInt(t,10)).reduce((t,e)=>t+e);this.timestampClicked.emit(o),t.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_.Lb({type:t,selectors:[["","timestampRouteTransformer",""]],hostBindings:function(t,e){1&t&&_.kc("click",function(t){return e.onClick(t)})},outputs:{timestampClicked:"timestampClicked"}}),t})();var Te=n("XNiG"),Oe=n("38LS"),Me=n("3Pt+");const ke={VALIDATORS:[Me.w.required,Me.w.minLength(1),Me.w.maxLength(3e3)],MESSAGES:{required:"Reactie is vereist.",minlength:"Reactie moet minstens 2 karakters zijn.",maxlength:"Reactie mag niet langer dan 3000 tekens zijn."}};var we=n("9V9r"),xe=n("1lk2"),Ee=n("BLxp"),Se=n("gY50");const Ie=["visitorModal"],je=["emojiModal"],Re=["textarea"];function De(t,e){if(1&t){const t=_.Xb();_.Wb(0,"span"),_.ac(1,14),_.Vb(),_.Wb(2,"ul"),_.Wb(3,"li"),_.Wb(4,"span"),_.ac(5,15),_.Vb(),_.Vb(),_.Wb(6,"li"),_.Wb(7,"span"),_.ac(8,16),_.Vb(),_.Vb(),_.Wb(9,"li"),_.Wb(10,"span"),_.ac(11,17),_.Vb(),_.Vb(),_.Wb(12,"li"),_.Wb(13,"span"),_.ac(14,18),_.Vb(),_.Wb(15,"code"),_.Tc(16,"**"),_.Wb(17,"strong"),_.ac(18,19),_.Vb(),_.Tc(19,"** _"),_.Wb(20,"i"),_.ac(21,20),_.Vb(),_.Tc(22,"_"),_.Vb(),_.Vb(),_.Wb(23,"li"),_.Wb(24,"span"),_.ac(25,21),_.Vb(),_.Wb(26,"code"),_.Tc(27,":) <3"),_.Vb(),_.Vb(),_.Wb(28,"li"),_.Wb(29,"span"),_.ac(30,22),_.Vb(),_.Wb(31,"code"),_.Tc(32,":smile:"),_.Vb(),_.Wb(33,"div"),_.Wb(34,"a",23),_.kc("click",function(e){return _.Kc(t),_.oc().openEmojiModal(e)}),_.ac(35,24),_.Vb(),_.Vb(),_.Vb(),_.Vb()}}function Le(t,e){if(1&t&&(_.Wb(0,"div",25),_.Tc(1),_.Vb()),2&t){const t=_.oc();_.Db(1),_.Vc(" ",t.formErrors.text," ")}}function Ve(t,e){if(1&t){const t=_.Xb();_.Wb(0,"button",26),_.kc("click",function(){return _.Kc(t),_.oc().cancelCommentReply()}),_.ac(1,27),_.Vb()}}const Ae=function(t){return{disabled:t}};function Ne(t,e){if(1&t&&(_.Wb(0,"button",28),_.Tc(1),_.Vb()),2&t){const t=_.oc();_.vc("ngClass",_.zc(2,Ae,!t.form.valid||t.addingComment)),_.Db(1),_.Vc(" ",t.addingCommentButtonValue," ")}}function Be(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div",29),_.Wb(1,"h4",30),_.ac(2,31),_.Vb(),_.Wb(3,"my-global-icon",32),_.kc("click",function(){return _.Kc(t),_.oc().hideModals()}),_.Vb(),_.Vb(),_.Wb(4,"div",33),_.Wb(5,"span"),_.ac(6,34),_.Vb(),_.Rb(7,"my-remote-subscribe",35),_.Vb(),_.Wb(8,"div",36),_.Wb(9,"input",37),_.kc("click",function(){return _.Kc(t),_.oc().hideModals()})("key.enter",function(){return _.Kc(t),_.oc().hideModals()}),_.Vb(),_.Wb(10,"input",38),_.kc("click",function(){return _.Kc(t),_.oc().gotoLogin()}),_.Vb(),_.Vb()}if(2&t){const t=_.oc();_.Db(7),_.vc("interact",!0)("uri",t.getUri())}}function ze(t,e){if(1&t&&(_.Wb(0,"div",42),_.Tc(1),_.Wb(2,"code"),_.Tc(3),_.Vb(),_.Vb()),2&t){const t=e.$implicit;_.Db(1),_.Vc(" ",t[0]," "),_.Db(2),_.Vc(":",t[1],":")}}function We(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div",29),_.Wb(1,"h4",30),_.ac(2,39),_.Vb(),_.Wb(3,"my-global-icon",32),_.kc("click",function(){return _.Kc(t),_.oc().hideModals()}),_.Vb(),_.Vb(),_.Wb(4,"div",33),_.Wb(5,"div",40),_.Rc(6,ze,4,2,"div",41),_.Vb(),_.Vb()}if(2&t){const t=_.oc();_.Db(6),_.vc("ngForOf",t.emojiMarkupList)}}const Fe=function(t){return{"input-error":t}};let He=(()=>{class t extends i.a{constructor(t,e,n,i,o){super(),this.formValidatorService=t,this.notifier=e,this.videoCommentService=n,this.modalService=i,this.router=o,this.focusOnInit=!1,this.commentCreated=new _.n,this.cancel=new _.n,this.addingComment=!1}get emojiMarkupList(){const t=n("EoOQ"),e=[];for(const n in t)n&&e.push([t[n],n]);return e}ngOnInit(){this.buildForm({text:ke}),this.user&&(this.addingCommentButtonValue=this.parentComment?"Antwoorden":"Reactie",this.initTextValue())}ngOnChanges(t){t.textValue&&t.textValue.currentValue&&t.textValue.currentValue!==t.textValue.previousValue&&this.patchTextValue(t.textValue.currentValue,!0)}onValidKey(){this.check(),this.form.valid&&this.formValidated()}openVisitorModal(t){null===this.user&&(t.srcElement.blur(),t.preventDefault(),this.modalService.open(this.visitorModal))}openEmojiModal(t){t.preventDefault(),this.modalService.open(this.emojiModal,{backdrop:!0,size:"lg"})}hideModals(){this.modalService.dismissAll()}formValidated(){if(this.addingComment)return;this.addingComment=!0;const t=this.form.value;let e;e=this.parentComment?this.addCommentReply(t):this.addCommentThread(t),e.subscribe(t=>{this.addingComment=!1,this.commentCreated.emit(t),this.form.reset()},t=>{this.addingComment=!1,this.notifier.error(t.text)})}isAddButtonDisplayed(){return this.form.value.text}getUri(){return window.location.href}getAvatarUrl(){return this.user?this.user.accountAvatarUrl:r.a.GET_DEFAULT_AVATAR_URL()}gotoLogin(){this.hideModals(),this.router.navigate(["/login"])}cancelCommentReply(){this.cancel.emit(null),this.form.value.text=this.textareaElement.nativeElement.value=""}addCommentReply(t){return this.videoCommentService.addCommentReply(this.video.id,this.parentComment.id,t)}addCommentThread(t){return this.videoCommentService.addCommentThread(this.video.id,t)}initTextValue(){if(this.textValue)this.patchTextValue(this.textValue,this.focusOnInit);else if(this.parentComment){const t=this.parentComments.filter(t=>t.account&&t.account.id!==this.user.account.id).map(t=>"@"+t.by),e=new Set(t),n=Array.from(e).join(" ")+" ";this.patchTextValue(n,this.focusOnInit)}}patchTextValue(t,e){setTimeout(()=>{e&&this.textareaElement.nativeElement.focus(),this.textareaElement.nativeElement.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),this.textareaElement.nativeElement.dispatchEvent(new Event("input"))}),this.form.patchValue({text:t})}}return t.\u0275fac=function(e){return new(e||t)(_.Qb(i.b),_.Qb(y.m),_.Qb(d.d),_.Qb(re.o),_.Qb(w.h))},t.\u0275cmp=_.Kb({type:t,selectors:[["my-video-comment-add"]],viewQuery:function(t,e){if(1&t&&(_.Xc(Ie,3),_.Xc(je,3),_.Xc(Re,3)),2&t){let t;_.Hc(t=_.lc())&&(e.visitorModal=t.first),_.Hc(t=_.lc())&&(e.emojiModal=t.first),_.Hc(t=_.lc())&&(e.textareaElement=t.first)}},inputs:{user:"user",video:"video",parentComment:"parentComment",parentComments:"parentComments",focusOnInit:"focusOnInit",textValue:"textValue"},outputs:{commentCreated:"commentCreated",cancel:"cancel"},features:[_.Ab,_.Bb],decls:17,vars:9,consts:function(){let t,e,n,i,o,r,s,a,c,l,d,u,h,p,f,g,v,m;return t="Voeg reactie toe...",e="Markdown-compatibel",n="Markdown-compatible met ondersteuning voor:",i="Automatisch gegenereerde verwijzingen",o="Breuklijnen",r="Lijsten",s="Nadruk",a="vet",c="cursief",l="Emoji-shortcuts",d="Emoji-opmaak",u="Volledige lijst bekijken",h="\nAnnuleren",p="Je bent een stap verwijderd van reageren",f=" You can comment using an account on any ActivityPub-compatible instance (PeerTube/Mastodon/Pleroma account for example). ",g="Annuleren",v="Aanmelden om te reageren",m="Markdown-Emoji-Lijst",[["novalidate","",3,"formGroup","ngSubmit"],[1,"avatar-and-textarea"],["alt","Avatar",3,"src"],[1,"form-group"],["placeholder",t,"myAutoResize","","formControlName","text",3,"readonly","ngClass","click","keyup.control.enter","keyup.meta.enter"],["textarea",""],["helpType","custom","iconName","markdown","tooltipPlacement","left auto","autoClose","true","title",e,1,"markdown-guide"],["ptTemplate","customHtml"],["class","form-error",4,"ngIf"],[1,"comment-buttons"],["class","cancel-button","type","button",3,"click",4,"ngIf"],[3,"ngClass",4,"ngIf"],["visitorModal",""],["emojiModal",""],n,i,o,r,s,a,c,l,d,["href","",3,"click"],u,[1,"form-error"],["type","button",1,"cancel-button",3,"click"],h,[3,"ngClass"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],p,["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],f,[3,"interact","uri"],[1,"modal-footer","inputs"],["type","button","role","button","value",g,1,"action-button","action-button-cancel",3,"click","key.enter"],["type","submit","value",v,1,"action-button-submit",3,"click"],m,[1,"emoji-flex"],["class","emoji-flex-item",4,"ngFor","ngForOf"],[1,"emoji-flex-item"]]},template:function(t,e){1&t&&(_.Wb(0,"form",0),_.kc("ngSubmit",function(){return e.formValidated()}),_.Wb(1,"div",1),_.Rb(2,"img",2),_.Wb(3,"div",3),_.Wb(4,"textarea",4,5),_.kc("click",function(t){return e.openVisitorModal(t)})("keyup.control.enter",function(){return e.onValidKey()})("keyup.meta.enter",function(){return e.onValidKey()}),_.Tc(6,"\n      "),_.Vb(),_.Wb(7,"my-help",6),_.Rc(8,De,36,0,"ng-template",7),_.Vb(),_.Rc(9,Le,2,1,"div",8),_.Vb(),_.Vb(),_.Wb(10,"div",9),_.Rc(11,Ve,2,0,"button",10),_.Rc(12,Ne,2,4,"button",11),_.Vb(),_.Vb(),_.Rc(13,Be,11,2,"ng-template",null,12,_.Sc),_.Rc(15,We,7,1,"ng-template",null,13,_.Sc)),2&t&&(_.vc("formGroup",e.form),_.Db(2),_.vc("src",e.getAvatarUrl(),_.Mc),_.Db(2),_.vc("readonly",null===e.user)("ngClass",_.zc(7,Fe,e.formErrors.text)),_.Db(5),_.vc("ngIf",e.formErrors.text),_.Db(2),_.vc("ngIf",e.isAddButtonDisplayed()),_.Db(1),_.vc("ngIf",e.isAddButtonDisplayed()))},directives:[Me.y,Me.n,Me.h,we.a,Me.b,Me.m,Me.f,f.l,xe.a,Ee.a,f.n,se.a,Se.a,f.m],styles:['form[_ngcontent-%COMP%]{margin-bottom:30px}.avatar-and-textarea[_ngcontent-%COMP%]{display:flex;margin-bottom:10px}.avatar-and-textarea[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;border-radius:50%;width:25px;height:25px;min-width:25px;min-height:25px;vertical-align:top;margin-right:10px}.avatar-and-textarea[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex-grow:1;margin:0;position:relative}.avatar-and-textarea[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .markdown-guide[_ngcontent-%COMP%]{position:absolute;top:5px;right:9px}.avatar-and-textarea[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .markdown-guide[_ngcontent-%COMP%]     .help-tooltip-button my-global-icon{height:18px;width:30px}.avatar-and-textarea[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .markdown-guide[_ngcontent-%COMP%]     .help-tooltip-button my-global-icon svg{color:#c6c6c6;fill:#c6c6c6;border-radius:3px}.avatar-and-textarea[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .markdown-guide[_ngcontent-%COMP%]     .help-tooltip-button:active my-global-icon svg, .avatar-and-textarea[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .markdown-guide[_ngcontent-%COMP%]     .help-tooltip-button:focus my-global-icon svg, .avatar-and-textarea[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .markdown-guide[_ngcontent-%COMP%]     .help-tooltip-button:hover my-global-icon svg{background-color:#c6c6c6;color:var(--mainBackgroundColor);fill:var(--mainBackgroundColor)}.avatar-and-textarea[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:inline-block;height:30px;width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;color:var(--textareaForegroundColor);background-color:var(--textareaBackgroundColor);height:60px;padding:5px 15px;font-size:15px;min-height:calc(60px - 15px * 2);padding-right:45px!important}.avatar-and-textarea[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}.avatar-and-textarea[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width:100%){.avatar-and-textarea[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%}}.avatar-and-textarea[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea.focus-visible[_ngcontent-%COMP%], .avatar-and-textarea[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}@media screen and (max-width:600px){.avatar-and-textarea[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding-right:49px!important}}.avatar-and-textarea[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus::placeholder{opacity:0}.comment-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:.5rem}.comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child.focus-visible, .comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child, .comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child:active, .comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child:focus{color:#fff;background-color:var(--mainColor)}.comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child:hover{color:#fff;background-color:var(--mainHoverColor)}.comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child.disabled, .comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child[disabled]{cursor:default;color:#fff;background-color:#c6c6c6}.comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child   my-global-icon[_ngcontent-%COMP%]     .feather, .comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child   my-global-icon[_ngcontent-%COMP%]     .material{color:#fff}.comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:#fff}.comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:#fff}.comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:#fff}.comment-buttons[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:initial;font-weight:600;display:inline-block;padding:0 10px;white-space:nowrap;background:transparent}.comment-buttons[_ngcontent-%COMP%]   .cancel-button.focus-visible[_ngcontent-%COMP%], .comment-buttons[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(88,88,88,.05)}.comment-buttons[_ngcontent-%COMP%]   .cancel-button.disabled[_ngcontent-%COMP%], .comment-buttons[_ngcontent-%COMP%]   .cancel-button[disabled][_ngcontent-%COMP%]{cursor:default}.comment-buttons[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .comment-buttons[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:transparent}.comment-buttons[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .comment-buttons[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .comment-buttons[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .comment-buttons[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .comment-buttons[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:transparent}.comment-buttons[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .comment-buttons[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .comment-buttons[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .comment-buttons[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .comment-buttons[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:transparent}.comment-buttons[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:transparent}.emoji-flex[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:center}.emoji-flex[_ngcontent-%COMP%]   .emoji-flex-item[_ngcontent-%COMP%]{text-align:left;margin:auto;min-width:227px;flex:1}.emoji-flex[_ngcontent-%COMP%]   .emoji-flex-item[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin-left:5px}@media screen and (max-width:600px){.comment-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:14px!important}textarea[_ngcontent-%COMP%]{padding:5px!important}}.modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.modal-body[_ngcontent-%COMP%]   .btn.focus-visible[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active, .modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.modal-body[_ngcontent-%COMP%]   .btn.disabled[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   .btn[disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}.modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:#fff}.modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:#fff}.modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:#fff}.modal-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:#fff}.modal-body[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:left;margin-bottom:20px}']}),t})();var Ue=n("Rtfg"),$e=n("re7S"),Ke=n("2L7+"),qe=n("LsvZ");const Xe=["commentReportModal"];function Qe(t,e){if(1&t){const t=_.Xb();_.Wb(0,"a",11),_.Wb(1,"img",12),_.kc("error",function(e){return _.Kc(t),_.oc(2).switchToDefaultAvatar(e)}),_.Vb(),_.Vb()}if(2&t){const t=_.oc(2);_.vc("href",t.comment.account.url,_.Mc),_.Db(1),_.vc("src",t.comment.accountAvatarUrl,_.Mc)}}function Ge(t,e){1&t&&_.Rb(0,"span",13)}function Ye(t,e){1&t&&(_.Wb(0,"div",25),_.ac(1,26),_.Vb())}function Je(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div",27),_.kc("click",function(){return _.Kc(t),_.oc(3).onWantToReply()}),_.ac(1,28),_.Vb()}}const Ze=function(t){return["/accounts",t]},tn=function(t){return{"video-author":t}},en=function(t){return{threadId:t}},nn=function(t,e){return["/videos/watch",t,e]};function on(t,e){if(1&t){const t=_.Xb();_.Ub(0),_.Rc(1,Ye,2,0,"div",14),_.Wb(2,"div",15),_.Wb(3,"div",16),_.Wb(4,"a",17),_.Wb(5,"span",18),_.Tc(6),_.Vb(),_.Wb(7,"span",19),_.Tc(8),_.Vb(),_.Vb(),_.Vb(),_.Wb(9,"a",20),_.Tc(10),_.pc(11,"myFromNow"),_.Vb(),_.Vb(),_.Wb(12,"div",21),_.kc("timestampClicked",function(e){return _.Kc(t),_.oc(2).handleTimestampClicked(e)}),_.Vb(),_.Wb(13,"div",22),_.Rc(14,Je,2,0,"div",23),_.Rb(15,"my-user-moderation-dropdown",24),_.Vb(),_.Tb()}if(2&t){const t=_.oc(2);_.Db(1),_.vc("ngIf",!0===t.highlightedComment),_.Db(3),_.vc("routerLink",_.zc(15,Ze,t.comment.by)),_.Db(1),_.vc("ngClass",_.zc(17,tn,t.video.account.id===t.comment.account.id)),_.Db(1),_.Vc(" ",t.comment.account.displayName," "),_.Db(2),_.Uc(t.comment.by),_.Db(1),_.vc("routerLink",_.Ac(21,nn,t.video.uuid,_.zc(19,en,t.comment.threadId)))("title",t.comment.createdAt),_.Db(1),_.Vc(" ",_.qc(11,13,t.comment.createdAt)," "),_.Db(2),_.vc("innerHTML",t.sanitizedCommentHTML,_.Lc),_.Db(2),_.vc("ngIf",t.isUserLoggedIn()),_.Db(1),_.vc("prependActions",t.prependModerationActions)("account",t.commentAccount)("user",t.commentUser)}}function rn(t,e){if(1&t&&(_.Ub(0),_.Wb(1,"div",15),_.Wb(2,"span",16),_.ac(3,29),_.Vb(),_.Wb(4,"a",30),_.Tc(5),_.pc(6,"myFromNow"),_.Vb(),_.Vb(),_.Wb(7,"div",31),_.Wb(8,"i"),_.ac(9,32),_.Vb(),_.Vb(),_.Tb()),2&t){const t=_.oc(2);_.Db(4),_.vc("routerLink",_.Ac(6,nn,t.video.uuid,_.zc(4,en,t.comment.threadId))),_.Db(1),_.Uc(_.qc(6,2,t.comment.createdAt))}}function sn(t,e){if(1&t){const t=_.Xb();_.Wb(0,"my-video-comment-add",33),_.kc("commentCreated",function(e){return _.Kc(t),_.oc(2).onCommentReplyCreated(e)})("cancel",function(){return _.Kc(t),_.oc(2).onResetReply()}),_.Vb()}if(2&t){const t=_.oc(2);_.vc("user",t.user)("video",t.video)("parentComment",t.comment)("parentComments",t.newParentComments)("focusOnInit",!0)("textValue",t.redraftValue)}}function an(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div"),_.Wb(1,"my-video-comment",36),_.kc("wantedToReply",function(e){return _.Kc(t),_.oc(3).onWantToReply(e)})("wantedToDelete",function(e){return _.Kc(t),_.oc(3).onWantToDelete(e)})("wantedToRedraft",function(e){return _.Kc(t),_.oc(3).onWantToRedraft(e)})("resetReply",function(){return _.Kc(t),_.oc(3).onResetReply()})("timestampClicked",function(e){return _.Kc(t),_.oc(3).handleTimestampClicked(e)}),_.Vb(),_.Vb()}if(2&t){const t=e.$implicit,n=_.oc(3);_.Db(1),_.vc("comment",t.comment)("video",n.video)("inReplyToCommentId",n.inReplyToCommentId)("commentTree",t)("parentComments",n.newParentComments)("redraftValue",n.redraftValue)}}function cn(t,e){if(1&t&&(_.Wb(0,"div",34),_.Rc(1,an,2,6,"div",35),_.Vb()),2&t){const t=_.oc(2);_.Db(1),_.vc("ngForOf",t.commentTree.children)}}const ln=function(t){return{"mb-3":t}};function dn(t,e){if(1&t&&(_.Wb(0,"div",2),_.Wb(1,"div",3),_.Rc(2,Qe,2,2,"a",4),_.Rb(3,"div",5),_.Vb(),_.Wb(4,"div",6),_.Rc(5,Ge,1,0,"span",7),_.Wb(6,"div",8),_.Rc(7,on,16,24,"ng-container",1),_.Rc(8,rn,10,9,"ng-container",1),_.Rc(9,sn,1,6,"my-video-comment-add",9),_.Rc(10,cn,2,1,"div",10),_.tc(11),_.Vb(),_.Vb(),_.Vb()),2&t){const t=_.oc();_.Db(2),_.vc("ngIf",!t.comment.isDeleted),_.Db(2),_.vc("ngClass",_.zc(7,ln,t.firstInThread)),_.Db(1),_.vc("ngIf",t.comment.isDeleted),_.Db(2),_.vc("ngIf",!t.comment.isDeleted),_.Db(1),_.vc("ngIf",t.comment.isDeleted),_.Db(1),_.vc("ngIf",!t.comment.isDeleted&&t.isUserLoggedIn()&&t.inReplyToCommentId===t.comment.id),_.Db(1),_.vc("ngIf",t.commentTree)}}function un(t,e){if(1&t&&(_.Ub(0),_.Rb(1,"my-comment-report",37,38),_.Tb()),2&t){const t=_.oc();_.Db(1),_.vc("comment",t.comment)}}const hn=["*"];let pn=(()=>{class t{constructor(t,e,n,i){this.markdownService=t,this.authService=e,this.userService=n,this.notifier=i,this.parentComments=[],this.highlightedComment=!1,this.firstInThread=!1,this.wantedToReply=new _.n,this.wantedToDelete=new _.n,this.wantedToRedraft=new _.n,this.threadCreated=new _.n,this.resetReply=new _.n,this.timestampClicked=new _.n,this.sanitizedCommentHTML="",this.newParentComments=[]}get user(){return this.authService.getUser()}ngOnInit(){this.init()}ngOnChanges(){this.init()}onCommentReplyCreated(t){this.commentTree||(this.commentTree={comment:this.comment,hasDisplayedChildren:!1,children:[]},this.threadCreated.emit(this.commentTree)),this.commentTree.children.unshift({comment:t,hasDisplayedChildren:!1,children:[]}),this.resetReply.emit(),this.redraftValue=void 0}onWantToReply(t){this.wantedToReply.emit(t||this.comment)}onWantToDelete(t){this.wantedToDelete.emit(t||this.comment)}onWantToRedraft(t){this.wantedToRedraft.emit(t||this.comment)}isUserLoggedIn(){return this.authService.isLoggedIn()}onResetReply(){this.resetReply.emit()}handleTimestampClicked(t){this.timestampClicked.emit(t)}isRemovableByUser(){return this.comment.account&&this.isUserLoggedIn()&&(this.user.account.id===this.comment.account.id||this.user.account.id===this.video.account.id||this.user.hasRight(15))}isRedraftableByUser(){return this.comment.account&&this.isUserLoggedIn()&&this.user.account.id===this.comment.account.id&&0===this.comment.totalReplies}isReportableByUser(){return this.comment.account&&this.isUserLoggedIn()&&!1===this.comment.isDeleted&&this.user.account.id!==this.comment.account.id}switchToDefaultAvatar(t){t.target.src=r.a.GET_DEFAULT_AVATAR_URL()}isCommentDisplayed(){var t;return!this.comment.isDeleted||0!==this.comment.totalReplies||(null===(t=this.commentTree)||void 0===t?void 0:t.hasDisplayedChildren)}getUserIfNeeded(t){t.userId&&this.authService.isLoggedIn()&&this.authService.getUser().hasRight(1)&&this.userService.getUserWithCache(t.userId).subscribe(t=>this.commentUser=t,t=>this.notifier.error(t.message))}init(){return Object(E.a)(this,void 0,void 0,function*(){const t=this.comment.text.replace(/<br.?\/?>/g,"\r\n"),e=yield this.markdownService.textMarkdownToHTML(t,!0,!0);this.sanitizedCommentHTML=yield this.markdownService.processVideoTimestamps(e),this.newParentComments=this.parentComments.concat([this.comment]),this.comment.account?(this.commentAccount=new r.a(this.comment.account),this.getUserIfNeeded(this.commentAccount)):this.comment.account=null,this.prependModerationActions=[],this.isReportableByUser()&&this.prependModerationActions.push({label:"Deze reactie melden",iconName:"flag",handler:()=>this.showReportModal()}),this.isRemovableByUser()&&this.prependModerationActions.push({label:"Verwijderen",iconName:"delete",handler:()=>this.onWantToDelete()}),this.isRedraftableByUser()&&this.prependModerationActions.push({label:"Verwijderen & opnieuw klad",iconName:"edit",handler:()=>this.onWantToRedraft()}),0===this.prependModerationActions.length&&(this.prependModerationActions=void 0)})}showReportModal(){this.commentReportModal.show()}}return t.\u0275fac=function(e){return new(e||t)(_.Qb(y.j),_.Qb(Ue.a),_.Qb(y.D),_.Qb(y.m))},t.\u0275cmp=_.Kb({type:t,selectors:[["my-video-comment"]],viewQuery:function(t,e){if(1&t&&_.Xc(Xe,1),2&t){let t;_.Hc(t=_.lc())&&(e.commentReportModal=t.first)}},inputs:{video:"video",comment:"comment",parentComments:"parentComments",commentTree:"commentTree",inReplyToCommentId:"inReplyToCommentId",highlightedComment:"highlightedComment",firstInThread:"firstInThread",redraftValue:"redraftValue"},outputs:{wantedToReply:"wantedToReply",wantedToDelete:"wantedToDelete",wantedToRedraft:"wantedToRedraft",threadCreated:"threadCreated",resetReply:"resetReply",timestampClicked:"timestampClicked"},features:[_.Bb],ngContentSelectors:hn,decls:2,vars:2,consts:function(){let t,e,n,i,o;return t="Opties",e="Belichte reactie",n="Antwoorden",i="Verwijderd",o="Deze reactie is verwijderd",[["class","root-comment",4,"ngIf"],[4,"ngIf"],[1,"root-comment"],[1,"left"],["target","_blank","rel","noopener noreferrer",3,"href",4,"ngIf"],[1,"vertical-border"],[1,"right",3,"ngClass"],["class","comment-avatar",4,"ngIf"],[1,"comment"],[3,"user","video","parentComment","parentComments","focusOnInit","textValue","commentCreated","cancel",4,"ngIf"],["class","children",4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"href"],["alt","Avatar",1,"comment-avatar",3,"src","error"],[1,"comment-avatar"],["class","highlighted-comment",4,"ngIf"],[1,"comment-account-date"],[1,"comment-account"],[3,"routerLink"],[1,"comment-account-name",3,"ngClass"],[1,"comment-account-fid","ml-1"],[1,"comment-date",3,"routerLink","title"],["timestampRouteTransformer","",1,"comment-html",3,"innerHTML","timestampClicked"],[1,"comment-actions"],["tabindex","0","class","comment-action-reply",3,"click",4,"ngIf"],["tabindex","0","buttonSize","small","label",t,"placement","bottom-left auto",3,"prependActions","account","user"],[1,"highlighted-comment"],e,["tabindex","0",1,"comment-action-reply",3,"click"],n,i,[1,"comment-date",3,"routerLink"],[1,"comment-html","comment-html-deleted"],o,[3,"user","video","parentComment","parentComments","focusOnInit","textValue","commentCreated","cancel"],[1,"children"],[4,"ngFor","ngForOf"],[3,"comment","video","inReplyToCommentId","commentTree","parentComments","redraftValue","wantedToReply","wantedToDelete","wantedToRedraft","resetReply","timestampClicked"],[3,"comment"],["commentReportModal",""]]},template:function(t,e){1&t&&(_.uc(),_.Rc(0,dn,12,9,"div",0),_.Rc(1,un,3,1,"ng-container",1)),2&t&&(_.vc("ngIf",e.isCommentDisplayed()),_.Db(1),_.vc("ngIf",e.prependModerationActions))},directives:[f.n,f.l,w.k,Pe,Ke.a,He,f.m,t,$e.a],pipes:[qe.a],styles:[".root-comment[_ngcontent-%COMP%]{font-size:15px;display:flex}.root-comment[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-right:10px}.root-comment[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .vertical-border[_ngcontent-%COMP%]{width:2px;height:100%;background-color:rgba(0,0,0,.05);margin:10px calc(1rem + 1px)}.root-comment[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:100%}.root-comment[_ngcontent-%COMP%]   .comment-avatar[_ngcontent-%COMP%]{object-fit:cover;border-radius:50%;width:36px;height:36px;min-width:36px;min-height:36px}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]{flex-grow:1;min-width:1px}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .highlighted-comment[_ngcontent-%COMP%]{display:inline-block;background-color:#f5f5f5;color:#3d3d3d;padding:0 5px;font-size:13px;margin-bottom:5px;font-weight:600;border-radius:3px}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-account-date[_ngcontent-%COMP%]{display:flex;margin-bottom:4px}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-account-date[_ngcontent-%COMP%]   .video-author[_ngcontent-%COMP%]{height:20px;background-color:#888;border-radius:12px;margin-bottom:2px;max-width:100%;box-sizing:border-box;flex-direction:row;align-items:center;display:inline-flex;padding-right:6px;padding-left:6px;color:#fff!important}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-account-date[_ngcontent-%COMP%]   .comment-account[_ngcontent-%COMP%]{word-break:break-all;font-weight:600;font-size:90%}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-account-date[_ngcontent-%COMP%]   .comment-account[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--mainForegroundColor)}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-account-date[_ngcontent-%COMP%]   .comment-account[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-account-date[_ngcontent-%COMP%]   .comment-account[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-account-date[_ngcontent-%COMP%]   .comment-account[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-account-date[_ngcontent-%COMP%]   .comment-account[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-account-date[_ngcontent-%COMP%]   .comment-account[_ngcontent-%COMP%]   .comment-account-fid[_ngcontent-%COMP%]{opacity:.6}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-account-date[_ngcontent-%COMP%]   .comment-date[_ngcontent-%COMP%]{font-size:90%;color:var(--greyForegroundColor);margin-left:5px;text-decoration:none}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-account-date[_ngcontent-%COMP%]   .comment-date[_ngcontent-%COMP%]:hover{text-decoration:underline}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-html[_ngcontent-%COMP%]{word-break:break-word;word-wrap:break-word;overflow-wrap:break-word;-webkit-hyphens:auto;hyphens:auto}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-html[_ngcontent-%COMP%]     a:not(.linkified-url){color:var(--mainForegroundColor);font-weight:600}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-html[_ngcontent-%COMP%]     a:not(.linkified-url):active, .root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-html[_ngcontent-%COMP%]     a:not(.linkified-url):focus, .root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-html[_ngcontent-%COMP%]     a:not(.linkified-url):hover{text-decoration:none!important;outline:none!important}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-html[_ngcontent-%COMP%]     p{margin-bottom:.3rem}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-html.comment-html-deleted[_ngcontent-%COMP%]{color:var(--greyForegroundColor);margin-bottom:1rem}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]{margin-bottom:10px;display:flex}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .comment-action-reply[_ngcontent-%COMP%], .root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]     .dropdown-toggle{color:var(--greyForegroundColor);cursor:pointer;margin-right:10px}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .comment-action-reply[_ngcontent-%COMP%]:active, .root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .comment-action-reply[_ngcontent-%COMP%]:focus, .root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .comment-action-reply[_ngcontent-%COMP%]:focus-visible, .root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]   .comment-action-reply[_ngcontent-%COMP%]:hover, .root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]     .dropdown-toggle:active, .root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]     .dropdown-toggle:focus, .root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]     .dropdown-toggle:focus-visible, .root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]     .dropdown-toggle:hover{color:var(--mainForegroundColor)}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-actions[_ngcontent-%COMP%]     .action-button{background-color:initial;padding:0;font-weight:unset}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   my-video-comment-add[_ngcontent-%COMP%]     form{margin-top:1rem;margin-bottom:0}.root-comment[_ngcontent-%COMP%]   .children[_ngcontent-%COMP%]   .comment-avatar[_ngcontent-%COMP%]{object-fit:cover;border-radius:50%;width:25px;height:25px;min-width:25px;min-height:25px}.root-comment[_ngcontent-%COMP%]   .children[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{margin-right:6px}@media screen and (max-width:1200px){.children[_ngcontent-%COMP%]{margin-left:-10px}}@media screen and (max-width:600px){.root-comment[_ngcontent-%COMP%]   .children[_ngcontent-%COMP%]{margin-left:-20px}.root-comment[_ngcontent-%COMP%]   .children[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{align-items:flex-start}.root-comment[_ngcontent-%COMP%]   .children[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .vertical-border[_ngcontent-%COMP%]{margin-left:2px}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-account-date[_ngcontent-%COMP%]{flex-direction:column}.root-comment[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-account-date[_ngcontent-%COMP%]   .comment-date[_ngcontent-%COMP%]{margin-left:0}}"]}),t})();var fn=n("hbNF");const gn=["commentHighlightBlock"];function vn(t,e){1&t&&_.Sb(0)}function mn(t,e){1&t&&(_.Ub(0),_.ac(1,17),_.Tb())}function bn(t,e){if(1&t&&_.ac(0,18),2&t){const t=_.oc(2);_.ec(t.totalNotDeletedComments),_.bc(0)}}function yn(t,e){if(1&t&&(_.Rc(0,mn,2,0,"ng-container",15),_.Rc(1,bn,1,1,"ng-template",null,16,_.Sc)),2&t){const t=_.Ic(2),e=_.oc();_.vc("ngIf",1===e.totalNotDeletedComments)("ngIfElse",t)}}function _n(t,e){1&t&&_.ac(0,19)}function Cn(t,e){1&t&&(_.Wb(0,"div"),_.ac(1,26),_.Vb())}function Pn(t,e){if(1&t){const t=_.Xb();_.Wb(0,"my-video-comment",27),_.kc("wantedToReply",function(e){return _.Kc(t),_.oc(2).onWantedToReply(e)})("wantedToDelete",function(e){return _.Kc(t),_.oc(2).onWantedToDelete(e)})("wantedToRedraft",function(e){return _.Kc(t),_.oc(2).onWantedToRedraft(e)})("threadCreated",function(e){return _.Kc(t),_.oc(2).onThreadCreated(e)})("resetReply",function(){return _.Kc(t),_.oc(2).onResetReply()})("timestampClicked",function(e){return _.Kc(t),_.oc(2).handleTimestampClicked(e)}),_.Vb()}if(2&t){const t=_.oc(2);_.vc("comment",t.highlightedThread)("video",t.video)("inReplyToCommentId",t.inReplyToCommentId)("commentTree",t.threadComments[t.highlightedThread.id])("highlightedComment",!0)("firstInThread",!0)("redraftValue",t.commentReplyRedraftValue)}}function Tn(t,e){1&t&&_.Sb(0)}function On(t,e){if(1&t&&(_.Ub(0),_.ac(1,37),_.Tb()),2&t){const t=_.oc(4).$implicit,e=_.oc(2);_.Db(1),_.ec(t.totalReplies)((null==e.video||null==e.video.account?null:e.video.account.displayName)||"the author"),_.bc(1)}}function Mn(t,e){if(1&t&&_.ac(0,38),2&t){const t=_.oc(4).$implicit,e=_.oc(2);_.ec(t.totalReplies)((null==e.video||null==e.video.account?null:e.video.account.displayName)||"the author"),_.bc(0)}}function kn(t,e){if(1&t&&(_.Rc(0,On,2,2,"ng-container",15),_.Rc(1,Mn,1,2,"ng-template",null,36,_.Sc)),2&t){const t=_.Ic(2),e=_.oc(3).$implicit;_.vc("ngIf",e.totalReplies!==e.totalRepliesFromVideoAuthor)("ngIfElse",t)}}function wn(t,e){if(1&t&&_.ac(0,39),2&t){const t=_.oc(3).$implicit;_.ec(t.totalReplies),_.bc(0)}}function xn(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div",31),_.kc("click",function(){_.Kc(t);const e=_.oc(2).$implicit;return _.oc(2).viewReplies(e.id)}),_.Rb(1,"span",32),_.Rc(2,Tn,1,0,"ng-container",2),_.Rc(3,kn,3,2,"ng-template",null,33,_.Sc),_.Rc(5,wn,1,1,"ng-template",null,34,_.Sc),_.Rb(7,"my-small-loader",35),_.Vb()}if(2&t){const t=_.Ic(4),e=_.Ic(6),n=_.oc(2).$implicit,i=_.oc(2);_.Db(2),_.vc("ngIf",n.totalRepliesFromVideoAuthor>0)("ngIfThen",t)("ngIfElse",e),_.Db(5),_.vc("loading",i.threadLoading[n.id])}}function En(t,e){if(1&t){const t=_.Xb();_.Wb(0,"my-video-comment",29),_.kc("wantedToReply",function(e){return _.Kc(t),_.oc(3).onWantedToReply(e)})("wantedToDelete",function(e){return _.Kc(t),_.oc(3).onWantedToDelete(e)})("wantedToRedraft",function(e){return _.Kc(t),_.oc(3).onWantedToRedraft(e)})("threadCreated",function(e){return _.Kc(t),_.oc(3).onThreadCreated(e)})("resetReply",function(){return _.Kc(t),_.oc(3).onResetReply()})("timestampClicked",function(e){return _.Kc(t),_.oc(3).handleTimestampClicked(e)}),_.Rc(1,xn,8,4,"div",30),_.Vb()}if(2&t){const t=_.oc(),e=t.$implicit,n=t.index,i=_.oc(2);_.vc("comment",e)("video",i.video)("inReplyToCommentId",i.inReplyToCommentId)("commentTree",i.threadComments[e.id])("firstInThread",n+1!==i.comments.length)("redraftValue",i.commentReplyRedraftValue),_.Db(1),_.vc("ngIf",0!==e.totalReplies&&!i.threadComments[e.id])}}function Sn(t,e){if(1&t&&(_.Wb(0,"div"),_.Rc(1,En,2,7,"my-video-comment",28),_.Vb()),2&t){const t=e.$implicit,n=_.oc(2);_.Db(1),_.vc("ngIf",!n.highlightedThread||t.id!==n.highlightedThread.id)}}function In(t,e){if(1&t){const t=_.Xb();_.Wb(0,"my-video-comment-add",20),_.kc("commentCreated",function(e){return _.Kc(t),_.oc().onCommentThreadCreated(e)}),_.Vb(),_.Rc(1,Cn,2,0,"div",14),_.Wb(2,"div",21),_.kc("nearOfBottom",function(){return _.Kc(t),_.oc().onNearOfBottom()}),_.Wb(3,"div"),_.Rb(4,"div",22,23),_.Rc(6,Pn,1,7,"my-video-comment",24),_.Vb(),_.Rc(7,Sn,2,1,"div",25),_.Vb()}if(2&t){const t=_.oc();_.vc("video",t.video)("user",t.user)("textValue",t.commentThreadRedraftValue),_.Db(1),_.vc("ngIf",0===t.totalNotDeletedComments&&0===t.comments.length),_.Db(1),_.vc("autoInit",!0)("dataObservable",t.onDataSubject.asObservable()),_.Db(4),_.vc("ngIf",t.highlightedThread),_.Db(1),_.vc("ngForOf",t.comments)}}function jn(t,e){1&t&&(_.Wb(0,"div"),_.ac(1,40),_.Vb())}let Rn=(()=>{class t{constructor(t,e,n,i,o,r){this.authService=t,this.notifier=e,this.confirmService=n,this.videoCommentService=i,this.activatedRoute=o,this.hooks=r,this.timestampClicked=new _.n,this.comments=[],this.sort="-createdAt",this.componentPagination={currentPage:1,itemsPerPage:10,totalItems:null},this.threadComments={},this.threadLoading={},this.syndicationItems=[],this.onDataSubject=new Te.a}ngOnInit(){this.sub=this.activatedRoute.params.subscribe(t=>{t.threadId&&this.processHighlightedThread(+t.threadId)})}ngOnChanges(t){t.video&&this.resetVideo()}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}viewReplies(t,e=!1){this.threadLoading[t]=!0;const n={videoId:this.video.id,threadId:t};this.hooks.wrapObsFun(this.videoCommentService.getVideoThreadComments.bind(this.videoCommentService),n,"video-watch","filter:api.video-watch.video-thread-replies.list.params","filter:api.video-watch.video-thread-replies.list.result").subscribe(n=>{this.threadComments[t]=n,this.threadLoading[t]=!1,this.hooks.runAction("action:video-watch.video-thread-replies.loaded","video-watch",{data:n}),e&&(this.highlightedThread=new d.b(n.comment),setTimeout(()=>this.commentHighlightBlock.nativeElement.scrollIntoView(),0))},t=>this.notifier.error(t.message))}loadMoreThreads(){const t={videoId:this.video.id,componentPagination:this.componentPagination,sort:this.sort};this.hooks.wrapObsFun(this.videoCommentService.getVideoCommentThreads.bind(this.videoCommentService),t,"video-watch","filter:api.video-watch.video-threads.list.params","filter:api.video-watch.video-threads.list.result").subscribe(t=>{this.comments=this.comments.concat(t.data),this.componentPagination.totalItems=t.total,this.totalNotDeletedComments=t.totalNotDeletedComments,this.onDataSubject.next(t.data),this.hooks.runAction("action:video-watch.video-threads.loaded","video-watch",{data:this.componentPagination})},t=>this.notifier.error(t.message))}onCommentThreadCreated(t){this.comments.unshift(t),this.commentThreadRedraftValue=void 0}onWantedToReply(t){this.inReplyToCommentId=t.id}onResetReply(){this.inReplyToCommentId=void 0,this.commentReplyRedraftValue=void 0}onThreadCreated(t){this.viewReplies(t.comment.id)}handleSortChange(t){this.sort!==t&&(this.sort=t,this.resetVideo())}handleTimestampClicked(t){this.timestampClicked.emit(t)}onWantedToDelete(t,e="Verwijderen",n="Wil je deze reactie echt verwijderen?"){return Object(E.a)(this,void 0,void 0,function*(){return n+=t.isLocal||this.video.isLocal?"De verwijdering wordt naar andere exemplaren van PeerTube gestuurd zodat zij er ook gevolg aan kunnen geven.":"Dit is een reactie van elders, dus de verwijdering zal enkel effect hebben op jouw exemplaar van PeerTube.",!1!==(yield this.confirmService.confirm(n,e))&&(this.videoCommentService.deleteVideoComment(t.videoId,t.id).subscribe(()=>{var e;(null===(e=this.highlightedThread)||void 0===e?void 0:e.id)===t.id&&(t=this.comments.find(e=>e.id===t.id),this.highlightedThread=void 0),this.softDeleteComment(t)},t=>this.notifier.error(t.message)),!0)})}onWantedToRedraft(t){return Object(E.a)(this,void 0,void 0,function*(){if(yield this.onWantedToDelete(t,"Verwijderen en opnieuw als klad","Wil je echt deze reactie verwijderen en opnieuw als klad instellen?")){this.inReplyToCommentId=t.inReplyToCommentId;const e=t.text.replace(/<br.?\/?>/g,"\r\n");t.threadId===t.id?this.commentThreadRedraftValue=e:this.commentReplyRedraftValue=e}})}isUserLoggedIn(){return this.authService.isLoggedIn()}onNearOfBottom(){Object(y.E)(this.componentPagination)&&(this.componentPagination.currentPage++,this.loadMoreThreads())}softDeleteComment(t){t.isDeleted=!0,t.deletedAt=new Date,t.text="",t.account=null}resetVideo(){!0===this.video.commentsEnabled&&(this.highlightedThread=null,this.comments=[],this.threadComments={},this.threadLoading={},this.inReplyToCommentId=void 0,this.componentPagination.currentPage=1,this.componentPagination.totalItems=null,this.totalNotDeletedComments=null,this.syndicationItems=this.videoCommentService.getVideoCommentsFeeds(this.video.uuid),this.loadMoreThreads())}processHighlightedThread(t){this.highlightedThread=this.comments.find(e=>e.id===t),this.viewReplies(t,!0)}}return t.\u0275fac=function(e){return new(e||t)(_.Qb(y.a),_.Qb(y.m),_.Qb(y.d),_.Qb(d.d),_.Qb(w.a),_.Qb(R.a))},t.\u0275cmp=_.Kb({type:t,selectors:[["my-video-comments"]],viewQuery:function(t,e){if(1&t&&_.Xc(gn,1),2&t){let t;_.Hc(t=_.lc())&&(e.commentHighlightBlock=t.first)}},inputs:{video:"video",user:"user"},outputs:{timestampClicked:"timestampClicked"},features:[_.Bb],decls:19,vars:6,consts:function(){let t,e,n,i,o,r,s,a,c,l,d;return t="SORTEREN OP",e="Recentste eerst (standaard)",n="Meeste antwoorden eerst",i="1 Reactie",o="" + "\ufffd0\ufffd" + " Comments",r="Commentaren",s="Geen commentaren.",a="" + "\ufffd0\ufffd" + "Reacties van " + "\ufffd1\ufffd" + " en anderen bekijken. ",c="" + "\ufffd0\ufffd" + "Reacties van " + "\ufffd1\ufffd" + " bekijken ",l="" + "\ufffd0\ufffd" + " antwoorden bekijken",d="\n    Reacties zijn uitgeschakeld.\n  ",[[1,"title-block"],[1,"title-page","title-page-single"],[4,"ngIf","ngIfThen","ngIfElse"],["hasComments",""],["noComments",""],[3,"syndicationItems"],["ngbDropdown","",1,"d-inline-block","ml-4","dropdown-root"],["id","dropdown-sort-comments","ngbDropdownToggle","",1,"btn","btn-sm","btn-outline-secondary"],t,["ngbDropdownMenu","","aria-labelledby","dropdown-sort-comments"],["ngbDropdownItem","",3,"click"],e,n,[3,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["manyComments",""],i,o,r,[3,"video","user","textValue","commentCreated"],["myInfiniteScroller","",1,"comment-threads",3,"autoInit","dataObservable","nearOfBottom"],["id","highlighted-comment",1,"anchor"],["commentHighlightBlock",""],[3,"comment","video","inReplyToCommentId","commentTree","highlightedComment","firstInThread","redraftValue","wantedToReply","wantedToDelete","wantedToRedraft","threadCreated","resetReply","timestampClicked",4,"ngIf"],[4,"ngFor","ngForOf"],s,[3,"comment","video","inReplyToCommentId","commentTree","highlightedComment","firstInThread","redraftValue","wantedToReply","wantedToDelete","wantedToRedraft","threadCreated","resetReply","timestampClicked"],[3,"comment","video","inReplyToCommentId","commentTree","firstInThread","redraftValue","wantedToReply","wantedToDelete","wantedToRedraft","threadCreated","resetReply","timestampClicked",4,"ngIf"],[3,"comment","video","inReplyToCommentId","commentTree","firstInThread","redraftValue","wantedToReply","wantedToDelete","wantedToRedraft","threadCreated","resetReply","timestampClicked"],["class","view-replies mb-2",3,"click",4,"ngIf"],[1,"view-replies","mb-2",3,"click"],[1,"glyphicon","glyphicon-menu-down"],["hasAuthorComments",""],["noAuthorComments",""],[1,"comment-thread-loading","ml-1",3,"loading"],["onlyAuthorComments",""],a,c,l,d]},template:function(t,e){if(1&t&&(_.Wb(0,"div"),_.Wb(1,"div",0),_.Wb(2,"h2",1),_.Rc(3,vn,1,0,"ng-container",2),_.Rc(4,yn,3,2,"ng-template",null,3,_.Sc),_.Rc(6,_n,1,0,"ng-template",null,4,_.Sc),_.Vb(),_.Rb(8,"my-feed",5),_.Wb(9,"div",6),_.Wb(10,"button",7),_.ac(11,8),_.Vb(),_.Wb(12,"div",9),_.Wb(13,"button",10),_.kc("click",function(){return e.handleSortChange("-createdAt")}),_.ac(14,11),_.Vb(),_.Wb(15,"button",10),_.kc("click",function(){return e.handleSortChange("-totalReplies")}),_.ac(16,12),_.Vb(),_.Vb(),_.Vb(),_.Vb(),_.Rc(17,In,8,8,"ng-template",13),_.Rc(18,jn,2,0,"div",14),_.Vb()),2&t){const t=_.Ic(5),n=_.Ic(7);_.Db(3),_.vc("ngIf",e.totalNotDeletedComments>0)("ngIfThen",t)("ngIfElse",n),_.Db(5),_.vc("syndicationItems",e.syndicationItems),_.Db(9),_.vc("ngIf",!0===e.video.commentsEnabled),_.Db(1),_.vc("ngIf",!1===e.video.commentsEnabled)}},directives:[f.n,Oe.a,re.h,re.n,re.l,re.k,He,de.a,f.m,pn,fn.a],styles:["#highlighted-comment[_ngcontent-%COMP%]{margin-bottom:25px}.view-replies[_ngcontent-%COMP%]{font-weight:600;font-size:15px;cursor:pointer}.comment-thread-loading[_ngcontent-%COMP%], .glyphicon[_ngcontent-%COMP%]{margin-right:5px;display:inline-block;font-size:13px}.title-block[_ngcontent-%COMP%]   .title-page[_ngcontent-%COMP%]{margin-right:0}.title-block[_ngcontent-%COMP%]   my-feed[_ngcontent-%COMP%]{display:inline-block;margin-left:5px;opacity:0;transition:opacity .2s ease-in}.title-block[_ngcontent-%COMP%]:hover   my-feed[_ngcontent-%COMP%]{opacity:1}#dropdown-sort-comments[_ngcontent-%COMP%]{font-weight:600;text-transform:uppercase;border:none;transform:translateY(-7%)}@media screen and (max-width:600px){.view-replies[_ngcontent-%COMP%]{margin-left:46px}}@media screen and (max-width:450px){.view-replies[_ngcontent-%COMP%]{font-size:14px}}"]}),t})();var Dn=n("EIMG"),Ln=n("CjA7"),Vn=n("MUmz");function An(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div",7),_.Wb(1,"span"),_.ac(2,8),_.Vb(),_.Wb(3,"my-input-switch",9),_.kc("ngModelChange",function(e){return _.Kc(t),_.oc(2).autoPlayNextVideo=e})("ngModelChange",function(){return _.Kc(t),_.oc(2).switchAutoPlayNextVideo()}),_.Vb(),_.Vb()}if(2&t){const t=_.oc(2);_.vc("ngbTooltip",t.autoPlayNextVideoTooltip),_.Db(3),_.vc("ngModel",t.autoPlayNextVideo)}}function Nn(t,e){1&t&&_.Rb(0,"hr")}function Bn(t,e){if(1&t){const t=_.Xb();_.Ub(0),_.Wb(1,"my-video-miniature",10),_.kc("videoBlocked",function(){return _.Kc(t),_.oc(2).onVideoRemoved()})("videoRemoved",function(){return _.Kc(t),_.oc(2).onVideoRemoved()})("videoAccountMuted",function(){return _.Kc(t),_.oc(2).onVideoRemoved()}),_.Vb(),_.Rc(2,Nn,1,0,"hr",1),_.Tb()}if(2&t){const t=e.$implicit,n=e.index,i=e.count,o=_.oc(2);_.Db(1),_.vc("displayOptions",o.displayOptions)("video",t)("user",o.userMiniature),_.Db(1),_.vc("ngIf",!o.playlist&&0==n&&i>1)}}function zn(t,e){if(1&t&&(_.Ub(0),_.Wb(1,"div",2),_.Wb(2,"h2",3),_.ac(3,4),_.Vb(),_.Rc(4,An,4,2,"div",5),_.Vb(),_.Rc(5,Bn,3,4,"ng-container",6),_.pc(6,"async"),_.Tb()),2&t){const t=_.oc();_.Db(4),_.vc("ngIf",!t.playlist),_.Db(1),_.vc("ngForOf",_.qc(6,2,t.videos$))}}let Wn=(()=>{class t{constructor(t,e,n,i,o){this.userService=t,this.authService=e,this.notifier=n,this.store=i,this.sessionStorageService=o,this.gotRecommendations=new _.n,this.displayOptions={date:!0,views:!0,by:!0,avatar:!0},this.videos$=this.store.recommendations$,this.hasVideos$=this.store.hasRecommendations$,this.videos$.subscribe(t=>this.gotRecommendations.emit(t)),this.authService.isLoggedIn()?this.autoPlayNextVideo=this.authService.getUser().autoPlayNextVideo:(this.autoPlayNextVideo="true"===this.sessionStorageService.getItem(Dn.b.SESSION_STORAGE_AUTO_PLAY_NEXT_VIDEO),this.sessionStorageService.watch([Dn.b.SESSION_STORAGE_AUTO_PLAY_NEXT_VIDEO]).subscribe(()=>{this.autoPlayNextVideo="true"===this.sessionStorageService.getItem(Dn.b.SESSION_STORAGE_AUTO_PLAY_NEXT_VIDEO)})),this.autoPlayNextVideoTooltip="De volgende video speelt automatisch na de huidige als die actief is."}ngOnInit(){this.userService.getAnonymousOrLoggedUser().subscribe(t=>this.userMiniature=t)}ngOnChanges(){this.inputRecommendation&&this.store.requestNewRecommendations(this.inputRecommendation)}onVideoRemoved(){this.store.requestNewRecommendations(this.inputRecommendation)}switchAutoPlayNextVideo(){this.sessionStorageService.setItem(Dn.b.SESSION_STORAGE_AUTO_PLAY_NEXT_VIDEO,this.autoPlayNextVideo.toString()),this.authService.isLoggedIn()&&this.userService.updateMyProfile({autoPlayNextVideo:this.autoPlayNextVideo}).subscribe(()=>{this.authService.refreshUserInformation()},t=>this.notifier.error(t.message))}}return t.\u0275fac=function(e){return new(e||t)(_.Qb(y.D),_.Qb(y.a),_.Qb(y.m),_.Qb(M),_.Qb(y.y))},t.\u0275cmp=_.Kb({type:t,selectors:[["my-recommended-videos"]],inputs:{inputRecommendation:"inputRecommendation",playlist:"playlist"},outputs:{gotRecommendations:"gotRecommendations"},features:[_.Bb],decls:3,vars:3,consts:function(){let t,e;return t="Andere video's",e="AUTOMATISCH AFSPELEN",[[1,"other-videos"],[4,"ngIf"],[1,"title-page-container"],[1,"title-page","title-page-single"],t,["class","title-page-autoplay","placement","bottom-right auto",3,"ngbTooltip",4,"ngIf"],[4,"ngFor","ngForOf"],["placement","bottom-right auto",1,"title-page-autoplay",3,"ngbTooltip"],e,[1,"small",3,"ngModel","ngModelChange"],[3,"displayOptions","video","user","videoBlocked","videoRemoved","videoAccountMuted"]]},template:function(t,e){1&t&&(_.Wb(0,"div",0),_.Rc(1,zn,7,4,"ng-container",1),_.pc(2,"async"),_.Vb()),2&t&&(_.Db(1),_.vc("ngIf",_.qc(2,1,e.hasVideos$)))},directives:[f.n,f.m,re.D,Ln.a,Me.m,Me.p,Vn.a],pipes:[f.b],styles:[".title-page-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:25px;flex-wrap:wrap-reverse}.title-page-container[_ngcontent-%COMP%]   .title-page.active[_ngcontent-%COMP%], .title-page-container[_ngcontent-%COMP%]   .title-page.title-page-single[_ngcontent-%COMP%]{margin-bottom:unset;margin-right:.5rem!important}.title-page-autoplay[_ngcontent-%COMP%]{display:flex;width:-webkit-max-content;width:max-content;height:-webkit-max-content;height:max-content;align-items:center;margin-left:auto}.title-page-autoplay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:.3rem;text-transform:uppercase;font-size:85%;font-weight:600}hr[_ngcontent-%COMP%]{margin-top:0}"]}),t})();var Fn=n("DTAc"),Hn=n("tTqN"),Un=n("HZcR"),$n=n("/q9C"),Kn=n("xFmT");const qn=["videoWatchPlaylist"],Xn=["videoShareModal"],Qn=["videoSupportModal"],Gn=["subscribeButton"],Yn=["videoDownloadModal"];function Jn(t,e){1&t&&(_.Wb(0,"div",14),_.Tc(1," Sorry, but this video is not available because the remote instance is not responding. "),_.Rb(2,"br"),_.Tc(3," Please try again later. "),_.Vb())}function Zn(t,e){if(1&t&&_.Rb(0,"img",15),2&t){const t=_.oc();_.vc("src",t.playerPlaceholderImgSrc,_.Mc)}}function ti(t,e){1&t&&(_.Wb(0,"div",16),_.ac(1,17),_.Vb())}function ei(t,e){1&t&&(_.Wb(0,"div",16),_.ac(1,18),_.Vb())}function ni(t,e){if(1&t&&(_.Wb(0,"div",19),_.ac(1,20),_.pc(2,"date"),_.Vb()),2&t){const t=_.oc();_.Db(2),_.ec(_.rc(2,1,t.video.scheduledUpdate.updateAt,"full")),_.bc(1)}}function ii(t,e){1&t&&(_.Wb(0,"div",19),_.ac(1,21),_.Vb())}function oi(t,e){1&t&&(_.Wb(0,"div",19),_.ac(1,22),_.Vb())}function ri(t,e){if(1&t&&(_.Wb(0,"div",23),_.Wb(1,"div",24),_.ac(2,25),_.Vb(),_.Tc(3),_.Vb()),2&t){const t=_.oc();_.Db(3),_.Vc(" ",t.video.blockedReason," ")}}function si(t,e){if(1&t&&_.Rb(0,"span",82),2&t){const t=_.oc(2);_.vc("innerHTML",t.getRatePopoverText(),_.Lc)}}function ai(t,e){if(1&t&&(_.Wb(0,"span",83),_.Tc(1),_.Vb()),2&t){const t=_.oc(2);_.Db(1),_.Uc(t.video.likes)}}function ci(t,e){if(1&t&&(_.Wb(0,"span",83),_.Tc(1),_.Vb()),2&t){const t=_.oc(2);_.Db(1),_.Uc(t.video.dislikes)}}function li(t,e){if(1&t){const t=_.Xb();_.Wb(0,"button",84),_.kc("click",function(){return _.Kc(t),_.oc(2).showSupportModal()})("keyup.enter",function(){return _.Kc(t),_.oc(2).showSupportModal()}),_.Rb(1,"my-global-icon",85),_.Wb(2,"span",51),_.ac(3,86),_.Vb(),_.Vb()}if(2&t){const t=_.oc(2);_.vc("ngbTooltip",t.tooltipSupport),_.Eb("aria-label",t.tooltipSupport)}}function di(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div",87),_.kc("openChange",function(e){return _.Kc(t),_.Ic(7).openChange(e)}),_.Wb(1,"button",88),_.Rb(2,"my-global-icon",89),_.Wb(3,"span",51),_.ac(4,90),_.Vb(),_.Vb(),_.Wb(5,"div",91),_.Rb(6,"my-video-add-to-playlist",34,92),_.Vb(),_.Vb()}if(2&t){const t=_.oc(2);_.vc("ngbTooltip",t.tooltipSaveToPlaylist),_.Db(6),_.vc("video",t.video)}}function ui(t,e){if(1&t){const t=_.Xb();_.Wb(0,"button",95),_.kc("click",function(){return _.Kc(t),_.oc(3).showDownloadModal()})("keydown.enter",function(){return _.Kc(t),_.oc(3).showDownloadModal()}),_.Rb(1,"my-global-icon",96),_.Wb(2,"span",97),_.ac(3,98),_.Vb(),_.Vb()}}function hi(t,e){if(1&t&&(_.Ub(0),_.Rc(1,ui,4,0,"button",93),_.Rb(2,"my-video-download",null,94),_.Tb()),2&t){const t=_.oc(2);_.Db(1),_.vc("ngIf",t.isVideoDownloadable())}}function pi(t,e){if(1&t){const t=_.Xb();_.Ub(0),_.Wb(1,"my-video-actions-dropdown",99),_.kc("videoRemoved",function(){return _.Kc(t),_.oc(2).onVideoRemoved()})("modalOpened",function(){return _.Kc(t),_.oc(2).onModalOpened()}),_.Vb(),_.Tb()}if(2&t){const t=_.oc(2);_.Db(1),_.vc("buttonStyled",!0)("video",t.video)("videoCaptions",t.videoCaptions)("displayOptions",t.videoActionsOptions)}}const fi=function(t){return{liked:t}},gi=function(t){return{"width.%":t}};function vi(t,e){if(1&t&&(_.Wb(0,"div",100),_.Wb(1,"div",101),_.Rb(2,"div",102),_.Vb(),_.Vb()),2&t){const t=_.oc(2);_.vc("ngbTooltip",t.likesBarTooltipText),_.Db(2),_.vc("ngClass",_.zc(3,fi,"none"!==t.userRating))("ngStyle",_.zc(5,gi,t.video.likesPercent))}}function mi(t,e){if(1&t&&(_.Wb(0,"div",103),_.Rb(1,"div",104),_.Vb()),2&t){const t=_.oc(2);_.vc("ngbTooltip",t.likesBarTooltipText),_.Db(1),_.vc("ngStyle",_.zc(2,gi,t.video.likesPercent))}}const bi=function(t){return["/video-channels",t]},yi=function(t){return["/accounts",t]};function _i(t,e){if(1&t&&(_.Ub(0),_.Wb(1,"a",105),_.Tc(2),_.Vb(),_.Wb(3,"a",106),_.Wb(4,"span"),_.ac(5,107),_.Vb(),_.Vb(),_.Tb()),2&t){const t=_.oc(2);_.Db(1),_.vc("routerLink",_.zc(4,bi,t.video.byVideoChannel)),_.Db(1),_.Vc(" ",t.video.channel.displayName," "),_.Db(1),_.vc("routerLink",_.zc(6,yi,t.video.byAccount)),_.Db(2),_.ec(t.video.byAccount),_.bc(5)}}function Ci(t,e){if(1&t&&(_.Ub(0),_.Wb(1,"a",108),_.Wb(2,"span"),_.ac(3,109),_.Vb(),_.Vb(),_.Tb()),2&t){const t=_.oc(2);_.Db(1),_.vc("routerLink",_.zc(2,yi,t.video.byAccount)),_.Db(2),_.ec(t.video.byAccount),_.bc(3)}}function Pi(t,e){1&t&&_.Rb(0,"span",114)}function Ti(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div",110),_.kc("click",function(){return _.Kc(t),_.oc(2).showMoreDescription()}),_.Ub(1),_.ac(2,111),_.Tb(),_.Rc(3,Pi,1,0,"span",112),_.Rb(4,"my-small-loader",113),_.Vb()}if(2&t){const t=_.oc(2);_.Db(3),_.vc("ngIf",!1===t.descriptionLoading),_.Db(1),_.vc("loading",t.descriptionLoading)}}function Oi(t,e){1&t&&_.Rb(0,"span",117)}function Mi(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div",110),_.kc("click",function(){return _.Kc(t),_.oc(2).showLessDescription()}),_.Ub(1),_.ac(2,115),_.Tb(),_.Rc(3,Oi,1,0,"span",116),_.Vb()}if(2&t){const t=_.oc(2);_.Db(3),_.vc("ngIf",!1===t.descriptionLoading)}}function ki(t,e){if(1&t&&(_.Wb(0,"div",67),_.Wb(1,"span",68),_.ac(2,118),_.Vb(),_.Wb(3,"a",119),_.Tc(4),_.Vb(),_.Vb()),2&t){const t=_.oc(2);_.Db(3),_.vc("href",t.video.originInstanceUrl,_.Mc),_.Db(1),_.Uc(t.video.originInstanceHost)}}function wi(t,e){if(1&t&&(_.Wb(0,"div",67),_.Wb(1,"span",68),_.ac(2,120),_.Vb(),_.Wb(3,"span",70),_.Tc(4),_.pc(5,"date"),_.Vb(),_.Vb()),2&t){const t=_.oc(2);_.Db(4),_.Uc(_.rc(5,1,t.video.originallyPublishedAt,"dd MMMM yyyy"))}}function xi(t,e){if(1&t&&(_.Wb(0,"span",70),_.Tc(1),_.Vb()),2&t){const t=_.oc(2);_.Db(1),_.Uc(t.video.category.label)}}const Ei=function(){return["/search"]},Si=function(t){return[t]},Ii=function(t){return{categoryOneOf:t}};function ji(t,e){if(1&t&&(_.Wb(0,"a",121),_.Tc(1),_.Vb()),2&t){const t=_.oc(2);_.vc("routerLink",_.yc(3,Ei))("queryParams",_.zc(6,Ii,_.zc(4,Si,t.video.category.id))),_.Db(1),_.Uc(t.video.category.label)}}function Ri(t,e){if(1&t&&(_.Wb(0,"span",70),_.Tc(1),_.Vb()),2&t){const t=_.oc(2);_.Db(1),_.Uc(t.video.licence.label)}}const Di=function(t){return{licenceOneOf:t}};function Li(t,e){if(1&t&&(_.Wb(0,"a",121),_.Tc(1),_.Vb()),2&t){const t=_.oc(2);_.vc("routerLink",_.yc(3,Ei))("queryParams",_.zc(6,Di,_.zc(4,Si,t.video.licence.id))),_.Db(1),_.Uc(t.video.licence.label)}}function Vi(t,e){if(1&t&&(_.Wb(0,"span",70),_.Tc(1),_.Vb()),2&t){const t=_.oc(2);_.Db(1),_.Uc(t.video.language.label)}}const Ai=function(t){return{languageOneOf:t}};function Ni(t,e){if(1&t&&(_.Wb(0,"a",121),_.Tc(1),_.Vb()),2&t){const t=_.oc(2);_.vc("routerLink",_.yc(3,Ei))("queryParams",_.zc(6,Ai,_.zc(4,Si,t.video.language.id))),_.Db(1),_.Uc(t.video.language.label)}}const Bi=function(t){return{tagsOneOf:t}};function zi(t,e){if(1&t&&(_.Wb(0,"a",121),_.Tc(1),_.Vb()),2&t){const t=e.$implicit;_.vc("routerLink",_.yc(3,Ei))("queryParams",_.zc(6,Bi,_.zc(4,Si,t))),_.Db(1),_.Uc(t)}}function Wi(t,e){if(1&t&&(_.Wb(0,"div",67),_.Wb(1,"span",68),_.ac(2,122),_.Vb(),_.Wb(3,"span",70),_.Tc(4),_.pc(5,"myDurationFormatter"),_.Vb(),_.Vb()),2&t){const t=_.oc(2);_.Db(4),_.Uc(_.qc(5,1,t.video.duration))}}const Fi=function(t){return{activated:t}},Hi=function(t,e){return{uuid:t,tags:e}};function Ui(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div",26),_.Wb(1,"div",27),_.Wb(2,"div",28),_.Wb(3,"div"),_.Wb(4,"div",29),_.Wb(5,"h1",30),_.Tc(6),_.Vb(),_.Wb(7,"div",31),_.Ub(8),_.gc(9,32),_.Rb(10,"my-date-toggle",33),_.dc(),_.Tb(),_.Tc(11," \u2022 "),_.Rb(12,"my-video-views-counter",34),_.Vb(),_.Vb(),_.Wb(13,"div",35),_.Wb(14,"div",36),_.Wb(15,"h1",30),_.Tc(16),_.Vb(),_.Vb(),_.Wb(17,"div",37),_.Wb(18,"div",38),_.Ub(19),_.gc(20,39),_.Rb(21,"my-date-toggle",33),_.dc(),_.Tb(),_.Tc(22," \u2022 "),_.Rb(23,"my-video-views-counter",34),_.Vb(),_.Wb(24,"div",40),_.Rc(25,si,1,1,"ng-template",null,41,_.Sc),_.Wb(27,"div",42),_.Wb(28,"button",43),_.kc("click",function(){return _.Kc(t),_.oc().setLike()})("keyup.enter",function(){return _.Kc(t),_.oc().setLike()}),_.Rb(29,"my-global-icon",44),_.Rc(30,ai,2,1,"span",45),_.Vb(),_.Wb(31,"button",46),_.kc("click",function(){return _.Kc(t),_.oc().setDislike()})("keyup.enter",function(){return _.Kc(t),_.oc().setDislike()}),_.Rb(32,"my-global-icon",47),_.Rc(33,ci,2,1,"span",45),_.Vb(),_.Rc(34,li,4,2,"button",48),_.Wb(35,"button",49),_.kc("click",function(){return _.Kc(t),_.oc().showShareModal()})("keyup.enter",function(){return _.Kc(t),_.oc().showShareModal()}),_.Rb(36,"my-global-icon",50),_.Wb(37,"span",51),_.ac(38,52),_.Vb(),_.Vb(),_.Rc(39,di,8,2,"div",53),_.Rc(40,hi,4,1,"ng-container",13),_.Rc(41,pi,2,4,"ng-container",13),_.Vb(),_.Wb(42,"div",54),_.Rc(43,vi,3,7,"div",55),_.Vb(),_.Vb(),_.Rc(44,mi,2,4,"div",56),_.Vb(),_.Vb(),_.Wb(45,"div",57),_.Wb(46,"div",58),_.Rb(47,"my-video-avatar-channel",59),_.Wb(48,"div",60),_.Rc(49,_i,6,8,"ng-container",13),_.Rc(50,Ci,4,4,"ng-container",13),_.Vb(),_.Vb(),_.Rb(51,"my-subscribe-button",61,62),_.Vb(),_.Vb(),_.Vb(),_.Wb(53,"div",63),_.Wb(54,"div",64),_.kc("timestampClicked",function(e){return _.Kc(t),_.oc().handleTimestampClicked(e)}),_.Vb(),_.Rc(55,Ti,5,2,"div",65),_.Rc(56,Mi,4,1,"div",65),_.Vb(),_.Wb(57,"div",66),_.Wb(58,"div",67),_.Wb(59,"span",68),_.ac(60,69),_.Vb(),_.Wb(61,"span",70),_.Tc(62),_.Vb(),_.Vb(),_.Rc(63,ki,5,2,"div",71),_.Rc(64,wi,6,4,"div",71),_.Wb(65,"div",67),_.Wb(66,"span",68),_.ac(67,72),_.Vb(),_.Rc(68,xi,2,1,"span",73),_.Rc(69,ji,2,8,"a",74),_.Vb(),_.Wb(70,"div",67),_.Wb(71,"span",68),_.ac(72,75),_.Vb(),_.Rc(73,Ri,2,1,"span",73),_.Rc(74,Li,2,8,"a",74),_.Vb(),_.Wb(75,"div",67),_.Wb(76,"span",68),_.ac(77,76),_.Vb(),_.Rc(78,Vi,2,1,"span",73),_.Rc(79,Ni,2,8,"a",74),_.Vb(),_.Wb(80,"div",77),_.Wb(81,"span",68),_.ac(82,78),_.Vb(),_.Rc(83,zi,2,8,"a",79),_.Vb(),_.Rc(84,Wi,6,3,"div",71),_.Vb(),_.Wb(85,"my-video-comments",80),_.kc("timestampClicked",function(e){return _.Kc(t),_.oc().handleTimestampClicked(e)}),_.Vb(),_.Vb(),_.Wb(86,"my-recommended-videos",81),_.kc("gotRecommendations",function(e){return _.Kc(t),_.oc().onRecommendations(e)}),_.Vb(),_.Vb()}if(2&t){const t=_.Ic(26),e=_.oc();_.Db(6),_.Uc(e.video.name),_.Db(4),_.vc("date",e.video.publishedAt),_.Db(2),_.vc("video",e.video),_.Db(4),_.Uc(e.video.name),_.Db(5),_.vc("date",e.video.publishedAt),_.Db(2),_.vc("video",e.video),_.Db(5),_.vc("ngbPopover",e.getRatePopoverText()&&t)("ngClass",_.zc(47,Fi,"like"===e.userRating))("ngbTooltip",e.tooltipLike),_.Eb("aria-pressed","like"===e.userRating)("aria-label",e.tooltipLike),_.Db(2),_.vc("ngIf",e.video.likes),_.Db(1),_.vc("ngbPopover",e.getRatePopoverText()&&t)("ngClass",_.zc(49,Fi,"dislike"===e.userRating))("ngbTooltip",e.tooltipDislike),_.Eb("aria-pressed","dislike"===e.userRating)("aria-label",e.tooltipDislike),_.Db(2),_.vc("ngIf",e.video.dislikes),_.Db(1),_.vc("ngIf",e.video.support),_.Db(5),_.vc("ngIf",e.isUserLoggedIn()),_.Db(1),_.vc("ngIf",!e.isUserLoggedIn()&&!e.isLive()),_.Db(1),_.vc("ngIf",e.isUserLoggedIn()),_.Db(2),_.vc("ngIf",0!==e.video.likes||0!==e.video.dislikes),_.Db(1),_.vc("ngIf",0!==e.video.likes||0!==e.video.dislikes),_.Db(3),_.vc("video",e.video)("genericChannel",e.isChannelDisplayNameGeneric()),_.Db(2),_.vc("ngIf",!e.isChannelDisplayNameGeneric()),_.Db(1),_.vc("ngIf",e.isChannelDisplayNameGeneric()),_.Db(1),_.vc("videoChannels",_.zc(51,Si,e.video.channel)),_.Db(3),_.vc("innerHTML",e.videoHTMLDescription,_.Lc),_.Db(1),_.vc("ngIf",!1===e.completeDescriptionShown&&(null==e.video.description?null:e.video.description.length)>=250),_.Db(1),_.vc("ngIf",!0===e.completeDescriptionShown),_.Db(6),_.Uc(e.video.privacy.label),_.Db(1),_.vc("ngIf",!1===e.video.isLocal),_.Db(1),_.vc("ngIf",!!e.video.originallyPublishedAt),_.Db(4),_.vc("ngIf",!e.video.category.id),_.Db(1),_.vc("ngIf",e.video.category.id),_.Db(4),_.vc("ngIf",!e.video.licence.id),_.Db(1),_.vc("ngIf",e.video.licence.id),_.Db(4),_.vc("ngIf",!e.video.language.id),_.Db(1),_.vc("ngIf",e.video.language.id),_.Db(4),_.vc("ngForOf",e.getVideoTags()),_.Db(1),_.vc("ngIf",!e.video.isLive),_.Db(1),_.vc("video",e.video)("user",e.user),_.Db(1),_.vc("inputRecommendation",_.Ac(53,Hi,e.video.uuid,e.video.tags))("playlist",e.playlist)}}function $i(t,e){if(1&t){const t=_.Xb();_.Wb(0,"div",123),_.Wb(1,"div",124),_.Wb(2,"span",125),_.Wb(3,"strong"),_.ac(4,126),_.Vb(),_.Ub(5),_.ac(6,127),_.Tb(),_.Vb(),_.Wb(7,"a",128),_.ac(8,129),_.Vb(),_.Vb(),_.Wb(9,"div",130),_.kc("click",function(){return _.Kc(t),_.oc().acceptedPrivacyConcern()}),_.ac(10,131),_.Vb(),_.Vb()}}function Ki(t,e){if(1&t&&(_.Ub(0),_.Rb(1,"my-video-support",34,132),_.Rb(3,"my-video-share",133,134),_.Tb()),2&t){const t=_.oc();_.Db(1),_.vc("video",t.video),_.Db(2),_.vc("video",t.video)("videoCaptions",t.videoCaptions)("playlist",t.playlist)}}const qi=function(t){return{"theater-enabled":t}};let Xi=(()=>{class t{constructor(t,e,n,i,o,r,s,a,c,l,d,u,h,p,f,g,v,m,b,y,_,C,P){this.elementRef=t,this.changeDetector=e,this.route=n,this.router=i,this.videoService=o,this.playlistService=r,this.confirmService=s,this.metaService=a,this.authService=c,this.userService=l,this.serverService=d,this.restExtractor=u,this.notifier=h,this.markdownService=p,this.zone=f,this.redirectService=g,this.videoCaptionService=v,this.hotkeysService=m,this.hooks=b,this.peertubeSocket=y,this.screenService=_,this.location=C,this.localeId=P,this.theaterEnabled=!1,this.userRating=null,this.video=null,this.videoCaptions=[],this.playlist=null,this.descriptionLoading=!1,this.completeDescriptionShown=!1,this.videoHTMLDescription="",this.likesBarTooltipText="",this.hasAlreadyAcceptedPrivacyConcern=!1,this.remoteServerDown=!1,this.hotkeys=[],this.tooltipLike="",this.tooltipDislike="",this.tooltipSupport="",this.tooltipSaveToPlaylist="",this.videoActionsOptions={playlist:!1,download:!0,update:!0,blacklist:!0,delete:!0,report:!0,duplicate:!0,mute:!0,liveInfo:!0},this.nextVideoUuid="",this.nextVideoTitle=""}get user(){return this.authService.getUser()}get anonymousUser(){return this.userService.getAnonymousUser()}ngOnInit(){return Object(E.a)(this,void 0,void 0,function*(){!this.user&&this.screenService.isInMobileView()||(this.tooltipLike="Like deze video",this.tooltipDislike="Dislike deze video",this.tooltipSupport="Ondersteuningsopties voor deze video",this.tooltipSaveToPlaylist="Opslaan in afspeellijst"),ie.initState(),this.serverConfig=this.serverService.getTmpConfig(),this.configSub=this.serverService.getConfig().subscribe(e=>{this.serverConfig=e,(Object(_t.i)()||!1===this.serverConfig.tracker.enabled||!1===Object(N.d)()||"true"===V.a.getItem(t.LOCAL_STORAGE_PRIVACY_CONCERN_KEY))&&(this.hasAlreadyAcceptedPrivacyConcern=!0)}),this.paramsSub=this.route.params.subscribe(t=>{const e=t.videoId;e&&this.loadVideo(e);const n=t.playlistId;n&&this.loadPlaylist(n)}),this.queryParamsSub=this.route.queryParams.subscribe(t=>{this.playlistPosition=t.playlistPosition,this.videoWatchPlaylist.updatePlaylistIndex(this.playlistPosition);const e=t.start;this.player&&e&&this.player.currentTime(parseInt(e,10))}),this.initHotkeys(),this.theaterEnabled=Object(N.f)(),this.hooks.runAction("action:video-watch.init","video-watch")})}ngOnDestroy(){this.flushPlayer(),this.paramsSub&&this.paramsSub.unsubscribe(),this.queryParamsSub&&this.queryParamsSub.unsubscribe(),this.configSub&&this.configSub.unsubscribe(),this.liveVideosSub&&this.liveVideosSub.unsubscribe(),this.hotkeysService.remove(this.hotkeys)}setLike(){!1!==this.isUserLoggedIn()&&this.setRating("like"===this.userRating?"none":"like")}setDislike(){!1!==this.isUserLoggedIn()&&this.setRating("dislike"===this.userRating?"none":"dislike")}getRatePopoverText(){if(!this.isUserLoggedIn())return "Je moet <a href=\"/login\">laangemeld</a> zijn om deze video te beoordelen."}showMoreDescription(){if(void 0===this.completeVideoDescription)return this.loadCompleteDescription();this.updateVideoDescription(this.completeVideoDescription),this.completeDescriptionShown=!0}showLessDescription(){this.updateVideoDescription(this.shortVideoDescription),this.completeDescriptionShown=!1}showDownloadModal(){this.videoDownloadModal.show(this.video,this.videoCaptions)}isVideoDownloadable(){return this.video&&this.video instanceof r.o&&this.video.downloadEnabled&&!this.video.isLive}loadCompleteDescription(){this.descriptionLoading=!0,this.videoService.loadCompleteDescription(this.video.descriptionPath).subscribe(t=>{this.completeDescriptionShown=!0,this.descriptionLoading=!1,this.shortVideoDescription=this.video.description,this.completeVideoDescription=t,this.updateVideoDescription(this.completeVideoDescription)},t=>{this.descriptionLoading=!1,this.notifier.error(t.message)})}showSupportModal(){const t=this.isPlaying();this.pausePlayer(),this.videoSupportModal.show().result.then(()=>{t&&this.resumePlayer()})}showShareModal(){this.pausePlayer(),this.videoShareModal.show(this.currentTime,this.videoWatchPlaylist.currentPlaylistPosition)}isUserLoggedIn(){return this.authService.isLoggedIn()}getVideoTags(){return this.video&&!1!==Array.isArray(this.video.tags)?this.video.tags:[]}onRecommendations(t){if(t.length>0){const e=t[0];this.nextVideoUuid=e.uuid,this.nextVideoTitle=e.name}}onModalOpened(){this.pausePlayer()}onVideoRemoved(){this.redirectService.redirectToHomepage()}declinedPrivacyConcern(){V.a.setItem(t.LOCAL_STORAGE_PRIVACY_CONCERN_KEY,"false"),this.hasAlreadyAcceptedPrivacyConcern=!1}acceptedPrivacyConcern(){V.a.setItem(t.LOCAL_STORAGE_PRIVACY_CONCERN_KEY,"true"),this.hasAlreadyAcceptedPrivacyConcern=!0}isVideoToTranscode(){return this.video&&2===this.video.state.id}isVideoToImport(){return this.video&&3===this.video.state.id}hasVideoScheduledPublication(){return this.video&&void 0!==this.video.scheduledUpdate}isLive(){var t;return!!(null===(t=this.video)||void 0===t?void 0:t.isLive)}isWaitingForLive(){var t;return 4===(null===(t=this.video)||void 0===t?void 0:t.state.id)}isLiveEnded(){var t;return 5===(null===(t=this.video)||void 0===t?void 0:t.state.id)}isVideoBlur(t){return t.isVideoNSFWForUser(this.user,this.serverConfig)}isAutoPlayEnabled(){return this.user&&this.user.autoPlayNextVideo||this.anonymousUser.autoPlayNextVideo}handleTimestampClicked(t){this.player&&!this.video.isLive&&(this.player.currentTime(t),Object(L.p)())}isPlaylistAutoPlayEnabled(){return this.user&&this.user.autoPlayNextVideoPlaylist||this.anonymousUser.autoPlayNextVideoPlaylist}isChannelDisplayNameGeneric(){return[`Main ${this.video.channel.ownerAccount.name} channel`,`Default ${this.video.channel.ownerAccount.name} channel`].includes(this.video.channel.displayName)}onPlaylistVideoFound(t){this.loadVideo(t)}loadVideo(t){if(this.video&&this.video.uuid===t)return;this.player&&this.player.pause();const e=this.hooks.wrapObsFun(this.videoService.getVideo.bind(this.videoService),{videoId:t},"video-watch","filter:api.video-watch.video.get.params","filter:api.video-watch.video.get.result");Object(I.a)([e,this.videoCaptionService.listCaptions(t)]).pipe(Object(j.a)(t=>{if(1===t.body.errorCode&&t.body.originUrl){const e=window.location.search;let n=t.body.originUrl;e&&(n+=e),this.confirmService.confirm("Deze video is niet beschikbaar op dit exemplaar van PeerTube. Wil je doorverwezen worden naar het originele exemplaar <a href=\"" + n + "\">" + n + "</a>?","Doorverwijzing").then(e=>!1===e?this.restExtractor.redirectTo404IfNotFound(t,"video",[A.a.BAD_REQUEST_400,A.a.FORBIDDEN_403,A.a.NOT_FOUND_404]):window.location.href=n)}return this.restExtractor.redirectTo404IfNotFound(t,"video",[A.a.BAD_REQUEST_400,A.a.FORBIDDEN_403,A.a.NOT_FOUND_404])})).subscribe(([t,e])=>{const n=this.route.snapshot.queryParams;this.onVideoFetched(t,e.data,{resume:n.resume,startTime:n.start,stopTime:n.stop,muted:n.muted,loop:n.loop,subtitle:n.subtitle,playerMode:n.mode,peertubeLink:!1}).catch(t=>this.handleError(t))})}loadPlaylist(t){this.playlist&&this.playlist.uuid===t||this.playlistService.getVideoPlaylist(t).pipe(Object(j.a)(t=>this.restExtractor.redirectTo404IfNotFound(t,"video",[A.a.BAD_REQUEST_400,A.a.FORBIDDEN_403,A.a.NOT_FOUND_404]))).subscribe(t=>{this.playlist=t,this.videoWatchPlaylist.loadPlaylistElements(t,!this.playlistPosition,this.playlistPosition)})}updateVideoDescription(t){this.video.description=t,this.setVideoDescriptionHTML().catch(t=>console.error(t))}setVideoDescriptionHTML(){return Object(E.a)(this,void 0,void 0,function*(){const t=yield this.markdownService.textMarkdownToHTML(this.video.description);this.videoHTMLDescription=yield this.markdownService.processVideoTimestamps(t)})}setVideoLikesBarTooltipText(){this.likesBarTooltipText=`${this.video.likes} likes / ${this.video.dislikes} dislikes`}handleError(t){const e="string"==typeof t?t:t.message;if(e)return-1!==e.indexOf("from xs param")?(this.flushPlayer(),this.remoteServerDown=!0,void this.changeDetector.detectChanges()):void this.notifier.error(e)}checkUserRating(){!1!==this.isUserLoggedIn()&&this.videoService.getUserVideoRating(this.video.id).subscribe(t=>{t&&(this.userRating=t.rating)},t=>this.notifier.error(t.message))}onVideoFetched(t,e,n){return Object(E.a)(this,void 0,void 0,function*(){if(this.subscribeToLiveEventsIfNeeded(this.video,t),this.video=t,this.videoCaptions=e,this.playerPlaceholderImgSrc=void 0,this.descriptionLoading=!1,this.completeDescriptionShown=!1,this.completeVideoDescription=void 0,this.remoteServerDown=!1,this.currentTime=void 0,this.isVideoBlur(this.video)&&!1===(yield this.confirmService.confirm("Deze video bevat volwassen of expliciete inhoud. Weet je zeker dat je hem wilt kijken?","Volwassen of expliciete content")))return this.location.back();this.buildPlayer(n).catch(t=>console.error("Cannot build the player",t)),this.setVideoDescriptionHTML(),this.setVideoLikesBarTooltipText(),this.setOpenGraphTags(),this.checkUserRating(),this.hooks.runAction("action:video-watch.video.loaded","video-watch",{videojs:F.a})})}buildPlayer(t){return Object(E.a)(this,void 0,void 0,function*(){this.flushPlayer();const e=this.video.state.id;if(5===e||4===e)return void(this.playerPlaceholderImgSrc=this.video.previewPath);const n=this.elementRef.nativeElement.querySelector("#videojs-wrapper");this.playerElement=document.createElement("video"),this.playerElement.className="video-js vjs-peertube-skin",this.playerElement.setAttribute("playsinline","true"),n.appendChild(this.playerElement);const i={video:this.video,videoCaptions:this.videoCaptions,urlOptions:t,user:this.user},{playerMode:o,playerOptions:r}=yield this.hooks.wrapFun(this.buildPlayerManagerOptions.bind(this),i,"video-watch","filter:internal.video-watch.player.build-options.params","filter:internal.video-watch.player.build-options.result");this.zone.runOutsideAngular(()=>Object(E.a)(this,void 0,void 0,function*(){this.player=yield ie.initialize(o,r,t=>this.player=t),this.player.on("customError",({err:t})=>this.handleError(t)),this.player.on("timeupdate",()=>{this.currentTime=Math.floor(this.player.currentTime())}),this.player.upnext({timeout:1e4,headText:"Volgende",cancelText:"Annuleren",suspendedText:"Automatisch afspelen is opgeschort",getTitle:()=>this.nextVideoTitle,next:()=>this.zone.run(()=>this.autoplayNext()),condition:()=>{if(this.playlist)this.isPlaylistAutoPlayEnabled()&&this.zone.run(()=>this.videoWatchPlaylist.navigateToNextPlaylistVideo());else if(this.isAutoPlayEnabled())return!0;return!1},suspended:()=>!Object(L.j)(this.player.el(),80)||!document.getElementById("content").contains(document.activeElement)}),this.player.one("stopped",()=>{this.playlist&&this.isPlaylistAutoPlayEnabled()&&this.zone.run(()=>this.videoWatchPlaylist.navigateToNextPlaylistVideo())}),this.player.one("ended",()=>{this.video.isLive&&(this.video.state.id=5)}),this.player.on("theaterChange",(t,e)=>{this.zone.run(()=>this.theaterEnabled=e)}),this.hooks.runAction("action:video-watch.player.loaded","video-watch",{player:this.player,videojs:F.a,video:this.video})}))})}autoplayNext(){this.playlist?this.zone.run(()=>this.videoWatchPlaylist.navigateToNextPlaylistVideo()):this.nextVideoUuid&&this.router.navigate(["/videos/watch",this.nextVideoUuid])}setRating(t){({like:this.videoService.setVideoLike,dislike:this.videoService.setVideoDislike,none:this.videoService.unsetVideoLike})[t].call(this.videoService,this.video.id).subscribe(()=>{this.updateVideoRating(this.userRating,t),this.userRating=t},t=>this.notifier.error(t.message))}updateVideoRating(t,e){let n=0,i=0;t&&("like"===t&&n--,"dislike"===t&&i--),"like"===e&&n++,"dislike"===e&&i++,this.video.likes+=n,this.video.dislikes+=i,this.video.buildLikeAndDislikePercents(),this.setVideoLikesBarTooltipText()}setOpenGraphTags(){this.metaService.setTitle(this.video.name),this.metaService.setTag("og:type","video"),this.metaService.setTag("og:title",this.video.name),this.metaService.setTag("name",this.video.name),this.metaService.setTag("og:description",this.video.description),this.metaService.setTag("description",this.video.description),this.metaService.setTag("og:image",this.video.previewPath),this.metaService.setTag("og:duration",this.video.duration.toString()),this.metaService.setTag("og:site_name","PeerTube"),this.metaService.setTag("og:url",window.location.href),this.metaService.setTag("url",window.location.href)}isAutoplay(){return!(this.route.snapshot.params.threadId||this.user&&!1===this.user.autoPlayVideo)}flushPlayer(){if(this.player)try{this.player.dispose(),this.player=void 0}catch(t){console.error("Cannot dispose player.",t)}}buildPlayerManagerOptions(t){const{video:e,videoCaptions:n,urlOptions:i,user:o}=t;let r=(()=>{const t=e.userHistory&&(!this.playlist||void 0!==i.resume);return void 0!==i.startTime?Object(_t.k)(i.startTime):t?e.userHistory.currentTime:0})();e.duration-r<=1&&(r=0);const s=n.map(t=>({label:t.language.label,language:t.language.id,src:oe.a.apiUrl+t.captionPath})),a={common:{autoplay:this.isAutoplay(),nextVideo:()=>this.zone.run(()=>this.autoplayNext()),playerElement:this.playerElement,onPlayerElementChange:t=>this.playerElement=t,videoDuration:e.duration,enableHotkeys:!0,inactivityTimeout:2500,poster:e.previewUrl,startTime:r,stopTime:i.stopTime,controls:i.controls,muted:i.muted,loop:i.loop,subtitle:i.subtitle,peertubeLink:i.peertubeLink,theaterButton:!0,captions:0!==n.length,videoViewUrl:3!==e.privacy.id?this.videoService.getVideoViewUrl(e.uuid):null,embedUrl:e.embedUrl,isLive:e.isLive,language:this.localeId,userWatching:o&&!0===o.videosHistoryEnabled?{url:this.videoService.getUserWatchingVideoUrl(e.uuid),authorizationHeader:this.authService.getRequestHeaderValue()}:void 0,serverUrl:oe.a.apiUrl,videoCaptions:s},webtorrent:{videoFiles:e.files}};let c;if(c=i.playerMode?"p2p-media-loader"===i.playerMode?"p2p-media-loader":"webtorrent":e.hasHlsPlaylist()?"p2p-media-loader":"webtorrent","undefined"==typeof TextEncoder&&(c="webtorrent"),"p2p-media-loader"===c){const t=e.getHlsPlaylist(),n={playlistUrl:t.playlistUrl,segmentsSha256Url:t.segmentsSha256Url,redundancyBaseUrls:t.redundancies.map(t=>t.baseUrl),trackerAnnounce:e.trackerUrls,videoFiles:t.files};Object.assign(a,{p2pMediaLoader:n})}return{playerMode:c,playerOptions:a}}pausePlayer(){this.player&&this.player.pause()}resumePlayer(){this.player&&this.player.play()}isPlaying(){if(this.player)return!this.player.paused()}subscribeToLiveEventsIfNeeded(t,e){return Object(E.a)(this,void 0,void 0,function*(){this.liveVideosSub||(this.liveVideosSub=this.buildLiveEventsSubscription()),t&&t.id!==e.id&&(yield this.peertubeSocket.unsubscribeLiveVideos(t.id)),e.isLive&&(yield this.peertubeSocket.subscribeToLiveVideosSocket(e.id))})}buildLiveEventsSubscription(){return this.peertubeSocket.getLiveVideosObservable().subscribe(({type:t,payload:e})=>"state-change"===t?this.handleLiveStateChange(e.state):"views-change"===t?this.handleLiveViewsChange(e.views):void 0)}handleLiveStateChange(t){if(1!==t)return;const e=this.video.state.id;if(4!==e&&5!==e)return;console.log("Loading video after live update.");const n=this.video.uuid;this.video=void 0,this.loadVideo(n)}handleLiveViewsChange(t){this.video?(console.log("Updating live views."),this.video.views=t):console.error("Cannot update video live views because video is no defined.")}initHotkeys(){this.hotkeys=[new S.a("f",t=>t,void 0,"Volledig scherm ingaan/uitgaan (vereist focus op afspeler)"),new S.a("space",t=>t,void 0,"De video afspelen/pauseren (vereist focus op de afspeler)"),new S.a("m",t=>t,void 0,"De video dempen of niet meer dempen (vereist focus op de speler)"),new S.a("0-9",t=>t,void 0,"Naar een percentage van de video springen: 0 is 0% and 9 is 90% (vereist focus op de speler)"),new S.a("up",t=>t,void 0,"Het volume verhogen (vereist focus op de speler)"),new S.a("down",t=>t,void 0,"Het volume verlagen (vereist focus op de speler)"),new S.a("right",t=>t,void 0,"Vooruitspringen in de video (vereist focus op de speler)"),new S.a("left",t=>t,void 0,"Achteruit springen in de video (vereist focus op de speler)"),new S.a(">",t=>t,void 0,"Afspelen versnellen (vereist focus op de speler)"),new S.a("<",t=>t,void 0,"Afspelen vertragen (vereist focus op de speler)"),new S.a(".",t=>t,void 0,"Frame per frame door de video navigeren (vereist focus op de speler)")],this.isUserLoggedIn()&&(this.hotkeys=this.hotkeys.concat([new S.a("shift+l",()=>(this.setLike(),!1),void 0,"Like de video"),new S.a("shift+d",()=>(this.setDislike(),!1),void 0,"Dislike de video"),new S.a("shift+s",()=>(this.subscribeButton.subscribed?this.subscribeButton.unsubscribe():this.subscribeButton.subscribe(),!1),void 0,"Abonneren op account")])),this.hotkeysService.add(this.hotkeys)}}return t.LOCAL_STORAGE_PRIVACY_CONCERN_KEY="video-watch-privacy-concern",t.\u0275fac=function(e){return new(e||t)(_.Qb(_.l),_.Qb(_.h),_.Qb(w.a),_.Qb(w.h),_.Qb(r.s),_.Qb(h.b),_.Qb(y.d),_.Qb(x.d),_.Qb(y.a),_.Qb(y.D),_.Qb(y.x),_.Qb(y.r),_.Qb(y.m),_.Qb(y.j),_.Qb(_.C),_.Qb(D.a),_.Qb(r.l),_.Qb(S.c),_.Qb(R.a),_.Qb(y.n),_.Qb(y.v),_.Qb(f.v),_.Qb(_.w))},t.\u0275cmp=_.Kb({type:t,selectors:[["my-video-watch"]],viewQuery:function(t,e){if(1&t&&(_.Xc(qn,3),_.Xc(Xn,1),_.Xc(Qn,1),_.Xc(Gn,1),_.Xc(Yn,1)),2&t){let t;_.Hc(t=_.lc())&&(e.videoWatchPlaylist=t.first),_.Hc(t=_.lc())&&(e.videoShareModal=t.first),_.Hc(t=_.lc())&&(e.videoSupportModal=t.first),_.Hc(t=_.lc())&&(e.subscribeButton=t.first),_.Hc(t=_.lc())&&(e.videoDownloadModal=t.first)}},decls:17,vars:15,consts:function(){let t,e,n,i,o,r,s,a,c,l,d,u,h,p,f,g,v,m,b,y,_,C,P,T,O,M,k,w,x,E,S,I,j;return t="Placeholder image",e="\n      De video wordt ge\xEFmporteerd en is beschikbaar wanneer het importeren is voltooid.\n    ",n="\n      De video wordt getranscodeerd, deze werkt mogelijk niet correct.\n    ",i="\n      Deze video wordt gepubliceerd op \n          " + "\ufffd0\ufffd" + ".\n    \n        ",o="Deze live-uitzending is nog niet begonnen.",r="Deze live-uitzending is voorbij.",s="Deze video is geblokkeerd.",a="Gepubliceerd op " + "\ufffd#10\ufffd" + "" + "\ufffd/#10\ufffd" + "",c="Gepubliceerd op " + "\ufffd#21\ufffd" + "" + "\ufffd/#21\ufffd" + "",l="DELEN",d="Privacy",u="Categorie",h="Licentie",p="Taal",f="Tags",g="ONDERSTEUNING",v="OPSLAAN",m="DOWNLOADEN",b="Kanaalpagina",y="Accountpagina",_="Door " + "\ufffd0\ufffd" + "",C="Accountpagina",P="" + "\ufffd0\ufffd" + " ",T="Meer laten zien",O="Laat minder zien",M="Bronexemplaar van PeerTube",k="Oorspronkelijk gepubliceerd",w="Tijdsduur",x="Vriendelijke Herinnering:",E="het deelsysteem voor deze video maakt dat technische gegevens over je systeem (onder meer je pubieke ip-adres) bij andere deelnemers kunnen terechtkomen.",S="Meer informatie krijgen",I="Meer informatie",j="OK",[[1,"root",3,"ngClass"],["id","video-wrapper"],["class","remote-server-down",4,"ngIf"],["id","videojs-wrapper"],["alt",t,3,"src",4,"ngIf"],[1,"playlist",3,"playlist","videoFound"],["videoWatchPlaylist",""],[1,"row"],["class","col-md-12 alert alert-warning",4,"ngIf"],["class","col-md-12 alert alert-info",4,"ngIf"],["class","col-md-12 alert alert-danger",4,"ngIf"],["class","margin-content video-bottom",4,"ngIf"],["class","row privacy-concerns",4,"ngIf"],[4,"ngIf"],[1,"remote-server-down"],["alt",t,3,"src"],[1,"col-md-12","alert","alert-warning"],e,n,[1,"col-md-12","alert","alert-info"],i,o,r,[1,"col-md-12","alert","alert-danger"],[1,"blocked-label"],s,[1,"margin-content","video-bottom"],[1,"video-info"],[1,"video-info-first-row"],[1,"d-block","d-md-none"],[1,"video-info-name"],[1,"video-info-date-views"],a,[3,"date"],[3,"video"],[1,"d-flex","justify-content-between","flex-direction-column"],[1,"d-none","d-md-block"],[1,"video-info-first-row-bottom"],[1,"d-none","d-md-block","video-info-date-views"],c,[1,"video-actions-rates"],["ratePopoverText",""],[1,"video-actions","fullWidth","justify-content-end"],["placement","bottom auto",1,"action-button","action-button-like",3,"ngbPopover","ngClass","ngbTooltip","click","keyup.enter"],["iconName","like"],["class","count",4,"ngIf"],["placement","bottom auto",1,"action-button","action-button-dislike",3,"ngbPopover","ngClass","ngbTooltip","click","keyup.enter"],["iconName","dislike"],["class","action-button action-button-support","placement","bottom auto",3,"ngbTooltip","click","keyup.enter",4,"ngIf"],[1,"action-button",3,"click","keyup.enter"],["iconName","share","aria-hidden","true"],[1,"icon-text"],l,["class","action-dropdown","ngbDropdown","","placement","top","role","button","autoClose","outside","placement","bottom auto",3,"ngbTooltip","openChange",4,"ngIf"],[1,"video-info-likes-dislikes-bar-outer-container"],["class","video-info-likes-dislikes-bar-inner-container","placement","bottom",3,"ngbTooltip",4,"ngIf"],["class","video-info-likes-dislikes-bar","placement","bottom",3,"ngbTooltip",4,"ngIf"],[1,"pt-3","border-top","video-info-channel","d-flex"],[1,"video-info-channel-left","d-flex"],[3,"video","genericChannel"],[1,"video-info-channel-left-links","ml-1"],["size","small",3,"videoChannels"],["subscribeButton",""],[1,"video-info-description"],["timestampRouteTransformer","",1,"video-info-description-html",3,"innerHTML","timestampClicked"],["class","video-info-description-more",3,"click",4,"ngIf"],[1,"video-attributes","mb-3"],[1,"video-attribute"],[1,"video-attribute-label"],d,[1,"video-attribute-value"],["class","video-attribute",4,"ngIf"],u,["class","video-attribute-value",4,"ngIf"],["class","video-attribute-value",3,"routerLink","queryParams",4,"ngIf"],h,p,[1,"video-attribute","video-attribute-tags"],f,["class","video-attribute-value",3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"border-top",3,"video","user","timestampClicked"],[3,"inputRecommendation","playlist","gotRecommendations"],[3,"innerHTML"],[1,"count"],["placement","bottom auto",1,"action-button","action-button-support",3,"ngbTooltip","click","keyup.enter"],["iconName","support","aria-hidden","true"],g,["ngbDropdown","","placement","top","role","button","autoClose","outside","placement","bottom auto",1,"action-dropdown",3,"ngbTooltip","openChange"],["ngbDropdownToggle","",1,"action-button","action-button-save"],["iconName","playlist-add","aria-hidden","true"],v,["ngbDropdownMenu",""],["addContent",""],["class","action-button action-button-save",3,"click","keydown.enter",4,"ngIf"],["videoDownloadModal",""],[1,"action-button","action-button-save",3,"click","keydown.enter"],["iconName","download","aria-hidden","true"],[1,"icon-text","d-none","d-sm-inline"],m,["placement","bottom auto","buttonDirection","horizontal",3,"buttonStyled","video","videoCaptions","displayOptions","videoRemoved","modalOpened"],["placement","bottom",1,"video-info-likes-dislikes-bar-inner-container",3,"ngbTooltip"],[1,"video-info-likes-dislikes-bar"],[1,"likes-bar",3,"ngClass","ngStyle"],["placement","bottom",1,"video-info-likes-dislikes-bar",3,"ngbTooltip"],[1,"likes-bar",3,"ngStyle"],["title",b,3,"routerLink"],["title",y,3,"routerLink"],_,["title",C,1,"single-link",3,"routerLink"],P,[1,"video-info-description-more",3,"click"],T,["class","glyphicon glyphicon-menu-down",4,"ngIf"],[1,"description-loading",3,"loading"],[1,"glyphicon","glyphicon-menu-down"],O,["class","glyphicon glyphicon-menu-up",4,"ngIf"],[1,"glyphicon","glyphicon-menu-up"],M,["target","_blank","rel","noopener noreferrer",1,"video-attribute-value",3,"href"],k,[1,"video-attribute-value",3,"routerLink","queryParams"],w,[1,"row","privacy-concerns"],[1,"privacy-concerns-text"],[1,"mr-2"],x,E,["title",S,"target","_blank","rel","noopener noreferrer","href","/about/peertube#privacy"],I,[1,"privacy-concerns-button","privacy-concerns-okay",3,"click"],j,["videoSupportModal",""],[3,"video","videoCaptions","playlist"],["videoShareModal",""]]},template:function(t,e){1&t&&(_.Wb(0,"div",0),_.Wb(1,"div",1),_.Rc(2,Jn,4,0,"div",2),_.Wb(3,"div",3),_.Rc(4,Zn,1,1,"img",4),_.Vb(),_.Wb(5,"my-video-watch-playlist",5,6),_.kc("videoFound",function(t){return e.onPlaylistVideoFound(t)}),_.Vb(),_.Vb(),_.Wb(7,"div",7),_.Rc(8,ti,2,0,"div",8),_.Rc(9,ei,2,0,"div",8),_.Rc(10,ni,3,4,"div",9),_.Rc(11,ii,2,0,"div",9),_.Rc(12,oi,2,0,"div",9),_.Rc(13,ri,4,1,"div",10),_.Vb(),_.Rc(14,Ui,87,56,"div",11),_.Rc(15,$i,11,0,"div",12),_.Vb(),_.Rc(16,Ki,5,4,"ng-container",13)),2&t&&(_.vc("ngClass",_.zc(13,qi,e.theaterEnabled)),_.Db(2),_.vc("ngIf",e.remoteServerDown),_.Db(2),_.vc("ngIf",e.playerPlaceholderImgSrc),_.Db(1),_.vc("playlist",e.playlist),_.Db(3),_.vc("ngIf",e.isVideoToImport()),_.Db(1),_.vc("ngIf",e.isVideoToTranscode()),_.Db(1),_.vc("ngIf",e.hasVideoScheduledPublication()),_.Db(1),_.vc("ngIf",e.isWaitingForLive()),_.Db(1),_.vc("ngIf",e.isLiveEnded()),_.Db(1),_.vc("ngIf",null==e.video?null:e.video.blacklisted),_.Db(1),_.vc("ngIf",e.video),_.Db(1),_.vc("ngIf",!1===e.hasAlreadyAcceptedPrivacyConcern),_.Db(1),_.vc("ngIf",null!==e.video))},directives:[f.l,f.n,me,be.a,ye.a,re.z,re.D,se.a,_e.a,Ce.a,Pe,f.m,Rn,Wn,re.h,re.n,re.l,Fn.a,Hn.a,Un.a,f.o,w.k,fn.a,le,$n.a],pipes:[f.e,Kn.a],styles:['.root.theater-enabled[_ngcontent-%COMP%]   #video-wrapper[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.root.theater-enabled[_ngcontent-%COMP%]   #video-wrapper[_ngcontent-%COMP%]   #videojs-wrapper[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 50px - 115px)}.root.theater-enabled[_ngcontent-%COMP%]   #video-wrapper[_ngcontent-%COMP%]     .video-js{height:calc(100vh - 50px - 115px);width:100%;max-width:none}.root.theater-enabled[_ngcontent-%COMP%]   #video-wrapper[_ngcontent-%COMP%]   my-video-watch-playlist[_ngcontent-%COMP%]     .playlist{width:100%!important;height:auto!important;max-height:300px!important;max-width:none;border-bottom:1px solid rgba(0,0,0,.1)!important}.blocked-label[_ngcontent-%COMP%]{font-weight:600}#video-wrapper[_ngcontent-%COMP%]{background-color:#000;display:flex;justify-content:center}#video-wrapper[_ngcontent-%COMP%]   #videojs-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-grow:1;height:66vh}#video-wrapper[_ngcontent-%COMP%]   .remote-server-down[_ngcontent-%COMP%]{color:#fff;display:flex;flex-direction:column;align-items:center;text-align:center;justify-content:center;background-color:#141313;width:100%;font-size:24px;height:500px}@media screen and (max-width:1000px){#video-wrapper[_ngcontent-%COMP%]   .remote-server-down[_ngcontent-%COMP%]{font-size:20px}}@media screen and (max-width:600px){#video-wrapper[_ngcontent-%COMP%]   .remote-server-down[_ngcontent-%COMP%]{font-size:16px}}#video-wrapper[_ngcontent-%COMP%]     .video-js{width:100%;max-width:calc(66vh * 1.7);height:66vh}#video-wrapper[_ngcontent-%COMP%]     .video-js video{outline:0;position:relative!important}@media screen and (max-width:600px){#video-wrapper[_ngcontent-%COMP%]   #videojs-wrapper[_ngcontent-%COMP%]{height:calc(100vw / 1.7)!important}#video-wrapper[_ngcontent-%COMP%]   .remote-server-down[_ngcontent-%COMP%], #video-wrapper[_ngcontent-%COMP%]     .video-js{width:100vw;height:calc(100vw / 1.7)!important}}.alert[_ngcontent-%COMP%]{text-align:center;border-radius:0}.flex-direction-column[_ngcontent-%COMP%]{flex-direction:column}#video-not-found[_ngcontent-%COMP%]{height:300px;line-height:300px;margin-top:50px;text-align:center;font-weight:600;font-size:15px}.video-bottom[_ngcontent-%COMP%]{display:flex;margin-top:1.5rem}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]{flex-grow:1;min-width:1px;max-width:100%}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]{display:flex}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{flex-grow:1}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-info-name[_ngcontent-%COMP%]{margin-right:30px;min-height:40px;font-size:27px;font-weight:600;flex-grow:1}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-info-first-row-bottom[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;width:100%}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-info-date-views[_ngcontent-%COMP%]{align-self:start;margin-bottom:10px;margin-right:10px;font-size:1em}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-info-channel[_ngcontent-%COMP%]{font-weight:600;font-size:15px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-info-channel[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--mainForegroundColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-info-channel[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-info-channel[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-info-channel[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-info-channel[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:.8}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-info-channel[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;border-radius:50%;width:18px;height:18px;min-width:18px;min-height:18px;margin:-2px 5px 0 0}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-info-channel[_ngcontent-%COMP%]   .video-info-channel-left[_ngcontent-%COMP%]{flex-grow:1}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-info-channel[_ngcontent-%COMP%]   .video-info-channel-left[_ngcontent-%COMP%]   .video-info-channel-left-links[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;line-height:1.37}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-info-channel[_ngcontent-%COMP%]   .video-info-channel-left[_ngcontent-%COMP%]   .video-info-channel-left-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:nth-of-type(2){font-weight:400;font-size:90%}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-info-channel[_ngcontent-%COMP%]   .video-info-channel-left[_ngcontent-%COMP%]   .video-info-channel-left-links[_ngcontent-%COMP%]   a.single-link[_ngcontent-%COMP%]{margin-top:7px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-info-channel[_ngcontent-%COMP%]   my-subscribe-button[_ngcontent-%COMP%]{margin-left:5px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   my-feed[_ngcontent-%COMP%]{margin-left:5px;margin-top:1px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]{align-items:start;width:-webkit-max-content;width:max-content;margin:0 0 10px auto}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]{height:40px;display:flex;align-items:center}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:not(:first-child), .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]   .action-dropdown[_ngcontent-%COMP%], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]   my-video-actions-dropdown[_ngcontent-%COMP%]{margin-left:5px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button{border:none;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;cursor:pointer;display:inline-flex;align-items:center;line-height:normal!important;font-size:100%;font-weight:600;display:inline-block;padding:0 10px;white-space:nowrap;background-color:initial!important;color:var(--actionButtonColor);text-transform:uppercase}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button my-global-icon{position:relative;width:21px;margin-right:0;top:-1px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button   .feather, .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button   .material{color:var(--actionButtonColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button   svg circle[fill="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button   svg g[fill="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button   svg path[fill="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button   svg polygon[fill="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button   svg rect[fill="#000"]{fill:var(--actionButtonColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button   svg circle[stroke="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button   svg g[stroke="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button   svg path[stroke="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button   svg polygon[stroke="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button   svg rect[stroke="#000"]{stroke:var(--actionButtonColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button   svg stop[stop-color="#000"]{stop-color:var(--actionButtonColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button:after{display:none}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button:hover{opacity:.9}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-dislike, .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-like{filter:brightness(120%)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-dislike .count, .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-like .count{margin:0 5px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-like.activated .count, .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-like.activated my-global-icon   .feather, .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-like.activated my-global-icon   .material{color:var(--activatedActionButtonColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-like.activated my-global-icon   svg circle[fill="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-like.activated my-global-icon   svg g[fill="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-like.activated my-global-icon   svg path[fill="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-like.activated my-global-icon   svg polygon[fill="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-like.activated my-global-icon   svg rect[fill="#000"]{fill:var(--activatedActionButtonColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-like.activated my-global-icon   svg circle[stroke="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-like.activated my-global-icon   svg g[stroke="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-like.activated my-global-icon   svg path[stroke="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-like.activated my-global-icon   svg polygon[stroke="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-like.activated my-global-icon   svg rect[stroke="#000"]{stroke:var(--activatedActionButtonColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-like.activated my-global-icon   svg stop[stop-color="#000"]{stop-color:var(--activatedActionButtonColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-dislike.activated .count, .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-dislike.activated my-global-icon   .feather, .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-dislike.activated my-global-icon   .material{color:var(--activatedActionButtonColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-dislike.activated my-global-icon   svg circle[fill="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-dislike.activated my-global-icon   svg g[fill="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-dislike.activated my-global-icon   svg path[fill="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-dislike.activated my-global-icon   svg polygon[fill="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-dislike.activated my-global-icon   svg rect[fill="#000"]{fill:var(--activatedActionButtonColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-dislike.activated my-global-icon   svg circle[stroke="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-dislike.activated my-global-icon   svg g[stroke="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-dislike.activated my-global-icon   svg path[stroke="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-dislike.activated my-global-icon   svg polygon[stroke="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-dislike.activated my-global-icon   svg rect[stroke="#000"]{stroke:var(--activatedActionButtonColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-dislike.activated my-global-icon   svg stop[stop-color="#000"]{stop-color:var(--activatedActionButtonColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-support, .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-support my-global-icon   .feather, .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-support my-global-icon   .material{color:var(--supportButtonColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-support my-global-icon   svg circle[fill="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-support my-global-icon   svg g[fill="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-support my-global-icon   svg path[fill="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-support my-global-icon   svg polygon[fill="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-support my-global-icon   svg rect[fill="#000"]{fill:var(--supportButtonColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-support my-global-icon   svg circle[stroke="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-support my-global-icon   svg g[stroke="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-support my-global-icon   svg path[stroke="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-support my-global-icon   svg polygon[stroke="#000"], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-support my-global-icon   svg rect[stroke="#000"]{stroke:var(--supportButtonColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-support my-global-icon   svg stop[stop-color="#000"]{stop-color:var(--supportButtonColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-support my-global-icon   path:first-child{fill:var(--supportButtonHeartColor)!important}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button.action-button-save my-global-icon{top:0!important;right:-1px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]    .action-button .icon-text{margin-left:3px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-info-likes-dislikes-bar-outer-container[_ngcontent-%COMP%]{position:relative}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-info-likes-dislikes-bar-inner-container[_ngcontent-%COMP%]{position:absolute;height:20px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-info-likes-dislikes-bar[_ngcontent-%COMP%]{height:2px;margin-top:-2px;width:120px;background-color:#ccc;position:relative;top:10px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-info-likes-dislikes-bar[_ngcontent-%COMP%]   .likes-bar[_ngcontent-%COMP%]{height:100%;background-color:#909090}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]   .video-info-likes-dislikes-bar[_ngcontent-%COMP%]   .likes-bar.liked[_ngcontent-%COMP%]{background-color:var(--activatedActionButtonColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-description[_ngcontent-%COMP%]{margin:20px 0 20px 44px;font-size:15px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-description[_ngcontent-%COMP%]   .video-info-description-html[_ngcontent-%COMP%]{word-break:break-word;word-wrap:break-word;overflow-wrap:break-word;-webkit-hyphens:auto;hyphens:auto}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-description[_ngcontent-%COMP%]   .video-info-description-html[_ngcontent-%COMP%]     a{text-decoration:none}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-description[_ngcontent-%COMP%]   .description-loading[_ngcontent-%COMP%], .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-description[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{margin-left:3px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-description[_ngcontent-%COMP%]   .description-loading[_ngcontent-%COMP%]{display:inline-block}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-description[_ngcontent-%COMP%]   .video-info-description-more[_ngcontent-%COMP%]{cursor:pointer;font-weight:600;color:var(--greyForegroundColor);font-size:14px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-description[_ngcontent-%COMP%]   .video-info-description-more[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{position:relative;top:2px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-attributes[_ngcontent-%COMP%]{margin-left:44px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-attributes[_ngcontent-%COMP%]   .video-attribute[_ngcontent-%COMP%]{font-size:13px;display:block;margin-bottom:12px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-attributes[_ngcontent-%COMP%]   .video-attribute[_ngcontent-%COMP%]   .video-attribute-label[_ngcontent-%COMP%]{min-width:142px;padding-right:5px;display:inline-block;color:var(--greyForegroundColor);font-weight:700}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-attributes[_ngcontent-%COMP%]   .video-attribute[_ngcontent-%COMP%]   a.video-attribute-value[_ngcontent-%COMP%]{color:var(--mainForegroundColor)}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-attributes[_ngcontent-%COMP%]   .video-attribute[_ngcontent-%COMP%]   a.video-attribute-value[_ngcontent-%COMP%]:active, .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-attributes[_ngcontent-%COMP%]   .video-attribute[_ngcontent-%COMP%]   a.video-attribute-value[_ngcontent-%COMP%]:focus, .video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-attributes[_ngcontent-%COMP%]   .video-attribute[_ngcontent-%COMP%]   a.video-attribute-value[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-attributes[_ngcontent-%COMP%]   .video-attribute[_ngcontent-%COMP%]   a.video-attribute-value[_ngcontent-%COMP%]:hover{opacity:.9}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-attributes[_ngcontent-%COMP%]   .video-attribute.video-attribute-tags[_ngcontent-%COMP%]   .video-attribute-value[_ngcontent-%COMP%]:not(:nth-child(2)):before{content:", "}.video-bottom[_ngcontent-%COMP%]     .other-videos{padding-left:15px;min-width:238px}@media screen and (min-width:1086px){.video-bottom[_ngcontent-%COMP%]     .other-videos{width:-webkit-min-content;width:min-content}}.video-bottom[_ngcontent-%COMP%]     .other-videos .title-page{margin:0!important}.video-bottom[_ngcontent-%COMP%]     .other-videos .video-miniature{display:flex;width:-webkit-max-content;width:max-content;height:100%;padding-bottom:20px;flex-wrap:wrap}@media screen and (max-width:1086px){.video-bottom[_ngcontent-%COMP%]     .other-videos .video-bottom{margin-left:1rem}}@media screen and (max-width:500px){.video-bottom[_ngcontent-%COMP%]     .other-videos .video-bottom{margin-left:0;margin-top:.5rem}}my-video-comments[_ngcontent-%COMP%]{display:inline-block;width:100%;margin-bottom:20px}.privacy-concerns[_ngcontent-%COMP%]{z-index:17001;width:calc(100% - 240px)}@media screen and (max-width:800px){.privacy-concerns[_ngcontent-%COMP%]{margin-left:225px}}.expanded[_nghost-%COMP%]   .privacy-concerns[_ngcontent-%COMP%], .expanded   [_nghost-%COMP%]   .privacy-concerns[_ngcontent-%COMP%]{width:100%;margin-left:-15px}.privacy-concerns[_ngcontent-%COMP%]{position:fixed;bottom:0;z-index:20;padding:5px 15px;display:flex;flex-wrap:nowrap;align-items:center;justify-content:space-between;background-color:rgba(0,0,0,.9);color:#fff}.privacy-concerns[_ngcontent-%COMP%]   .privacy-concerns-text[_ngcontent-%COMP%]{margin:0 5px}.privacy-concerns[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--mainColor);transition:color .3s}.privacy-concerns[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .privacy-concerns[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .privacy-concerns[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.privacy-concerns[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.privacy-concerns[_ngcontent-%COMP%]   .privacy-concerns-button[_ngcontent-%COMP%]{padding:5px 8px 5px 7px;margin-left:auto;border-radius:3px;white-space:nowrap;cursor:pointer;transition:background-color .3s;font-weight:600}.privacy-concerns[_ngcontent-%COMP%]   .privacy-concerns-button[_ngcontent-%COMP%]:hover{background-color:#000}.privacy-concerns[_ngcontent-%COMP%]   .privacy-concerns-okay[_ngcontent-%COMP%]{background-color:var(--mainColor);margin-left:10px}@media screen and (max-width:1600px){.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-attributes[_ngcontent-%COMP%]   .video-attribute[_ngcontent-%COMP%]{margin-bottom:5px}}@media screen and (max-width:1300px){.privacy-concerns[_ngcontent-%COMP%]{font-size:12px;padding:2px 5px}.privacy-concerns[_ngcontent-%COMP%]   .privacy-concerns-text[_ngcontent-%COMP%]{margin:0}}@media screen and (max-width:1100px){#video-wrapper[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}#video-wrapper[_ngcontent-%COMP%]   my-video-watch-playlist[_ngcontent-%COMP%]     .playlist{width:100%!important;height:auto!important;max-height:300px!important;max-width:none;border-bottom:1px solid rgba(0,0,0,.1)!important}.video-bottom[_ngcontent-%COMP%]{flex-direction:column}.video-bottom[_ngcontent-%COMP%]     .other-videos{padding-left:0!important}.video-bottom[_ngcontent-%COMP%]     .other-videos   .video-miniature{flex-direction:row;width:auto}}@media screen and (max-width:600px){.video-bottom[_ngcontent-%COMP%]{margin-top:20px!important;padding-bottom:20px!important}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]{padding:0}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-info-name[_ngcontent-%COMP%]{font-size:20px;height:auto}  .other-videos .video-miniature{flex-direction:column}.privacy-concerns[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width:450px){.video-bottom[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]   .icon-text[_ngcontent-%COMP%]{display:none!important}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-info-name[_ngcontent-%COMP%]{font-size:18px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-info-date-views[_ngcontent-%COMP%]{font-size:14px}.video-bottom[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-first-row[_ngcontent-%COMP%]   .video-actions-rates[_ngcontent-%COMP%]{margin-top:10px}.video-bottom[_ngcontent-%COMP%]   .video-info-description[_ngcontent-%COMP%]{font-size:14px!important}}#video-wrapper[_ngcontent-%COMP%]     .video-js.vjs-fullscreen{max-width:unset}']}),t})();const Qi=[{path:"playlist/:playlistId",component:Xi,canActivate:[x.a]},{path:":videoId/comments/:commentId",redirectTo:":videoId"},{path:":videoId",component:Xi,canActivate:[x.a]}];let Gi=(()=>{class t{}return t.\u0275mod=_.Ob({type:t}),t.\u0275inj=_.Nb({factory:function(e){return new(e||t)},imports:[[w.l.forChild(Qi)],w.l]}),t})(),Yi=(()=>{class t{}return t.\u0275mod=_.Ob({type:t}),t.\u0275inj=_.Nb({factory:function(e){return new(e||t)},providers:[p.a],imports:[[Gi,k,r.h,i.c,u.b,h.a,c.a,s.g,o.a,d.a,a.a,l.a]]}),t})()},Rz0W:function(t,e,n){var i=n("q0Rj");t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},SM4Z:function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},t.exports.default=t.exports,t.exports.__esModule=!0,n.apply(this,arguments)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},Trnl:function(t,e,n){"use strict";function i(){const t=m("volume");if(null!=t){const e=parseFloat(t);if(isNaN(e))return;return e}}function o(){const t=m("webtorrent_enabled");return null==t||"true"===t}function r(){const t=m("mute");if(null!=t)return"true"===t}function s(){const t=m("theater-enabled");return null!=t&&"true"===t}function a(){const t=m("video-quality");if(null!=t)return t}function c(t){return b("video-quality",t)}function l(t){return b("volume",t.toString())}function d(t){return b("mute",t.toString())}function u(t){return b("theater-enabled",t.toString())}function h(t){return b("average-bandwidth",t.toString())}function p(){const t=m("average-bandwidth");if(null!=t){const e=parseInt(t,10);if(isNaN(e))return;return e}}function f(t){return b("last-subtitle",t)}function g(){return m("last-subtitle")}n.d(e,"g",function(){return i}),n.d(e,"d",function(){return o}),n.d(e,"c",function(){return r}),n.d(e,"f",function(){return s}),n.d(e,"e",function(){return a}),n.d(e,"k",function(){return c}),n.d(e,"m",function(){return l}),n.d(e,"j",function(){return d}),n.d(e,"l",function(){return u}),n.d(e,"h",function(){return h}),n.d(e,"a",function(){return p}),n.d(e,"i",function(){return f}),n.d(e,"b",function(){return g});const v="peertube-videojs-";function m(t){try{return localStorage.getItem(v+t)}catch(e){return}}function b(t,e){try{localStorage.setItem(v+t,e)}catch(n){}}},"X/Dg":function(t,e,n){var i=n("QPJ2").default,o=n("GE+h");t.exports=function(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?o(t):e},t.exports.default=t.exports,t.exports.__esModule=!0},ZyuO:function(t,e){var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t.exports=n},aQop:function(t,e,n){var i=n("q0Rj");t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},cmjK:function(t,e,n){var i,o,r;r=function(t){"use strict";"undefined"!=typeof window&&(window.videojs_hotkeys={version:"0.2.27"}),(t.registerPlugin||t.plugin)("hotkeys",function(e){var n=this,i=n.el(),o=document,r=(e=(t.mergeOptions||t.util.mergeOptions)({volumeStep:.1,seekStep:5,enableMute:!0,enableVolumeScroll:!0,enableHoverScroll:!1,enableFullscreen:!0,enableNumbers:!0,enableJogStyle:!1,alwaysCaptureHotkeys:!1,captureDocumentHotkeys:!1,documentHotkeysFocusElementFilter:function(){return!1},enableModifiersForNumbers:!0,enableInactiveFocus:!0,skipInitialFocus:!1,playPauseKey:function(t){return 32===t.which||179===t.which},rewindKey:function(t){return 37===t.which||177===t.which},forwardKey:function(t){return 39===t.which||176===t.which},volumeUpKey:function(t){return 38===t.which},volumeDownKey:function(t){return 40===t.which},muteKey:function(t){return 77===t.which},fullscreenKey:function(t){return 70===t.which},customKeys:{}},e||{})).volumeStep,s=e.seekStep,a=e.enableMute,c=e.enableVolumeScroll,l=e.enableHoverScroll,d=e.enableFullscreen,u=e.enableNumbers,h=e.enableJogStyle,p=e.alwaysCaptureHotkeys,f=e.captureDocumentHotkeys,g=e.documentHotkeysFocusElementFilter,v=e.enableModifiersForNumbers,m=e.enableInactiveFocus,b=e.skipInitialFocus,y=t.VERSION;i.hasAttribute("tabIndex")||i.setAttribute("tabIndex","-1"),i.style.outline="none",!p&&n.autoplay()||b||n.one("play",function(){i.focus()}),m&&n.on("userinactive",function(){var t=function(){clearTimeout(e)},e=setTimeout(function(){n.off("useractive",t);var e=o.activeElement,r=i.querySelector(".vjs-control-bar");e&&e.parentElement==r&&i.focus()},10);n.one("useractive",t)}),n.on("play",function(){var t=i.querySelector(".iframeblocker");t&&""===t.style.display&&(t.style.display="block",t.style.bottom="39px")});var _=function(t){var s,c,l=t.which,m=t.preventDefault.bind(t),b=n.duration();if(n.controls()){var y=o.activeElement;if(p||f&&g(y)||y==i||y==i.querySelector(".vjs-tech")||y==i.querySelector(".vjs-control-bar")||y==i.querySelector(".iframeblocker"))switch(O(t,n)){case 1:m(),(p||f)&&t.stopPropagation(),n.paused()?k(n.play()):n.pause();break;case 2:s=!n.paused(),m(),s&&n.pause(),(c=n.currentTime()-M(t))<=0&&(c=0),n.currentTime(c),s&&k(n.play());break;case 3:s=!n.paused(),m(),s&&n.pause(),(c=n.currentTime()+M(t))>=b&&(c=s?b-.001:b),n.currentTime(c),s&&k(n.play());break;case 5:m(),h?(c=n.currentTime()-1,n.currentTime()<=1&&(c=0),n.currentTime(c)):n.volume(n.volume()-r);break;case 4:m(),h?((c=n.currentTime()+1)>=b&&(c=b),n.currentTime(c)):n.volume(n.volume()+r);break;case 6:a&&n.muted(!n.muted());break;case 7:d&&(n.isFullscreen()?n.exitFullscreen():n.requestFullscreen());break;default:if((l>47&&l<59||l>95&&l<106)&&(v||!(t.metaKey||t.ctrlKey||t.altKey))&&u){var _=48;l>95&&(_=96);var C=l-_;m(),n.currentTime(n.duration()*C*.1)}for(var P in e.customKeys){var T=e.customKeys[P];T&&T.key&&T.handler&&T.key(t)&&(m(),T.handler(n,e,t))}}}},C=!1,P=i.querySelector(".vjs-volume-menu-button")||i.querySelector(".vjs-volume-panel");null!=P&&(P.onmouseover=function(){C=!0},P.onmouseout=function(){C=!1});var T=function(t){if(l)var e=0;else e=o.activeElement;if(n.controls()&&(p||e==i||e==i.querySelector(".vjs-tech")||e==i.querySelector(".iframeblocker")||e==i.querySelector(".vjs-control-bar")||C)&&c){t=window.event||t;var s=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));t.preventDefault(),1==s?n.volume(n.volume()+r):-1==s&&n.volume(n.volume()-r)}},O=function(t,n){return e.playPauseKey(t,n)?1:e.rewindKey(t,n)?2:e.forwardKey(t,n)?3:e.volumeUpKey(t,n)?4:e.volumeDownKey(t,n)?5:e.muteKey(t,n)?6:e.fullscreenKey(t,n)?7:void 0};function M(t){return"function"==typeof s?s(t):s}function k(t){null!=t&&"function"==typeof t.then&&t.then(null,function(t){})}return n.on("keydown",_),n.on("dblclick",function(t){if(null!=y&&y<="7.1.0"&&n.controls()){var e=t.relatedTarget||t.toElement||o.activeElement;e!=i&&e!=i.querySelector(".vjs-tech")&&e!=i.querySelector(".iframeblocker")||d&&(n.isFullscreen()?n.exitFullscreen():n.requestFullscreen())}}),n.on("mousewheel",T),n.on("DOMMouseScroll",T),f&&document.addEventListener("keydown",function(t){_(t)}),this})},"undefined"!=typeof window&&window.videojs?r(window.videojs):(i=[n("x3Ew")],void 0===(o=(function(t){return r(t.default||t)}).apply(e,i))||(t.exports=o))},g2LC:function(t,e){t.exports=function(t){if(!t)return!1;var e=n.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var n=Object.prototype.toString},jBAH:function(t,e){t.exports=function(t,e){var n,i=null;try{n=JSON.parse(t,e)}catch(o){i=o}return[i,n]}},q0Rj:function(t,e){function n(e,i){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,n(e,i)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},s9h0:function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}},t.exports.default=t.exports,t.exports.__esModule=!0},sDzi:function(t,e){var n={"":1,lr:1,rl:1},i={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function o(t){return"string"==typeof t&&!!i[t.toLowerCase()]&&t.toLowerCase()}function r(t,e,i){this.hasBeenReset=!1;var r="",s=!1,a=t,c=e,l=i,d=null,u="",h=!0,p="auto",f="start",g="auto",v="auto",m=100,b="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return r},set:function(t){r=""+t}},pauseOnExit:{enumerable:!0,get:function(){return s},set:function(t){s=!!t}},startTime:{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");a=t,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return c},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");c=t,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return l},set:function(t){l=""+t,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return d},set:function(t){d=t,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(t){var e=function(t){return"string"==typeof t&&!!n[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===e)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=e,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return h},set:function(t){h=!!t,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return p},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("Line: an invalid number or illegal string was specified.");p=t,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return f},set:function(t){var e=o(t);e?(f=e,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return g},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");g=t,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return v},set:function(t){var e=o(t);e?(v=e,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return m},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");m=t,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return b},set:function(t){var e=o(t);if(!e)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");b=e,this.hasBeenReset=!0}}}),this.displayState=void 0}r.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},t.exports=r},vgmO:function(t,e){var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t.exports=n},vp3X:function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},x3Ew:function(t,e,n){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var o=i(n("ZyuO")),r=i(n("zFeg")),s=i(n("SM4Z")),a=i(n("GE+h"));n("X/Dg"),n("vp3X");var c=i(n("Rz0W")),l=i(n("jBAH")),d=i(n("3zPy")),u=i(n("BF8C")),h=i(n("K4wu")),p=i(n("+g+W")),f=i(n("aQop")),g="7.11.4",v=[],m=function t(e){var n,i="info",r=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];n("log",i,e)};return n=function(t,e){return function(n,i,r){var s=e.levels[i],a=new RegExp("^("+s+")$");if("log"!==n&&r.unshift(n.toUpperCase()+":"),r.unshift(t+":"),v){v.push([].concat(r));var c=v.length-1e3;v.splice(0,c>0?c:0)}if(o.console){var l=o.console[n];l||"debug"!==n||(l=o.console.info||o.console.log),l&&s&&a.test(n)&&l[Array.isArray(r)?"apply":"call"](o.console,r)}}}(e,r),r.createLogger=function(n){return t(e+": "+n)},r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},r.level=function(t){if("string"==typeof t){if(!r.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');i=t}return i},(r.history=function(){return v?[].concat(v):[]}).filter=function(t){return(v||[]).filter(function(e){return new RegExp(".*"+t+".*").test(e[0])})},r.history.clear=function(){v&&(v.length=0)},r.history.disable=function(){null!==v&&(v.length=0,v=null)},r.history.enable=function(){null===v&&(v=[])},r.error=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return n("error",i,e)},r.warn=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return n("warn",i,e)},r.debug=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return n("debug",i,e)},r}("VIDEOJS"),b=m.createLogger,y=Object.prototype.toString,_=function(t){return T(t)?Object.keys(t):[]};function C(t,e){_(t).forEach(function(n){return e(t[n],n)})}function P(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Object.assign?s.apply(void 0,[t].concat(n)):(n.forEach(function(e){e&&C(e,function(e,n){t[n]=e})}),t)}function T(t){return!!t&&"object"==typeof t}function O(t){return T(t)&&"[object Object]"===y.call(t)&&t.constructor===Object}function M(t,e){if(!t||!e)return"";if("function"==typeof o.getComputedStyle){var n=o.getComputedStyle(t);return n?n.getPropertyValue(e)||n[e]:""}return""}function k(t){return"string"==typeof t&&Boolean(t.trim())}function w(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function x(){return r===o.document}function E(t){return T(t)&&1===t.nodeType}function S(){try{return o.parent!==o.self}catch(t){return!0}}function I(t){return function(e,n){if(!k(e))return r[t](null);k(n)&&(n=r.querySelector(n));var i=E(n)?n:r;return i[t]&&i[t](e)}}function j(t,e,n,i){void 0===t&&(t="div"),void 0===e&&(e={}),void 0===n&&(n={});var o=r.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(t){var n=e[t];-1!==t.indexOf("aria-")||"role"===t||"type"===t?(m.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+t+" to "+n+"."),o.setAttribute(t,n)):"textContent"===t?R(o,n):o[t]===n&&"tabIndex"!==t||(o[t]=n)}),Object.getOwnPropertyNames(n).forEach(function(t){o.setAttribute(t,n[t])}),i&&J(o,i),o}function R(t,e){return void 0===t.textContent?t.innerText=e:t.textContent=e,t}function D(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function L(t,e){return w(e),t.classList?t.classList.contains(e):(n=e,new RegExp("(^|\\s)"+n+"($|\\s)")).test(t.className);var n}function V(t,e){return t.classList?t.classList.add(e):L(t,e)||(t.className=(t.className+" "+e).trim()),t}function A(t,e){return t.classList?t.classList.remove(e):(w(e),t.className=t.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),t}function N(t,e,n){var i=L(t,e);if("function"==typeof n&&(n=n(t,e)),"boolean"!=typeof n&&(n=!i),n!==i)return n?V(t,e):A(t,e),t}function B(t,e){Object.getOwnPropertyNames(e).forEach(function(n){var i=e[n];null==i||!1===i?t.removeAttribute(n):t.setAttribute(n,!0===i?"":i)})}function z(t){var e={};if(t&&t.attributes&&t.attributes.length>0)for(var n=t.attributes,i=n.length-1;i>=0;i--){var o=n[i].name,r=n[i].value;"boolean"!=typeof t[o]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+o+",")||(r=null!==r),e[o]=r}return e}function W(t,e){return t.getAttribute(e)}function F(t,e,n){t.setAttribute(e,n)}function H(t,e){t.removeAttribute(e)}function U(){r.body.focus(),r.onselectstart=function(){return!1}}function $(){r.onselectstart=function(){return!0}}function K(t){if(t&&t.getBoundingClientRect&&t.parentNode){var e=t.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(t){void 0!==e[t]&&(n[t]=e[t])}),n.height||(n.height=parseFloat(M(t,"height"))),n.width||(n.width=parseFloat(M(t,"width"))),n}}function q(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};var e=t.offsetWidth,n=t.offsetHeight,i=0,o=0;do{i+=t.offsetLeft,o+=t.offsetTop,t=t.offsetParent}while(t);return{left:i,top:o,width:e,height:n}}function X(t,e){var n={},i=q(e.target),o=q(t),r=o.width,s=e.offsetY-(o.top-i.top),a=e.offsetX-(o.left-i.left);return e.changedTouches&&(a=e.changedTouches[0].pageX-o.left,s=e.changedTouches[0].pageY+o.top),n.y=1-Math.max(0,Math.min(1,s/o.height)),n.x=Math.max(0,Math.min(1,a/r)),n}function Q(t){return T(t)&&3===t.nodeType}function G(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function Y(t){return"function"==typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map(function(t){return"function"==typeof t&&(t=t()),E(t)||Q(t)?t:"string"==typeof t&&/\S/.test(t)?r.createTextNode(t):void 0}).filter(function(t){return t})}function J(t,e){return Y(e).forEach(function(e){return t.appendChild(e)}),t}function Z(t,e){return J(G(t),e)}function tt(t){return void 0===t.button&&void 0===t.buttons||0===t.button&&void 0===t.buttons||"mouseup"===t.type&&0===t.button&&0===t.buttons||0===t.button&&1===t.buttons}var et,nt=I("querySelector"),it=I("querySelectorAll"),ot=Object.freeze({__proto__:null,isReal:x,isEl:E,isInFrame:S,createEl:j,textContent:R,prependTo:D,hasClass:L,addClass:V,removeClass:A,toggleClass:N,setAttributes:B,getAttributes:z,getAttribute:W,setAttribute:F,removeAttribute:H,blockTextSelection:U,unblockTextSelection:$,getBoundingClientRect:K,findPosition:q,getPointerPosition:X,isTextNode:Q,emptyEl:G,normalizeContent:Y,appendContent:J,insertContent:Z,isSingleLeftClick:tt,$:nt,$$:it}),rt=!1,st=function(){if(x()&&!1!==et.options.autoSetup){var t=Array.prototype.slice.call(r.getElementsByTagName("video")),e=Array.prototype.slice.call(r.getElementsByTagName("audio")),n=Array.prototype.slice.call(r.getElementsByTagName("video-js")),i=t.concat(e,n);if(i&&i.length>0)for(var o=0,s=i.length;o<s;o++){var a=i[o];if(!a||!a.getAttribute){at(1);break}void 0===a.player&&null!==a.getAttribute("data-setup")&&et(a)}else rt||at(1)}};function at(t,e){e&&(et=e),o.setTimeout(st,t)}function ct(){rt=!0,o.removeEventListener("load",ct)}x()&&("complete"===r.readyState?ct():o.addEventListener("load",ct));var lt,dt=function(t){var e=r.createElement("style");return e.className=t,e},ut=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e},ht=3;function pt(){return ht++}o.WeakMap||(lt=function(){function t(){this.vdata="vdata"+Math.floor(o.performance&&o.performance.now()||Date.now()),this.data={}}var e=t.prototype;return e.set=function(t,e){var n=t[this.vdata]||pt();return t[this.vdata]||(t[this.vdata]=n),this.data[n]=e,this},e.get=function(t){var e=t[this.vdata];if(e)return this.data[e];m("We have no data for this element",t)},e.has=function(t){return t[this.vdata]in this.data},e.delete=function(t){var e=t[this.vdata];e&&(delete this.data[e],delete t[this.vdata])},t}());var ft,gt=o.WeakMap?new WeakMap:new lt;function vt(t,e){if(gt.has(t)){var n=gt.get(t);0===n.handlers[e].length&&(delete n.handlers[e],t.removeEventListener?t.removeEventListener(e,n.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&gt.delete(t)}}function mt(t,e,n,i){n.forEach(function(n){t(e,n,i)})}function bt(t){if(t.fixed_)return t;function e(){return!0}function n(){return!1}if(!t||!t.isPropagationStopped){var i=t||o.event;for(var s in t={},i)"layerX"!==s&&"layerY"!==s&&"keyLocation"!==s&&"webkitMovementX"!==s&&"webkitMovementY"!==s&&("returnValue"===s&&i.preventDefault||(t[s]=i[s]));if(t.target||(t.target=t.srcElement||r),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){i.preventDefault&&i.preventDefault(),t.returnValue=!1,i.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),t.cancelBubble=!0,i.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=n,t.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=n,null!=t.clientX){var a=r.documentElement,c=r.body;t.pageX=t.clientX+(a&&a.scrollLeft||c&&c.scrollLeft||0)-(a&&a.clientLeft||c&&c.clientLeft||0),t.pageY=t.clientY+(a&&a.scrollTop||c&&c.scrollTop||0)-(a&&a.clientTop||c&&c.clientTop||0)}t.which=t.charCode||t.keyCode,null!=t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t.fixed_=!0,t}var yt=["touchstart","touchmove"];function _t(t,e,n){if(Array.isArray(e))return mt(_t,t,e,n);gt.has(t)||gt.set(t,{});var i=gt.get(t);if(i.handlers||(i.handlers={}),i.handlers[e]||(i.handlers[e]=[]),n.guid||(n.guid=pt()),i.handlers[e].push(n),i.dispatcher||(i.disabled=!1,i.dispatcher=function(e,n){if(!i.disabled){e=bt(e);var o=i.handlers[e.type];if(o)for(var r=o.slice(0),s=0,a=r.length;s<a&&!e.isImmediatePropagationStopped();s++)try{r[s].call(t,e,n)}catch(c){m.error(c)}}}),1===i.handlers[e].length)if(t.addEventListener){var r=!1;(function(){if("boolean"!=typeof ft){ft=!1;try{var t=Object.defineProperty({},"passive",{get:function(){ft=!0}});o.addEventListener("test",null,t),o.removeEventListener("test",null,t)}catch(e){}}return ft})()&&yt.indexOf(e)>-1&&(r={passive:!0}),t.addEventListener(e,i.dispatcher,r)}else t.attachEvent&&t.attachEvent("on"+e,i.dispatcher)}function Ct(t,e,n){if(gt.has(t)){var i=gt.get(t);if(i.handlers){if(Array.isArray(e))return mt(Ct,t,e,n);var o=function(t,e){i.handlers[e]=[],vt(t,e)};if(void 0!==e){var r=i.handlers[e];if(r)if(n){if(n.guid)for(var s=0;s<r.length;s++)r[s].guid===n.guid&&r.splice(s--,1);vt(t,e)}else o(t,e)}else for(var a in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},a)&&o(t,a)}}}function Pt(t,e,n){var i=gt.has(t)?gt.get(t):{},o=t.parentNode||t.ownerDocument;if("string"==typeof e?e={type:e,target:t}:e.target||(e.target=t),e=bt(e),i.dispatcher&&i.dispatcher.call(t,e,n),o&&!e.isPropagationStopped()&&!0===e.bubbles)Pt.call(null,o,e,n);else if(!o&&!e.defaultPrevented&&e.target&&e.target[e.type]){gt.has(e.target)||gt.set(e.target,{});var r=gt.get(e.target);e.target[e.type]&&(r.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),r.disabled=!1)}return!e.defaultPrevented}function Tt(t,e,n){if(Array.isArray(e))return mt(Tt,t,e,n);var i=function i(){Ct(t,e,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||pt(),_t(t,e,i)}function Ot(t,e,n){var i=function i(){Ct(t,e,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||pt(),_t(t,e,i)}var Mt,kt=Object.freeze({__proto__:null,fixEvent:bt,on:_t,off:Ct,trigger:Pt,one:Tt,any:Ot}),wt=30,xt=function(t,e,n){e.guid||(e.guid=pt());var i=e.bind(t);return i.guid=n?n+"_"+e.guid:e.guid,i},Et=function(t,e){var n=o.performance.now();return function(){var i=o.performance.now();i-n>=e&&(t.apply(void 0,arguments),n=i)}},St=function(){};St.prototype.allowedEvents_={},St.prototype.addEventListener=St.prototype.on=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},_t(this,t,e),this.addEventListener=n},St.prototype.removeEventListener=St.prototype.off=function(t,e){Ct(this,t,e)},St.prototype.one=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},Tt(this,t,e),this.addEventListener=n},St.prototype.any=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},Ot(this,t,e),this.addEventListener=n},St.prototype.dispatchEvent=St.prototype.trigger=function(t){var e=t.type||t;"string"==typeof t&&(t={type:e}),t=bt(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),Pt(this,t)},St.prototype.queueTrigger=function(t){var e=this;Mt||(Mt=new Map);var n=t.type||t,i=Mt.get(this);i||(i=new Map,Mt.set(this,i));var r=i.get(n);i.delete(n),o.clearTimeout(r);var s=o.setTimeout(function(){0===i.size&&(i=null,Mt.delete(e)),e.trigger(t)},0);i.set(n,s)};var It=function(t){return"function"==typeof t.name?t.name():"string"==typeof t.name?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t},jt=function(t){return t instanceof St||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return"function"==typeof t[e]})},Rt=function(t){return"string"==typeof t&&/\S/.test(t)||Array.isArray(t)&&!!t.length},Dt=function(t,e,n){if(!t||!t.nodeName&&!jt(t))throw new Error("Invalid target for "+It(e)+"#"+n+"; must be a DOM node or evented object.")},Lt=function(t,e,n){if(!Rt(t))throw new Error("Invalid event type for "+It(e)+"#"+n+"; must be a non-empty string or array.")},Vt=function(t,e,n){if("function"!=typeof t)throw new Error("Invalid listener for "+It(e)+"#"+n+"; must be a function.")},At=function(t,e,n){var i,o,r,s=e.length<3||e[0]===t||e[0]===t.eventBusEl_;return s?(i=t.eventBusEl_,e.length>=3&&e.shift(),o=e[0],r=e[1]):(i=e[0],o=e[1],r=e[2]),Dt(i,t,n),Lt(o,t,n),Vt(r,t,n),{isTargetingSelf:s,target:i,type:o,listener:r=xt(t,r)}},Nt=function(t,e,n,i){Dt(t,t,e),t.nodeName?kt[e](t,n,i):t[e](n,i)},Bt={on:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var o=At(this,n,"on"),r=o.isTargetingSelf,s=o.target,a=o.type,c=o.listener;if(Nt(s,"on",a,c),!r){var l=function(){return t.off(s,a,c)};l.guid=c.guid;var d=function(){return t.off("dispose",l)};d.guid=c.guid,Nt(this,"on","dispose",l),Nt(s,"on","dispose",d)}},one:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var o=At(this,n,"one"),r=o.isTargetingSelf,s=o.target,a=o.type,c=o.listener;if(r)Nt(s,"one",a,c);else{var l=function e(){t.off(s,a,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];c.apply(null,i)};l.guid=c.guid,Nt(s,"one",a,l)}},any:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var o=At(this,n,"any"),r=o.isTargetingSelf,s=o.target,a=o.type,c=o.listener;if(r)Nt(s,"any",a,c);else{var l=function e(){t.off(s,a,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];c.apply(null,i)};l.guid=c.guid,Nt(s,"any",a,l)}},off:function(t,e,n){if(!t||Rt(t))Ct(this.eventBusEl_,t,e);else{var i=t,o=e;Dt(i,this,"off"),Lt(o,this,"off"),Vt(n,this,"off"),n=xt(this,n),this.off("dispose",n),i.nodeName?(Ct(i,o,n),Ct(i,"dispose",n)):jt(i)&&(i.off(o,n),i.off("dispose",n))}},trigger:function(t,e){if(Dt(this.eventBusEl_,this,"trigger"),!Rt(t&&"string"!=typeof t?t.type:t)){var n="Invalid event type for "+It(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!t)throw new Error(n);(this.log||m).error(n)}return Pt(this.eventBusEl_,t,e)}};function zt(t,e){void 0===e&&(e={});var n=e.eventBusKey;if(n){if(!t[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');t.eventBusEl_=t[n]}else t.eventBusEl_=j("span",{className:"vjs-event-bus"});return P(t,Bt),t.eventedCallbacks&&t.eventedCallbacks.forEach(function(t){t()}),t.on("dispose",function(){t.off(),o.setTimeout(function(){t.eventBusEl_=null},0)}),t}var Wt={state:{},setState:function(t){var e,n=this;return"function"==typeof t&&(t=t()),C(t,function(t,i){n.state[i]!==t&&((e=e||{})[i]={from:n.state[i],to:t}),n.state[i]=t}),e&&jt(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function Ft(t,e){return P(t,Wt),t.state=P({},t.state,e),"function"==typeof t.handleStateChanged&&jt(t)&&t.on("statechanged",t.handleStateChanged),t}var Ht=function(t){return"string"!=typeof t?t:t.replace(/./,function(t){return t.toLowerCase()})},Ut=function(t){return"string"!=typeof t?t:t.replace(/./,function(t){return t.toUpperCase()})};function $t(){for(var t={},e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach(function(e){e&&C(e,function(e,n){O(e)?(O(t[n])||(t[n]={}),t[n]=$t(t[n],e)):t[n]=e})}),t}var Kt=o.Map?o.Map:function(){function t(){this.map_={}}var e=t.prototype;return e.has=function(t){return t in this.map_},e.delete=function(t){var e=this.has(t);return delete this.map_[t],e},e.set=function(t,e){return this.map_[t]=e,this},e.forEach=function(t,e){for(var n in this.map_)t.call(e,this.map_[n],n,this)},t}(),qt=o.Set?o.Set:function(){function t(){this.set_={}}var e=t.prototype;return e.has=function(t){return t in this.set_},e.delete=function(t){var e=this.has(t);return delete this.set_[t],e},e.add=function(t){return this.set_[t]=1,this},e.forEach=function(t,e){for(var n in this.set_)t.call(e,n,n,this)},t}(),Xt=function(){function t(t,e,n){if(this.player_=!t&&this.play?t=this:t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=$t({},this.options_),e=this.options_=$t(this.options_,e),this.id_=e.id||e.el&&e.el.id,!this.id_){var i=t&&t.id&&t.id()||"no_player";this.id_=i+"_component_"+pt()}this.name_=e.name||null,e.el?this.el_=e.el:!1!==e.createEl&&(this.el_=this.createEl()),!1!==e.evented&&(zt(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Ft(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new qt,this.setIntervalIds_=new qt,this.rafIds_=new qt,this.namedRafs_=new Kt,this.clearingTimersOnDispose_=!1,!1!==e.initChildren&&this.initChildren(),this.ready(n),!1!==e.reportTouchActivity&&this.enableTouchActivity()}var e=t.prototype;return e.dispose=function(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),gt.has(this.el_)&&gt.delete(this.el_),this.el_=null),this.player_=null}},e.isDisposed=function(){return Boolean(this.isDisposed_)},e.player=function(){return this.player_},e.options=function(t){return t?(this.options_=$t(this.options_,t),this.options_):this.options_},e.el=function(){return this.el_},e.createEl=function(t,e,n){return j(t,e,n)},e.localize=function(t,e,n){void 0===n&&(n=t);var i=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),r=o&&o[i],s=i&&i.split("-")[0],a=o&&o[s],c=n;return r&&r[t]?c=r[t]:a&&a[t]&&(c=a[t]),e&&(c=c.replace(/\{(\d+)\}/g,function(t,n){var i=e[n-1],o=i;return void 0===i&&(o=t),o})),c},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(t){return this.childIndex_[t]},e.getChild=function(t){if(t)return this.childNameIndex_[t]},e.getDescendant=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e=e.reduce(function(t,e){return t.concat(e)},[]);for(var i=this,o=0;o<e.length;o++)if(!(i=i.getChild(e[o]))||!i.getChild)return;return i},e.addChild=function(e,n,i){var o,r;if(void 0===n&&(n={}),void 0===i&&(i=this.children_.length),"string"==typeof e){r=Ut(e);var s=n.componentClass||r;n.name=r;var a=t.getComponent(s);if(!a)throw new Error("Component "+s+" does not exist");if("function"!=typeof a)return null;o=new a(this.player_||this,n)}else o=e;if(o.parentComponent_&&o.parentComponent_.removeChild(o),this.children_.splice(i,0,o),o.parentComponent_=this,"function"==typeof o.id&&(this.childIndex_[o.id()]=o),(r=r||o.name&&Ut(o.name()))&&(this.childNameIndex_[r]=o,this.childNameIndex_[Ht(r)]=o),"function"==typeof o.el&&o.el()){var c=null;this.children_[i+1]&&(this.children_[i+1].el_?c=this.children_[i+1].el_:E(this.children_[i+1])&&(c=this.children_[i+1])),this.contentEl().insertBefore(o.el(),c)}return o},e.removeChild=function(t){if("string"==typeof t&&(t=this.getChild(t)),t&&this.children_){for(var e=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===t){e=!0,this.children_.splice(n,1);break}if(e){t.parentComponent_=null,this.childIndex_[t.id()]=null,this.childNameIndex_[Ut(t.name())]=null,this.childNameIndex_[Ht(t.name())]=null;var i=t.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}}},e.initChildren=function(){var e=this,n=this.options_.children;if(n){var i,o=this.options_,r=t.getComponent("Tech");(i=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter(function(t){return!i.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(t){var i,o;return"string"==typeof t?o=n[i=t]||e.options_[i]||{}:(i=t.name,o=t),{name:i,opts:o}}).filter(function(e){var n=t.getComponent(e.opts.componentClass||Ut(e.name));return n&&!r.isTech(n)}).forEach(function(t){var n=t.name,i=t.opts;if(void 0!==o[n]&&(i=o[n]),!1!==i){!0===i&&(i={}),i.playerOptions=e.options_.playerOptions;var r=e.addChild(n,i);r&&(e[n]=r)}})}},e.buildCSSClass=function(){return""},e.ready=function(t,e){if(void 0===e&&(e=!1),t)return this.isReady_?void(e?t.call(this):this.setTimeout(t,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(t))},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var t=this.readyQueue_;this.readyQueue_=[],t&&t.length>0&&t.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},e.$=function(t,e){return nt(t,e||this.contentEl())},e.$$=function(t,e){return it(t,e||this.contentEl())},e.hasClass=function(t){return L(this.el_,t)},e.addClass=function(t){V(this.el_,t)},e.removeClass=function(t){A(this.el_,t)},e.toggleClass=function(t,e){N(this.el_,t,e)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(t){return W(this.el_,t)},e.setAttribute=function(t,e){F(this.el_,t,e)},e.removeAttribute=function(t){H(this.el_,t)},e.width=function(t,e){return this.dimension("width",t,e)},e.height=function(t,e){return this.dimension("height",t,e)},e.dimensions=function(t,e){this.width(t,!0),this.height(e)},e.dimension=function(t,e,n){if(void 0!==e)return null!==e&&e==e||(e=0),this.el_.style[t]=-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?e:"auto"===e?"":e+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var i=this.el_.style[t],o=i.indexOf("px");return-1!==o?parseInt(i.slice(0,o),10):parseInt(this.el_["offset"+Ut(t)],10)},e.currentDimension=function(t){var e=0;if("width"!==t&&"height"!==t)throw new Error("currentDimension only accepts width or height value");if(e=M(this.el_,t),0===(e=parseFloat(e))||isNaN(e)){var n="offset"+Ut(t);e=this.el_[n]}return e},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(t){this.player_&&(t.stopPropagation(),this.player_.handleKeyDown(t))},e.handleKeyPress=function(t){this.handleKeyDown(t)},e.emitTapEvents=function(){var t,e=0,n=null;this.on("touchstart",function(i){1===i.touches.length&&(n={pageX:i.touches[0].pageX,pageY:i.touches[0].pageY},e=o.performance.now(),t=!0)}),this.on("touchmove",function(e){if(e.touches.length>1)t=!1;else if(n){var i=e.touches[0].pageX-n.pageX,o=e.touches[0].pageY-n.pageY;Math.sqrt(i*i+o*o)>10&&(t=!1)}});var i=function(){t=!1};this.on("touchleave",i),this.on("touchcancel",i),this.on("touchend",function(i){n=null,!0===t&&o.performance.now()-e<200&&(i.preventDefault(),this.trigger("tap"))})},e.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t,e=xt(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});var n=function(n){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}},e.setTimeout=function(t,e){var n,i=this;return t=xt(this,t),this.clearTimersOnDispose_(),n=o.setTimeout(function(){i.setTimeoutIds_.has(n)&&i.setTimeoutIds_.delete(n),t()},e),this.setTimeoutIds_.add(n),n},e.clearTimeout=function(t){return this.setTimeoutIds_.has(t)&&(this.setTimeoutIds_.delete(t),o.clearTimeout(t)),t},e.setInterval=function(t,e){t=xt(this,t),this.clearTimersOnDispose_();var n=o.setInterval(t,e);return this.setIntervalIds_.add(n),n},e.clearInterval=function(t){return this.setIntervalIds_.has(t)&&(this.setIntervalIds_.delete(t),o.clearInterval(t)),t},e.requestAnimationFrame=function(t){var e,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),t=xt(this,t),e=o.requestAnimationFrame(function(){n.rafIds_.has(e)&&n.rafIds_.delete(e),t()}),this.rafIds_.add(e),e):this.setTimeout(t,1e3/60)},e.requestNamedAnimationFrame=function(t,e){var n=this;if(!this.namedRafs_.has(t)){this.clearTimersOnDispose_(),e=xt(this,e);var i=this.requestAnimationFrame(function(){e(),n.namedRafs_.has(t)&&n.namedRafs_.delete(t)});return this.namedRafs_.set(t,i),t}},e.cancelNamedAnimationFrame=function(t){this.namedRafs_.has(t)&&(this.cancelAnimationFrame(this.namedRafs_.get(t)),this.namedRafs_.delete(t))},e.cancelAnimationFrame=function(t){return this.supportsRaf_?(this.rafIds_.has(t)&&(this.rafIds_.delete(t),o.cancelAnimationFrame(t)),t):this.clearTimeout(t)},e.clearTimersOnDispose_=function(){var t=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(e){var n=e[1];t[e[0]].forEach(function(e,i){return t[n](i)})}),t.clearingTimersOnDispose_=!1}))},t.registerComponent=function(e,n){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var i=t.getComponent("Tech"),o=i&&i.isTech(n),r=t===n||t.prototype.isPrototypeOf(n.prototype);if(o||!r)throw new Error('Illegal component, "'+e+'"; '+(o?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");e=Ut(e),t.components_||(t.components_={});var s=t.getComponent("Player");if("Player"===e&&s&&s.players){var a=s.players,c=Object.keys(a);if(a&&c.length>0&&c.map(function(t){return a[t]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return t.components_[e]=n,t.components_[Ht(e)]=n,n},t.getComponent=function(e){if(e&&t.components_)return t.components_[e]},t}();Xt.prototype.supportsRaf_="function"==typeof o.requestAnimationFrame&&"function"==typeof o.cancelAnimationFrame,Xt.registerComponent("Component",Xt);var Qt,Gt=o.navigator&&o.navigator.userAgent||"",Yt=/AppleWebKit\/([\d.]+)/i.exec(Gt),Jt=Yt?parseFloat(Yt.pop()):null,Zt=/iPod/i.test(Gt),te=(Qt=Gt.match(/OS (\d+)_/i))&&Qt[1]?Qt[1]:null,ee=/Android/i.test(Gt),ne=function(){var t=Gt.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),n=t[2]&&parseFloat(t[2]);return e&&n?parseFloat(t[1]+"."+t[2]):e||null}(),ie=ee&&ne<5&&Jt<537,oe=/Firefox/i.test(Gt),re=/Edg/i.test(Gt),se=!re&&(/Chrome/i.test(Gt)||/CriOS/i.test(Gt)),ae=function(){var t=Gt.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),ce=function(){var t=/MSIE\s(\d+)\.\d/.exec(Gt),e=t&&parseFloat(t[1]);return!e&&/Trident\/7.0/i.test(Gt)&&/rv:11.0/.test(Gt)&&(e=11),e}(),le=/Safari/i.test(Gt)&&!se&&!ee&&!re,de=/Windows/i.test(Gt),ue=Boolean(x()&&("ontouchstart"in o||o.navigator.maxTouchPoints||o.DocumentTouch&&o.document instanceof o.DocumentTouch)),he=/iPad/i.test(Gt)||le&&ue&&!/iPhone/i.test(Gt),pe=/iPhone/i.test(Gt)&&!he,fe=pe||he||Zt,ge=(le||fe)&&!se,ve=Object.freeze({__proto__:null,IS_IPOD:Zt,IOS_VERSION:te,IS_ANDROID:ee,ANDROID_VERSION:ne,IS_NATIVE_ANDROID:ie,IS_FIREFOX:oe,IS_EDGE:re,IS_CHROME:se,CHROME_VERSION:ae,IE_VERSION:ce,IS_SAFARI:le,IS_WINDOWS:de,TOUCH_ENABLED:ue,IS_IPAD:he,IS_IPHONE:pe,IS_IOS:fe,IS_ANY_SAFARI:ge});function me(t,e,n,i){return function(t,e,n){if("number"!=typeof e||e<0||e>n)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+n+").")}(t,i,n.length-1),n[i][e]}function be(t){return void 0===t||0===t.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:me.bind(null,"start",0,t),end:me.bind(null,"end",1,t)}}function ye(t,e){return Array.isArray(t)?be(t):void 0===t||void 0===e?be():be([[t,e]])}function _e(t,e){var n,i,o=0;if(!e)return 0;t&&t.length||(t=ye(0,0));for(var r=0;r<t.length;r++)n=t.start(r),(i=t.end(r))>e&&(i=e),o+=i-n;return o/e}for(var Ce,Pe={prefixed:!0},Te=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Oe=Te[0],Me=0;Me<Te.length;Me++)if(Te[Me][1]in r){Ce=Te[Me];break}if(Ce){for(var ke=0;ke<Ce.length;ke++)Pe[Oe[ke]]=Ce[ke];Pe.prefixed=Ce[0]!==Oe[0]}function we(t){if(t instanceof we)return t;"number"==typeof t?this.code=t:"string"==typeof t?this.message=t:T(t)&&("number"==typeof t.code&&(this.code=t.code),P(this,t)),this.message||(this.message=we.defaultMessages[this.code]||"")}we.prototype.code=0,we.prototype.message="",we.prototype.status=null,we.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],we.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var xe=0;xe<we.errorTypes.length;xe++)we[we.errorTypes[xe]]=xe,we.prototype[we.errorTypes[xe]]=xe;function Ee(t){return null!=t&&"function"==typeof t.then}function Se(t){Ee(t)&&t.then(null,function(t){})}var Ie=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,n,i){return t[n]&&(e[n]=t[n]),e},{cues:t.cues&&Array.prototype.map.call(t.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},je=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=j("div",{className:"vjs-modal-dialog-content"},{role:"document"}),i.descEl_=j("p",{className:"vjs-modal-dialog-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),R(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}c(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},n.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,t.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+t.prototype.buildCSSClass.call(this)},n.label=function(){return this.localize(this.options_.label||"Modal Window")},n.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},n.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},n.opened=function(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_},n.close=function(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},n.closeable=function(t){if("boolean"==typeof t){var e=this.closeable_=!!t,n=this.getChild("closeButton");if(e&&!n){var i=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(n,"close",this.close)}!e&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())}return this.closeable_},n.fill=function(){this.fillWith(this.content())},n.fillWith=function(t){var e=this.contentEl(),n=e.parentNode,i=e.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(e),this.empty(),Z(e,t),this.trigger("modalfill"),i?n.insertBefore(e,i):n.appendChild(e);var o=this.getChild("closeButton");o&&n.appendChild(o.el_)},n.empty=function(){this.trigger("beforemodalempty"),G(this.contentEl()),this.trigger("modalempty")},n.content=function(t){return void 0!==t&&(this.content_=t),this.content_},n.conditionalFocus_=function(){var t=r.activeElement,e=this.player_.el_;this.previouslyActiveEl_=null,(e.contains(t)||e===t)&&(this.previouslyActiveEl_=t,this.focus())},n.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},n.handleKeyDown=function(t){if(t.stopPropagation(),d.isEventKey(t,"Escape")&&this.closeable())return t.preventDefault(),void this.close();if(d.isEventKey(t,"Tab")){for(var e,n=this.focusableEls_(),i=this.el_.querySelector(":focus"),o=0;o<n.length;o++)if(i===n[o]){e=o;break}r.activeElement===this.el_&&(e=0),t.shiftKey&&0===e?(n[n.length-1].focus(),t.preventDefault()):t.shiftKey||e!==n.length-1||(n[0].focus(),t.preventDefault())}},n.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(t){return(t instanceof o.HTMLAnchorElement||t instanceof o.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof o.HTMLInputElement||t instanceof o.HTMLSelectElement||t instanceof o.HTMLTextAreaElement||t instanceof o.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof o.HTMLIFrameElement||t instanceof o.HTMLObjectElement||t instanceof o.HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")})},e}(Xt);je.prototype.options_={pauseOnOpen:!0,temporary:!0},Xt.registerComponent("ModalDialog",je);var Re=function(t){function e(e){var n;void 0===e&&(e=[]),(n=t.call(this)||this).tracks_=[],Object.defineProperty(a(n),"length",{get:function(){return this.tracks_.length}});for(var i=0;i<e.length;i++)n.addTrack(e[i]);return n}c(e,t);var n=e.prototype;return n.addTrack=function(t){var e=this,n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get:function(){return this.tracks_[n]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=function(){e.trigger({track:t,type:"labelchange",target:e})},jt(t)&&t.addEventListener("labelchange",t.labelchange_)},n.removeTrack=function(t){for(var e,n=0,i=this.length;n<i;n++)if(this[n]===t){(e=this[n]).off&&e.off(),this.tracks_.splice(n,1);break}e&&this.trigger({track:e,type:"removetrack",target:this})},n.getTrackById=function(t){for(var e=null,n=0,i=this.length;n<i;n++){var o=this[n];if(o.id===t){e=o;break}}return e},e}(St);for(var De in Re.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Re.prototype.allowedEvents_)Re.prototype["on"+De]=null;var Le=function(t,e){for(var n=0;n<t.length;n++)Object.keys(t[n]).length&&e.id!==t[n].id&&(t[n].enabled=!1)},Ve=function(t){function e(e){var n;void 0===e&&(e=[]);for(var i=e.length-1;i>=0;i--)if(e[i].enabled){Le(e,e[i]);break}return(n=t.call(this,e)||this).changing_=!1,n}c(e,t);var n=e.prototype;return n.addTrack=function(e){var n=this;e.enabled&&Le(this,e),t.prototype.addTrack.call(this,e),e.addEventListener&&(e.enabledChange_=function(){n.changing_||(n.changing_=!0,Le(n,e),n.changing_=!1,n.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))},n.removeTrack=function(e){t.prototype.removeTrack.call(this,e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)},e}(Re),Ae=function(t,e){for(var n=0;n<t.length;n++)Object.keys(t[n]).length&&e.id!==t[n].id&&(t[n].selected=!1)},Ne=function(t){function e(e){var n;void 0===e&&(e=[]);for(var i=e.length-1;i>=0;i--)if(e[i].selected){Ae(e,e[i]);break}return(n=t.call(this,e)||this).changing_=!1,Object.defineProperty(a(n),"selectedIndex",{get:function(){for(var t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set:function(){}}),n}c(e,t);var n=e.prototype;return n.addTrack=function(e){var n=this;e.selected&&Ae(this,e),t.prototype.addTrack.call(this,e),e.addEventListener&&(e.selectedChange_=function(){n.changing_||(n.changing_=!0,Ae(n,e),n.changing_=!1,n.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))},n.removeTrack=function(e){t.prototype.removeTrack.call(this,e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)},e}(Re),Be=function(t){function e(){return t.apply(this,arguments)||this}c(e,t);var n=e.prototype;return n.addTrack=function(e){var n=this;t.prototype.addTrack.call(this,e),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),e.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(e){t.prototype.removeTrack.call(this,e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(Re),ze=function(){function t(t){void 0===t&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var e=0,n=t.length;e<n;e++)this.addTrackElement_(t[e])}var e=t.prototype;return e.addTrackElement_=function(t){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),-1===this.trackElements_.indexOf(t)&&this.trackElements_.push(t)},e.getTrackElementByTrack_=function(t){for(var e,n=0,i=this.trackElements_.length;n<i;n++)if(t===this.trackElements_[n].track){e=this.trackElements_[n];break}return e},e.removeTrackElement_=function(t){for(var e=0,n=this.trackElements_.length;e<n;e++)if(t===this.trackElements_[e]){this.trackElements_[e].track&&"function"==typeof this.trackElements_[e].track.off&&this.trackElements_[e].track.off(),"function"==typeof this.trackElements_[e].off&&this.trackElements_[e].off(),this.trackElements_.splice(e,1);break}},t}(),We=function(){function t(e){t.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=t.prototype;return e.setCues_=function(t){var e=this.length||0,n=0,i=t.length;this.cues_=t,this.length_=t.length;var o=function(t){""+t in this||Object.defineProperty(this,""+t,{get:function(){return this.cues_[t]}})};if(e<i)for(n=e;n<i;n++)o.call(this,n)},e.getCueById=function(t){for(var e=null,n=0,i=this.length;n<i;n++){var o=this[n];if(o.id===t){e=o;break}}return e},t}(),Fe={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},He={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Ue={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},$e={disabled:"disabled",hidden:"hidden",showing:"showing"},Ke=function(t){function e(e){var n;void 0===e&&(e={}),n=t.call(this)||this;var i={id:e.id||"vjs_track_"+pt(),kind:e.kind||"",language:e.language||""},o=e.label||"",r=function(t){Object.defineProperty(a(n),t,{get:function(){return i[t]},set:function(){}})};for(var s in i)r(s);return Object.defineProperty(a(n),"label",{get:function(){return o},set:function(t){t!==o&&(o=t,this.trigger("labelchange"))}}),n}return c(e,t),e}(St),qe=function(t){var e=["protocol","hostname","port","pathname","search","hash","host"],n=r.createElement("a");n.href=t;var i,s=""===n.host&&"file:"!==n.protocol;s&&((i=r.createElement("div")).innerHTML='<a href="'+t+'"></a>',n=i.firstChild,i.setAttribute("style","display:none; position:absolute;"),r.body.appendChild(i));for(var a={},c=0;c<e.length;c++)a[e[c]]=n[e[c]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),a.protocol||(a.protocol=o.location.protocol),s&&r.body.removeChild(i),a},Xe=function(t){if(!t.match(/^https?:\/\//)){var e=r.createElement("div");e.innerHTML='<a href="'+t+'">x</a>',t=e.firstChild.href}return t},Qe=function(t){if("string"==typeof t){var e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(e)return e.pop().toLowerCase()}return""},Ge=function(t,e){void 0===e&&(e=o.location);var n=qe(t);return(":"===n.protocol?e.protocol:n.protocol)+n.host!==e.protocol+e.host},Ye=Object.freeze({__proto__:null,parseUrl:qe,getAbsoluteURL:Xe,getFileExtension:Qe,isCrossOrigin:Ge}),Je=function(t,e){var n=new o.WebVTT.Parser(o,o.vttjs,o.WebVTT.StringDecoder()),i=[];n.oncue=function(t){e.addCue(t)},n.onparsingerror=function(t){i.push(t)},n.onflush=function(){e.trigger({type:"loadeddata",target:e})},n.parse(t),i.length>0&&(o.console&&o.console.groupCollapsed&&o.console.groupCollapsed("Text Track parsing errors for "+e.src),i.forEach(function(t){return m.error(t)}),o.console&&o.console.groupEnd&&o.console.groupEnd()),n.flush()},Ze=function(t,e){var n={uri:t},i=Ge(t);i&&(n.cors=i);var r="use-credentials"===e.tech_.crossOrigin();r&&(n.withCredentials=r),u(n,xt(this,function(t,n,i){if(t)return m.error(t,n);e.loaded_=!0,"function"!=typeof o.WebVTT?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],function(t){if("vttjserror"!==t.type)return Je(i,e);m.error("vttjs failed to load, stopping trying to process "+e.src)}):Je(i,e)}))},tn=function(t){function e(e){var n;if(void 0===e&&(e={}),!e.tech)throw new Error("A tech was not provided.");var i=$t(e,{kind:Ue[e.kind]||"subtitles",language:e.language||e.srclang||""}),o=$e[i.mode]||"disabled",r=i.default;"metadata"!==i.kind&&"chapters"!==i.kind||(o="hidden"),(n=t.call(this,i)||this).tech_=i.tech,n.cues_=[],n.activeCues_=[],n.preload_=!1!==n.tech_.preloadTextTracks;var s=new We(n.cues_),c=new We(n.activeCues_),l=!1,d=xt(a(n),function(){this.tech_.isReady_&&!this.tech_.isDisposed()&&(this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1))});return n.tech_.one("dispose",function(){n.tech_.off("timeupdate",d)}),"disabled"!==o&&n.tech_.on("timeupdate",d),Object.defineProperties(a(n),{default:{get:function(){return r},set:function(){}},mode:{get:function(){return o},set:function(t){$e[t]&&o!==t&&(o=t,this.preload_||"disabled"===o||0!==this.cues.length||Ze(this.src,this),this.tech_.off("timeupdate",d),"disabled"!==o&&this.tech_.on("timeupdate",d),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?s:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return c;for(var t=this.tech_.currentTime(),e=[],n=0,i=this.cues.length;n<i;n++){var o=this.cues[n];(o.startTime<=t&&o.endTime>=t||o.startTime===o.endTime&&o.startTime<=t&&o.startTime+.5>=t)&&e.push(o)}if(l=!1,e.length!==this.activeCues_.length)l=!0;else for(var r=0;r<e.length;r++)-1===this.activeCues_.indexOf(e[r])&&(l=!0);return this.activeCues_=e,c.setCues_(this.activeCues_),c},set:function(){}}}),i.src?(n.src=i.src,n.preload_||(n.loaded_=!0),(n.preload_||r||"subtitles"!==i.kind&&"captions"!==i.kind)&&Ze(n.src,a(n))):n.loaded_=!0,n}c(e,t);var n=e.prototype;return n.addCue=function(t){var e=t;if(o.vttjs&&!(t instanceof o.vttjs.VTTCue)){for(var n in e=new o.vttjs.VTTCue(t.startTime,t.endTime,t.text),t)n in e||(e[n]=t[n]);e.id=t.id,e.originalCue_=t}for(var i=this.tech_.textTracks(),r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)},n.removeCue=function(t){for(var e=this.cues_.length;e--;){var n=this.cues_[e];if(n===t||n.originalCue_&&n.originalCue_===t){this.cues_.splice(e,1),this.cues.setCues_(this.cues_);break}}},e}(Ke);tn.prototype.allowedEvents_={cuechange:"cuechange"};var en=function(t){function e(e){var n;void 0===e&&(e={});var i=$t(e,{kind:He[e.kind]||""});n=t.call(this,i)||this;var o=!1;return Object.defineProperty(a(n),"enabled",{get:function(){return o},set:function(t){"boolean"==typeof t&&t!==o&&(o=t,this.trigger("enabledchange"))}}),i.enabled&&(n.enabled=i.enabled),n.loaded_=!0,n}return c(e,t),e}(Ke),nn=function(t){function e(e){var n;void 0===e&&(e={});var i=$t(e,{kind:Fe[e.kind]||""});n=t.call(this,i)||this;var o=!1;return Object.defineProperty(a(n),"selected",{get:function(){return o},set:function(t){"boolean"==typeof t&&t!==o&&(o=t,this.trigger("selectedchange"))}}),i.selected&&(n.selected=i.selected),n}return c(e,t),e}(Ke),on=function(t){function e(e){var n,i;void 0===e&&(e={}),n=t.call(this)||this;var o=new tn(e);return n.kind=o.kind,n.src=o.src,n.srclang=o.language,n.label=o.label,n.default=o.default,Object.defineProperties(a(n),{readyState:{get:function(){return i}},track:{get:function(){return o}}}),i=0,o.addEventListener("loadeddata",function(){i=2,n.trigger({type:"load",target:a(n)})}),n}return c(e,t),e}(St);on.prototype.allowedEvents_={load:"load"},on.NONE=0,on.LOADING=1,on.LOADED=2,on.ERROR=3;var rn={audio:{ListClass:Ve,TrackClass:en,capitalName:"Audio"},video:{ListClass:Ne,TrackClass:nn,capitalName:"Video"},text:{ListClass:Be,TrackClass:tn,capitalName:"Text"}};Object.keys(rn).forEach(function(t){rn[t].getterName=t+"Tracks",rn[t].privateName=t+"Tracks_"});var sn={remoteText:{ListClass:Be,TrackClass:tn,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:ze,TrackClass:on,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},an=s({},rn,sn);sn.names=Object.keys(sn),rn.names=Object.keys(rn),an.names=[].concat(sn.names).concat(rn.names);var cn=function(t){function e(e,n){var i;return void 0===e&&(e={}),void 0===n&&(n=function(){}),e.reportTouchActivity=!1,(i=t.call(this,null,e,n)||this).hasStarted_=!1,i.on("playing",function(){this.hasStarted_=!0}),i.on("loadstart",function(){this.hasStarted_=!1}),an.names.forEach(function(t){var n=an[t];e&&e[n.getterName]&&(i[n.privateName]=e[n.getterName])}),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(t){!1===e["native"+t+"Tracks"]&&(i["featuresNative"+t+"Tracks"]=!1)}),!1===e.nativeCaptions||!1===e.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==e.nativeCaptions&&!0!==e.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.preloadTextTracks=!1!==e.preloadTextTracks,i.autoRemoteTextTracks_=new an.text.ListClass,i.initTrackListeners(),e.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}c(e,t);var n=e.prototype;return n.triggerSourceset=function(t){var e=this;this.isReady_||this.one("ready",function(){return e.setTimeout(function(){return e.triggerSourceset(t)},1)}),this.trigger({src:t,type:"sourceset"})},n.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},n.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},n.trackProgress=function(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(xt(this,function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,1===t&&this.stopTrackingProgress()}),500)},n.onDurationChange=function(t){this.duration_=this.duration()},n.buffered=function(){return ye(0,0)},n.bufferedPercent=function(){return _e(this.buffered(),this.duration_)},n.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},n.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},n.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},n.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.dispose=function(){this.clearTracks(rn.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},n.clearTracks=function(t){var e=this;(t=[].concat(t)).forEach(function(t){for(var n=e[t+"Tracks"]()||[],i=n.length;i--;){var o=n[i];"text"===t&&e.removeRemoteTextTrack(o),n.removeTrack(o)}})},n.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],e=t.length;e--;)this.removeRemoteTextTrack(t[e])},n.reset=function(){},n.crossOrigin=function(){},n.setCrossOrigin=function(){},n.error=function(t){return void 0!==t&&(this.error_=new we(t),this.trigger("error")),this.error_},n.played=function(){return this.hasStarted_?ye(0,0):ye()},n.play=function(){},n.setScrubbing=function(){},n.scrubbing=function(){},n.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.initTrackListeners=function(){var t=this;rn.names.forEach(function(e){var n=function(){t.trigger(e+"trackchange")},i=t[rn[e].getterName]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),t.on("dispose",function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)})})},n.addWebVttScript_=function(){var t=this;if(!o.WebVTT)if(r.body.contains(this.el())){if(!this.options_["vtt.js"]&&O(h)&&Object.keys(h).length>0)return void this.trigger("vttjsloaded");var e=r.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){e.onload=null,e.onerror=null}),o.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)},n.emulateTextTracks=function(){var t=this,e=this.textTracks(),n=this.remoteTextTracks(),i=function(t){return e.addTrack(t.track)},o=function(t){return e.removeTrack(t.track)};n.on("addtrack",i),n.on("removetrack",o),this.addWebVttScript_();var r=function(){return t.trigger("texttrackchange")},s=function(){r();for(var t=0;t<e.length;t++){var n=e[t];n.removeEventListener("cuechange",r),"showing"===n.mode&&n.addEventListener("cuechange",r)}};s(),e.addEventListener("change",s),e.addEventListener("addtrack",s),e.addEventListener("removetrack",s),this.on("dispose",function(){n.off("addtrack",i),n.off("removetrack",o),e.removeEventListener("change",s),e.removeEventListener("addtrack",s),e.removeEventListener("removetrack",s);for(var t=0;t<e.length;t++)e[t].removeEventListener("cuechange",r)})},n.addTextTrack=function(t,e,n){if(!t)throw new Error("TextTrack kind is required but was not provided");return function(t,e,n,i,o){void 0===o&&(o={});var r=t.textTracks();o.kind=e,n&&(o.label=n),i&&(o.language=i),o.tech=t;var s=new an.text.TrackClass(o);return r.addTrack(s),s}(this,t,e,n)},n.createRemoteTextTrack=function(t){var e=$t(t,{tech:this});return new sn.remoteTextEl.TrackClass(e)},n.addRemoteTextTrack=function(t,e){var n=this;void 0===t&&(t={});var i=this.createRemoteTextTrack(t);return!0!==e&&!1!==e&&(m.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),e=!0),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!0!==e&&this.ready(function(){return n.autoRemoteTextTracks_.addTrack(i.track)}),i},n.removeRemoteTextTrack=function(t){var e=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(e),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},n.getVideoPlaybackQuality=function(){return{}},n.requestPictureInPicture=function(){var t=this.options_.Promise||o.Promise;if(t)return t.reject()},n.disablePictureInPicture=function(){return!0},n.setDisablePictureInPicture=function(){},n.setPoster=function(){},n.playsinline=function(){},n.setPlaysinline=function(){},n.overrideNativeAudioTracks=function(){},n.overrideNativeVideoTracks=function(){},n.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(t,n){return e.canPlayType(t.type)},e.isTech=function(t){return t.prototype instanceof e||t instanceof e||t===e},e.registerTech=function(t,n){if(e.techs_||(e.techs_={}),!e.isTech(n))throw new Error("Tech "+t+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=Ut(t),e.techs_[t]=n,e.techs_[Ht(t)]=n,"Tech"!==t&&e.defaultTechOrder_.push(t),n},e.getTech=function(t){if(t)return e.techs_&&e.techs_[t]?e.techs_[t]:(t=Ut(t),o&&o.videojs&&o.videojs[t]?(m.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),o.videojs[t]):void 0)},e}(Xt);an.names.forEach(function(t){var e=an[t];cn.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}}),cn.prototype.featuresVolumeControl=!0,cn.prototype.featuresMuteControl=!0,cn.prototype.featuresFullscreenResize=!1,cn.prototype.featuresPlaybackRate=!1,cn.prototype.featuresProgressEvents=!1,cn.prototype.featuresSourceset=!1,cn.prototype.featuresTimeupdateEvents=!1,cn.prototype.featuresNativeTextTracks=!1,cn.withSourceHandlers=function(t){t.registerSourceHandler=function(e,n){var i=t.sourceHandlers;i||(i=t.sourceHandlers=[]),void 0===n&&(n=i.length),i.splice(n,0,e)},t.canPlayType=function(e){for(var n,i=t.sourceHandlers||[],o=0;o<i.length;o++)if(n=i[o].canPlayType(e))return n;return""},t.selectSourceHandler=function(e,n){for(var i=t.sourceHandlers||[],o=0;o<i.length;o++)if(i[o].canHandleSource(e,n))return i[o];return null},t.canPlaySource=function(e,n){var i=t.selectSourceHandler(e,n);return i?i.canHandleSource(e,n):""},["seekable","seeking","duration"].forEach(function(t){var e=this[t];"function"==typeof e&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(e){var n=t.selectSourceHandler(e,this.options_);n||(t.nativeSourceHandler?n=t.nativeSourceHandler:m.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),n!==t.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=n.handleSource(e,this,this.options_),this.one("dispose",this.disposeSourceHandler)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Xt.registerComponent("Tech",cn),cn.registerTech("Tech",cn),cn.defaultTechOrder_=[];var ln={},dn={},un={};function hn(t,e,n){t.setTimeout(function(){return bn(e,ln[e.type],n,t)},1)}function pn(t,e,n,i){void 0===i&&(i=null);var o="call"+Ut(n),r=t.reduce(mn(o),i),s=r===un,a=s?null:e[n](r);return function(t,e,n,i){for(var o=t.length-1;o>=0;o--){var r=t[o];r[e]&&r[e](i,n)}}(t,n,a,s),a}var fn={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1},gn={setCurrentTime:1,setMuted:1,setVolume:1},vn={play:1,pause:1};function mn(t){return function(e,n){return e===un?un:n[t]?n[t](e):e}}function bn(t,e,n,i,o,r){void 0===t&&(t={}),void 0===e&&(e=[]),void 0===o&&(o=[]),void 0===r&&(r=!1);var s=e[0],a=e.slice(1);if("string"==typeof s)bn(t,ln[s],n,i,o,r);else if(s){var c=function(t,e){var n=dn[t.id()],i=null;if(null==n)return i=e(t),dn[t.id()]=[[e,i]],i;for(var o=0;o<n.length;o++){var r=n[o];r[0]===e&&(i=r[1])}return null===i&&(i=e(t),n.push([e,i])),i}(i,s);if(!c.setSource)return o.push(c),bn(t,a,n,i,o,r);c.setSource(P({},t),function(e,s){if(e)return bn(t,a,n,i,o,r);o.push(c),bn(s,t.type===s.type?a:ln[s.type],n,i,o,r)})}else a.length?bn(t,a,n,i,o,r):r?n(t,o):bn(t,ln["*"],n,i,o,!0)}var yn={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},_n=function(t){void 0===t&&(t="");var e=Qe(t);return yn[e.toLowerCase()]||""},Cn=function t(e){if(Array.isArray(e)){var n=[];e.forEach(function(e){e=t(e),Array.isArray(e)?n=n.concat(e):T(e)&&n.push(e)}),e=n}else e="string"==typeof e&&e.trim()?[Pn({src:e})]:T(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[Pn(e)]:[];return e};function Pn(t){if(!t.type){var e=_n(t.src);e&&(t.type=e)}return t}var Tn=function(t){function e(e,n,i){var o,r=$t({createEl:!1},n);if(o=t.call(this,e,r,i)||this,n.playerOptions.sources&&0!==n.playerOptions.sources.length)e.src(n.playerOptions.sources);else for(var s=0,a=n.playerOptions.techOrder;s<a.length;s++){var c=Ut(a[s]),l=cn.getTech(c);if(c||(l=Xt.getComponent(c)),l&&l.isSupported()){e.loadTech_(c);break}}return o}return c(e,t),e}(Xt);Xt.registerComponent("MediaLoader",Tn);var On=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).emitTapEvents(),i.enable(),i}c(e,t);var n=e.prototype;return n.createEl=function(e,n,i){void 0===e&&(e="div"),void 0===n&&(n={}),void 0===i&&(i={}),n=P({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},n),"button"===e&&m.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),i=P({role:"button"},i),this.tabIndex_=n.tabIndex;var o=t.prototype.createEl.call(this,e,n,i);return this.createControlTextEl(o),o},n.dispose=function(){this.controlTextEl_=null,t.prototype.dispose.call(this)},n.createControlTextEl=function(t){return this.controlTextEl_=j("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},n.controlText=function(t,e){if(void 0===e&&(e=this.el()),void 0===t)return this.controlText_||"Need Text";var n=this.localize(t);this.controlText_=t,R(this.controlTextEl_,n),this.nonIconControl||e.setAttribute("title",n)},n.buildCSSClass=function(){return"vjs-control vjs-button "+t.prototype.buildCSSClass.call(this)},n.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))},n.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver),this.off("mouseout",this.handleMouseOut),this.off(["tap","click"],this.handleClick),this.off("keydown",this.handleKeyDown)},n.handleLanguagechange=function(){this.controlText(this.controlText_)},n.handleClick=function(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},n.handleKeyDown=function(e){d.isEventKey(e,"Space")||d.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,e)},e}(Xt);Xt.registerComponent("ClickableComponent",On),Xt.registerComponent("PosterImage",function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).update(),e.on("posterchange",xt(a(i),i.update)),i}c(e,t);var n=e.prototype;return n.dispose=function(){this.player().off("posterchange",this.update),t.prototype.dispose.call(this)},n.createEl=function(){return j("div",{className:"vjs-poster",tabIndex:-1})},n.update=function(t){var e=this.player().poster();this.setSrc(e),e?this.show():this.hide()},n.setSrc=function(t){var e="";t&&(e='url("'+t+'")'),this.el_.style.backgroundImage=e},n.handleClick=function(t){if(this.player_.controls()){var e=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(ce||re)&&e||this.player_.tech(!0).focus(),this.player_.paused()?Se(this.player_.play()):this.player_.pause()}},e}(On));var Mn={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function kn(t,e){var n;if(4===t.length)n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else{if(7!==t.length)throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");n=t.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+e+")"}function wn(t,e,n){try{t.style[e]=n}catch(i){return}}Xt.registerComponent("TextTrackDisplay",function(t){function e(e,n,i){var r;r=t.call(this,e,n,i)||this;var s=xt(a(r),r.updateDisplay);return e.on("loadstart",xt(a(r),r.toggleDisplay)),e.on("texttrackchange",s),e.on("loadedmetadata",xt(a(r),r.preselectTrack)),e.ready(xt(a(r),function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)this.hide();else{e.on("fullscreenchange",s),e.on("playerresize",s),o.addEventListener("orientationchange",s),e.on("dispose",function(){return o.removeEventListener("orientationchange",s)});for(var t=this.options_.playerOptions.tracks||[],n=0;n<t.length;n++)this.player_.addRemoteTextTrack(t[n],!0);this.preselectTrack()}})),r}c(e,t);var n=e.prototype;return n.preselectTrack=function(){for(var t,e,n,i={captions:1,subtitles:1},o=this.player_.textTracks(),r=this.player_.cache_.selectedLanguage,s=0;s<o.length;s++){var a=o[s];r&&r.enabled&&r.language&&r.language===a.language&&a.kind in i?a.kind===r.kind?n=a:n||(n=a):r&&!r.enabled?(n=null,t=null,e=null):a.default&&("descriptions"!==a.kind||t?a.kind in i&&!e&&(e=a):t=a)}n?n.mode="showing":e?e.mode="showing":t&&(t.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){"function"==typeof o.WebVTT&&o.WebVTT.processCues(o,[],this.el_)},n.updateDisplay=function(){var t=this.player_.textTracks(),e=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),e){for(var n=[],i=0;i<t.length;++i){var o=t[i];"showing"===o.mode&&n.push(o)}this.updateForTrack(n)}else{for(var r=null,s=null,a=t.length;a--;){var c=t[a];"showing"===c.mode&&("descriptions"===c.kind?r=c:s=c)}s?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):r&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(r))}},n.updateDisplayState=function(t){for(var e=this.player_.textTrackSettings.getValues(),n=t.activeCues,i=n.length;i--;){var r=n[i];if(r){var s=r.displayState;if(e.color&&(s.firstChild.style.color=e.color),e.textOpacity&&wn(s.firstChild,"color",kn(e.color||"#fff",e.textOpacity)),e.backgroundColor&&(s.firstChild.style.backgroundColor=e.backgroundColor),e.backgroundOpacity&&wn(s.firstChild,"backgroundColor",kn(e.backgroundColor||"#000",e.backgroundOpacity)),e.windowColor&&(e.windowOpacity?wn(s,"backgroundColor",kn(e.windowColor,e.windowOpacity)):s.style.backgroundColor=e.windowColor),e.edgeStyle&&("dropshadow"===e.edgeStyle?s.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===e.edgeStyle?s.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===e.edgeStyle?s.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===e.edgeStyle&&(s.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),e.fontPercent&&1!==e.fontPercent){var a=o.parseFloat(s.style.fontSize);s.style.fontSize=a*e.fontPercent+"px",s.style.height="auto",s.style.top="auto"}e.fontFamily&&"default"!==e.fontFamily&&("small-caps"===e.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=Mn[e.fontFamily])}}},n.updateForTrack=function(t){if(Array.isArray(t)||(t=[t]),"function"==typeof o.WebVTT&&!t.every(function(t){return!t.activeCues})){for(var e=[],n=0;n<t.length;++n)for(var i=t[n],r=0;r<i.activeCues.length;++r)e.push(i.activeCues[r]);o.WebVTT.processCues(o,e,this.el_);for(var s=0;s<t.length;++s){for(var a=t[s],c=0;c<a.activeCues.length;++c){var l=a.activeCues[c].displayState;V(l,"vjs-text-track-cue"),V(l,"vjs-text-track-cue-"+(a.language?a.language:s))}this.player_.textTrackSettings&&this.updateDisplayState(a)}}},e}(Xt)),Xt.registerComponent("LoadingSpinner",function(t){function e(){return t.apply(this,arguments)||this}return c(e,t),e.prototype.createEl=function(){var e=this.player_.isAudio(),n=this.localize(e?"Audio Player":"Video Player"),i=j("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[n])}),o=t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(i),o},e}(Xt));var xn=function(t){function e(){return t.apply(this,arguments)||this}c(e,t);var n=e.prototype;return n.createEl=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={}),e=P({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},e),n=P({type:"button"},n);var i=Xt.prototype.createEl.call(this,"button",e,n);return this.createControlTextEl(i),i},n.addChild=function(t,e){return void 0===e&&(e={}),m.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),Xt.prototype.addChild.call(this,t,e)},n.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function(e){d.isEventKey(e,"Space")||d.isEventKey(e,"Enter")?e.stopPropagation():t.prototype.handleKeyDown.call(this,e)},e}(On);Xt.registerComponent("Button",xn);var En=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).mouseused_=!1,i.on("mousedown",i.handleMouseDown),i}c(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(t){var e=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return Se(e),void(!this.player_.tech(!0)||(ce||re)&&n||this.player_.tech(!0).focus())}var i=this.player_.getChild("controlBar"),o=i&&i.getChild("playToggle");if(o){var r=function(){return o.focus()};Ee(e)?e.then(r,function(){}):this.setTimeout(r,1)}else this.player_.tech(!0).focus()},n.handleKeyDown=function(e){this.mouseused_=!1,t.prototype.handleKeyDown.call(this,e)},n.handleMouseDown=function(t){this.mouseused_=!0},e}(xn);En.prototype.controlText_="Play Video",Xt.registerComponent("BigPlayButton",En),Xt.registerComponent("CloseButton",function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).controlText(n&&n.controlText||i.localize("Close")),i}c(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+t.prototype.buildCSSClass.call(this)},n.handleClick=function(t){this.trigger({type:"close",bubbles:!1})},n.handleKeyDown=function(e){d.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,e)},e}(xn));var Sn=function(t){function e(e,n){var i;return void 0===n&&(n={}),i=t.call(this,e,n)||this,n.replay=void 0===n.replay||n.replay,i.on(e,"play",i.handlePlay),i.on(e,"pause",i.handlePause),n.replay&&i.on(e,"ended",i.handleEnded),i}c(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+t.prototype.buildCSSClass.call(this)},n.handleClick=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},n.handlePlay=function(t){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},e}(xn);Sn.prototype.controlText_="Play",Xt.registerComponent("PlayToggle",Sn);var In=function(t,e){t=t<0?0:t;var n=Math.floor(t%60),i=Math.floor(t/60%60),o=Math.floor(t/3600),r=Math.floor(e/60%60),s=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(o=i=n="-"),(o=o>0||s>0?o+":":"")+(i=((o||r>=10)&&i<10?"0"+i:i)+":")+(n<10?"0"+n:n)},jn=In;function Rn(t,e){return void 0===e&&(e=t),jn(t,e)}var Dn=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).on(e,["timeupdate","ended"],i.updateContent),i.updateTextNode_(),i}c(e,t);var n=e.prototype;return n.createEl=function(){var e=this.buildCSSClass(),n=t.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+"\xa0</span>"});return this.contentEl_=j("span",{className:e+"-display"},{"aria-live":"off",role:"presentation"}),n.appendChild(this.contentEl_),n},n.dispose=function(){this.contentEl_=null,this.textNode_=null,t.prototype.dispose.call(this)},n.updateTextNode_=function(t){var e=this;void 0===t&&(t=0),t=Rn(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(e.contentEl_){var t=e.textNode_;t&&e.contentEl_.firstChild!==t&&(t=null,m.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),e.textNode_=r.createTextNode(e.formattedTime_),e.textNode_&&(t?e.contentEl_.replaceChild(e.textNode_,t):e.contentEl_.appendChild(e.textNode_))}}))},n.updateContent=function(t){},e}(Xt);Dn.prototype.labelText_="Time",Dn.prototype.controlText_="Time",Xt.registerComponent("TimeDisplay",Dn);var Ln=function(t){function e(){return t.apply(this,arguments)||this}c(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(t){var e;e=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(e)},e}(Dn);Ln.prototype.labelText_="Current Time",Ln.prototype.controlText_="Current Time",Xt.registerComponent("CurrentTimeDisplay",Ln);var Vn=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).on(e,"durationchange",i.updateContent),i.on(e,"loadstart",i.updateContent),i.on(e,"loadedmetadata",i.updateContent),i}c(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(t){var e=this.player_.duration();this.updateTextNode_(e)},e}(Dn);Vn.prototype.labelText_="Duration",Vn.prototype.controlText_="Duration",Xt.registerComponent("DurationDisplay",Vn),Xt.registerComponent("TimeDivider",function(t){function e(){return t.apply(this,arguments)||this}return c(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},e}(Xt));var An=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).on(e,"durationchange",i.updateContent),i}c(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.createEl=function(){var e=t.prototype.createEl.call(this);return e.insertBefore(j("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e},n.updateContent=function(t){var e;"number"==typeof this.player_.duration()&&(e=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(e))},e}(Dn);An.prototype.labelText_="Remaining Time",An.prototype.controlText_="Remaining Time",Xt.registerComponent("RemainingTimeDisplay",An),Xt.registerComponent("LiveDisplay",function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).updateShowing(),i.on(i.player(),"durationchange",i.updateShowing),i}c(e,t);var n=e.prototype;return n.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=j("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"\xa0</span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},n.dispose=function(){this.contentEl_=null,t.prototype.dispose.call(this)},n.updateShowing=function(t){this.player().duration()===1/0?this.show():this.hide()},e}(Xt));var Nn=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).updateLiveEdgeStatus(),i.player_.liveTracker&&i.on(i.player_.liveTracker,"liveedgechange",i.updateLiveEdgeStatus),i}c(e,t);var n=e.prototype;return n.createEl=function(){var e=t.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=j("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e},n.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},n.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},n.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,t.prototype.dispose.call(this)},e}(xn);Nn.prototype.controlText_="Seek to live, currently playing live",Xt.registerComponent("SeekToLive",Nn);var Bn=function(t,e,n){return t=Number(t),Math.min(n,Math.max(e,isNaN(t)?e:t))},zn=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}c(e,t);var n=e.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){if(this.enabled()){var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},n.createEl=function(e,n,i){return void 0===n&&(n={}),void 0===i&&(i={}),n.className=n.className+" vjs-slider",n=P({tabIndex:0},n),i=P({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),t.prototype.createEl.call(this,e,n,i)},n.handleMouseDown=function(t){var e=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"!==t.type||se||t.preventDefault(),U(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(e,"mousemove",this.handleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchmove",this.handleMouseMove),this.on(e,"touchend",this.handleMouseUp),this.handleMouseMove(t)},n.handleMouseMove=function(t){},n.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;$(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.update()},n.update=function(){var t=this;if(this.el_&&this.bar){var e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",function(){var n=t.vertical()?"height":"width";t.bar.el().style[n]=(100*e).toFixed(2)+"%"})),e}},n.getProgress=function(){return Number(Bn(this.getPercent(),0,1).toFixed(4))},n.calculateDistance=function(t){var e=X(this.el_,t);return this.vertical()?e.y:e.x},n.handleKeyDown=function(e){d.isEventKey(e,"Left")||d.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):d.isEventKey(e,"Right")||d.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):t.prototype.handleKeyDown.call(this,e)},n.handleClick=function(t){t.stopPropagation(),t.preventDefault()},n.vertical=function(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")},e}(Xt);Xt.registerComponent("Slider",zn);var Wn=function(t,e){return Bn(t/e*100,0,100).toFixed(2)+"%"};Xt.registerComponent("LoadProgressBar",function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).partEls_=[],i.on(e,"progress",i.update),i}c(e,t);var n=e.prototype;return n.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),n=j("span",{className:"vjs-control-text"}),i=j("span",{textContent:this.localize("Loaded")}),o=r.createTextNode(": ");return this.percentageEl_=j("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(n),n.appendChild(i),n.appendChild(o),n.appendChild(this.percentageEl_),e},n.dispose=function(){this.partEls_=null,this.percentageEl_=null,t.prototype.dispose.call(this)},n.update=function(t){var e=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var t=e.player_.liveTracker,n=e.player_.buffered(),i=t&&t.isLive()?t.seekableEnd():e.player_.duration(),o=e.player_.bufferedEnd(),r=e.partEls_,s=Wn(o,i);e.percent_!==s&&(e.el_.style.width=s,R(e.percentageEl_,s),e.percent_=s);for(var a=0;a<n.length;a++){var c=n.start(a),l=n.end(a),d=r[a];d||(d=e.el_.appendChild(j()),r[a]=d),d.dataset.start===c&&d.dataset.end===l||(d.dataset.start=c,d.dataset.end=l,d.style.left=Wn(c,o),d.style.width=Wn(l-c,o))}for(var u=r.length;u>n.length;u--)e.el_.removeChild(r[u-1]);r.length=n.length})},e}(Xt)),Xt.registerComponent("TimeTooltip",function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).update=Et(xt(a(i),i.update),wt),i}c(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(t,e,n){var i=q(this.el_),o=K(this.player_.el()),r=t.width*e;if(o&&i){var s=t.left-o.left+r,a=t.width-r+(o.right-t.right),c=i.width/2;s<c?c+=c-s:a<c&&(c=a),c<0?c=0:c>i.width&&(c=i.width),c=Math.round(c),this.el_.style.right="-"+c+"px",this.write(n)}},n.write=function(t){R(this.el_,t)},n.updateTime=function(t,e,n,i){var o=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var r,s=o.player_.duration();if(o.player_.liveTracker&&o.player_.liveTracker.isLive()){var a=o.player_.liveTracker.liveWindow(),c=a-e*a;r=(c<1?"":"-")+Rn(c,a)}else r=Rn(n,s);o.update(t,e,r),i&&i()})},e}(Xt));var Fn=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).update=Et(xt(a(i),i.update),wt),i}c(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(t,e){var n=this.getChild("timeTooltip");if(n){var i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(t,e,i)}},e}(Xt);Fn.prototype.options_={children:[]},fe||ee||Fn.prototype.options_.children.push("timeTooltip"),Xt.registerComponent("PlayProgressBar",Fn);var Hn=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).update=Et(xt(a(i),i.update),wt),i}c(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(t,e){var n=this,i=e*this.player_.duration();this.getChild("timeTooltip").updateTime(t,e,i,function(){n.el_.style.left=t.width*e+"px"})},e}(Xt);Hn.prototype.options_={children:["timeTooltip"]},Xt.registerComponent("MouseTimeDisplay",Hn);var Un=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).setEventHandlers_(),i}c(e,t);var n=e.prototype;return n.setEventHandlers_=function(){this.update_=xt(this,this.update),this.update=Et(this.update_,wt),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],this.enableInterval_),this.on(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in r&&"visibilityState"in r&&this.on(r,"visibilitychange",this.toggleVisibility_)},n.toggleVisibility_=function(t){r.hidden?this.disableInterval_(t):(this.enableInterval_(),this.update())},n.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,wt))},n.disableInterval_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&"ended"!==t.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},n.update=function(e){var n=this,i=t.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var t=n.player_.ended()?n.player_.duration():n.getCurrentTime_(),e=n.player_.liveTracker,o=n.player_.duration();e&&e.isLive()&&(o=n.player_.liveTracker.liveCurrentTime()),n.percent_!==i&&(n.el_.setAttribute("aria-valuenow",(100*i).toFixed(2)),n.percent_=i),n.currentTime_===t&&n.duration_===o||(n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[Rn(t,o),Rn(o,o)],"{1} of {2}")),n.currentTime_=t,n.duration_=o),n.bar&&n.bar.update(K(n.el()),n.getProgress())}),i},n.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},n.getPercent=function(){var t,e=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(t=(e-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t},n.handleMouseDown=function(e){tt(e)&&(e.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),t.prototype.handleMouseDown.call(this,e))},n.handleMouseMove=function(t){if(tt(t)){var e,n=this.calculateDistance(t),i=this.player_.liveTracker;if(i&&i.isLive()){if(n>=.99)return void i.seekToLiveEdge();var o=i.seekableStart(),r=i.liveCurrentTime();if((e=o+n*i.liveWindow())>=r&&(e=r),e<=o&&(e=o+.1),e===1/0)return}else(e=n*this.player_.duration())===this.player_.duration()&&(e-=.1);this.player_.currentTime(e)}},n.enable=function(){t.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},n.disable=function(){t.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},n.handleMouseUp=function(e){t.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Se(this.player_.play()):this.update_()},n.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},n.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},n.handleAction=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleKeyDown=function(e){if(d.isEventKey(e,"Space")||d.isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(d.isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.player_.currentTime(0);else if(d.isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),this.player_.currentTime(this.player_.duration());else if(/^[0-9]$/.test(d(e))){e.preventDefault(),e.stopPropagation();var n=10*(d.codes[d(e)]-d.codes[0])/100;this.player_.currentTime(this.player_.duration()*n)}else d.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):d.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):t.prototype.handleKeyDown.call(this,e)},n.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableInterval_),this.off(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in r&&"visibilityState"in r&&this.off(r,"visibilitychange",this.toggleVisibility_),t.prototype.dispose.call(this)},e}(zn);Un.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},fe||ee||Un.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Xt.registerComponent("SeekBar",Un);var $n=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).handleMouseMove=Et(xt(a(i),i.handleMouseMove),wt),i.throttledHandleMouseSeek=Et(xt(a(i),i.handleMouseSeek),wt),i.enable(),i}c(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(t){var e=this.getChild("seekBar");if(e){var n=e.getChild("playProgressBar"),i=e.getChild("mouseTimeDisplay");if(n||i){var o=e.el(),r=q(o),s=X(o,t).x;s=Bn(s,0,1),i&&i.update(r,s),n&&n.update(r,e.getProgress())}}},n.handleMouseSeek=function(t){var e=this.getChild("seekBar");e&&e.handleMouseMove(t)},n.enabled=function(){return this.enabled_},n.disable=function(){this.children().forEach(function(t){return t.disable&&t.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},n.enable=function(){this.children().forEach(function(t){return t.enable&&t.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.handleMouseDown=function(t){var e=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(t),this.on(e,"mousemove",this.throttledHandleMouseSeek),this.on(e,"touchmove",this.throttledHandleMouseSeek),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchend",this.handleMouseUp)},n.handleMouseUp=function(t){var e=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseUp(t),this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchend",this.handleMouseUp)},e}(Xt);$n.prototype.options_={children:["seekBar"]},Xt.registerComponent("ProgressControl",$n);var Kn=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).on(e,["enterpictureinpicture","leavepictureinpicture"],i.handlePictureInPictureChange),i.on(e,["disablepictureinpicturechanged","loadedmetadata"],i.handlePictureInPictureEnabledChange),i.disable(),i}c(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-picture-in-picture-control "+t.prototype.buildCSSClass.call(this)},n.handlePictureInPictureEnabledChange=function(){r.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},n.handlePictureInPictureChange=function(t){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},n.handleClick=function(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(xn);Kn.prototype.controlText_="Picture-in-Picture",Xt.registerComponent("PictureInPictureToggle",Kn);var qn=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).on(e,"fullscreenchange",i.handleFullscreenChange),!1===r[e.fsApi_.fullscreenEnabled]&&i.disable(),i}c(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-fullscreen-control "+t.prototype.buildCSSClass.call(this)},n.handleFullscreenChange=function(t){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},n.handleClick=function(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(xn);qn.prototype.controlText_="Fullscreen",Xt.registerComponent("FullscreenToggle",qn),Xt.registerComponent("VolumeLevel",function(t){function e(){return t.apply(this,arguments)||this}return c(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},e}(Xt));var Xn=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).on("slideractive",i.updateLastVolume_),i.on(e,"volumechange",i.updateARIAAttributes),e.ready(function(){return i.updateARIAAttributes()}),i}c(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(e){tt(e)&&t.prototype.handleMouseDown.call(this,e)},n.handleMouseMove=function(t){tt(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(t){var e=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",e),this.el_.setAttribute("aria-valuetext",e+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=function(){var t=this,e=this.player_.volume();this.one("sliderinactive",function(){0===t.player_.volume()&&t.player_.lastVolume_(e)})},e}(zn);Xn.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Xn.prototype.playerEvent="volumechange",Xt.registerComponent("VolumeBar",Xn);var Qn=function(t){function e(e,n){var i;return void 0===n&&(n={}),n.vertical=n.vertical||!1,(void 0===n.volumeBar||O(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),i=t.call(this,e,n)||this,function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})}(a(i),e),i.throttledHandleMouseMove=Et(xt(a(i),i.handleMouseMove),wt),i.on("mousedown",i.handleMouseDown),i.on("touchstart",i.handleMouseDown),i.on(i.volumeBar,["focus","slideractive"],function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")}),i.on(i.volumeBar,["blur","sliderinactive"],function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")}),i}c(e,t);var n=e.prototype;return n.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},n.handleMouseDown=function(t){var e=this.el_.ownerDocument;this.on(e,"mousemove",this.throttledHandleMouseMove),this.on(e,"touchmove",this.throttledHandleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchend",this.handleMouseUp)},n.handleMouseUp=function(t){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseMove),this.off(e,"touchmove",this.throttledHandleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchend",this.handleMouseUp)},n.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},e}(Xt);Qn.prototype.options_={children:["volumeBar"]},Xt.registerComponent("VolumeControl",Qn);var Gn=function(t){function e(e,n){var i;return i=t.call(this,e,n)||this,function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})}(a(i),e),i.on(e,["loadstart","volumechange"],i.update),i}c(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+t.prototype.buildCSSClass.call(this)},n.handleClick=function(t){var e=this.player_.volume(),n=this.player_.lastVolume_();0===e?(this.player_.volume(n<.1?.1:n),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},n.update=function(t){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var t=this.player_.volume(),e=3;fe&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?e=0:t<.33?e=1:t<.67&&(e=2);for(var n=0;n<4;n++)A(this.el_,"vjs-vol-"+n);V(this.el_,"vjs-vol-"+e)},n.updateControlText_=function(){var t=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)},e}(xn);Gn.prototype.controlText_="Mute",Xt.registerComponent("MuteToggle",Gn);var Yn=function(t){function e(e,n){var i;return void 0===n&&(n={}),n.inline=void 0===n.inline||n.inline,(void 0===n.volumeControl||O(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),(i=t.call(this,e,n)||this).on(e,["loadstart"],i.volumePanelState_),i.on(i.muteToggle,"keyup",i.handleKeyPress),i.on(i.volumeControl,"keyup",i.handleVolumeControlKeyUp),i.on("keydown",i.handleKeyPress),i.on("mouseover",i.handleMouseOver),i.on("mouseout",i.handleMouseOut),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}c(e,t);var n=e.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},n.dispose=function(){this.handleMouseOut(),t.prototype.dispose.call(this)},n.handleVolumeControlKeyUp=function(t){d.isEventKey(t,"Esc")&&this.muteToggle.focus()},n.handleMouseOver=function(t){this.addClass("vjs-hover"),_t(r,"keyup",xt(this,this.handleKeyPress))},n.handleMouseOut=function(t){this.removeClass("vjs-hover"),Ct(r,"keyup",xt(this,this.handleKeyPress))},n.handleKeyPress=function(t){d.isEventKey(t,"Esc")&&this.handleMouseOut()},e}(Xt);Yn.prototype.options_={children:["muteToggle","volumeControl"]},Xt.registerComponent("VolumePanel",Yn);var Jn=function(t){function e(e,n){var i;return i=t.call(this,e,n)||this,n&&(i.menuButton_=n.menuButton),i.focusedChild_=-1,i.on("keydown",i.handleKeyDown),i.boundHandleBlur_=xt(a(i),i.handleBlur),i.boundHandleTapClick_=xt(a(i),i.handleTapClick),i}c(e,t);var n=e.prototype;return n.addEventListenerForItem=function(t){t instanceof Xt&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))},n.removeEventListenerForItem=function(t){t instanceof Xt&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))},n.removeChild=function(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),t.prototype.removeChild.call(this,e)},n.addItem=function(t){var e=this.addChild(t);e&&this.addEventListenerForItem(e)},n.createEl=function(){this.contentEl_=j(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var e=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return e.appendChild(this.contentEl_),_t(e,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),e},n.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,t.prototype.dispose.call(this)},n.handleBlur=function(t){var e=t.relatedTarget||r.activeElement;if(!this.children().some(function(t){return t.el()===e})){var n=this.menuButton_;n&&n.buttonPressed_&&e!==n.el().firstChild&&n.unpressButton()}},n.handleTapClick=function(t){if(this.menuButton_){this.menuButton_.unpressButton();var e=this.children();if(!Array.isArray(e))return;var n=e.filter(function(e){return e.el()===t.target})[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}},n.handleKeyDown=function(t){d.isEventKey(t,"Left")||d.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(d.isEventKey(t,"Right")||d.isEventKey(t,"Up"))&&(t.preventDefault(),t.stopPropagation(),this.stepBack())},n.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},n.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},n.focus=function(t){void 0===t&&(t=0);var e=this.children().slice();e.length&&e[0].hasClass("vjs-menu-title")&&e.shift(),e.length>0&&(t<0?t=0:t>=e.length&&(t=e.length-1),this.focusedChild_=t,e[t].el_.focus())},e}(Xt);Xt.registerComponent("Menu",Jn);var Zn=function(t){function e(e,n){var i;void 0===n&&(n={}),(i=t.call(this,e,n)||this).menuButton_=new xn(e,n),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true");var o=xn.prototype.buildCSSClass();return i.menuButton_.el_.className=i.buildCSSClass()+" "+o,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0,i.on(i.menuButton_,"tap",i.handleClick),i.on(i.menuButton_,"click",i.handleClick),i.on(i.menuButton_,"keydown",i.handleKeyDown),i.on(i.menuButton_,"mouseenter",function(){i.addClass("vjs-hover"),i.menu.show(),_t(r,"keyup",xt(a(i),i.handleMenuKeyUp))}),i.on("mouseleave",i.handleMouseLeave),i.on("keydown",i.handleSubmenuKeyDown),i}c(e,t);var n=e.prototype;return n.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},n.createMenu=function(){var t=new Jn(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var e=j("li",{className:"vjs-menu-title",innerHTML:Ut(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var n=new Xt(this.player_,{el:e});t.addItem(n)}if(this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)t.addItem(this.items[i]);return t},n.createItems=function(){},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},n.buildWrapperCSSClass=function(){var e="vjs-menu-button";return"vjs-menu-button "+(e+=!0===this.options_.inline?"-inline":"-popup")+" "+xn.prototype.buildCSSClass()+" "+t.prototype.buildCSSClass.call(this)},n.buildCSSClass=function(){var e="vjs-menu-button";return"vjs-menu-button "+(e+=!0===this.options_.inline?"-inline":"-popup")+" "+t.prototype.buildCSSClass.call(this)},n.controlText=function(t,e){return void 0===e&&(e=this.menuButton_.el()),this.menuButton_.controlText(t,e)},n.dispose=function(){this.handleMouseLeave(),t.prototype.dispose.call(this)},n.handleClick=function(t){this.buttonPressed_?this.unpressButton():this.pressButton()},n.handleMouseLeave=function(t){this.removeClass("vjs-hover"),Ct(r,"keyup",xt(this,this.handleMenuKeyUp))},n.focus=function(){this.menuButton_.focus()},n.blur=function(){this.menuButton_.blur()},n.handleKeyDown=function(t){d.isEventKey(t,"Esc")||d.isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),d.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(d.isEventKey(t,"Up")||d.isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))},n.handleMenuKeyUp=function(t){(d.isEventKey(t,"Esc")||d.isEventKey(t,"Tab"))&&this.removeClass("vjs-hover")},n.handleSubmenuKeyPress=function(t){this.handleSubmenuKeyDown(t)},n.handleSubmenuKeyDown=function(t){(d.isEventKey(t,"Esc")||d.isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),d.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))},n.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),fe&&S())return;this.menu.focus()}},n.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},n.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},n.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(Xt);Xt.registerComponent("MenuButton",Zn);var ti=function(t){function e(e,n){var i,o=n.tracks;if((i=t.call(this,e,n)||this).items.length<=1&&i.hide(),!o)return a(i);var r=xt(a(i),i.update);return o.addEventListener("removetrack",r),o.addEventListener("addtrack",r),o.addEventListener("labelchange",r),i.player_.on("ready",r),i.player_.on("dispose",function(){o.removeEventListener("removetrack",r),o.removeEventListener("addtrack",r),o.removeEventListener("labelchange",r)}),i}return c(e,t),e}(Zn);Xt.registerComponent("TrackButton",ti);var ei=["Tab","Esc","Up","Down","Right","Left"],ni=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).selectable=n.selectable,i.isSelected_=n.selected||!1,i.multiSelectable=n.multiSelectable,i.selected(i.isSelected_),i.el_.setAttribute("role",i.selectable?i.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem"),i}c(e,t);var n=e.prototype;return n.createEl=function(e,n,i){return this.nonIconControl=!0,t.prototype.createEl.call(this,"li",P({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},n),i)},n.handleKeyDown=function(e){ei.some(function(t){return d.isEventKey(e,t)})||t.prototype.handleKeyDown.call(this,e)},n.handleClick=function(t){this.selected(!0)},n.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(On);Xt.registerComponent("MenuItem",ni);var ii=function(t){function e(e,n){var i,s=n.track,c=e.textTracks();n.label=s.label||s.language||"Unknown",n.selected="showing"===s.mode,(i=t.call(this,e,n)||this).track=s,i.kinds=(n.kinds||[n.kind||i.track.kind]).filter(Boolean);var l,d=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.handleTracksChange.apply(a(i),e)},u=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.handleSelectedLanguageChange.apply(a(i),e)};return e.on(["loadstart","texttrackchange"],d),c.addEventListener("change",d),c.addEventListener("selectedlanguagechange",u),i.on("dispose",function(){e.off(["loadstart","texttrackchange"],d),c.removeEventListener("change",d),c.removeEventListener("selectedlanguagechange",u)}),void 0===c.onchange&&i.on(["tap","click"],function(){if("object"!=typeof o.Event)try{l=new o.Event("change")}catch(t){}l||(l=r.createEvent("Event")).initEvent("change",!0,!0),c.dispatchEvent(l)}),i.handleTracksChange(),i}c(e,t);var n=e.prototype;return n.handleClick=function(e){var n=this.track,i=this.player_.textTracks();if(t.prototype.handleClick.call(this,e),i)for(var o=0;o<i.length;o++){var r=i[o];-1!==this.kinds.indexOf(r.kind)&&(r===n?"showing"!==r.mode&&(r.mode="showing"):"disabled"!==r.mode&&(r.mode="disabled"))}},n.handleTracksChange=function(t){var e="showing"===this.track.mode;e!==this.isSelected_&&this.selected(e)},n.handleSelectedLanguageChange=function(t){if("showing"===this.track.mode){var e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},n.dispose=function(){this.track=null,t.prototype.dispose.call(this)},e}(ni);Xt.registerComponent("TextTrackMenuItem",ii);var oi=function(t){function e(e,n){return n.track={player:e,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.track.label=n.label?n.label:n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,t.call(this,e,n)||this}c(e,t);var n=e.prototype;return n.handleTracksChange=function(t){for(var e=this.player().textTracks(),n=!0,i=0,o=e.length;i<o;i++){var r=e[i];if(this.options_.kinds.indexOf(r.kind)>-1&&"showing"===r.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},n.handleSelectedLanguageChange=function(t){for(var e=this.player().textTracks(),n=!0,i=0,o=e.length;i<o;i++){var r=e[i];if(["captions","descriptions","subtitles"].indexOf(r.kind)>-1&&"showing"===r.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(ii);Xt.registerComponent("OffTextTrackMenuItem",oi);var ri=function(t){function e(e,n){return void 0===n&&(n={}),n.tracks=e.textTracks(),t.call(this,e,n)||this}return c(e,t),e.prototype.createItems=function(t,e){var n;void 0===t&&(t=[]),void 0===e&&(e=ii),this.label_&&(n=this.label_+" off"),t.push(new oi(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var o=0;o<i.length;o++){var r=i[o];if(this.kinds_.indexOf(r.kind)>-1){var s=new e(this.player_,{track:r,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});s.addClass("vjs-"+r.kind+"-menu-item"),t.push(s)}}return t},e}(ti);Xt.registerComponent("TextTrackButton",ri);var si=function(t){function e(e,n){var i,o=n.track,r=n.cue,s=e.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=r.text,n.selected=r.startTime<=s&&s<r.endTime,(i=t.call(this,e,n)||this).track=o,i.cue=r,o.addEventListener("cuechange",xt(a(i),i.update)),i}c(e,t);var n=e.prototype;return n.handleClick=function(e){t.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},n.update=function(t){var e=this.cue,n=this.player_.currentTime();this.selected(e.startTime<=n&&n<e.endTime)},e}(ni);Xt.registerComponent("ChaptersTrackMenuItem",si);var ai=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}c(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildWrapperCSSClass.call(this)},n.update=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack()),t.prototype.update.call(this)},n.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},n.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],e=t.length-1;e>=0;e--){var n=t[e];if(n.kind===this.kind_)return n}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Ut(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),t.prototype.createMenu.call(this)},n.createItems=function(){var t=[];if(!this.track_)return t;var e=this.track_.cues;if(!e)return t;for(var n=0,i=e.length;n<i;n++){var o=new si(this.player_,{track:this.track_,cue:e[n]});t.push(o)}return t},e}(ri);ai.prototype.kind_="chapters",ai.prototype.controlText_="Chapters",Xt.registerComponent("ChaptersButton",ai);var ci=function(t){function e(e,n,i){var o;o=t.call(this,e,n,i)||this;var r=e.textTracks(),s=xt(a(o),o.handleTracksChange);return r.addEventListener("change",s),o.on("dispose",function(){r.removeEventListener("change",s)}),o}c(e,t);var n=e.prototype;return n.handleTracksChange=function(t){for(var e=this.player().textTracks(),n=!1,i=0,o=e.length;i<o;i++){var r=e[i];if(r.kind!==this.kind_&&"showing"===r.mode){n=!0;break}}n?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(ri);ci.prototype.kind_="descriptions",ci.prototype.controlText_="Descriptions",Xt.registerComponent("DescriptionsButton",ci);var li=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}c(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(ri);li.prototype.kind_="subtitles",li.prototype.controlText_="Subtitles",Xt.registerComponent("SubtitlesButton",li);var di=function(t){function e(e,n){var i;return n.track={player:e,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",(i=t.call(this,e,n)||this).addClass("vjs-texttrack-settings"),i.controlText(", opens "+n.kind+" settings dialog"),i}return c(e,t),e.prototype.handleClick=function(t){this.player().getChild("textTrackSettings").open()},e}(ii);Xt.registerComponent("CaptionSettingsMenuItem",di);var ui=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}c(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+t.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new di(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,e)},e}(ri);ui.prototype.kind_="captions",ui.prototype.controlText_="Captions",Xt.registerComponent("CaptionsButton",ui);var hi=function(t){function e(){return t.apply(this,arguments)||this}return c(e,t),e.prototype.createEl=function(e,n,i){var o='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(o+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),t.prototype.createEl.call(this,e,P({innerHTML:o+="</span>"},n),i)},e}(ii);Xt.registerComponent("SubsCapsMenuItem",hi);var pi=function(t){function e(e,n){var i;return void 0===n&&(n={}),(i=t.call(this,e,n)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(i.player_.language_)>-1&&(i.label_="captions"),i.menuButton_.controlText(Ut(i.label_)),i}c(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new di(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,e,hi)},e}(ri);pi.prototype.kinds_=["captions","subtitles"],pi.prototype.controlText_="Subtitles",Xt.registerComponent("SubsCapsButton",pi);var fi=function(t){function e(e,n){var i,o=n.track,r=e.audioTracks();n.label=o.label||o.language||"Unknown",n.selected=o.enabled,(i=t.call(this,e,n)||this).track=o,i.addClass("vjs-"+o.kind+"-menu-item");var s=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.handleTracksChange.apply(a(i),e)};return r.addEventListener("change",s),i.on("dispose",function(){r.removeEventListener("change",s)}),i}c(e,t);var n=e.prototype;return n.createEl=function(e,n,i){var o='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(o+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),t.prototype.createEl.call(this,e,P({innerHTML:o+="</span>"},n),i)},n.handleClick=function(e){var n=this.player_.audioTracks();t.prototype.handleClick.call(this,e);for(var i=0;i<n.length;i++){var o=n[i];o.enabled=o===this.track}},n.handleTracksChange=function(t){this.selected(this.track.enabled)},e}(ni);Xt.registerComponent("AudioTrackMenuItem",fi);var gi=function(t){function e(e,n){return void 0===n&&(n={}),n.tracks=e.audioTracks(),t.call(this,e,n)||this}c(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+t.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(t){void 0===t&&(t=[]),this.hideThreshold_=1;for(var e=this.player_.audioTracks(),n=0;n<e.length;n++)t.push(new fi(this.player_,{track:e[n],selectable:!0,multiSelectable:!1}));return t},e}(ti);gi.prototype.controlText_="Audio Track",Xt.registerComponent("AudioTrackButton",gi);var vi=function(t){function e(e,n){var i,o=n.rate,r=parseFloat(o,10);return n.label=o,n.selected=1===r,n.selectable=!0,n.multiSelectable=!1,(i=t.call(this,e,n)||this).label=o,i.rate=r,i.on(e,"ratechange",i.update),i}c(e,t);var n=e.prototype;return n.handleClick=function(e){t.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(t){this.selected(this.player().playbackRate()===this.rate)},e}(ni);vi.prototype.contentElType="button",Xt.registerComponent("PlaybackRateMenuItem",vi);var mi=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).updateVisibility(),i.updateLabel(),i.on(e,"loadstart",i.updateVisibility),i.on(e,"ratechange",i.updateLabel),i}c(e,t);var n=e.prototype;return n.createEl=function(){var e=t.prototype.createEl.call(this);return this.labelEl_=j("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),e.appendChild(this.labelEl_),e},n.dispose=function(){this.labelEl_=null,t.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildWrapperCSSClass.call(this)},n.createMenu=function(){var t=new Jn(this.player()),e=this.playbackRates();if(e)for(var n=e.length-1;n>=0;n--)t.addChild(new vi(this.player(),{rate:e[n]+"x"}));return t},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(t){for(var e=this.player().playbackRate(),n=this.playbackRates(),i=n[0],o=0;o<n.length;o++)if(n[o]>e){i=n[o];break}this.player().playbackRate(i)},n.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},n.updateVisibility=function(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(t){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},e}(Zn);mi.prototype.controlText_="Playback Rate",Xt.registerComponent("PlaybackRateMenuButton",mi);var bi=function(t){function e(){return t.apply(this,arguments)||this}c(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},e}(Xt);Xt.registerComponent("Spacer",bi),Xt.registerComponent("CustomControlSpacer",function(t){function e(){return t.apply(this,arguments)||this}c(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},n.createEl=function(){var e=t.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML="\xa0",e},e}(bi));var yi=function(t){function e(){return t.apply(this,arguments)||this}return c(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(Xt);yi.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in r&&yi.prototype.options_.children.splice(yi.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Xt.registerComponent("ControlBar",yi);var _i=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).on(e,"error",i.open),i}c(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+t.prototype.buildCSSClass.call(this)},n.content=function(){var t=this.player().error();return t?this.localize(t.message):""},e}(je);_i.prototype.options_=s({},je.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Xt.registerComponent("ErrorDisplay",_i);var Ci="vjs-text-track-settings",Pi=["#000","Black"],Ti=["#00F","Blue"],Oi=["#0FF","Cyan"],Mi=["#0F0","Green"],ki=["#F0F","Magenta"],wi=["#F00","Red"],xi=["#FFF","White"],Ei=["#FF0","Yellow"],Si=["1","Opaque"],Ii=["0.5","Semi-Transparent"],ji=["0","Transparent"],Ri={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Pi,xi,wi,Mi,Ti,Ei,ki,Oi]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Si,Ii,ji]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[xi,Pi,wi,Mi,Ti,Ei,ki,Oi]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(t){return"1.00"===t?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Si,Ii]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[ji,Ii,Si]}};function Di(t,e){if(e&&(t=e(t)),t&&"none"!==t)return t}Ri.windowColor.options=Ri.backgroundColor.options,Xt.registerComponent("TextTrackSettings",function(t){function e(e,n){var i;return n.temporary=!1,(i=t.call(this,e,n)||this).updateDisplay=xt(a(i),i.updateDisplay),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=j("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===n.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",function(){i.saveSettings(),i.close()}),i.on(i.$(".vjs-default-button"),"click",function(){i.setDefaults(),i.updateDisplay()}),C(Ri,function(t){i.on(i.$(t.selector),"change",i.updateDisplay)}),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}c(e,t);var n=e.prototype;return n.dispose=function(){this.endDialog=null,t.prototype.dispose.call(this)},n.createElSelect_=function(t,e,n){var i=this;void 0===e&&(e=""),void 0===n&&(n="label");var o=Ri[t],r=o.id.replace("%s",this.id_),s=[e,r].join(" ").trim();return["<"+n+' id="'+r+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(o.label),"</"+n+">",'<select aria-labelledby="'+s+'">'].concat(o.options.map(function(t){var e=r+"-"+t[1].replace(/\W+/g,"");return['<option id="'+e+'" value="'+t[0]+'" ','aria-labelledby="'+s+" "+e+'">',i.localize(t[1]),"</option>"].join("")})).concat("</select>").join("")},n.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},n.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},n.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},n.createElColors_=function(){return j("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},n.createElFont_=function(){return j("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},n.createElControls_=function(){var t=this.localize("restore all settings to the default values");return j("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},n.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},n.label=function(){return this.localize("Caption Settings Dialog")},n.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},n.buildCSSClass=function(){return t.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},n.getValues=function(){var t,e,n,i=this;return e=function(t,e,n){var o,r=Di((o=i.$(e.selector)).options[o.options.selectedIndex].value,e.parser);return void 0!==r&&(t[n]=r),t},void 0===(n={})&&(n=0),_(t=Ri).reduce(function(n,i){return e(n,t[i],i)},n)},n.setValues=function(t){var e=this;C(Ri,function(n,i){!function(t,e,n){if(e)for(var i=0;i<t.options.length;i++)if(Di(t.options[i].value,n)===e){t.selectedIndex=i;break}}(e.$(n.selector),t[i],n.parser)})},n.setDefaults=function(){var t=this;C(Ri,function(e){var n=e.hasOwnProperty("default")?e.default:0;t.$(e.selector).selectedIndex=n})},n.restoreSettings=function(){var t;try{t=JSON.parse(o.localStorage.getItem(Ci))}catch(e){m.warn(e)}t&&this.setValues(t)},n.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?o.localStorage.setItem(Ci,JSON.stringify(t)):o.localStorage.removeItem(Ci)}catch(e){m.warn(e)}}},n.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},n.conditionalBlur_=function(){this.previouslyActiveEl_=null;var t=this.player_.controlBar,e=t&&t.subsCapsButton,n=t&&t.captionsButton;e?e.focus():n&&n.focus()},e}(je)),Xt.registerComponent("ResizeManager",function(t){function e(e,n){var i,r=n.ResizeObserver||o.ResizeObserver;null===n.ResizeObserver&&(r=!1);var s=$t({createEl:!r,reportTouchActivity:!1},n);return(i=t.call(this,e,s)||this).ResizeObserver=n.ResizeObserver||o.ResizeObserver,i.loadListener_=null,i.resizeObserver_=null,i.debouncedHandler_=function(t,e,n,i){var r;void 0===i&&(i=o);var s=function(){var e=this,n=arguments,o=function(){r=null,o=null,t.apply(e,n)};i.clearTimeout(r),r=i.setTimeout(o,100)};return s.cancel=function(){i.clearTimeout(r),r=null},s}(function(){i.resizeHandler()},0,0,a(i)),r?(i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_),i.resizeObserver_.observe(e.el())):(i.loadListener_=function(){if(i.el_&&i.el_.contentWindow){var t=i.debouncedHandler_,e=i.unloadListener_=function(){Ct(this,"resize",t),Ct(this,"unload",e),e=null};_t(i.el_.contentWindow,"unload",e),_t(i.el_.contentWindow,"resize",t)}},i.one("load",i.loadListener_)),i}c(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},n.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},n.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,t.prototype.dispose.call(this)},e}(Xt));var Li={trackingThreshold:30,liveTolerance:15};Xt.registerComponent("LiveTracker",function(t){function e(e,n){var i,o=$t(Li,n,{createEl:!1});return(i=t.call(this,e,o)||this).reset_(),i.on(i.player_,"durationchange",i.handleDurationchange),ce&&"hidden"in r&&"visibilityState"in r&&i.on(r,"visibilitychange",i.handleVisibilityChange),i}c(e,t);var n=e.prototype;return n.handleVisibilityChange=function(){this.player_.duration()===1/0&&(r.hidden?this.stopTracking():this.startTracking())},n.trackLive_=function(){var t=this.player_.seekable();if(t&&t.length){var e=Number(o.performance.now().toFixed(4)),n=-1===this.lastTime_?0:(e-this.lastTime_)/1e3;this.lastTime_=e,this.pastSeekEnd_=this.pastSeekEnd()+n;var i=this.liveCurrentTime(),r=this.player_.currentTime(),s=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-r)>this.options_.liveTolerance;this.timeupdateSeen_&&i!==1/0||(s=!1),s!==this.behindLiveEdge_&&(this.behindLiveEdge_=s,this.trigger("liveedgechange"))}},n.handleDurationchange=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},n.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,wt),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLive_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked):(this.one(this.player_,"play",this.handlePlay),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate)))},n.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked)},n.handleSeeked=function(){var t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=!this.skipNextSeeked_&&t>2,this.skipNextSeeked_=!1,this.trackLive_()},n.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},n.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.skipNextSeeked_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLive_),this.off(this.player_,"seeked",this.handleSeeked),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate),this.off(this.player_,"timeupdate",this.seekToLiveEdge)},n.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},n.seekableEnd=function(){for(var t=this.player_.seekable(),e=[],n=t?t.length:0;n--;)e.push(t.end(n));return e.length?e.sort()[e.length-1]:1/0},n.seekableStart=function(){for(var t=this.player_.seekable(),e=[],n=t?t.length:0;n--;)e.push(t.start(n));return e.length?e.sort()[0]:0},n.liveWindow=function(){var t=this.liveCurrentTime();return t===1/0?0:t-this.seekableStart()},n.isLive=function(){return this.isTracking()},n.atLiveEdge=function(){return!this.behindLiveEdge()},n.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},n.pastSeekEnd=function(){var t=this.seekableEnd();return-1!==this.lastSeekEnd_&&t!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=t,this.pastSeekEnd_},n.behindLiveEdge=function(){return this.behindLiveEdge_},n.isTracking=function(){return"number"==typeof this.trackingInterval_},n.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.skipNextSeeked_=!0,this.player_.currentTime(this.liveCurrentTime()))},n.dispose=function(){this.off(r,"visibilitychange",this.handleVisibilityChange),this.stopTracking(),t.prototype.dispose.call(this)},e}(Xt));var Vi,Ai=function(t){var e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;var n=t.$$("source"),i=[],o="";if(!n.length)return!1;for(var r=0;r<n.length;r++){var s=n[r].src;s&&-1===i.indexOf(s)&&i.push(s)}return!!i.length&&(1===i.length&&(o=i[0]),t.triggerSourceset(o),!0)},Ni=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(t){var e=r.createElement(this.nodeName.toLowerCase());e.innerHTML=t;for(var n=r.createDocumentFragment();e.childNodes.length;)n.appendChild(e.childNodes[0]);return this.innerText="",o.Element.prototype.appendChild.call(this,n),this.innerHTML}}),Bi=function(t,e){for(var n={},i=0;i<t.length&&!((n=Object.getOwnPropertyDescriptor(t[i],e))&&n.set&&n.get);i++);return n.enumerable=!0,n.configurable=!0,n},zi=function(t){var e=t.el();if(!e.resetSourceWatch_){var n={},i=function(t){return Bi([t.el(),o.HTMLMediaElement.prototype,o.Element.prototype,Ni],"innerHTML")}(t),r=function(n){return function(){for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];var s=n.apply(e,o);return Ai(t),s}};["append","appendChild","insertAdjacentHTML"].forEach(function(t){e[t]&&(n[t]=e[t],e[t]=r(n[t]))}),Object.defineProperty(e,"innerHTML",$t(i,{set:r(i.set)})),e.resetSourceWatch_=function(){e.resetSourceWatch_=null,Object.keys(n).forEach(function(t){e[t]=n[t]}),Object.defineProperty(e,"innerHTML",i)},t.one("sourceset",e.resetSourceWatch_)}},Wi=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Xe(o.Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return o.Element.prototype.setAttribute.call(this,"src",t),t}}),Fi=function(t,e,n,i){void 0===i&&(i=!0);var o=function(n){return Object.defineProperty(t,e,{value:n,enumerable:!0,writable:!0})},r={configurable:!0,enumerable:!0,get:function(){var t=n();return o(t),t}};return i&&(r.set=o),Object.defineProperty(t,e,r)},Hi=function(t){function e(e,n){var i;i=t.call(this,e,n)||this;var o=e.source,r=!1;if(o&&(i.el_.currentSrc!==o.src||e.tag&&3===e.tag.initNetworkState_)?i.setSource(o):i.handleLateInit_(i.el_),e.enableSourceset&&i.setupSourcesetHandling_(),i.isScrubbing_=!1,i.el_.hasChildNodes()){for(var s=i.el_.childNodes,a=s.length,c=[];a--;){var l=s[a];"track"===l.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(l),i.remoteTextTracks().addTrack(l.track),i.textTracks().addTrack(l.track),r||i.el_.hasAttribute("crossorigin")||!Ge(l.src)||(r=!0)):c.push(l))}for(var d=0;d<c.length;d++)i.el_.removeChild(c[d])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&r&&m.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),i.restoreMetadataTracksInIOSNativePlayer_(),(ue||pe||ie)&&!0===e.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}c(e,t);var n=e.prototype;return n.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,t.prototype.dispose.call(this)},n.setupSourcesetHandling_=function(){!function(t){if(t.featuresSourceset){var e=t.el();if(!e.resetSourceset_){var n=function(t){return Bi([t.el(),o.HTMLMediaElement.prototype,Wi],"src")}(t),i=e.setAttribute,r=e.load;Object.defineProperty(e,"src",$t(n,{set:function(i){var o=n.set.call(e,i);return t.triggerSourceset(e.src),o}})),e.setAttribute=function(n,o){var r=i.call(e,n,o);return/src/i.test(n)&&t.triggerSourceset(e.src),r},e.load=function(){var n=r.call(e);return Ai(t)||(t.triggerSourceset(""),zi(t)),n},e.currentSrc?t.triggerSourceset(e.currentSrc):Ai(t)||zi(t),e.resetSourceset_=function(){e.resetSourceset_=null,e.load=r,e.setAttribute=i,Object.defineProperty(e,"src",n),e.resetSourceWatch_&&e.resetSourceWatch_()}}}}(this)},n.restoreMetadataTracksInIOSNativePlayer_=function(){var t,e=this.textTracks(),n=function(){t=[];for(var n=0;n<e.length;n++){var i=e[n];"metadata"===i.kind&&t.push({track:i,storedMode:i.mode})}};n(),e.addEventListener("change",n),this.on("dispose",function(){return e.removeEventListener("change",n)});var i=function n(){for(var i=0;i<t.length;i++){var o=t[i];"disabled"===o.track.mode&&o.track.mode!==o.storedMode&&(o.track.mode=o.storedMode)}e.removeEventListener("change",n)};this.on("webkitbeginfullscreen",function(){e.removeEventListener("change",n),e.removeEventListener("change",i),e.addEventListener("change",i)}),this.on("webkitendfullscreen",function(){e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",i)})},n.overrideNative_=function(t,e){var n=this;if(e===this["featuresNative"+t+"Tracks"]){var i=t.toLowerCase();this[i+"TracksListeners_"]&&Object.keys(this[i+"TracksListeners_"]).forEach(function(t){n.el()[i+"Tracks"].removeEventListener(t,n[i+"TracksListeners_"][t])}),this["featuresNative"+t+"Tracks"]=!e,this[i+"TracksListeners_"]=null,this.proxyNativeTracksForType_(i)}},n.overrideNativeAudioTracks=function(t){this.overrideNative_("Audio",t)},n.overrideNativeVideoTracks=function(t){this.overrideNative_("Video",t)},n.proxyNativeTracksForType_=function(t){var e=this,n=rn[t],i=this.el()[n.getterName],o=this[n.getterName]();if(this["featuresNative"+n.capitalName+"Tracks"]&&i&&i.addEventListener){var r={change:function(n){var i={type:"change",target:o,currentTarget:o,srcElement:o};o.trigger(i),"text"===t&&e[sn.remoteText.getterName]().trigger(i)},addtrack:function(t){o.addTrack(t.track)},removetrack:function(t){o.removeTrack(t.track)}},s=function(){for(var t=[],e=0;e<o.length;e++){for(var n=!1,r=0;r<i.length;r++)if(i[r]===o[e]){n=!0;break}n||t.push(o[e])}for(;t.length;)o.removeTrack(t.shift())};this[n.getterName+"Listeners_"]=r,Object.keys(r).forEach(function(t){var n=r[t];i.addEventListener(t,n),e.on("dispose",function(e){return i.removeEventListener(t,n)})}),this.on("loadstart",s),this.on("dispose",function(t){return e.off("loadstart",s)})}},n.proxyNativeTracks_=function(){var t=this;rn.names.forEach(function(e){t.proxyNativeTracksForType_(e)})},n.createEl=function(){var t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){var n=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(n,t),e.disposeMediaElement(t),t=n}else{t=r.createElement("video");var i=$t({},this.options_.tag&&z(this.options_.tag));ue&&!0===this.options_.nativeControlsForTouch||delete i.controls,B(t,P(i,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}void 0!==this.options_.preload&&F(t,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);for(var o=["loop","muted","playsinline","autoplay"],s=0;s<o.length;s++){var a=o[s],c=this.options_[a];void 0!==c&&(c?F(t,a,a):H(t,a),t[a]=c)}return t},n.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){var e=!1,n=function(){e=!0};this.on("loadstart",n);var i=function(){e||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",i),e||this.trigger("loadstart")})}var o=["loadstart"];o.push("loadedmetadata"),t.readyState>=2&&o.push("loadeddata"),t.readyState>=3&&o.push("canplay"),t.readyState>=4&&o.push("canplaythrough"),this.ready(function(){o.forEach(function(t){this.trigger(t)},this)})}},n.setScrubbing=function(t){this.isScrubbing_=t},n.scrubbing=function(){return this.isScrubbing_},n.setCurrentTime=function(t){try{this.isScrubbing_&&this.el_.fastSeek&&ge?this.el_.fastSeek(t):this.el_.currentTime=t}catch(e){m(e,"Video is not ready. (Video.js)")}},n.duration=function(){var t=this;return this.el_.duration===1/0&&ee&&se&&0===this.el_.currentTime?(this.on("timeupdate",function e(){t.el_.currentTime>0&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))}),NaN):this.el_.duration||NaN},n.width=function(){return this.el_.offsetWidth},n.height=function(){return this.el_.offsetHeight},n.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){var e=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",function(){t.off("webkitbeginfullscreen",n),t.off("webkitendfullscreen",e)})}},n.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=o.navigator&&o.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},n.enterFullScreen=function(){var t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)Se(this.el_.play()),this.setTimeout(function(){t.pause();try{t.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},0);else try{t.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},n.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},n.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},n.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},n.reset=function(){e.resetMediaElement(this.el_)},n.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},n.setControls=function(t){this.el_.controls=!!t},n.addTextTrack=function(e,n,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,n,i):t.prototype.addTextTrack.call(this,e,n,i)},n.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return t.prototype.createRemoteTextTrack.call(this,e);var n=r.createElement("track");return e.kind&&(n.kind=e.kind),e.label&&(n.label=e.label),(e.language||e.srclang)&&(n.srclang=e.language||e.srclang),e.default&&(n.default=e.default),e.id&&(n.id=e.id),e.src&&(n.src=e.src),n},n.addRemoteTextTrack=function(e,n){var i=t.prototype.addRemoteTextTrack.call(this,e,n);return this.featuresNativeTextTracks&&this.el().appendChild(i),i},n.removeRemoteTextTrack=function(e){if(t.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var n=this.$$("track"),i=n.length;i--;)e!==n[i]&&e!==n[i].track||this.el().removeChild(n[i])},n.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),o.performance&&"function"==typeof o.performance.now?t.creationTime=o.performance.now():o.performance&&o.performance.timing&&"number"==typeof o.performance.timing.navigationStart&&(t.creationTime=o.Date.now()-o.performance.timing.navigationStart),t},e}(cn);Fi(Hi,"TEST_VID",function(){if(x()){var t=r.createElement("video"),e=r.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t}}),Hi.isSupported=function(){try{Hi.TEST_VID.volume=.5}catch(t){return!1}return!(!Hi.TEST_VID||!Hi.TEST_VID.canPlayType)},Hi.canPlayType=function(t){return Hi.TEST_VID.canPlayType(t)},Hi.canPlaySource=function(t,e){return Hi.canPlayType(t.type)},Hi.canControlVolume=function(){try{var t=Hi.TEST_VID.volume;return Hi.TEST_VID.volume=t/2+.1,t!==Hi.TEST_VID.volume}catch(e){return!1}},Hi.canMuteVolume=function(){try{var t=Hi.TEST_VID.muted;return Hi.TEST_VID.muted=!t,Hi.TEST_VID.muted?F(Hi.TEST_VID,"muted","muted"):H(Hi.TEST_VID,"muted"),t!==Hi.TEST_VID.muted}catch(e){return!1}},Hi.canControlPlaybackRate=function(){if(ee&&se&&ae<58)return!1;try{var t=Hi.TEST_VID.playbackRate;return Hi.TEST_VID.playbackRate=t/2+.1,t!==Hi.TEST_VID.playbackRate}catch(e){return!1}},Hi.canOverrideAttributes=function(){try{var t=function(){};Object.defineProperty(r.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(r.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(r.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(r.createElement("audio"),"innerHTML",{get:t,set:t})}catch(e){return!1}return!0},Hi.supportsNativeTextTracks=function(){return ge||fe&&se},Hi.supportsNativeVideoTracks=function(){return!(!Hi.TEST_VID||!Hi.TEST_VID.videoTracks)},Hi.supportsNativeAudioTracks=function(){return!(!Hi.TEST_VID||!Hi.TEST_VID.audioTracks)},Hi.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(t){var e=t[1];Fi(Hi.prototype,t[0],function(){return Hi[e]()},!0)}),Hi.prototype.movingMediaElementInDOM=!fe,Hi.prototype.featuresFullscreenResize=!0,Hi.prototype.featuresProgressEvents=!0,Hi.prototype.featuresTimeupdateEvents=!0,Hi.patchCanPlayType=function(){ne>=4&&!oe&&!se&&(Vi=Hi.TEST_VID&&Hi.TEST_VID.constructor.prototype.canPlayType,Hi.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(t)?"maybe":Vi.call(this,t)})},Hi.unpatchCanPlayType=function(){var t=Hi.TEST_VID.constructor.prototype.canPlayType;return Vi&&(Hi.TEST_VID.constructor.prototype.canPlayType=Vi),t},Hi.patchCanPlayType(),Hi.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(e){}}()}},Hi.resetMediaElement=function(t){if(t){for(var e=t.querySelectorAll("source"),n=e.length;n--;)t.removeChild(e[n]);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){Hi.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){Hi.prototype["set"+Ut(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(t){Hi.prototype[t]=function(){return this.el_[t]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){Hi.prototype["set"+Ut(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(t){Hi.prototype[t]=function(){return this.el_[t]()}}),cn.withSourceHandlers(Hi),Hi.nativeSourceHandler={},Hi.nativeSourceHandler.canPlayType=function(t){try{return Hi.TEST_VID.canPlayType(t)}catch(e){return""}},Hi.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return Hi.nativeSourceHandler.canPlayType(t.type);if(t.src){var n=Qe(t.src);return Hi.nativeSourceHandler.canPlayType("video/"+n)}return""},Hi.nativeSourceHandler.handleSource=function(t,e,n){e.setSrc(t.src)},Hi.nativeSourceHandler.dispose=function(){},Hi.registerSourceHandler(Hi.nativeSourceHandler),cn.registerTech("Html5",Hi);var Ui=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],$i={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Ki=["tiny","xsmall","small","medium","large","xlarge","huge"],qi={};Ki.forEach(function(t){var e="x"===t.charAt(0)?"x-"+t.substring(1):t;qi[t]="vjs-layout-"+e});var Xi={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Qi=function(t){function e(n,i,o){var s;if(n.id=n.id||i.id||"vjs_video_"+pt(),(i=P(e.getTagSettings(n),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if("function"==typeof n.closest){var c=n.closest("[lang]");c&&c.getAttribute&&(i.language=c.getAttribute("lang"))}else for(var l=n;l&&1===l.nodeType;){if(z(l).hasOwnProperty("lang")){i.language=l.getAttribute("lang");break}l=l.parentNode}if((s=t.call(this,null,i,o)||this).boundDocumentFullscreenChange_=function(t){return s.documentFullscreenChange_(t)},s.boundFullWindowOnEscKey_=function(t){return s.fullWindowOnEscKey(t)},s.isFullscreen_=!1,s.log=b(s.id_),s.fsApi_=Pe,s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,s.debugEnabled_=!1,!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=n,s.tagAttributes=n&&z(n),s.language(s.options_.language),i.languages){var d={};Object.getOwnPropertyNames(i.languages).forEach(function(t){d[t.toLowerCase()]=i.languages[t]}),s.languages_=d}else s.languages_=e.prototype.options_.languages;s.resetCache_(),s.poster_=i.poster||"",s.controls_=!!i.controls,n.controls=!1,n.removeAttribute("controls"),s.changingSrc_=!1,s.playCallbacks_=[],s.playTerminatedQueue_=[],n.hasAttribute("autoplay")?s.autoplay(!0):s.autoplay(s.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(function(t){if("function"!=typeof s[t])throw new Error('plugin "'+t+'" does not exist')}),s.scrubbing_=!1,s.el_=s.createEl(),zt(a(s),{eventBusKey:"el_"}),s.fsApi_.requestFullscreen&&(_t(r,s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_),s.on(s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_)),s.fluid_&&s.on(["playerreset","resize"],s.updateStyleEl_);var u=$t(s.options_);i.plugins&&Object.keys(i.plugins).forEach(function(t){s[t](i.plugins[t])}),i.debug&&s.debug(!0),s.options_.playerOptions=u,s.middleware_=[],s.initChildren(),s.isAudio("audio"===n.nodeName.toLowerCase()),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),ue&&s.addClass("vjs-touch-enabled"),fe||s.addClass("vjs-workinghover"),e.players[s.id_]=a(s);var h=g.split(".")[0];return s.addClass("vjs-v"+h),s.userActive(!0),s.reportUserActivity(),s.one("play",s.listenForUserActivity_),s.on("stageclick",s.handleStageClick_),s.on("keydown",s.handleKeyDown),s.on("languagechange",s.handleLanguagechange),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s}c(e,t);var n=e.prototype;return n.dispose=function(){var n=this;this.trigger("dispose"),this.off("dispose"),Ct(r,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Ct(r,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),dn[this.id()]=null,an.names.forEach(function(t){var e=n[an[t].getterName]();e&&e.off&&e.off()}),t.prototype.dispose.call(this)},n.createEl=function(){var e,n=this.tag,i=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),s="video-js"===this.tag.tagName.toLowerCase();i?e=this.el_=n.parentNode:s||(e=this.el_=t.prototype.createEl.call(this,"div"));var a=z(n);if(s){for(e=this.el_=n,n=this.tag=r.createElement("video");e.children.length;)n.appendChild(e.firstChild);L(e,"video-js")||V(e,"video-js"),e.appendChild(n),i=this.playerElIngest_=e,Object.keys(e).forEach(function(t){try{n[t]=e[t]}catch(i){}})}if(n.setAttribute("tabindex","-1"),a.tabindex="-1",(ce||se&&de)&&(n.setAttribute("role","application"),a.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in a&&delete a.width,"height"in a&&delete a.height,Object.getOwnPropertyNames(a).forEach(function(t){s&&"class"===t||e.setAttribute(t,a[t]),s&&n.setAttribute(t,a[t])}),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=e.player=this,this.addClass("vjs-paused"),!0!==o.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=dt("vjs-styles-dimensions");var c=nt(".vjs-styles-defaults"),l=nt("head");l.insertBefore(this.styleEl_,c?c.nextSibling:l.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var d=n.getElementsByTagName("a"),u=0;u<d.length;u++){var h=d.item(u);V(h,"vjs-hidden"),h.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!i&&n.parentNode.insertBefore(e,n),D(n,e),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_=e,e},n.crossOrigin=function(t){if(!t)return this.techGet_("crossOrigin");"anonymous"===t||"use-credentials"===t?this.techCall_("setCrossOrigin",t):m.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+t+'"')},n.width=function(t){return this.dimension("width",t)},n.height=function(t){return this.dimension("height",t)},n.dimension=function(t,e){var n=t+"_";if(void 0===e)return this[n]||0;if(""===e||"auto"===e)return this[n]=void 0,void this.updateStyleEl_();var i=parseFloat(e);isNaN(i)?m.error('Improper value "'+e+'" supplied for for '+t):(this[n]=i,this.updateStyleEl_())},n.fluid=function(t){var e,n,i=this;if(void 0===t)return!!this.fluid_;this.fluid_=!!t,jt(this)&&this.off(["playerreset","resize"],this.updateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),n=function(){i.on(["playerreset","resize"],i.updateStyleEl_)},jt(e=this)?n():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(n))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},n.fill=function(t){if(void 0===t)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},n.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},n.updateStyleEl_=function(){if(!0!==o.VIDEOJS_NO_DYNAMIC_STYLE){var t,e,n,i=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=i[1]/i[0];t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,e=void 0!==this.height_?this.height_:t*r,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),ut(this.styleEl_,"\n      ."+n+" {\n        width: "+t+"px;\n        height: "+e+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*r+"%;\n      }\n    ")}else{var s="number"==typeof this.width_?this.width_:this.options_.width,a="number"==typeof this.height_?this.height_:this.options_.height,c=this.tech_&&this.tech_.el();c&&(s>=0&&(c.width=s),a>=0&&(c.height=a))}},n.loadTech_=function(t,e){var n=this;this.tech_&&this.unloadTech_();var i=Ut(t),o=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==i&&this.tag&&(cn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var r={source:e,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+o+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};an.names.forEach(function(t){var e=an[t];r[e.getterName]=n[e.privateName]}),P(r,this.options_[i]),P(r,this.options_[o]),P(r,this.options_[t.toLowerCase()]),this.tag&&(r.tag=this.tag),e&&e.src===this.cache_.src&&this.cache_.currentTime>0&&(r.startTime=this.cache_.currentTime);var s,a=cn.getTech(t);if(!a)throw new Error("No Tech named '"+i+"' exists! '"+i+"' should be registered using videojs.registerTech()'");this.tech_=new a(r),this.tech_.ready(xt(this,this.handleTechReady_),!0),s=this.tech_,(this.textTracksJson_||[]).forEach(function(t){var e=s.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(function(t){return e.addCue(t)})}),s.textTracks(),Ui.forEach(function(t){n.on(n.tech_,t,n["handleTech"+Ut(t)+"_"])}),Object.keys($i).forEach(function(t){n.on(n.tech_,t,function(e){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+$i[t]+"_"].bind(n),event:e}):n["handleTech"+$i[t]+"_"](e)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"fullscreenerror",this.handleTechFullscreenError_),this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_),this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||D(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},n.unloadTech_=function(){var t,e,n,i=this;an.names.forEach(function(t){var e=an[t];i[e.privateName]=i[e.getterName]()}),this.textTracksJson_=(e=(t=this.tech_).$$("track"),n=Array.prototype.map.call(e,function(t){return t.track}),Array.prototype.map.call(e,function(t){var e=Ie(t.track);return t.src&&(e.src=t.src),e}).concat(Array.prototype.filter.call(t.textTracks(),function(t){return-1===n.indexOf(t)}).map(Ie))),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},n.tech=function(t){return void 0===t&&m.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},n.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},n.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mouseup",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},n.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},n.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},n.manualAutoplay_=function(t){var e=this;if(this.tech_&&"string"==typeof t){var n,i=function(){var t=e.muted();e.muted(!0);var n=function(){e.muted(t)};e.playTerminatedQueue_.push(n);var i=e.play();if(Ee(i))return i.catch(n)};if("any"===t&&!0!==this.muted()?Ee(n=this.play())&&(n=n.catch(i)):n="muted"===t&&!0!==this.muted()?i():this.play(),Ee(n))return n.then(function(){e.trigger({type:"autoplay-success",autoplay:t})}).catch(function(n){e.trigger({type:"autoplay-failure",autoplay:t})})}},n.updateSourceCaches_=function(t){void 0===t&&(t="");var e=t,n="";"string"!=typeof e&&(e=t.src,n=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],e&&!n&&(n=function(t,e){if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;var n=t.cache_.sources.filter(function(t){return t.src===e});if(n.length)return n[0].type;for(var i=t.$$("source"),o=0;o<i.length;o++){var r=i[o];if(r.type&&r.src&&r.src===e)return r.type}return _n(e)}(this,e)),this.cache_.source=$t({},t,{src:e,type:n});for(var i=this.cache_.sources.filter(function(t){return t.src&&t.src===e}),o=[],r=this.$$("source"),s=[],a=0;a<r.length;a++){var c=z(r[a]);o.push(c),c.src&&c.src===e&&s.push(c.src)}s.length&&!i.length?this.cache_.sources=o:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=e},n.handleTechSourceset_=function(t){var e=this;if(!this.changingSrc_){var n=function(t){return e.updateSourceCaches_(t)},i=this.currentSource().src,o=t.src;i&&!/^blob:/.test(i)&&/^blob:/.test(o)&&(!this.lastSource_||this.lastSource_.tech!==o&&this.lastSource_.player!==i)&&(n=function(){}),n(o),t.src||this.tech_.any(["sourceset","loadstart"],function(t){if("sourceset"!==t.type){var n=e.techGet("currentSrc");e.lastSource_.tech=n,e.updateSourceCaches_(n)}})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})},n.hasStarted=function(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},n.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},n.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(t){return t.callback(t.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},n.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting");var e=this.currentTime();this.on("timeupdate",function n(){e!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",n))})},n.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},n.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},n.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},n.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},n.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},n.handleTechFirstPlay_=function(){this.options_.starttime&&(m.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},n.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},n.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},n.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},n.handleTechClick_=function(t){tt(t)&&this.controls_&&(this.paused()?Se(this.play()):this.pause())},n.handleTechDoubleClick_=function(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(e){return e.contains(t.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},n.handleTechTap_=function(){this.userActive(!this.userActive())},n.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},n.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},n.handleTechTouchEnd_=function(t){t.cancelable&&t.preventDefault()},n.handleStageClick_=function(){this.reportUserActivity()},n.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},n.documentFullscreenChange_=function(t){var e=t.target.player;if(!e||e===this){var n=this.el(),i=r[this.fsApi_.fullscreenElement]===n;!i&&n.matches?i=n.matches(":"+this.fsApi_.fullscreen):!i&&n.msMatchesSelector&&(i=n.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}},n.handleTechFullscreenChange_=function(t,e){e&&(e.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(e.isFullscreen))},n.handleTechFullscreenError_=function(t,e){this.trigger("fullscreenerror",e)},n.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},n.handleTechEnterPictureInPicture_=function(t){this.isInPictureInPicture(!0)},n.handleTechLeavePictureInPicture_=function(t){this.isInPictureInPicture(!1)},n.handleTechError_=function(){var t=this.tech_.error();this.error(t)},n.handleTechTextData_=function(){var t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)},n.getCache=function(){return this.cache_},n.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},n.techCall_=function(t,e){this.ready(function(){if(t in gn)return function(t,e,n,i){return e[n](t.reduce(mn(n),i))}(this.middleware_,this.tech_,t,e);if(t in vn)return pn(this.middleware_,this.tech_,t,e);try{this.tech_&&this.tech_[t](e)}catch(n){throw m(n),n}},!0)},n.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in fn)return function(t,e,n){return t.reduceRight(mn(n),e[n]())}(this.middleware_,this.tech_,t);if(t in vn)return pn(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(e){if(void 0===this.tech_[t])throw m("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e),e;if("TypeError"===e.name)throw m("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1,e;throw m(e),e}}},n.play=function(){var t=this,e=this.options_.Promise||o.Promise;return e?new e(function(e){t.play_(e)}):this.play_()},n.play_=function(t){var e=this;void 0===t&&(t=Se),this.playCallbacks_.push(t);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(t){e.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(n||!ge&&!fe||this.load());var i=this.techGet_("play");null===i?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)},n.runPlayTerminatedQueue_=function(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach(function(t){t()})},n.runPlayCallbacks_=function(t){var e=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],e.forEach(function(e){e(t)})},n.pause=function(){this.techCall_("pause")},n.paused=function(){return!1!==this.techGet_("paused")},n.played=function(){return this.techGet_("played")||ye(0,0)},n.scrubbing=function(t){if(void 0===t)return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},n.currentTime=function(t){return void 0!==t?(t<0&&(t=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",t),void(this.cache_.initTime=0)):(this.cache_.initTime=t,this.off("canplay",this.applyInitTime_),void this.one("canplay",this.applyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},n.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},n.duration=function(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))},n.remainingTime=function(){return this.duration()-this.currentTime()},n.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},n.buffered=function(){var t=this.techGet_("buffered");return t&&t.length||(t=ye(0,0)),t},n.bufferedPercent=function(){return _e(this.buffered(),this.duration())},n.bufferedEnd=function(){var t=this.buffered(),e=this.duration(),n=t.end(t.length-1);return n>e&&(n=e),n},n.volume=function(t){var e;return void 0!==t?(e=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=e,this.techCall_("setVolume",e),void(e>0&&this.lastVolume_(e))):(e=parseFloat(this.techGet_("volume")),isNaN(e)?1:e)},n.muted=function(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)},n.defaultMuted=function(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},n.lastVolume_=function(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t},n.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},n.isFullscreen=function(t){if(void 0!==t){var e=this.isFullscreen_;return this.isFullscreen_=Boolean(t),this.isFullscreen_!==e&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},n.requestFullscreen=function(t){var e=this.options_.Promise||o.Promise;if(e){var n=this;return new e(function(e,i){function o(){n.off("fullscreenerror",s),n.off("fullscreenchange",r)}function r(){o(),e()}function s(t,e){o(),i(e)}n.one("fullscreenchange",r),n.one("fullscreenerror",s);var a=n.requestFullscreenHelper_(t);if(a)return a.then(o,o),a})}return this.requestFullscreenHelper_()},n.requestFullscreenHelper_=function(t){var e,n=this;if(this.fsApi_.prefixed||(e=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==t&&(e=t)),this.fsApi_.requestFullscreen){var i=this.el_[this.fsApi_.requestFullscreen](e);return i&&i.then(function(){return n.isFullscreen(!0)},function(){return n.isFullscreen(!1)}),i}this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):this.enterFullWindow()},n.exitFullscreen=function(){var t=this.options_.Promise||o.Promise;if(t){var e=this;return new t(function(t,n){function i(){e.off("fullscreenerror",r),e.off("fullscreenchange",o)}function o(){i(),t()}function r(t,e){i(),n(e)}e.one("fullscreenchange",o),e.one("fullscreenerror",r);var s=e.exitFullscreenHelper_();if(s)return s.then(i,i),s})}return this.exitFullscreenHelper_()},n.exitFullscreenHelper_=function(){var t=this;if(this.fsApi_.requestFullscreen){var e=r[this.fsApi_.exitFullscreen]();return e&&e.then(function(){return t.isFullscreen(!1)}),e}this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):this.exitFullWindow()},n.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=r.documentElement.style.overflow,_t(r,"keydown",this.boundFullWindowOnEscKey_),r.documentElement.style.overflow="hidden",V(r.body,"vjs-full-window"),this.trigger("enterFullWindow")},n.fullWindowOnEscKey=function(t){d.isEventKey(t,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},n.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Ct(r,"keydown",this.boundFullWindowOnEscKey_),r.documentElement.style.overflow=this.docOrigOverflow,A(r.body,"vjs-full-window"),this.trigger("exitFullWindow")},n.disablePictureInPicture=function(t){if(void 0===t)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")},n.isInPictureInPicture=function(t){return void 0!==t?(this.isInPictureInPicture_=!!t,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},n.requestPictureInPicture=function(){if("pictureInPictureEnabled"in r&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},n.exitPictureInPicture=function(){if("pictureInPictureEnabled"in r)return r.exitPictureInPicture()},n.handleKeyDown=function(t){var e,n,i=this.options_.userActions;i&&i.hotkeys&&(n=(e=this.el_.ownerDocument.activeElement).tagName.toLowerCase(),e.isContentEditable||("input"===n?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type):-1!==["textarea"].indexOf(n))||("function"==typeof i.hotkeys?i.hotkeys.call(this,t):this.handleHotkeys(t)))},n.handleHotkeys=function(t){var e=this.options_.userActions?this.options_.userActions.hotkeys:{},n=e.fullscreenKey,i=e.muteKey,o=void 0===i?function(t){return d.isEventKey(t,"m")}:i,s=e.playPauseKey,a=void 0===s?function(t){return d.isEventKey(t,"k")||d.isEventKey(t,"Space")}:s;if((void 0===n?function(t){return d.isEventKey(t,"f")}:n).call(this,t)){t.preventDefault(),t.stopPropagation();var c=Xt.getComponent("FullscreenToggle");!1!==r[this.fsApi_.fullscreenEnabled]&&c.prototype.handleClick.call(this,t)}else o.call(this,t)?(t.preventDefault(),t.stopPropagation(),Xt.getComponent("MuteToggle").prototype.handleClick.call(this,t)):a.call(this,t)&&(t.preventDefault(),t.stopPropagation(),Xt.getComponent("PlayToggle").prototype.handleClick.call(this,t))},n.canPlayType=function(t){for(var e,n=0,i=this.options_.techOrder;n<i.length;n++){var o=i[n],r=cn.getTech(o);if(r||(r=Xt.getComponent(o)),r){if(r.isSupported()&&(e=r.canPlayType(t)))return e}else m.error('The "'+o+'" tech is undefined. Skipped browser support check for that tech.')}return""},n.selectSource=function(t){var e,n=this,i=this.options_.techOrder.map(function(t){return[t,cn.getTech(t)]}).filter(function(t){var e=t[0],n=t[1];return n?n.isSupported():(m.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(t,e,n){var i;return t.some(function(t){return e.some(function(e){if(i=n(t,e))return!0})}),i},r=function(t,e){var i=t[0];if(t[1].canPlaySource(e,n.options_[i.toLowerCase()]))return{source:e,tech:i}};return(this.options_.sourceOrder?o(t,i,(e=r,function(t,n){return e(n,t)})):o(i,t,r))||!1},n.src=function(t){var e=this;if(void 0===t)return this.cache_.src||"";var n=Cn(t);n.length?(this.changingSrc_=!0,this.cache_.sources=n,this.updateSourceCaches_(n[0]),hn(this,n[0],function(t,i){var o;if(e.middleware_=i,e.cache_.sources=n,e.updateSourceCaches_(t),e.src_(t))return n.length>1?e.src(n.slice(1)):(e.changingSrc_=!1,e.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void e.triggerReady());o=e.tech_,i.forEach(function(t){return t.setTech&&t.setTech(o)})})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},n.src_=function(t){var e,n=this,i=this.selectSource([t]);return!i||(e=this.techName_,Ut(i.tech)!==Ut(e)?(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready(function(){n.changingSrc_=!1}),!1):(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1))},n.load=function(){this.techCall_("load")},n.reset=function(){var t=this,e=this.options_.Promise||o.Promise;this.paused()||!e?this.doReset_():Se(this.play().then(function(){return t.doReset_()}))},n.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),jt(this)&&this.trigger("playerreset")},n.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},n.resetProgressBar_=function(){this.currentTime(0);var t=this.controlBar,e=t.durationDisplay,n=t.remainingTimeDisplay;e&&e.updateContent(),n&&n.updateContent()},n.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},n.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},n.currentSources=function(){var t=this.currentSource(),e=[];return 0!==Object.keys(t).length&&e.push(t),this.cache_.sources||e},n.currentSource=function(){return this.cache_.source||{}},n.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},n.currentType=function(){return this.currentSource()&&this.currentSource().type||""},n.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")},n.autoplay=function(t){if(void 0===t)return this.options_.autoplay||!1;var e;"string"==typeof t&&/(any|play|muted)/.test(t)?(this.options_.autoplay=t,this.manualAutoplay_(t),e=!1):this.options_.autoplay=!!t,e=void 0===e?this.options_.autoplay:e,this.tech_&&this.techCall_("setAutoplay",e)},n.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},n.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")},n.poster=function(t){if(void 0===t)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},n.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},n.controls=function(t){if(void 0===t)return!!this.controls_;this.controls_!==(t=!!t)&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},n.usingNativeControls=function(t){if(void 0===t)return!!this.usingNativeControls_;this.usingNativeControls_!==(t=!!t)&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},n.error=function(t){if(void 0===t)return this.error_||null;if(this.options_.suppressNotSupportedError&&t&&4===t.code){var e=function(){this.error(t)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],e),void this.one("loadstart",function(){this.off(["click","touchstart"],e)})}if(null===t)return this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new we(t),this.addClass("vjs-error"),m.error("(CODE:"+this.error_.code+" "+we.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},n.reportUserActivity=function(t){this.userActivity_=!0},n.userActive=function(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},n.listenForUserActivity_=function(){var t,e,n,i=xt(this,this.reportUserActivity),o=function(e){i(),this.clearInterval(t)};this.on("mousedown",function(){i(),this.clearInterval(t),t=this.setInterval(i,250)}),this.on("mousemove",function(t){t.screenX===e&&t.screenY===n||(e=t.screenX,n=t.screenY,i())}),this.on("mouseup",o),this.on("mouseleave",o);var r,s=this.getChild("controlBar");!s||fe||ee||(s.on("mouseenter",function(t){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0}),s.on("mouseleave",function(t){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",i),this.on("keyup",i),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(r);var t=this.options_.inactivityTimeout;t<=0||(r=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},t))}},250)},n.playbackRate=function(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)},n.defaultPlaybackRate=function(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},n.isAudio=function(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t},n.addTextTrack=function(t,e,n){if(this.tech_)return this.tech_.addTextTrack(t,e,n)},n.addRemoteTextTrack=function(t,e){if(this.tech_)return this.tech_.addRemoteTextTrack(t,e)},n.removeRemoteTextTrack=function(t){void 0===t&&(t={});var e=t.track;if(e||(e=t),this.tech_)return this.tech_.removeRemoteTextTrack(e)},n.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},n.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},n.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},n.language=function(t){if(void 0===t)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),jt(this)&&this.trigger("languagechange"))},n.languages=function(){return $t(e.prototype.options_.languages,this.languages_)},n.toJSON=function(){var t=$t(this.options_),e=t.tracks;t.tracks=[];for(var n=0;n<e.length;n++){var i=e[n];(i=$t(i)).player=void 0,t.tracks[n]=i}return t},n.createModal=function(t,e){var n=this;(e=e||{}).content=t||"";var i=new je(this,e);return this.addChild(i),i.on("dispose",function(){n.removeChild(i)}),i.open(),i},n.updateCurrentBreakpoint_=function(){if(this.responsive())for(var t=this.currentBreakpoint(),e=this.currentWidth(),n=0;n<Ki.length;n++){var i=Ki[n];if(e<=this.breakpoints_[i]){if(t===i)return;t&&this.removeClass(qi[t]),this.addClass(qi[i]),this.breakpoint_=i;break}}},n.removeCurrentBreakpoint_=function(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)},n.breakpoints=function(t){return void 0===t||(this.breakpoint_="",this.breakpoints_=P({},Xi,t),this.updateCurrentBreakpoint_()),P(this.breakpoints_)},n.responsive=function(t){return void 0===t?this.responsive_:(t=Boolean(t))!==this.responsive_?(this.responsive_=t,t?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0},n.currentBreakpoint=function(){return this.breakpoint_},n.currentBreakpointClass=function(){return qi[this.breakpoint_]||""},n.loadMedia=function(t,e){var n=this;if(t&&"object"==typeof t){this.reset(),this.cache_.media=$t(t);var i=this.cache_.media,o=i.poster,r=i.src,s=i.textTracks;!i.artwork&&o&&(this.cache_.media.artwork=[{src:o,type:_n(o)}]),r&&this.src(r),o&&this.poster(o),Array.isArray(s)&&s.forEach(function(t){return n.addRemoteTextTrack(t,!1)}),this.ready(e)}},n.getMedia=function(){if(!this.cache_.media){var t=this.poster(),e={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(t){return{kind:t.kind,label:t.label,language:t.language,src:t.src}})};return t&&(e.poster=t,e.artwork=[{src:e.poster,type:_n(e.poster)}]),e}return $t(this.cache_.media)},e.getTagSettings=function(t){var e={sources:[],tracks:[]},n=z(t),i=n["data-setup"];if(L(t,"vjs-fill")&&(n.fill=!0),L(t,"vjs-fluid")&&(n.fluid=!0),null!==i){var o=l(i||"{}"),r=o[0],s=o[1];r&&m.error(r),P(n,s)}if(P(e,n),t.hasChildNodes())for(var a=t.childNodes,c=0,d=a.length;c<d;c++){var u=a[c],h=u.nodeName.toLowerCase();"source"===h?e.sources.push(z(u)):"track"===h&&e.tracks.push(z(u))}return e},n.flexNotSupported_=function(){var t=r.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},n.debug=function(t){if(void 0===t)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},e}(Xt);an.names.forEach(function(t){var e=an[t];Qi.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}}),Qi.prototype.crossorigin=Qi.prototype.crossOrigin,Qi.players={};var Gi=o.navigator;Qi.prototype.options_={techOrder:cn.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Gi&&(Gi.languages&&Gi.languages[0]||Gi.userLanguage||Gi.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(t){Qi.prototype[t]=function(){return this.techGet_(t)}}),Ui.forEach(function(t){Qi.prototype["handleTech"+Ut(t)+"_"]=function(){return this.trigger(t)}}),Xt.registerComponent("Player",Qi);var Yi="plugin",Ji={},Zi=function(t){return Ji.hasOwnProperty(t)},to=function(t){return Zi(t)?Ji[t]:void 0},eo=function(t,e){t.activePlugins_=t.activePlugins_||{},t.activePlugins_[e]=!0},no=function(t,e,n){var i=(n?"before":"")+"pluginsetup";t.trigger(i,e),t.trigger(i+":"+e.name,e)},io=function(t,e){return e.prototype.name=t,function(){no(this,{name:t,plugin:e,instance:null},!0);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var r=p(e,[this].concat(i));return this[t]=function(){return r},no(this,r.getEventHash()),r}},oo=function(){function t(e){if(this.constructor===t)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),zt(this),delete this.trigger,Ft(this,this.constructor.defaultState),eo(e,this.name),this.dispose=xt(this,this.dispose),e.on("dispose",this.dispose)}var e=t.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(t){return void 0===t&&(t={}),t.name=this.name,t.plugin=this.constructor,t.instance=this,t},e.trigger=function(t,e){return void 0===e&&(e={}),Pt(this.eventBusEl_,t,this.getEventHash(e))},e.handleStateChanged=function(t){},e.dispose=function(){var t=this.name,e=this.player;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e.activePlugins_[t]=!1,this.player=this.state=null,e[t]=io(t,Ji[t])},t.isBasic=function(e){var n="string"==typeof e?to(e):e;return"function"==typeof n&&!t.prototype.isPrototypeOf(n.prototype)},t.registerPlugin=function(e,n){if("string"!=typeof e)throw new Error('Illegal plugin name, "'+e+'", must be a string, was '+typeof e+".");if(Zi(e))m.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');else if(Qi.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+typeof n+".");return Ji[e]=n,e!==Yi&&(Qi.prototype[e]=t.isBasic(n)?function(t,e){var n=function(){no(this,{name:t,plugin:e,instance:null},!0);var n=e.apply(this,arguments);return eo(this,t),no(this,{name:t,plugin:e,instance:n}),n};return Object.keys(e).forEach(function(t){n[t]=e[t]}),n}(e,n):io(e,n)),n},t.deregisterPlugin=function(t){if(t===Yi)throw new Error("Cannot de-register base plugin.");Zi(t)&&(delete Ji[t],delete Qi.prototype[t])},t.getPlugins=function(t){var e;return void 0===t&&(t=Object.keys(Ji)),t.forEach(function(t){var n=to(t);n&&((e=e||{})[t]=n)}),e},t.getPluginVersion=function(t){var e=to(t);return e&&e.VERSION||""},t}();oo.getPlugin=to,oo.BASE_PLUGIN_NAME=Yi,oo.registerPlugin(Yi,oo),Qi.prototype.usingPlugin=function(t){return!!this.activePlugins_&&!0===this.activePlugins_[t]},Qi.prototype.hasPlugin=function(t){return!!Zi(t)};var ro=function(t){return 0===t.indexOf("#")?t.slice(1):t};function so(t,e,n){var i=so.getPlayer(t);if(i)return e&&m.warn('Player "'+t+'" is already initialised. Options will not be applied.'),n&&i.ready(n),i;var o="string"==typeof t?nt("#"+ro(t)):t;if(!E(o))throw new TypeError("The element or ID supplied is not valid. (videojs)");o.ownerDocument.defaultView&&o.ownerDocument.body.contains(o)||m.warn("The element supplied is not included in the DOM"),e=e||{},so.hooks("beforesetup").forEach(function(t){var n=t(o,$t(e));T(n)&&!Array.isArray(n)?e=$t(e,n):m.error("please return an object in beforesetup hooks")});var r=Xt.getComponent("Player");return i=new r(o,e,n),so.hooks("setup").forEach(function(t){return t(i)}),i}if(so.hooks_={},so.hooks=function(t,e){return so.hooks_[t]=so.hooks_[t]||[],e&&(so.hooks_[t]=so.hooks_[t].concat(e)),so.hooks_[t]},so.hook=function(t,e){so.hooks(t,e)},so.hookOnce=function(t,e){so.hooks(t,[].concat(e).map(function(e){return function n(){return so.removeHook(t,n),e.apply(void 0,arguments)}}))},so.removeHook=function(t,e){var n=so.hooks(t).indexOf(e);return!(n<=-1||((so.hooks_[t]=so.hooks_[t].slice()).splice(n,1),0))},!0!==o.VIDEOJS_NO_DYNAMIC_STYLE&&x()){var ao=nt(".vjs-styles-defaults");if(!ao){ao=dt("vjs-styles-defaults");var co=nt("head");co&&co.insertBefore(ao,co.firstChild),ut(ao,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}at(1,so),so.VERSION=g,so.options=Qi.prototype.options_,so.getPlayers=function(){return Qi.players},so.getPlayer=function(t){var e,n=Qi.players;if("string"==typeof t){var i=ro(t),o=n[i];if(o)return o;e=nt("#"+i)}else e=t;if(E(e)){var r=e.player,s=e.playerId;if(r||n[s])return r||n[s]}},so.getAllPlayers=function(){return Object.keys(Qi.players).map(function(t){return Qi.players[t]}).filter(Boolean)},so.players=Qi.players,so.getComponent=Xt.getComponent,so.registerComponent=function(t,e){cn.isTech(e)&&m.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Xt.registerComponent.call(Xt,t,e)},so.getTech=cn.getTech,so.registerTech=cn.registerTech,so.use=function(t,e){ln[t]=ln[t]||[],ln[t].push(e)},Object.defineProperty(so,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(so.middleware,"TERMINATOR",{value:un,writeable:!1,enumerable:!0}),so.browser=ve,so.TOUCH_ENABLED=ue,so.extend=function(t,e){void 0===e&&(e={});var n=function(){t.apply(this,arguments)},i={};for(var o in"object"==typeof e?(e.constructor!==Object.prototype.constructor&&(n=e.constructor),i=e):"function"==typeof e&&(n=e),f(n,t),t&&(n.super_=t),i)i.hasOwnProperty(o)&&(n.prototype[o]=i[o]);return n},so.mergeOptions=$t,so.bind=xt,so.registerPlugin=oo.registerPlugin,so.deregisterPlugin=oo.deregisterPlugin,so.plugin=function(t,e){return m.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),oo.registerPlugin(t,e)},so.getPlugins=oo.getPlugins,so.getPlugin=oo.getPlugin,so.getPluginVersion=oo.getPluginVersion,so.addLanguage=function(t,e){var n;return t=(""+t).toLowerCase(),(so.options.languages=$t(so.options.languages,((n={})[t]=e,n)))[t]},so.log=m,so.createLogger=b,so.createTimeRange=so.createTimeRanges=ye,so.formatTime=Rn,so.setFormatTime=function(t){jn=t},so.resetFormatTime=function(){jn=In},so.parseUrl=qe,so.isCrossOrigin=Ge,so.EventTarget=St,so.on=_t,so.one=Tt,so.off=Ct,so.trigger=Pt,so.xhr=u,so.TextTrack=tn,so.AudioTrack=en,so.VideoTrack=nn,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(t){so[t]=function(){return m.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),ot[t].apply(null,arguments)}}),so.computedStyle=M,so.dom=ot,so.url=Ye,so.defineLazyProperty=Fi,t.exports=so},zFeg:function(t,e,n){var i,o="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},r=n(6);"undefined"!=typeof document?i=document:(i=o["__GLOBAL_DOCUMENT_CACHE@4"])||(i=o["__GLOBAL_DOCUMENT_CACHE@4"]=r),t.exports=i}}]);