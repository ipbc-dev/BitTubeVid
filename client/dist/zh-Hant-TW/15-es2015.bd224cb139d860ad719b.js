(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"3/ER":function(e,t,n){"use strict";(function(e){var o=n("Ju5/"),c="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=c&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===c?o.a.Buffer:void 0,r=a?a.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var n=e.length,o=r?r(n):new e.constructor(n);return e.copy(o),o}}).call(this,n("3UD+")(e))},"8aVP":function(e,t){},V0Sv:function(e,t,n){"use strict";n.r(t),n.d(t,"AdminModule",(function(){return of}));var o=n("JIr8"),c=n("AytR"),i=n("M0ag"),a=n("fXoL"),r=n("tk/3"),l=n("7FIj");let s=(()=>{class e{constructor(e,t,n){this.authHttp=e,this.restExtractor=t,this.i18n=n,this.videoQuotaOptions=[],this.videoQuotaDailyOptions=[],this.videoQuotaOptions=[{value:void 0,label:"Default quota",disabled:!0},{value:-1,label:this.i18n("Unlimited")},{value:void 0,label:"\u2500\u2500\u2500\u2500\u2500",disabled:!0},{value:0,label:this.i18n("None - no upload possible")},{value:104857600,label:this.i18n("100MB")},{value:524288e3,label:this.i18n("500MB")},{value:1073741824,label:this.i18n("1GB")},{value:5368709120,label:this.i18n("5GB")},{value:21474836480,label:this.i18n("20GB")},{value:53687091200,label:this.i18n("50GB")}],this.videoQuotaDailyOptions=[{value:void 0,label:"Default daily upload limit",disabled:!0},{value:-1,label:this.i18n("Unlimited")},{value:void 0,label:"\u2500\u2500\u2500\u2500\u2500",disabled:!0},{value:0,label:this.i18n("None - no upload possible")},{value:10485760,label:this.i18n("10MB")},{value:52428800,label:this.i18n("50MB")},{value:104857600,label:this.i18n("100MB")},{value:524288e3,label:this.i18n("500MB")},{value:2147483648,label:this.i18n("2GB")},{value:5368709120,label:this.i18n("5GB")}]}getCustomConfig(){return this.authHttp.get(e.BASE_APPLICATION_URL+"/custom").pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}updateCustomConfig(t){return this.authHttp.put(e.BASE_APPLICATION_URL+"/custom",t).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}}return e.BASE_APPLICATION_URL=c.a.apiUrl+"/api/v1/config",e.\u0275fac=function(t){return new(t||e)(a.oc(r.b),a.oc(i.e),a.oc(l.a))},e.\u0275prov=a.Tb({token:e,factory:e.\u0275fac}),e})();var d=n("pyEO"),g=n("ey9i"),u=n("3szM"),b=n("cp0P"),p=n("ofXK"),f=n("3Pt+"),h=n("1kSV"),m=n("DnSO"),v=n("ed90"),C=n("lVkt"),O=n("tyNb"),P=n("ybWZ"),_=n("D+nq");const M=["nav"];var y,w,x,k;y="\u7AD9\u81FA\u8CC7\u8A0A",w="\u57FA\u672C\u8A2D\u5B9A",x="\u670D\u52D9",k="\u9032\u968E\u8A2D\u5B9A";const T=["value","\u66F4\u65B0\u8A2D\u5B9A"];var A,I,S,R,D;A="\u7AD9\u81FA",I="\u540D\u7A31",S="\u77ED\u63CF\u8FF0",R="\u63CF\u8FF0",D="\u4E3B\u8981\u7AD9\u81FA\u5206\u985E";const z=["emptyFilterMessage","\u627E\u4E0D\u5230\u7D50\u679C"];var E;E="\u60A8\uFF0F\u60A8\u7684\u7BA1\u7406\u54E1\u4E3B\u8981\u8AAA\u7684\u8A9E\u8A00";const L=["emptyFilterMessage","\u627E\u4E0D\u5230\u7D50\u679C"];var $,J,N,j,F,U,V,B,G,Y,H,X,Q,K,q,W,Z,ee,te,ne,oe,ce,ie,ae,re,le;function se(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.name)}}function de(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.shortDescription)}}function ge(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.description)}}function ue(e,t){1&e&&(a.bc(0),a.hc(1,ae),a.ac())}function be(e,t){1&e&&(a.bc(0),a.nc(1,re),a.Yb(2,"br"),a.Yb(3,"br"),a.kc(),a.ac())}function pe(e,t){1&e&&(a.bc(0),a.nc(1,le),a.Yb(2,"strong"),a.Yb(3,"strong"),a.kc(),a.ac())}function fe(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.defaultNSFWPolicy)}}function he(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.terms)}}function me(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.codeOfConduct)}}function ve(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.moderationInformation)}}function Ce(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.administrator)}}function Oe(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.creationReason)}}function Pe(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.maintenanceLifetime)}}function _e(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.businessModel)}}function Me(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.hardwareInformation)}}$="\u5BE9\u6838\u8207 NSFW",J="\u7BA1\u7406 " + "\ufffd#40\ufffd" + "\u4F7F\u7528\u8005" + "\ufffd/#40\ufffd" + " \u4EE5\u5EFA\u7ACB\u826F\u597D\u7684\u5718\u968A\u3002 ",N="\u5305\u542B\u654F\u611F\u5167\u5BB9\u7684\u5F71\u7247\u653F\u7B56",j="\u654F\u611F\u5F71\u7247\u7684\u653F\u7B56",F="\u4E0D\u8981\u7F6E\u65BC\u6E05\u55AE\u4E2D",U="\u6A21\u7CCA\u7E2E\u5716",V="\u986F\u793A",B="\u689D\u6B3E",G="\u884C\u70BA\u5B88\u5247",Y="\u7BA1\u7406\u8CC7\u8A0A",H="\u8AB0\u7BA1\u7406\u6B64\u7AD9\u81FA\uFF1F\u5C0D NSFW \u5F71\u7247\u6709\u4F55\u653F\u7B56\uFF1F\u5C0D\u653F\u6CBB\u5F71\u7247\u5462\uFF1F\u7B49\u7B49",X="\u60A8\u8207\u60A8\u7684\u7AD9\u81FA",Q="\u8AB0\u5728\u7BA1\u7406\u7AD9\u81FA\uFF1F",K="\u4E00\u500B\u4EBA\uFF1F\u975E\u71DF\u5229\u7D44\u7E54\uFF1F\u9084\u662F\u4E00\u9593\u516C\u53F8\uFF1F",q="\u70BA\u4EC0\u9EBC\u60A8\u8981\u5EFA\u7ACB\u6B64\u7AD9\u81FA\uFF1F",W="\u8981\u5206\u4EAB\u60A8\u7684\u500B\u4EBA\u5F71\u7247\uFF1F\u9084\u662F\u8981\u958B\u653E\u8A3B\u518A\u4E26\u8B93\u4EBA\u5011\u53EF\u4EE5\u4E0A\u50B3\u4ED6\u5011\u60F3\u8981\u4E0A\u50B3\u7684\u5F71\u7247\u5462\uFF1F",Z="\u60A8\u6253\u7B97\u7DAD\u8B77\u6B64\u7AD9\u81FA\u591A\u4E45\uFF1F",ee="\u9019\u5C0D\u60F3\u8981\u5728\u60A8\u7684\u7AD9\u81FA\u4E0A\u8A3B\u518A\u7684\u4F7F\u7528\u8005\u4F86\u8AAA\u662F\u5F88\u91CD\u8981\u7684",te="\u60A8\u5C0D PeerTube \u4F3A\u670D\u5668\u6709\u4F55\u8CA1\u52D9\u898F\u5283\uFF1F",ne="\u7528\u81EA\u5DF1\u7684\u8CC7\u91D1\u55CE\uFF1F\u4F7F\u7528\u8005\u6350\u6B3E\uFF1F\u5EE3\u544A\uFF1F",oe="\u5176\u4ED6\u8CC7\u8A0A",ce="\u7AD9\u81FA\u5728\u4F55\u7A2E\u4F3A\u670D\u5668\uFF0F\u786C\u9AD4\u4E0A\u57F7\u884C\uFF1F",ie="\u4F8B\u5982\uFF1A2vCore 2GB RAM\uFF0C\u6307\u5411\u60A8\u79DF\u7528\u4F3A\u670D\u5668\u7684\u76F4\u63A5\u9023\u7D50\u7B49\u3002",ae="\u672C\u7AD9\u81FA\u70BA\u654F\u611F\u8207 NSFW \u5167\u5BB9\u5C08\u7528",re="\u555F\u7528\u5B83\u6703\u8B93\u5176\u4ED6\u7BA1\u7406\u54E1\u77E5\u9053\u60A8\u4E3B\u8981\u662F\u5728\u806F\u64AD\u654F\u611F\u5167\u5BB9\u3002" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + " \u6B64\u5916\uFF0C\u9810\u8A2D\u60C5\u6CC1\u4E0B\uFF0C\u7CFB\u7D71\u6703\u81EA\u52D5\u52FE\u9078\u5F71\u7247\u4E0A\u50B3\u6642\u7684 NSFW \u52FE\u9078\u6846\u3002 ",re=a.mc(re),le="\u6709" + "[\ufffd#2\ufffd|\ufffd#3\ufffd]" + "\u4E0D\u8981\u5217\u51FA" + "[\ufffd/#2\ufffd|\ufffd/#3\ufffd]" + "\u6216" + "[\ufffd#2\ufffd|\ufffd#3\ufffd]" + "\u6A21\u7CCA\u7E2E\u5716" + "[\ufffd/#2\ufffd|\ufffd/#3\ufffd]" + "\u6642\uFF0C\u5C07\u6703\u5728\u8ACB\u6C42\u89C0\u770B\u5F71\u7247\u6642\u986F\u793A\u78BA\u8A8D\u65B9\u584A\u3002 ",le=a.mc(le);const ye=function(e){return{"input-error":e}};function we(e,t){if(1&e&&(a.bc(0,15),a.dc(1,"div",16),a.dc(2,"div",17),a.dc(3,"div",18),a.hc(4,A),a.cc(),a.cc(),a.dc(5,"div",19),a.dc(6,"div",20),a.dc(7,"label",21),a.hc(8,I),a.cc(),a.Yb(9,"input",22),a.ad(10,se,2,1,"div",14),a.cc(),a.dc(11,"div",20),a.dc(12,"label",23),a.hc(13,S),a.cc(),a.Yb(14,"textarea",24),a.ad(15,de,2,1,"div",14),a.cc(),a.dc(16,"div",20),a.dc(17,"label",25),a.hc(18,R),a.cc(),a.Yb(19,"my-help",26),a.Yb(20,"my-markdown-textarea",27),a.ad(21,ge,2,1,"div",14),a.cc(),a.dc(22,"div",20),a.dc(23,"label",28),a.hc(24,D),a.cc(),a.dc(25,"div"),a.dc(26,"p-multiSelect",29),a.jc(27,z),a.cc(),a.cc(),a.cc(),a.dc(28,"div",20),a.dc(29,"label",30),a.hc(30,E),a.cc(),a.dc(31,"div"),a.dc(32,"p-multiSelect",31),a.jc(33,L),a.cc(),a.cc(),a.cc(),a.cc(),a.cc(),a.dc(34,"div",10),a.dc(35,"div",17),a.dc(36,"div",18),a.hc(37,$),a.cc(),a.dc(38,"div",32),a.nc(39,J),a.Yb(40,"a",33),a.kc(),a.cc(),a.cc(),a.dc(41,"div",19),a.dc(42,"div",20),a.dc(43,"my-peertube-checkbox",34),a.ad(44,ue,2,0,"ng-template",35),a.ad(45,be,4,0,"ng-template",36),a.cc(),a.cc(),a.dc(46,"div",20),a.dc(47,"label",37),a.hc(48,N),a.cc(),a.dc(49,"my-help"),a.ad(50,pe,4,0,"ng-template",38),a.cc(),a.dc(51,"div",39),a.dc(52,"select",40),a.dc(53,"option",41),a.hc(54,j),a.cc(),a.dc(55,"option",42),a.hc(56,F),a.cc(),a.dc(57,"option",43),a.hc(58,U),a.cc(),a.dc(59,"option",44),a.hc(60,V),a.cc(),a.cc(),a.cc(),a.ad(61,fe,2,1,"div",14),a.cc(),a.dc(62,"div",20),a.dc(63,"label",45),a.hc(64,B),a.cc(),a.Yb(65,"my-help",26),a.Yb(66,"my-markdown-textarea",46),a.ad(67,he,2,1,"div",14),a.cc(),a.dc(68,"div",20),a.dc(69,"label",47),a.hc(70,G),a.cc(),a.Yb(71,"my-help",26),a.Yb(72,"my-markdown-textarea",48),a.ad(73,me,2,1,"div",14),a.cc(),a.dc(74,"div",20),a.dc(75,"label",49),a.hc(76,Y),a.cc(),a.Yb(77,"my-help",26),a.dc(78,"div",50),a.hc(79,H),a.cc(),a.Yb(80,"my-markdown-textarea",51),a.ad(81,ve,2,1,"div",14),a.cc(),a.cc(),a.cc(),a.dc(82,"div",10),a.dc(83,"div",17),a.dc(84,"div",18),a.hc(85,X),a.cc(),a.cc(),a.dc(86,"div",19),a.dc(87,"div",20),a.dc(88,"label",52),a.hc(89,Q),a.cc(),a.dc(90,"div",50),a.hc(91,K),a.cc(),a.Yb(92,"my-markdown-textarea",53),a.ad(93,Ce,2,1,"div",14),a.cc(),a.dc(94,"div",20),a.dc(95,"label",54),a.hc(96,q),a.cc(),a.dc(97,"div",50),a.hc(98,W),a.cc(),a.Yb(99,"textarea",55),a.ad(100,Oe,2,1,"div",14),a.cc(),a.dc(101,"div",20),a.dc(102,"label",56),a.hc(103,Z),a.cc(),a.dc(104,"div",50),a.hc(105,ee),a.cc(),a.Yb(106,"textarea",57),a.ad(107,Pe,2,1,"div",14),a.cc(),a.dc(108,"div",20),a.dc(109,"label",58),a.hc(110,te),a.cc(),a.dc(111,"div",50),a.hc(112,ne),a.cc(),a.Yb(113,"textarea",59),a.ad(114,_e,2,1,"div",14),a.cc(),a.cc(),a.cc(),a.dc(115,"div",10),a.dc(116,"div",17),a.dc(117,"div",18),a.hc(118,oe),a.cc(),a.cc(),a.dc(119,"div",19),a.dc(120,"div",20),a.dc(121,"label",60),a.hc(122,ce),a.cc(),a.dc(123,"div",50),a.hc(124,ie),a.cc(),a.Yb(125,"my-markdown-textarea",61),a.ad(126,Me,2,1,"div",14),a.cc(),a.cc(),a.cc(),a.ac()),2&e){const e=a.wc();a.Jb(9),a.Dc("ngClass",a.Hc(31,ye,e.formErrors.instance.name)),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.name),a.Jb(4),a.Dc("ngClass",a.Hc(33,ye,e.formErrors["instance.shortDescription"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.shortDescription),a.Jb(5),a.Dc("classes",a.Hc(35,ye,e.formErrors["instance.description"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.description),a.Jb(5),a.Dc("options",e.categoryItems)("showToggleAll",!1)("defaultLabel",e.getDefaultCategoryLabel())("selectedItemsLabel",e.getSelectedCategoryLabel()),a.Jb(6),a.Dc("options",e.languageItems)("showToggleAll",!1)("defaultLabel",e.getDefaultLanguageLabel())("selectedItemsLabel",e.getSelectedLanguageLabel()),a.Jb(29),a.Dc("ngIf",e.formErrors.instance.defaultNSFWPolicy),a.Jb(5),a.Dc("ngClass",a.Hc(37,ye,e.formErrors["instance.terms"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.terms),a.Jb(5),a.Dc("ngClass",a.Hc(39,ye,e.formErrors["instance.codeOfConduct"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.codeOfConduct),a.Jb(7),a.Dc("ngClass",a.Hc(41,ye,e.formErrors["instance.moderationInformation"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.moderationInformation),a.Jb(11),a.Dc("classes",a.Hc(43,ye,e.formErrors["instance.administrator"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.administrator),a.Jb(6),a.Dc("ngClass",a.Hc(45,ye,e.formErrors["instance.creationReason"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.creationReason),a.Jb(6),a.Dc("ngClass",a.Hc(47,ye,e.formErrors["instance.maintenanceLifetime"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.maintenanceLifetime),a.Jb(6),a.Dc("ngClass",a.Hc(49,ye,e.formErrors["instance.businessModel"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.businessModel),a.Jb(11),a.Dc("classes",a.Hc(51,ye,e.formErrors["instance.hardwareInformation"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.hardwareInformation)}}var xe,ke,Te,Ae,Ie,Se,Re,De,ze,Ee,Le,$e;xe="\u5916\u89C0",ke="\u4F7F\u7528" + "\ufffd#6\ufffd" + "\u5916\u639B\u7A0B\u5F0F\u8207\u4F48\u666F\u4E3B\u984C" + "[\ufffd/#6\ufffd|\ufffd/#7\ufffd]" + "\u9032\u884C\u66F4\u591A\u8B8A\u52D5\uFF0C\u6216" + "\ufffd#7\ufffd" + "\u65B0\u589E\u5C11\u91CF\u4FEE\u6539" + "[\ufffd/#6\ufffd|\ufffd/#7\ufffd]" + "\u3002 ",ke=a.mc(ke),Te="\u4F48\u666F\u4E3B\u984C",Ae="\u9810\u8A2D",Ie="\u9996\u9801",Se="\u63A2\u7D22\u5F71\u7247",Re="\u8DA8\u52E2\u5F71\u7247",De="\u6700\u559C\u6B61\u7684\u5F71\u7247",ze="\u6700\u8FD1\u65B0\u589E\u7684\u5F71\u7247",Ee="\u672C\u5730\u5F71\u7247",Le="\u65B0\u4F7F\u7528\u8005",$e="\u7BA1\u7406" + "\ufffd#40\ufffd" + "\u4F7F\u7528\u8005" + "\ufffd/#40\ufffd" + "\u4EE5\u55AE\u7368\u8A2D\u5B9A\u4ED6\u5011\u7684\u914D\u984D\u3002 ";const Je=["labelText","\u5DF2\u555F\u7528\u8A3B\u518A"];var Ne;Ne="\u26A0\uFE0F \u4F7F\u7528\u6B64\u529F\u80FD\u6642\u5FC5\u9808\u975E\u5E38\u5C0F\u5FC3\u3002";const je=["labelText","\u8A3B\u518A\u9700\u8981\u96FB\u5B50\u90F5\u4EF6\u9A57\u8B49"];var Fe,Ue,Ve,Be;Fe="\u9650\u5236\u8A3B\u518A",Ue="\u6BCF\u500B\u4F7F\u7528\u8005\u9810\u8A2D\u7684\u5F71\u7247\u914D\u984D",Ve="\u6BCF\u500B\u4F7F\u7528\u8005\u9810\u8A2D\u7684\u6BCF\u65E5\u4E0A\u50B3\u9650\u5236",Be="\u65B0\u5F71\u7247";const Ge=["labelText","\u5141\u8A31\u4F7F\u7528 HTTP URL \u532F\u5165\uFF08\u5982 YouTube\uFF09"],Ye=["labelText","\u5141\u8A31\u4F7F\u7528\u7A2E\u5B50\u6A94\u6848\u6216\u78C1\u529B\u9023\u7D50\u532F\u5165"],He=["labelText","\u81EA\u52D5\u5C07\u65B0\u5F71\u7247\u5217\u5165\u9ED1\u540D\u55AE"];var Xe,Qe,Ke;Xe="\u9664\u975E\u4F7F\u7528\u8005\u88AB\u6A19\u8A18\u70BA\u53D7\u4FE1\u4EFB\uFF0C\u5426\u5247\u4ED6\u5011\u7684\u5F71\u7247\u5C07\u6703\u5728\u7248\u4E3B\u5BE9\u95B1\u524D\u4FDD\u6301\u79C1\u4EBA\u5F71\u7247\u7684\u72C0\u614B\u3002",Qe="\u806F\u76DF",Ke="\u7BA1\u7406\u8207\u5176\u4ED6\u7AD9\u81FA\u7684" + "\ufffd#101\ufffd" + "\u95DC\u4FC2" + "\ufffd/#101\ufffd" + "\u3002 ";const qe=["labelText","\u5176\u4ED6\u7AD9\u81FA\u53EF\u4EE5\u8FFD\u8E64\u60A8\u7684"],We=["labelText","\u624B\u52D5\u6279\u51C6\u65B0\u7684\u7AD9\u81FA\u8FFD\u8E64\u8005"],Ze=["labelText","\u81EA\u52D5\u8FFD\u8E64\u7AD9\u81FA"];var et;et="\u26A0\uFE0F \u4F7F\u7528\u6B64\u529F\u80FD\u6642\u5FC5\u9808\u975E\u5E38\u5C0F\u5FC3\u3002";const tt=["labelText","\u81EA\u52D5\u8FFD\u8E64\u516C\u958B\u7D22\u5F15\u7684\u7AD9\u81FA"];var nt,ot,ct,it,at;nt="\u26A0\uFE0F \u4F7F\u7528\u6B64\u529F\u80FD\u6642\u5FC5\u9808\u975E\u5E38\u5C0F\u5FC3\u3002",ot="\u60A8\u61C9\u8A72\u53EA\u8FFD\u8E64\u60A8\u6240\u4FE1\u4EFB\u7684\u7D22\u5F15\uFF0C\u6216" + "\ufffd#129\ufffd" + "\u81EA\u884C\u67B6\u8A2D" + "\ufffd/#129\ufffd" + "\u3002 ",ct="\u7D22\u5F15 URL",it="\u7BA1\u7406",at="\u7BA1\u7406\u96FB\u5B50\u90F5\u4EF6";const rt=["labelText","\u555F\u7528\u806F\u7D61\u8868\u55AE"];function lt(e,t){if(1&e&&(a.dc(0,"option",121),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e),a.Jb(1),a.dd(e)}}function st(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.defaultClientRoute)}}function dt(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.signup.limit)}}function gt(e,t){1&e&&(a.dc(0,"small",122),a.cd(1,"Signup won't be limited to a fixed number of users."),a.cc())}function ut(e,t){if(1&e&&(a.dc(0,"option",123),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.value)("disabled",e.disabled),a.Jb(1),a.ed(" ",e.label," ")}}function bt(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.user.videoQuota)}}function pt(e,t){if(1&e&&(a.dc(0,"option",123),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.value)("disabled",e.disabled),a.Jb(1),a.ed(" ",e.label," ")}}function ft(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.user.videoQuotaDaily)}}function ht(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.followings.instance.autoFollowIndex.indexUrl)}}function mt(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.admin.email)}}const vt=function(e){return{"disabled-checkbox-extra":e}};function Ct(e,t){if(1&e){const e=a.ec();a.dc(0,"div",16),a.dc(1,"div",17),a.dc(2,"div",18),a.hc(3,xe),a.cc(),a.dc(4,"div",32),a.nc(5,ke),a.Yb(6,"a",63),a.dc(7,"a",64),a.sc("click",(function(){return a.Rc(e),a.wc().gotoAnchor()})),a.cc(),a.kc(),a.cc(),a.cc(),a.dc(8,"div",19),a.bc(9,65),a.dc(10,"div",20),a.dc(11,"label",66),a.hc(12,Te),a.cc(),a.dc(13,"div",39),a.dc(14,"select",67),a.dc(15,"option",68),a.hc(16,Ae),a.cc(),a.ad(17,lt,2,2,"option",69),a.cc(),a.cc(),a.cc(),a.ac(),a.dc(18,"div",70),a.dc(19,"label",71),a.hc(20,Ie),a.cc(),a.dc(21,"div",39),a.dc(22,"select",72),a.dc(23,"option",73),a.hc(24,Se),a.cc(),a.dc(25,"option",74),a.hc(26,Re),a.cc(),a.dc(27,"option",75),a.hc(28,De),a.cc(),a.dc(29,"option",76),a.hc(30,ze),a.cc(),a.dc(31,"option",77),a.hc(32,Ee),a.cc(),a.cc(),a.cc(),a.ad(33,st,2,1,"div",14),a.cc(),a.cc(),a.cc(),a.dc(34,"div",10),a.dc(35,"div",17),a.dc(36,"div",18),a.hc(37,Le),a.cc(),a.dc(38,"div",32),a.nc(39,$e),a.Yb(40,"a",33),a.kc(),a.cc(),a.cc(),a.dc(41,"div",19),a.bc(42,78),a.dc(43,"div",20),a.dc(44,"my-peertube-checkbox",79),a.jc(45,Je),a.bc(46,80),a.dc(47,"span"),a.hc(48,Ne),a.cc(),a.ac(),a.bc(49,81),a.dc(50,"my-peertube-checkbox",82),a.jc(51,je),a.cc(),a.dc(52,"div",83),a.dc(53,"label",84),a.hc(54,Fe),a.cc(),a.Yb(55,"input",85),a.ad(56,dt,2,1,"div",14),a.ad(57,gt,2,0,"small",86),a.cc(),a.ac(),a.cc(),a.cc(),a.ac(),a.bc(58,87),a.dc(59,"div",20),a.dc(60,"label",88),a.hc(61,Ue),a.cc(),a.dc(62,"div",39),a.dc(63,"select",89),a.ad(64,ut,2,3,"option",90),a.cc(),a.cc(),a.ad(65,bt,2,1,"div",14),a.cc(),a.dc(66,"div",20),a.dc(67,"label",91),a.hc(68,Ve),a.cc(),a.dc(69,"div",39),a.dc(70,"select",92),a.ad(71,pt,2,3,"option",90),a.cc(),a.cc(),a.ad(72,ft,2,1,"div",14),a.cc(),a.ac(),a.cc(),a.cc(),a.dc(73,"div",10),a.dc(74,"div",17),a.dc(75,"div",18),a.hc(76,Be),a.cc(),a.cc(),a.dc(77,"div",19),a.bc(78,93),a.bc(79,94),a.dc(80,"div",95),a.dc(81,"my-peertube-checkbox",96),a.jc(82,Ge),a.cc(),a.cc(),a.dc(83,"div",97),a.dc(84,"my-peertube-checkbox",98),a.jc(85,Ye),a.cc(),a.cc(),a.ac(),a.ac(),a.bc(86,99),a.bc(87,94),a.bc(88,100),a.dc(89,"div",20),a.dc(90,"my-peertube-checkbox",101),a.jc(91,He),a.bc(92,80),a.dc(93,"span"),a.hc(94,Xe),a.cc(),a.ac(),a.cc(),a.cc(),a.ac(),a.ac(),a.ac(),a.cc(),a.cc(),a.dc(95,"div",10),a.dc(96,"div",17),a.dc(97,"div",18),a.hc(98,Qe),a.cc(),a.dc(99,"div",102),a.nc(100,Ke),a.Yb(101,"a",103),a.kc(),a.cc(),a.cc(),a.dc(102,"div",19),a.bc(103,104),a.bc(104,15),a.dc(105,"div",20),a.dc(106,"my-peertube-checkbox",105),a.jc(107,qe),a.cc(),a.cc(),a.dc(108,"div",20),a.dc(109,"my-peertube-checkbox",106),a.jc(110,We),a.cc(),a.cc(),a.ac(),a.ac(),a.bc(111,107),a.bc(112,15),a.bc(113,108),a.dc(114,"div",20),a.dc(115,"my-peertube-checkbox",109),a.jc(116,Ze),a.bc(117,80),a.dc(118,"span"),a.hc(119,et),a.cc(),a.ac(),a.cc(),a.cc(),a.ac(),a.bc(120,110),a.dc(121,"div",20),a.dc(122,"my-peertube-checkbox",111),a.jc(123,tt),a.bc(124,80),a.dc(125,"p"),a.hc(126,nt),a.cc(),a.dc(127,"span"),a.nc(128,ot),a.Yb(129,"a",112),a.kc(),a.cc(),a.ac(),a.bc(130,81),a.dc(131,"div",113),a.dc(132,"label",114),a.hc(133,ct),a.cc(),a.Yb(134,"input",115),a.ad(135,ht,2,1,"div",14),a.cc(),a.ac(),a.cc(),a.cc(),a.ac(),a.ac(),a.ac(),a.cc(),a.cc(),a.dc(136,"div",10),a.dc(137,"div",17),a.dc(138,"div",18),a.hc(139,it),a.cc(),a.cc(),a.dc(140,"div",19),a.dc(141,"div",116),a.dc(142,"label",117),a.hc(143,at),a.cc(),a.Yb(144,"input",118),a.ad(145,mt,2,1,"div",14),a.cc(),a.dc(146,"div",119),a.dc(147,"my-peertube-checkbox",120),a.jc(148,rt),a.cc(),a.cc(),a.cc(),a.cc()}if(2&e){const e=a.wc();a.Jb(17),a.Dc("ngForOf",e.availableThemes),a.Jb(16),a.Dc("ngIf",e.formErrors.instance.defaultClientRoute),a.Jb(17),a.Dc("ngClass",a.Hc(16,vt,!e.isSignupEnabled())),a.Jb(2),a.Dc("ngClass",a.Hc(18,vt,!e.isSignupEnabled())),a.Jb(3),a.Dc("ngClass",a.Hc(20,ye,e.formErrors["signup.limit"])),a.Jb(1),a.Dc("ngIf",e.formErrors.signup.limit),a.Jb(1),a.Dc("ngIf",-1===e.form.value.signup.limit),a.Jb(7),a.Dc("ngForOf",e.videoQuotaOptions),a.Jb(1),a.Dc("ngIf",e.formErrors.user.videoQuota),a.Jb(6),a.Dc("ngForOf",e.videoQuotaDailyOptions),a.Jb(1),a.Dc("ngIf",e.formErrors.user.videoQuotaDaily),a.Jb(59),a.Dc("ngClass",a.Hc(22,vt,!e.isAutoFollowIndexEnabled())),a.Jb(3),a.Dc("ngClass",a.Hc(24,ye,e.formErrors["followings.instance.autoFollowIndex.indexUrl"])),a.Jb(1),a.Dc("ngIf",e.formErrors.followings.instance.autoFollowIndex.indexUrl),a.Jb(9),a.Dc("ngClass",a.Hc(26,ye,e.formErrors["admin.email"])),a.Jb(1),a.Dc("ngIf",e.formErrors.admin.email)}}var Ot,Pt,_t,Mt,yt,wt,xt;function kt(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.services.twitter.username)}}function Tt(e,t){1&e&&(a.bc(0),a.hc(1,Mt),a.ac())}function At(e,t){1&e&&(a.bc(0),a.nc(1,yt),a.Yb(2,"br"),a.Yb(3,"br"),a.Yb(4,"br"),a.Yb(5,"a",128),a.kc(),a.ac())}function It(e,t){if(1&e&&(a.dc(0,"div",16),a.dc(1,"div",17),a.dc(2,"div",18),a.hc(3,Ot),a.cc(),a.dc(4,"div",102),a.hc(5,Pt),a.cc(),a.cc(),a.dc(6,"div",19),a.bc(7,124),a.bc(8,125),a.dc(9,"div",20),a.dc(10,"label",84),a.hc(11,_t),a.cc(),a.Yb(12,"input",126),a.ad(13,kt,2,1,"div",14),a.cc(),a.dc(14,"div",20),a.dc(15,"my-peertube-checkbox",127),a.ad(16,Tt,2,0,"ng-template",35),a.ad(17,At,6,0,"ng-template",36),a.cc(),a.cc(),a.ac(),a.ac(),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(12),a.Dc("ngClass",a.Hc(2,ye,e.formErrors["services.twitter.username"])),a.Jb(1),a.Dc("ngIf",e.formErrors.services.twitter.username)}}Ot="TWITTER",Pt="\u9078\u64C7\u6027\u3002\u5982\u679C\u6709\u7684\u8A71\uFF0C\u8ACB\u63D0\u4F9B\u60A8\u7AD9\u81FA\u7684 Twitter \u5E33\u865F\u4EE5\u6539\u5584\u9023\u7D50\u9810\u89BD\u3002",_t="\u60A8\u7684 Twitter \u4F7F\u7528\u8005\u540D\u7A31",Mt="\u7531 Twitter \u5217\u5165\u767D\u540D\u55AE\u7684\u5BE6\u9AD4",yt="\u5982\u679C\u60A8\u7684\u7AD9\u81FA\u88AB Twitter \u5217\u5728\u767D\u540D\u55AE\uFF0CTwitter \u7684\u63A8\u6587\u4E2D\u5C31\u6703\u5D4C\u5165 PeerTube \u7684\u5F71\u7247\u5206\u4EAB\u64AD\u653E\u5668\u3002" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#4\ufffd\ufffd/#4\ufffd]" + "\u5982\u679C\u7AD9\u81FA\u4E0D\u5728\u767D\u540D\u55AE\u5167\uFF0C\u6211\u5011\u6703\u4F7F\u7528\u5716\u7247\u9023\u7D50\u5361\u4F86\u91CD\u65B0\u5C0E\u5411\u5230\u60A8\u7684 PeerTube \u7AD9\u81FA\u3002" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#4\ufffd\ufffd/#4\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#4\ufffd\ufffd/#4\ufffd]" + "\u5C07\u6B64\u52FE\u9078\u6846\u6253\u52FE\uFF0C\u5132\u5B58\u8A2D\u5B9A\u4E26\u4F7F\u7528\u60A8\u7AD9\u81FA\u7684\u5F71\u7247 URL \u6E2C\u8A66 (https://example.com/videos/watch/blabla)\uFF0C\u5728 " + "\ufffd#5\ufffd" + "https://cards-dev.twitter.com/validator" + "\ufffd/#5\ufffd" + " \u6AA2\u8996\u60A8\u7684\u7AD9\u81FA\u662F\u5426\u5728\u767D\u540D\u55AE\u4E2D\u3002 ",yt=a.mc(yt),wt="\u8F49\u63DB\u7DE8\u78BC",xt="\u8655\u7406\u4E0A\u50B3\u7684\u5F71\u7247\uFF0C\u4EE5\u8B93\u5B83\u5011\u8B8A\u6210\u4EFB\u4F55\u88DD\u7F6E\u90FD\u53EF\u4EE5\u64AD\u653E\u7684\u4E32\u6D41\u5F62\u5F0F\u3002\u5118\u7BA1\u9019\u76F8\u7576\u8017\u8CBB\u8CC7\u6E90\uFF0C\u4F46\u9019\u662F PeerTube \u7684\u95DC\u9375\u7D44\u6210\u90E8\u5206\uFF0C\u6240\u4EE5\u8ACB\u5C0F\u5FC3\u8655\u7406\u3002";const St=["labelText","\u5141\u8A31\u984D\u5916\u7684\u526F\u6A94\u540D"];var Rt;Rt="\u5141\u8A31\u4F7F\u7528\u8005\u4E0A\u50B3 .mkv\u3001.mov\u3001.avi \u8207 .flv \u5F71\u7247\u3002";const Dt=["labelText","\u5141\u8A31\u4E0A\u50B3\u97F3\u8A0A\u6A94\u6848"];var zt;zt="\u5141\u8A31\u4F7F\u7528\u8005\u4E0A\u50B3\u97F3\u8A0A\u6A94\u6848\uFF0C\u5176\u5C07\u6703\u5728\u9810\u89BD\u6A94\u6848\u4E0A\u50B3\u6642\u5408\u4F75\u3002";const Et=["labelText","WebTorrent \u652F\u63F4\u5DF2\u555F\u7528"],Lt=["labelText","\u5DF2\u555F\u7528 HLS \u652F\u63F4"];var $t,Jt,Nt,jt,Ft,Ut,Vt,Bt,Gt,Yt,Ht,Xt,Qt,Kt,qt,Wt;function Zt(e,t){1&e&&(a.bc(0),a.hc(1,Yt),a.ac())}function en(e,t){1&e&&(a.bc(0),a.hc(1,Ht),a.ac())}function tn(e,t){1&e&&(a.bc(0),a.nc(1,Xt),a.Yb(2,"strong"),a.Yb(3,"p"),a.Yb(4,"br"),a.Yb(5,"strong"),a.kc(),a.ac())}function nn(e,t){1&e&&(a.bc(0),a.nc(1,Qt),a.Yb(2,"strong"),a.Yb(3,"p"),a.dc(4,"ul"),a.Yb(5,"li"),a.Yb(6,"li"),a.Yb(7,"li"),a.cc(),a.Yb(8,"p"),a.kc(),a.ac())}function on(e,t){if(1&e&&(a.dc(0,"option",121),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.value),a.Jb(1),a.ed(" ",e.label," ")}}function cn(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.transcoding.threads)}}function an(e,t){if(1&e&&a.Yb(0,"div",158),2&e){const e=a.wc(2).$implicit;a.Dc("innerHTML",e.description,a.Sc)}}function rn(e,t){1&e&&a.ad(0,an,1,1,"ng-template",36)}function ln(e,t){if(1&e&&(a.dc(0,"div",20),a.dc(1,"my-peertube-checkbox",156),a.ad(2,rn,1,0,void 0,157),a.cc(),a.cc()),2&e){const e=t.$implicit,n=a.wc(2);a.Jb(1),a.Ec("labelText",e.label),a.Dc("inputName",n.getResolutionKey(e.id))("formControlName",e.id),a.Jb(1),a.Dc("ngIf",e.description)}}function sn(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.cache.previews.size)}}function dn(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.cache.captions.size)}}function gn(e,t){1&e&&(a.bc(0),a.nc(1,Kt),a.Yb(2,"br"),a.Yb(3,"pre"),a.kc(),a.ac())}function un(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.customizations.javascript)}}function bn(e,t){1&e&&(a.bc(0),a.nc(1,qt),a.Yb(2,"br"),a.Yb(3,"br"),a.Yb(4,"pre"),a.Yb(5,"em"),a.Yb(6,"br"),a.Yb(7,"br"),a.Yb(8,"pre"),a.kc(),a.ac()),2&e&&(a.Jb(8),a.lc("{")("}")("{")("}"),a.ic(1))}function pn(e,t){if(1&e&&(a.dc(0,"div",62),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.dd(e.formErrors.instance.customizations.css)}}function fn(e,t){if(1&e&&(a.dc(0,"div",16),a.dc(1,"div",17),a.dc(2,"div",18),a.hc(3,wt),a.cc(),a.dc(4,"div",102),a.hc(5,xt),a.cc(),a.cc(),a.dc(6,"div",19),a.bc(7,129),a.dc(8,"div",20),a.dc(9,"my-peertube-checkbox",130),a.ad(10,Zt,2,0,"ng-template",35),a.ad(11,en,2,0,"ng-template",36),a.bc(12,81),a.dc(13,"div",131),a.dc(14,"my-peertube-checkbox",132),a.jc(15,St),a.bc(16,80),a.dc(17,"span"),a.hc(18,Rt),a.cc(),a.ac(),a.cc(),a.cc(),a.dc(19,"div",131),a.dc(20,"my-peertube-checkbox",133),a.jc(21,Dt),a.bc(22,80),a.dc(23,"span"),a.hc(24,zt),a.cc(),a.ac(),a.cc(),a.cc(),a.bc(25,134),a.dc(26,"div",131),a.dc(27,"my-peertube-checkbox",135),a.jc(28,Et),a.ad(29,tn,6,0,"ng-template",36),a.cc(),a.cc(),a.ac(),a.bc(30,136),a.dc(31,"div",131),a.dc(32,"my-peertube-checkbox",137),a.jc(33,Lt),a.ad(34,nn,9,0,"ng-template",36),a.cc(),a.cc(),a.ac(),a.ac(),a.cc(),a.cc(),a.dc(35,"div",131),a.dc(36,"label",138),a.hc(37,$t),a.cc(),a.dc(38,"div",39),a.dc(39,"select",139),a.ad(40,on,2,2,"option",69),a.cc(),a.cc(),a.ad(41,cn,2,1,"div",14),a.cc(),a.dc(42,"div",131),a.dc(43,"label",138),a.hc(44,Jt),a.cc(),a.dc(45,"div",140),a.bc(46,141),a.ad(47,ln,3,4,"div",142),a.ac(),a.cc(),a.cc(),a.ac(),a.cc(),a.cc(),a.dc(48,"div",10),a.dc(49,"div",17),a.dc(50,"div",18),a.hc(51,Nt),a.cc(),a.dc(52,"div",102),a.hc(53,jt),a.cc(),a.cc(),a.dc(54,"div",19),a.bc(55,143),a.dc(56,"div",144),a.dc(57,"label",145),a.hc(58,Ft),a.cc(),a.Yb(59,"input",146),a.ad(60,sn,2,1,"div",14),a.cc(),a.dc(61,"div",147),a.dc(62,"label",148),a.hc(63,Ut),a.cc(),a.Yb(64,"input",149),a.ad(65,dn,2,1,"div",14),a.cc(),a.ac(),a.cc(),a.cc(),a.dc(66,"div",10),a.dc(67,"div",17),a.Yb(68,"div",150),a.dc(69,"div",18),a.hc(70,Vt),a.cc(),a.dc(71,"div",102),a.hc(72,Bt),a.cc(),a.cc(),a.dc(73,"div",19),a.bc(74,15),a.bc(75,151),a.dc(76,"div",20),a.dc(77,"label",152),a.hc(78,Gt),a.cc(),a.dc(79,"my-help"),a.ad(80,gn,4,0,"ng-template",38),a.cc(),a.Yb(81,"textarea",153),a.ad(82,un,2,1,"div",14),a.cc(),a.dc(83,"div",20),a.dc(84,"label",154),a.cd(85,"CSS"),a.cc(),a.dc(86,"my-help"),a.ad(87,bn,9,4,"ng-template",38),a.cc(),a.Yb(88,"textarea",155),a.ad(89,pn,2,1,"div",14),a.cc(),a.ac(),a.ac(),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(13),a.Dc("ngClass",a.Hc(17,vt,!e.isTranscodingEnabled())),a.Jb(6),a.Dc("ngClass",a.Hc(19,vt,!e.isTranscodingEnabled())),a.Jb(7),a.Dc("ngClass",a.Hc(21,vt,!e.isTranscodingEnabled())),a.Jb(5),a.Dc("ngClass",a.Hc(23,vt,!e.isTranscodingEnabled())),a.Jb(4),a.Dc("ngClass",a.Hc(25,vt,!e.isTranscodingEnabled())),a.Jb(5),a.Dc("ngForOf",e.transcodingThreadOptions),a.Jb(1),a.Dc("ngIf",e.formErrors.transcoding.threads),a.Jb(1),a.Dc("ngClass",a.Hc(27,vt,!e.isTranscodingEnabled())),a.Jb(5),a.Dc("ngForOf",e.resolutions),a.Jb(12),a.Dc("ngClass",a.Hc(29,ye,e.formErrors["cache.previews.size"])),a.Jb(1),a.Dc("ngIf",e.formErrors.cache.previews.size),a.Jb(4),a.Dc("ngClass",a.Hc(31,ye,e.formErrors["cache.captions.size"])),a.Jb(1),a.Dc("ngIf",e.formErrors.cache.captions.size),a.Jb(16),a.Dc("ngClass",a.Hc(33,ye,e.formErrors["instance.customizations.javascript"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.customizations.javascript),a.Jb(6),a.Dc("ngClass",a.Hc(35,ye,e.formErrors["instance.customizations.css"])),a.Jb(1),a.Dc("ngIf",e.formErrors.instance.customizations.css)}}function hn(e,t){1&e&&(a.dc(0,"span",62),a.hc(1,Wt),a.cc())}$t="\u8F49\u63DB\u7DE8\u78BC\u57F7\u884C\u7DD2",Jt="\u8981\u751F\u6210\u7684\u89E3\u6790\u5EA6",Nt="\u5FEB\u53D6",jt="\u67D0\u4E9B\u6A94\u6848\u672A\u806F\u64AD\uFF0C\u4E26\u6703\u5728\u9700\u8981\u6642\u64F7\u53D6\u3002\u5B9A\u7FA9\u5B83\u5011\u7684\u5FEB\u53D6\u7B56\u7565\u3002",Ft="\u8981\u4FDD\u7559\u5728\u5FEB\u53D6\u4E2D\u7684\u9810\u89BD\u6578\u91CF",Ut="\u8981\u4FDD\u7559\u5728\u5FEB\u53D6\u4E2D\u7684\u5F71\u7247\u5B57\u5E55\u6578\u91CF",Vt="\u81EA\u8A02",Bt="\u53EA\u662F\u8981\u5C11\u91CF\u4FEE\u6539\u60A8\u7684 PeerTube \u7AD9\u81FA\u7684\u8A71\uFF0C\u5EFA\u7ACB\u5916\u639B\u7A0B\u5F0F\u6216\u4F48\u666F\u4E3B\u984C\u6709\u9EDE\u592A\u904E\u982D\u4E86\u3002",Gt="JavaScript",Yt="\u8F49\u63DB\u7DE8\u78BC\u5DF2\u555F\u7528",Ht="\u82E5\u60A8\u505C\u7528\u8F49\u63DB\u7DE8\u78BC\uFF0C\u5F9E\u60A8\u7684\u4F7F\u7528\u8005\u5011\u800C\u4F86\u7684\u8A31\u591A\u5F71\u7247\u5C07\u6703\u7121\u6CD5\u904B\u4F5C\uFF01",Xt="" + "[\ufffd#2\ufffd|\ufffd#5\ufffd]" + "\u5BE6\u9A57\u6027\uFF0C\u6211\u5011\u5EFA\u8B70\u60A8\u66AB\u6642\u4E0D\u8981\u505C\u7528 webtorrent \u652F\u63F4" + "[\ufffd/#2\ufffd|\ufffd/#5\ufffd]" + " " + "\ufffd#3\ufffd" + "\u5982\u679C\u60A8\u4E5F\u555F\u7528\u4E86 HLS \u652F\u63F4\uFF0C\u5B83\u5C07\u6703\u8B93\u5F71\u7247\u7684\u5132\u5B58\u7A7A\u9593\u9700\u6C42\u4E58\u4EE5 2" + "\ufffd/#3\ufffd" + " " + "\ufffd#4\ufffd\ufffd/#4\ufffd" + " " + "[\ufffd#2\ufffd|\ufffd#5\ufffd]" + "\u82E5\u505C\u7528\uFF0C\u5C07\u6703\u7834\u58DE\u8207\u5176\u4ED6 PeerTube \u7AD9\u81FA\u7684\u806F\u76DF < 2.1" + "[\ufffd/#2\ufffd|\ufffd/#5\ufffd]" + " ",Xt=a.mc(Xt),Qt="" + "\ufffd#2\ufffd" + "\u4F9D\u8CF4\u65BC ffmpeg >= 4.1" + "\ufffd/#2\ufffd" + " " + "[\ufffd#3\ufffd|\ufffd#8\ufffd]" + "\u751F\u6210 HLS \u64AD\u653E\u6E05\u55AE\u8207\u788E\u7247\u5316\u7684 MP4 \u6A94\u6848\u4EE5\u53D6\u5F97\u6BD4\u76EE\u524D\u9810\u8A2D\u7684\u64AD\u653E\u5668\u66F4\u597D\u7684\u7D50\u679C\uFF1A" + "[\ufffd/#3\ufffd|\ufffd/#8\ufffd]" + " " + "\ufffd#4\ufffd" + " " + "[\ufffd#5\ufffd|\ufffd#6\ufffd|\ufffd#7\ufffd]" + "\u89E3\u6790\u5EA6\u8B8A\u66F4\u6703\u66F4\u52A0\u5E73\u9806" + "[\ufffd/#5\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd]" + " " + "[\ufffd#5\ufffd|\ufffd#6\ufffd|\ufffd#7\ufffd]" + "\u64AD\u653E\u6703\u66F4\u52A0\u5FEB\u901F\uFF0C\u7279\u5225\u662F\u9577\u5F71\u7247" + "[\ufffd/#5\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd]" + " " + "[\ufffd#5\ufffd|\ufffd#6\ufffd|\ufffd#7\ufffd]" + "\u64AD\u653E\u66F4\u7A69\u5B9A\uFF08\u8F03\u5C11\u81ED\u87F2\uFF0F\u7121\u9650\u8F09\u5165\uFF09" + "[\ufffd/#5\ufffd|\ufffd/#6\ufffd|\ufffd/#7\ufffd]" + " " + "\ufffd/#4\ufffd" + " " + "[\ufffd#3\ufffd|\ufffd#8\ufffd]" + "\u82E5\u60A8\u4E5F\u555F\u7528\u4E86 WebTorrent \u652F\u63F4\uFF0C\u5176\u5C07\u6703\u8B93\u5132\u5B58\u7A7A\u9593\u7684\u9700\u6C42\u91CF\u4E58\u4EE5 2" + "[\ufffd/#3\ufffd|\ufffd/#8\ufffd]" + " ",Qt=a.mc(Qt),Kt="\u76F4\u63A5\u7DE8\u5BEB JavaScript \u7A0B\u5F0F\u78BC\u3002" + "\ufffd#2\ufffd\ufffd/#2\ufffd" + "\u7BC4\u4F8B\uFF1A" + "\ufffd#3\ufffd" + "console.log('\u6211\u7684\u7AD9\u81FA\u8D85\u68D2\u7684');" + "\ufffd/#3\ufffd" + " ",qt="\u76F4\u63A5\u7DE8\u5BEB CSS \u7A0B\u5F0F\u78BC\u3002\u7BC4\u4F8B\uFF1A" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#6\ufffd\ufffd/#6\ufffd|\ufffd#7\ufffd\ufffd/#7\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#6\ufffd\ufffd/#6\ufffd|\ufffd#7\ufffd\ufffd/#7\ufffd]" + " " + "[\ufffd#4\ufffd|\ufffd#8\ufffd]" + " #custom-css " + "[\ufffd0\ufffd|\ufffd2\ufffd]" + " color: red; " + "[\ufffd1\ufffd|\ufffd3\ufffd]" + " " + "[\ufffd/#4\ufffd|\ufffd/#8\ufffd]" + " \u4EE5 " + "\ufffd#5\ufffd" + "#custom-css" + "\ufffd/#5\ufffd" + " \u7576\u524D\u7DB4\u4F86\u8986\u5BEB\u6A23\u5F0F\u3002\u7BC4\u4F8B\uFF1A" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#6\ufffd\ufffd/#6\ufffd|\ufffd#7\ufffd\ufffd/#7\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#6\ufffd\ufffd/#6\ufffd|\ufffd#7\ufffd\ufffd/#7\ufffd]" + " " + "[\ufffd#4\ufffd|\ufffd#8\ufffd]" + " #custom-css .logged-in-email " + "[\ufffd0\ufffd|\ufffd2\ufffd]" + " color: red; " + "[\ufffd1\ufffd|\ufffd3\ufffd]" + " " + "[\ufffd/#4\ufffd|\ufffd/#8\ufffd]" + " ",qt=a.mc(qt),Wt="\u8A2D\u5B9A\u4F3C\u4E4E\u7121\u6548\u3002\u8ACB\u5728\u4E0D\u540C\u7684\u5206\u9801\u4E2D\u641C\u5C0B\u6F5B\u5728\u7684\u932F\u8AA4\u3002";let mn=(()=>{class e extends i.b{constructor(e,t,n,o,c,i,a,r){super(),this.viewportScroller=e,this.formValidatorService=t,this.customConfigValidatorsService=n,this.userValidatorsService=o,this.notifier=c,this.configService=i,this.serverService=a,this.i18n=r,this.initDone=!1,this.resolutions=[],this.transcodingThreadOptions=[],this.languageItems=[],this.categoryItems=[],this.resolutions=[{id:"0p",label:this.i18n("Audio-only"),description:this.i18n("A <code>.mp4</code> that keeps the original audio track, with no video")},{id:"240p",label:this.i18n("240p")},{id:"360p",label:this.i18n("360p")},{id:"480p",label:this.i18n("480p")},{id:"720p",label:this.i18n("720p")},{id:"1080p",label:this.i18n("1080p")},{id:"2160p",label:this.i18n("2160p")}],this.transcodingThreadOptions=[{value:0,label:this.i18n("Auto (via ffmpeg)")},{value:1,label:"1"},{value:2,label:"2"},{value:4,label:"4"},{value:8,label:"8"}]}get videoQuotaOptions(){return this.configService.videoQuotaOptions}get videoQuotaDailyOptions(){return this.configService.videoQuotaDailyOptions}get availableThemes(){return this.serverConfig.theme.registered.map(e=>e.name)}getResolutionKey(e){return"transcoding.resolutions."+e}ngOnInit(){this.serverConfig=this.serverService.getTmpConfig(),this.serverService.getConfig().subscribe(e=>this.serverConfig=e);const e={instance:{name:this.customConfigValidatorsService.INSTANCE_NAME,shortDescription:this.customConfigValidatorsService.INSTANCE_SHORT_DESCRIPTION,description:null,isNSFW:!1,defaultNSFWPolicy:null,terms:null,codeOfConduct:null,creationReason:null,moderationInformation:null,administrator:null,maintenanceLifetime:null,businessModel:null,hardwareInformation:null,categories:null,languages:null,defaultClientRoute:null,customizations:{javascript:null,css:null}},theme:{default:null},services:{twitter:{username:this.customConfigValidatorsService.SERVICES_TWITTER_USERNAME,whitelisted:null}},cache:{previews:{size:this.customConfigValidatorsService.CACHE_PREVIEWS_SIZE},captions:{size:this.customConfigValidatorsService.CACHE_CAPTIONS_SIZE}},signup:{enabled:null,limit:this.customConfigValidatorsService.SIGNUP_LIMIT,requiresEmailVerification:null},import:{videos:{http:{enabled:null},torrent:{enabled:null}}},admin:{email:this.customConfigValidatorsService.ADMIN_EMAIL},contactForm:{enabled:null},user:{videoQuota:this.userValidatorsService.USER_VIDEO_QUOTA,videoQuotaDaily:this.userValidatorsService.USER_VIDEO_QUOTA_DAILY},transcoding:{enabled:null,threads:this.customConfigValidatorsService.TRANSCODING_THREADS,allowAdditionalExtensions:null,allowAudioFiles:null,resolutions:{},hls:{enabled:null},webtorrent:{enabled:null}},autoBlacklist:{videos:{ofUsers:{enabled:null}}},followers:{instance:{enabled:null,manualApproval:null}},followings:{instance:{autoFollowBack:{enabled:null},autoFollowIndex:{enabled:null,indexUrl:this.customConfigValidatorsService.INDEX_URL}}}},t={transcoding:{resolutions:{}}};for(const n of this.resolutions)t.transcoding.resolutions[n.id]="false",e.transcoding.resolutions[n.id]=null;this.buildForm(e),this.loadForm(),this.checkTranscodingFields()}ngAfterViewChecked(){this.initDone||(this.initDone=!0,this.gotoAnchor())}isTranscodingEnabled(){return!0===this.form.value.transcoding.enabled}isSignupEnabled(){return!0===this.form.value.signup.enabled}isAutoFollowIndexEnabled(){return!0===this.form.value.followings.instance.autoFollowIndex.enabled}formValidated(){return e=this,void 0,n=function*(){this.configService.updateCustomConfig(this.form.getRawValue()).subscribe(e=>{this.customConfig=e,this.serverService.resetConfig(),this.updateForm(),this.notifier.success(this.i18n("Configuration updated."))},e=>this.notifier.error(e.message))},new((t=void 0)||(t=Promise))((function(o,c){function i(e){try{r(n.next(e))}catch(t){c(t)}}function a(e){try{r(n.throw(e))}catch(t){c(t)}}function r(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,a)}r((n=n.apply(e,[])).next())}));var e,t,n}getSelectedLanguageLabel(){return this.i18n("{{'{0} languages selected")}getDefaultLanguageLabel(){return this.i18n("No language")}getSelectedCategoryLabel(){return this.i18n("{{'{0} categories selected")}getDefaultCategoryLabel(){return this.i18n("No category")}gotoAnchor(){const e={customizations:"advanced-configuration"},t=window.location.hash.replace("#","");t&&Object.keys(e).includes(t)&&(this.nav.select(e[t]),setTimeout(()=>this.viewportScroller.scrollToAnchor(t),100))}updateForm(){this.form.patchValue(this.customConfig)}loadForm(){Object(b.a)([this.configService.getCustomConfig(),this.serverService.getVideoLanguages(),this.serverService.getVideoCategories()]).subscribe(([e,t,n])=>{this.customConfig=e,this.languageItems=t.map(e=>({label:e.label,value:e.id})),this.categoryItems=n.map(e=>({label:e.label,value:e.id})),this.updateForm(),this.forceCheck()},e=>this.notifier.error(e.message))}checkTranscodingFields(){const e=this.form.get("transcoding.hls.enabled"),t=this.form.get("transcoding.webtorrent.enabled");t.valueChanges.subscribe(t=>{!1!==t||e.disabled||e.disable(),!0!==t||e.enabled||e.enable()}),e.valueChanges.subscribe(e=>{!1!==e||t.disabled||t.disable(),!0!==e||t.enabled||t.enable()})}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(p.K),a.Xb(u.a),a.Xb(i.a),a.Xb(i.k),a.Xb(g.f),a.Xb(s),a.Xb(d.a),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-edit-custom-config"]],viewQuery:function(e,t){var n;1&e&&a.gd(M,!0),2&e&&a.Oc(n=a.tc())&&(t.nav=n.first)},features:[a.Gb],decls:26,vars:4,consts:[["role","form",3,"formGroup"],["ngbNav","",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem","instance-information"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","basic-configuration"],["ngbNavItem","services"],["ngbNavItem","advanced-configuration"],[3,"ngbNavOutlet"],[1,"form-row","mt-4"],[1,"col-md-7","col-xl-5"],[1,"col-md-5","col-xl-5"],["type","submit",3,"disabled","click",6,"value"],["class","form-error",4,"ngIf"],["formGroupName","instance"],[1,"form-row","mt-5"],[1,"form-group","col-12","col-lg-4","col-xl-3"],[1,"inner-form-title"],[1,"form-group","form-group-right","col-12","col-lg-8","col-xl-9"],[1,"form-group"],["for","instanceName"],["type","text","id","instanceName","formControlName","name",1,"form-control",3,"ngClass"],["for","instanceShortDescription"],["id","instanceShortDescription","formControlName","shortDescription",1,"form-control","small",3,"ngClass"],["for","instanceDescription"],["helpType","markdownText"],["name","instanceDescription","formControlName","description","textareaMaxWidth","500px",3,"classes"],["for","instanceCategories"],["inputId","instanceCategories","formControlName","categories",3,"options","showToggleAll","defaultLabel","selectedItemsLabel",6,"emptyFilterMessage"],["for","instanceLanguages"],["inputId","instanceLanguages","formControlName","languages",3,"options","showToggleAll","defaultLabel","selectedItemsLabel",6,"emptyFilterMessage"],[1,"inner-for-description"],["routerLink","/admin/users"],["inputName","instanceIsNSFW","formControlName","isNSFW"],["ptTemplate","label"],["ptTemplate","help"],["for","instanceDefaultNSFWPolicy"],["ptTemplate","customHtml"],[1,"peertube-select-container"],["id","instanceDefaultNSFWPolicy","formControlName","defaultNSFWPolicy",1,"form-control"],["value","undefined","disabled",""],["value","do_not_list"],["value","blur"],["value","display"],["for","instanceTerms"],["name","instanceTerms","formControlName","terms","textareaMaxWidth","500px",3,"ngClass"],["for","instanceCodeOfConduct"],["name","instanceCodeOfConduct","formControlName","codeOfConduct","textareaMaxWidth","500px",3,"ngClass"],["for","instanceModerationInformation"],[1,"label-small-info"],["name","instanceModerationInformation","formControlName","moderationInformation","textareaMaxWidth","500px",3,"ngClass"],["for","instanceAdministrator"],["name","instanceAdministrator","formControlName","administrator","textareaMaxWidth","500px","textareaHeight","75px",3,"classes"],["for","instanceCreationReason"],["id","instanceCreationReason","formControlName","creationReason",1,"form-control",3,"ngClass"],["for","instanceMaintenanceLifetime"],["id","instanceMaintenanceLifetime","formControlName","maintenanceLifetime",1,"form-control","small",3,"ngClass"],["for","instanceBusinessModel"],["id","instanceBusinessModel","formControlName","businessModel",1,"form-control","small",3,"ngClass"],["for","instanceHardwareInformation"],["name","instanceHardwareInformation","formControlName","hardwareInformation","textareaMaxWidth","500px","textareaHeight","75px",3,"classes"],[1,"form-error"],["routerLink","/admin/plugins"],["routerLink","/admin/config/edit-custom","fragment","customizations",3,"click"],["formGroupName","theme"],["for","themeDefault"],["formControlName","default","id","themeDefault",1,"form-control"],["value","default"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","instance",1,"form-group"],["for","instanceDefaultClientRoute"],["id","instanceDefaultClientRoute","formControlName","defaultClientRoute",1,"form-control"],["value","/videos/overview"],["value","/videos/trending"],["value","/videos/most-liked"],["value","/videos/recently-added"],["value","/videos/local"],["formGroupName","signup"],["inputName","signupEnabled","formControlName","enabled",6,"labelText"],["ngProjectAs","description",5,["description"]],["ngProjectAs","extra",5,["extra"]],["inputName","signupRequiresEmailVerification","formControlName","requiresEmailVerification",3,"ngClass",6,"labelText"],[1,"mt-3",3,"ngClass"],["for","signupLimit"],["type","number","min","-1","id","signupLimit","formControlName","limit",1,"form-control",3,"ngClass"],["class","text-muted",4,"ngIf"],["formGroupName","user"],["for","userVideoQuota"],["id","userVideoQuota","formControlName","videoQuota",1,"form-control"],[3,"value","disabled",4,"ngFor","ngForOf"],["for","userVideoQuotaDaily"],["id","userVideoQuotaDaily","formControlName","videoQuotaDaily",1,"form-control"],["formGroupName","import"],["formGroupName","videos"],["formGroupName","http",1,"form-group"],["inputName","importVideosHttpEnabled","formControlName","enabled",6,"labelText"],["formGroupName","torrent",1,"form-group"],["inputName","importVideosTorrentEnabled","formControlName","enabled",6,"labelText"],["formGroupName","autoBlacklist"],["formGroupName","ofUsers"],["inputName","autoBlacklistVideosOfUsersEnabled","formControlName","enabled",6,"labelText"],[1,"inner-form-description"],["routerLink","/admin/follows"],["formGroupName","followers"],["inputName","followersInstanceEnabled","formControlName","enabled",6,"labelText"],["inputName","followersInstanceManualApproval","formControlName","manualApproval",6,"labelText"],["formGroupName","followings"],["formGroupName","autoFollowBack"],["inputName","followingsInstanceAutoFollowBackEnabled","formControlName","enabled",6,"labelText"],["formGroupName","autoFollowIndex"],["inputName","followingsInstanceAutoFollowIndexEnabled","formControlName","enabled",6,"labelText"],["href","https://framagit.org/framasoft/peertube/instances-peertube#peertube-auto-follow"],[3,"ngClass"],["for","followingsInstanceAutoFollowIndexUrl"],["type","text","id","followingsInstanceAutoFollowIndexUrl","formControlName","indexUrl",1,"form-control",3,"ngClass"],["formGroupName","admin",1,"form-group"],["for","adminEmail"],["type","text","id","adminEmail","formControlName","email",1,"form-control",3,"ngClass"],["formGroupName","contactForm",1,"form-group"],["inputName","enableContactForm","formControlName","enabled",6,"labelText"],[3,"value"],[1,"text-muted"],[3,"value","disabled"],["formGroupName","services"],["formGroupName","twitter"],["type","text","id","servicesTwitterUsername","formControlName","username",1,"form-control",3,"ngClass"],["inputName","servicesTwitterWhitelisted","formControlName","whitelisted"],["target","_blank","rel","noopener noreferrer","href","https://cards-dev.twitter.com/validator"],["formGroupName","transcoding"],["inputName","transcodingEnabled","formControlName","enabled"],[1,"form-group",3,"ngClass"],["inputName","transcodingAllowAdditionalExtensions","formControlName","allowAdditionalExtensions",6,"labelText"],["inputName","transcodingAllowAudioFiles","formControlName","allowAudioFiles",6,"labelText"],["formGroupName","webtorrent"],["inputName","transcodingWebTorrentEnabled","formControlName","enabled",6,"labelText"],["formGroupName","hls"],["inputName","transcodingHlsEnabled","formControlName","enabled",6,"labelText"],["for","transcodingThreads"],["id","transcodingThreads","formControlName","threads",1,"form-control"],[1,"ml-2","mt-2","d-flex","flex-column"],["formGroupName","resolutions"],["class","form-group",4,"ngFor","ngForOf"],["formGroupName","cache"],["formGroupName","previews",1,"form-group"],["for","cachePreviewsSize"],["type","number","min","0","id","cachePreviewsSize","formControlName","size",1,"form-control",3,"ngClass"],["formGroupName","captions",1,"form-group"],["for","cacheCaptionsSize"],["type","number","min","0","id","cacheCaptionsSize","formControlName","size",1,"form-control",3,"ngClass"],["id","customizations",1,"anchor"],["formGroupName","customizations"],["for","customizationJavascript"],["id","customizationJavascript","formControlName","javascript",1,"form-control",3,"ngClass"],["for","customizationCSS"],["id","customizationCSS","formControlName","css",1,"form-control",3,"ngClass"],[3,"inputName","formControlName","labelText"],[4,"ngIf"],[3,"innerHTML"]],template:function(e,t){if(1&e&&(a.dc(0,"form",0),a.dc(1,"div",1,2),a.bc(3,3),a.dc(4,"a",4),a.hc(5,y),a.cc(),a.ad(6,we,127,53,"ng-template",5),a.ac(),a.bc(7,6),a.dc(8,"a",4),a.hc(9,w),a.cc(),a.ad(10,Ct,149,28,"ng-template",5),a.ac(),a.bc(11,7),a.dc(12,"a",4),a.hc(13,x),a.cc(),a.ad(14,It,18,4,"ng-template",5),a.ac(),a.bc(15,8),a.dc(16,"a",4),a.hc(17,k),a.cc(),a.ad(18,fn,90,37,"ng-template",5),a.ac(),a.cc(),a.Yb(19,"div",9),a.dc(20,"div",10),a.Yb(21,"div",11),a.dc(22,"div",12),a.dc(23,"input",13),a.jc(24,T),a.sc("click",(function(){return t.formValidated()})),a.cc(),a.ad(25,hn,2,0,"span",14),a.cc(),a.cc(),a.cc()),2&e){const e=a.Pc(2);a.Dc("formGroup",t.form),a.Jb(19),a.Dc("ngbNavOutlet",e),a.Jb(4),a.Dc("disabled",!t.form.valid),a.Jb(2),a.Dc("ngIf",!t.form.valid)}},directives:[f.J,f.u,f.m,h.n,h.p,h.q,h.o,h.s,p.u,f.n,f.d,f.t,f.k,p.r,m.a,v.a,C.a,O.k,P.a,_.a,f.F,f.y,f.I,p.t,f.z],styles:['label[_ngcontent-%COMP%]{font-weight:400;font-size:100%}form[_ngcontent-%COMP%]{padding-bottom:1.5rem}input[type=text][_ngcontent-%COMP%]{display:inline-block;height:30px;width:340px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;display:block}input[type=text][_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}input[type=text][_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}input[type=text][_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}input[type=text][_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:340px){input[type=text][_ngcontent-%COMP%]{width:100%}}input[type=number][_ngcontent-%COMP%]{display:inline-block;height:30px;width:315px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;display:block}input[type=number][_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}input[type=number][_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}input[type=number][_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}input[type=number][_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:315px){input[type=number][_ngcontent-%COMP%]{width:100%}}input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute}input[type=checkbox][_ngcontent-%COMP%]:focus + span[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest)}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:relative;width:18px;min-width:18px;height:18px;border:1px solid #c6c6c6;border-radius:3px;vertical-align:middle;cursor:pointer}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]:after{content:"";position:absolute;top:1px;left:5px;width:5px;height:12px;opacity:0;transform:rotate(45deg) scale(0);border-right:2px solid #fff;border-bottom:2px solid #fff}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{border-color:transparent;background:var(--mainColor);-webkit-animation:jelly .6s ease;animation:jelly .6s ease}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:after{opacity:1;transform:rotate(45deg) scale(1)}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{font-size:15px;font-weight:400;margin-left:5px;cursor:pointer;display:inline}input[type=checkbox][disabled][_ngcontent-%COMP%] + span[_ngcontent-%COMP%], input[type=checkbox][disabled][_ngcontent-%COMP%] + span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{opacity:.5;cursor:default}.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:340px;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;font-size:15px}.peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}@media screen and (max-width:340px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:15px;content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid transparent;border-top-color:#000;margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 35px 0 12px;width:calc(100% + 2px);position:relative;left:1px;border:1px solid #c6c6c6;background:transparent none;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:30px;text-overflow:ellipsis;color:var(--mainForegroundColor)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}input[type=submit][_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer;display:flex;margin-left:auto}input[type=submit].focus-visible[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}input[type=submit][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}input[type=submit].disabled[_ngcontent-%COMP%], input[type=submit][disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:#fff}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:#fff}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:#fff}input[type=submit][_ngcontent-%COMP%] + .form-error[_ngcontent-%COMP%]{display:inline;margin-left:5px}.inner-form-title[_ngcontent-%COMP%]{text-transform:uppercase;color:var(--mainColor);font-weight:700;font-size:110%;margin-bottom:10px}textarea[_ngcontent-%COMP%]{display:inline-block;height:30px;width:500px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;color:var(--textareaForegroundColor);background-color:var(--textareaBackgroundColor);height:150px;padding:5px 15px;font-size:15px;max-width:100%;display:block}textarea[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:500px){textarea[_ngcontent-%COMP%]{width:100%}}textarea.small[_ngcontent-%COMP%]{height:75px}.label-small-info[_ngcontent-%COMP%]{font-style:italic;margin-bottom:10px}.disabled-checkbox-extra[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.form-group-right[_ngcontent-%COMP%]{padding-top:2px}ngb-tabset[_ngcontent-%COMP%]:not(.previews)     .nav-link{font-size:105%}']}),e})(),vn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Rb({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&a.Yb(0,"router-outlet")},directives:[O.m],encapsulation:2}),e})();var Cn=n("MpoC");const On=[{path:"config",component:vn,canActivate:[g.l],data:{userRight:Cn.d.MANAGE_CONFIGURATION},children:[{path:"",redirectTo:"edit-custom",pathMatch:"full"},{path:"edit-custom",component:mn,data:{meta:{title:"Edit custom configuration"}}}]}];var Pn=n("rEr+"),_n=n("Phsq"),Mn=n("voWr"),yn=n("Vurf"),wn=n("VCEm");function xn(e,t){if(1&e&&(a.dc(0,"a",5),a.cd(1),a.cc()),2&e){const e=t.item;a.Dc("routerLink",e.routerLink),a.Jb(1),a.dd(e.label)}}let kn=(()=>{class e{constructor(e,t){this.auth=e,this.i18n=t,this.items=[]}ngOnInit(){this.hasUsersRight()&&this.items.push({label:this.i18n("Users"),routerLink:"/admin/users"}),this.hasServerFollowRight()&&this.items.push({label:this.i18n("Follows & redundancies"),routerLink:"/admin/follows"}),(this.hasVideoAbusesRight()||this.hasVideoBlacklistRight())&&this.items.push({label:this.i18n("Moderation"),routerLink:"/admin/moderation"}),this.hasConfigRight()&&this.items.push({label:this.i18n("Configuration"),routerLink:"/admin/config"}),this.hasPluginsRight()&&this.items.push({label:this.i18n("Plugins/Themes"),routerLink:"/admin/plugins"}),(this.hasJobsRight()||this.hasLogsRight()||this.hasDebugRight())&&this.items.push({label:this.i18n("System"),routerLink:"/admin/system"})}hasUsersRight(){return this.auth.getUser().hasRight(Mn.e.MANAGE_USERS)}hasServerFollowRight(){return this.auth.getUser().hasRight(Mn.e.MANAGE_SERVER_FOLLOW)}hasVideoAbusesRight(){return this.auth.getUser().hasRight(Mn.e.MANAGE_VIDEO_ABUSES)}hasVideoBlacklistRight(){return this.auth.getUser().hasRight(Mn.e.MANAGE_VIDEO_BLACKLIST)}hasConfigRight(){return this.auth.getUser().hasRight(Mn.e.MANAGE_CONFIGURATION)}hasPluginsRight(){return this.auth.getUser().hasRight(Mn.e.MANAGE_PLUGINS)}hasLogsRight(){return this.auth.getUser().hasRight(Mn.e.MANAGE_LOGS)}hasJobsRight(){return this.auth.getUser().hasRight(Mn.e.MANAGE_JOBS)}hasDebugRight(){return this.auth.getUser().hasRight(Mn.e.MANAGE_DEBUG)}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(yn.a),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["ng-component"]],decls:7,vars:2,consts:[[1,"row"],[1,"sub-menu"],["linkTemplate",""],[3,"items","itemTemplate"],[1,"margin-content"],["routerLinkActive","active",1,"title-page","title-page-settings",3,"routerLink"]],template:function(e,t){if(1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.ad(2,xn,2,2,"ng-template",null,2,a.bd),a.Yb(4,"list-overflow",3),a.cc(),a.dc(5,"div",4),a.Yb(6,"router-outlet"),a.cc(),a.cc()),2&e){const e=a.Pc(3);a.Jb(4),a.Dc("items",t.items)("itemTemplate",e)}},directives:[wn.a,O.m,O.k,O.j],encapsulation:2}),e})();var Tn=n("c6Lk"),An=n("7zfz"),In=n("v9Or"),Sn=n("pPws"),Rn=function(e,t,n,o){return new(n||(n=Promise))((function(c,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function r(e){try{l(o.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}))};const Dn=["currentPageReportTemplate","\u6B63\u5728\u986F\u793A " + "\ufffd0\ufffd" + " \u5230 " + "\ufffd1\ufffd" + "\u5168\u90E8\u5171\u6709 " + "\ufffd2\ufffd" + " \u500B\u8FFD\u96A8\u8005"],zn=["placeholder","\u904E\u6FFE\u5668\u2026\u2026"];var En,Ln,$n,Jn,Nn;function jn(e,t){if(1&e){const e=a.ec();a.dc(0,"div",5),a.dc(1,"div",6),a.dc(2,"input",7),a.jc(3,zn),a.sc("keyup",(function(t){return a.Rc(e),a.wc().onSearch(t)})),a.cc(),a.dc(4,"a",8),a.sc("click",(function(){return a.Rc(e),a.wc().resetSearch()})),a.cc(),a.dc(5,"span",9),a.hc(6,En),a.cc(),a.cc(),a.cc()}}function Fn(e,t){1&e&&(a.dc(0,"tr"),a.dc(1,"th"),a.hc(2,Ln),a.cc(),a.dc(3,"th",10),a.nc(4,$n),a.Yb(5,"p-sortIcon",11),a.kc(),a.cc(),a.dc(6,"th",12),a.nc(7,Jn),a.Yb(8,"p-sortIcon",13),a.kc(),a.cc(),a.dc(9,"th",14),a.nc(10,Nn),a.Yb(11,"p-sortIcon",15),a.kc(),a.cc(),a.Yb(12,"th",16),a.cc())}En="\u6E05\u9664\u904E\u6FFE\u5668",Ln="\u8FFD\u8E64\u8005\u8655\u7406",$n="\u9673\u8FF0 " + "\ufffd#5\ufffd" + "" + "\ufffd/#5\ufffd" + "",Jn="\u5206\u6578 " + "\ufffd#8\ufffd" + "" + "\ufffd/#8\ufffd" + "",Nn="" + "\ufffd#11\ufffd" + "" + "\ufffd/#11\ufffd" + " \u5EFA\u7ACB";const Un=["title","\u5728\u65B0\u5206\u9801\u4E2D\u958B\u555F\u52D5\u4F5C\u9801\u9762"];var Vn,Bn;function Gn(e,t){1&e&&(a.dc(0,"td"),a.hc(1,Vn),a.cc())}function Yn(e,t){1&e&&(a.dc(0,"td"),a.hc(1,Bn),a.cc())}Vn="\u5DF2\u63A5\u53D7",Bn="\u64F1\u7F6E\u4E2D";const Hn=["label","\u63A5\u53D7"],Xn=["label","\u62D2\u7D55"];function Qn(e,t){if(1&e){const e=a.ec();a.bc(0),a.dc(1,"my-button",22),a.jc(2,Hn),a.sc("click",(function(){a.Rc(e);const t=a.wc().$implicit;return a.wc().acceptFollower(t)})),a.cc(),a.dc(3,"my-button",23),a.jc(4,Xn),a.sc("click",(function(){a.Rc(e);const t=a.wc().$implicit;return a.wc().rejectFollower(t)})),a.cc(),a.ac()}}function Kn(e,t){if(1&e){const e=a.ec();a.dc(0,"my-delete-button",24),a.sc("click",(function(){a.Rc(e);const t=a.wc().$implicit;return a.wc().deleteFollower(t)})),a.cc()}}function qn(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td"),a.dc(2,"a",17),a.jc(3,Un),a.cd(4),a.Yb(5,"span",18),a.cc(),a.cc(),a.ad(6,Gn,2,0,"td",19),a.ad(7,Yn,2,0,"td",19),a.dc(8,"td"),a.cd(9),a.cc(),a.dc(10,"td"),a.cd(11),a.xc(12,"date"),a.cc(),a.dc(13,"td",20),a.ad(14,Qn,5,0,"ng-container",19),a.ad(15,Kn,1,0,"my-delete-button",21),a.cc(),a.cc()),2&e){const e=t.$implicit;a.Jb(2),a.Dc("href",e.follower.url,a.Tc),a.Jb(2),a.ed(" ",e.follower.name+"@"+e.follower.host," "),a.Jb(2),a.Dc("ngIf","accepted"===e.state),a.Jb(1),a.Dc("ngIf","pending"===e.state),a.Jb(2),a.dd(e.score),a.Jb(2),a.dd(a.zc(12,8,e.createdAt,"short")),a.Jb(3),a.Dc("ngIf","pending"===e.state),a.Jb(1),a.Dc("ngIf","accepted"===e.state)}}var Wn,Zn;function eo(e,t){1&e&&(a.bc(0),a.hc(1,Wn),a.ac())}function to(e,t){1&e&&(a.bc(0),a.hc(1,Zn),a.ac())}function no(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",25),a.dc(2,"div",26),a.ad(3,eo,2,0,"ng-container",19),a.ad(4,to,2,0,"ng-container",19),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngIf",e.search),a.Jb(1),a.Dc("ngIf",!e.search)}}Wn="\u6C92\u6709\u7B26\u5408\u76EE\u524D\u904E\u6FFE\u5668\u7684\u8FFD\u96A8\u8005\u3002",Zn="\u60A8\u7684\u7AD9\u81FA\u6C92\u6709\u4EFB\u4F55\u8FFD\u96A8\u8005\u3002";let oo=(()=>{class e extends i.g{constructor(e,t,n,o){super(),this.confirmService=e,this.notifier=t,this.i18n=n,this.followService=o,this.followers=[],this.totalRecords=0,this.sort={field:"createdAt",order:-1},this.pagination={count:this.rowsPerPage,start:0}}ngOnInit(){this.initialize()}getIdentifier(){return"FollowersListComponent"}acceptFollower(e){e.state="accepted",this.followService.acceptFollower(e).subscribe(()=>{this.notifier.success(this.i18n("{{handle}} accepted in instance followers",{handle:e.follower.name+"@"+e.follower.host}))},t=>{e.state="pending",this.notifier.error(t.message)})}rejectFollower(e){return Rn(this,void 0,void 0,(function*(){const t=this.i18n("Do you really want to reject this follower?");!1!==(yield this.confirmService.confirm(t,this.i18n("Reject")))&&this.followService.rejectFollower(e).subscribe(()=>{this.notifier.success(this.i18n("{{handle}} rejected from instance followers",{handle:e.follower.name+"@"+e.follower.host})),this.loadData()},t=>{e.state="pending",this.notifier.error(t.message)})}))}deleteFollower(e){return Rn(this,void 0,void 0,(function*(){const t=this.i18n("Do you really want to delete this follower?");!1!==(yield this.confirmService.confirm(t,this.i18n("Delete")))&&this.followService.removeFollower(e).subscribe(()=>{this.notifier.success(this.i18n("{{handle}} removed from instance followers",{handle:e.follower.name+"@"+e.follower.host})),this.loadData()},e=>this.notifier.error(e.message))}))}loadData(){this.followService.getFollowers({pagination:this.pagination,sort:this.sort,search:this.search}).subscribe(e=>{this.followers=e.data,this.totalRecords=e.total},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.c),a.Xb(g.f),a.Xb(l.a),a.Xb(Tn.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-followers-list"]],features:[a.Gb],decls:6,vars:12,consts:[[3,"value","lazy","paginator","totalRecords","rows","rowsPerPageOptions","sortField","sortOrder","showCurrentPageReport","onLazyLoad","onPage",6,"currentPageReportTemplate"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"caption"],[1,"ml-auto","has-feedback","has-clear"],["type","text","name","table-filter","id","table-filter",3,"keyup",6,"placeholder"],[1,"glyphicon","glyphicon-remove-sign","form-control-feedback","form-control-clear",3,"click"],[1,"sr-only"],["pSortableColumn","state",2,"width","100px"],["field","state"],["pSortableColumn","score",2,"width","100px"],["field","score"],["pSortableColumn","createdAt",2,"width","150px"],["field","createdAt"],[2,"width","150px"],["target","_blank","rel","noopener noreferrer",3,"href",6,"title"],[1,"glyphicon","glyphicon-new-window"],[4,"ngIf"],[1,"action-cell"],[3,"click",4,"ngIf"],["icon","tick",3,"click",6,"label"],["icon","cross",3,"click",6,"label"],[3,"click"],["colspan","6"],[1,"empty-table-message"]],template:function(e,t){1&e&&(a.dc(0,"p-table",0),a.jc(1,Dn),a.sc("onLazyLoad",(function(e){return t.loadLazy(e)}))("onPage",(function(e){return t.onPage(e)})),a.ad(2,jn,7,0,"ng-template",1),a.ad(3,Fn,13,0,"ng-template",2),a.ad(4,qn,16,11,"ng-template",3),a.ad(5,no,5,2,"ng-template",4),a.cc()),2&e&&(a.lc("{first}")("{last}")("{totalRecords}"),a.ic(1),a.Dc("value",t.followers)("lazy",!0)("paginator",t.totalRecords>0)("totalRecords",t.totalRecords)("rows",t.rowsPerPage)("rowsPerPageOptions",t.rowsPerPageOptions)("sortField",t.sort.field)("sortOrder",t.sort.order)("showCurrentPageReport",!0))},directives:[Pn.q,An.d,Pn.p,Pn.o,p.u,In.a,Sn.a],pipes:[p.f],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}",".caption[_ngcontent-%COMP%]{justify-content:flex-end}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:250px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:250px){.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}a[_ngcontent-%COMP%]{display:inline-block}a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{color:var(--mainForegroundColor)}a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:80%;color:var(--inputPlaceholderColor)}.action-cell[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%]:first-child{margin-right:10px}"]}),e})();var co=n("37nT"),io=n("rCE/"),ao=n("siTk"),ro=n("fKnF");const lo=["modal"];var so,go;so="" + "\ufffd0\ufffd" + "",go="\u6BCF\u884C\u4E00\u500B\u4E3B\u6A5F\uFF08\u4E0D\u9700\u8981 \"http://\"\uFF09";const uo=["value","\u53D6\u6D88"];function bo(e,t){if(1&e&&(a.dc(0,"div"),a.cd(1),a.cc()),2&e){const e=a.wc(3);a.Jb(1),a.ed(" ",e.form.controls.domains.errors.validDomains.value," ")}}function po(e,t){if(1&e&&(a.dc(0,"div",13),a.cd(1),a.ad(2,bo,2,1,"div",14),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.ed(" ",e.formErrors.domains," "),a.Jb(1),a.Dc("ngIf",e.form.controls.domains.errors.validDomains)}}const fo=function(e){return{"input-error":e}};function ho(e,t){if(1&e){const e=a.ec();a.dc(0,"div",1),a.dc(1,"h4",2),a.hc(2,so),a.cc(),a.dc(3,"my-global-icon",3),a.sc("click",(function(){return a.Rc(e),a.wc().hide()})),a.cc(),a.cc(),a.dc(4,"div",4),a.dc(5,"form",5),a.sc("ngSubmit",(function(){return a.Rc(e),a.wc().submit()})),a.dc(6,"div",6),a.dc(7,"label",7),a.hc(8,go),a.cc(),a.Yb(9,"textarea",8),a.ad(10,po,3,2,"div",9),a.cc(),a.Bc(11),a.dc(12,"div",10),a.dc(13,"input",11),a.jc(14,uo),a.sc("click",(function(){return a.Rc(e),a.wc().hide()}))("key.enter",(function(){return a.Rc(e),a.wc().hide()})),a.cc(),a.Yb(15,"input",12),a.cc(),a.cc(),a.cc()}if(2&e){const e=a.wc();a.Jb(2),a.lc(e.action),a.ic(2),a.Jb(3),a.Dc("formGroup",e.form),a.Jb(4),a.Dc("placeholder",e.placeholder)("ngClass",a.Hc(7,fo,e.formErrors.domains)),a.Jb(1),a.Dc("ngIf",e.formErrors.domains),a.Jb(5),a.Dc("value",e.action)("disabled",!e.form.valid)}}const mo=[[["warning"]]],vo=["warning"];let Co=(()=>{class e extends io.b{constructor(e,t,n,o){super(),this.formValidatorService=e,this.modalService=t,this.batchDomainsValidatorsService=n,this.i18n=o,this.placeholder="example.com",this.domains=new a.n}ngOnInit(){this.action||(this.action=this.i18n("Process domains")),this.buildForm({domains:this.batchDomainsValidatorsService.DOMAINS})}openModal(){this.openedModal=this.modalService.open(this.modal,{centered:!0})}hide(){this.openedModal.close()}submit(){this.domains.emit(this.batchDomainsValidatorsService.getNotEmptyHosts(this.form.controls.domains.value)),this.form.reset(),this.hide()}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(u.a),a.Xb(h.k),a.Xb(ao.a),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-batch-domains-modal"]],viewQuery:function(e,t){var n;1&e&&a.Xc(lo,!0),2&e&&a.Oc(n=a.tc())&&(t.modal=n.first)},inputs:{placeholder:"placeholder",action:"action"},outputs:{domains:"domains"},features:[a.Gb],ngContentSelectors:vo,decls:2,vars:0,consts:[["modal",""],[1,"modal-header"],[1,"modal-title"],["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group"],["for","hosts"],["formControlName","domains","type","text","id","hosts","name","hosts","ngbAutofocus","",1,"form-control",3,"placeholder","ngClass"],["class","form-error",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button",1,"action-button","action-button-cancel",3,"click","key.enter",6,"value"],["type","submit",1,"action-button-submit",3,"value","disabled"],[1,"form-error"],[4,"ngIf"]],template:function(e,t){1&e&&(a.Cc(mo),a.ad(0,ho,16,9,"ng-template",null,0,a.bd))},directives:[ro.a,f.J,f.u,f.m,f.d,f.t,f.k,p.r,p.u],styles:["textarea[_ngcontent-%COMP%]{height:200px}"]}),e})();var Oo=n("j8ES");let Po=(()=>{class e{constructor(e,t,n){this.notifier=e,this.redundancyService=t,this.i18n=n}updateRedundancyState(){this.redundancyService.updateRedundancy(this.host,this.redundancyAllowed).subscribe(()=>{const e=this.i18n(this.redundancyAllowed?"enabled":"disabled");this.notifier.success(this.i18n("Redundancy for {{host}} is {{stateLabel}}",{host:this.host,stateLabel:e}))},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.f),a.Xb(Oo.a),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-redundancy-checkbox"]],inputs:{redundancyAllowed:"redundancyAllowed",host:"host"},decls:1,vars:2,consts:[[3,"inputName","ngModel","ngModelChange"]],template:function(e,t){1&e&&(a.dc(0,"my-peertube-checkbox",0),a.sc("ngModelChange",(function(e){return t.redundancyAllowed=e}))("ngModelChange",(function(){return t.updateRedundancyState()})),a.cc()),2&e&&a.Dc("inputName",t.host+"-redundancy-allowed")("ngModel",t.redundancyAllowed)},directives:[P.a,f.t,f.w],styles:[""]}),e})();var _o=function(e,t,n,o){return new(n||(n=Promise))((function(c,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function r(e){try{l(o.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}))};const Mo=["batchDomainsModal"],yo=["currentPageReportTemplate","\u6B63\u5728\u986F\u793A " + "\ufffd0\ufffd" + " \u5230 " + "\ufffd1\ufffd" + "\uFF0C\u7E3D\u5171\u6709 " + "\ufffd2\ufffd" + " \u500B\u4E3B\u6A5F"],wo=["action","\u8FFD\u8E64\u7DB2\u57DF"],xo=["placeholder","\u904E\u6FFE\u5668\u2026\u2026"];var ko,To,Ao,Io,So,Ro;function Do(e,t){if(1&e){const e=a.ec();a.dc(0,"div",9),a.dc(1,"div",10),a.dc(2,"input",11),a.jc(3,xo),a.sc("keyup",(function(t){return a.Rc(e),a.wc().onSearch(t)})),a.cc(),a.dc(4,"a",12),a.sc("click",(function(){return a.Rc(e),a.wc().resetSearch()})),a.cc(),a.dc(5,"span",13),a.hc(6,ko),a.cc(),a.cc(),a.dc(7,"a",14),a.sc("click",(function(){return a.Rc(e),a.wc().addDomainsToFollow()}))("key.enter",(function(){return a.Rc(e),a.wc().addDomainsToFollow()})),a.Yb(8,"my-global-icon",15),a.bc(9),a.hc(10,To),a.ac(),a.cc(),a.cc()}}function zo(e,t){1&e&&(a.dc(0,"tr"),a.dc(1,"th"),a.hc(2,Ao),a.cc(),a.dc(3,"th",16),a.nc(4,Io),a.Yb(5,"p-sortIcon",17),a.kc(),a.cc(),a.dc(6,"th",18),a.nc(7,So),a.Yb(8,"p-sortIcon",19),a.kc(),a.cc(),a.dc(9,"th",20),a.nc(10,Ro),a.Yb(11,"p-sortIcon",21),a.kc(),a.cc(),a.Yb(12,"th",22),a.cc())}ko="\u6E05\u9664\u904E\u6FFE\u5668",To="\u8FFD\u8E64\u7DB2\u57DF",Ao="\u4E3B\u6A5F",Io="\u9673\u8FF0 " + "\ufffd#5\ufffd" + "" + "\ufffd/#5\ufffd" + "",So="" + "\ufffd#8\ufffd" + "" + "\ufffd/#8\ufffd" + " \u5EFA\u7ACB",Ro="\u5141\u8A31\u5197\u9918 " + "\ufffd#11\ufffd" + "" + "\ufffd/#11\ufffd" + "";const Eo=["title","\u5728\u65B0\u5206\u9801\u4E2D\u958B\u555F\u7AD9\u81FA"];var Lo,$o,Jo,No,jo;function Fo(e,t){1&e&&(a.dc(0,"td"),a.hc(1,Lo),a.cc())}function Uo(e,t){1&e&&(a.dc(0,"td"),a.hc(1,$o),a.cc())}function Vo(e,t){if(1&e){const e=a.ec();a.dc(0,"tr"),a.dc(1,"td"),a.dc(2,"a",23),a.jc(3,Eo),a.cd(4),a.Yb(5,"span",24),a.cc(),a.cc(),a.ad(6,Fo,2,0,"td",25),a.ad(7,Uo,2,0,"td",25),a.dc(8,"td"),a.cd(9),a.xc(10,"date"),a.cc(),a.dc(11,"td"),a.Yb(12,"my-redundancy-checkbox",26),a.cc(),a.dc(13,"td",27),a.dc(14,"my-delete-button",28),a.sc("click",(function(){a.Rc(e);const n=t.$implicit;return a.wc().removeFollowing(n)})),a.cc(),a.cc(),a.cc()}if(2&e){const e=t.$implicit;a.Jb(2),a.Dc("href","https://"+e.following.host,a.Tc),a.Jb(2),a.ed(" ",e.following.host," "),a.Jb(2),a.Dc("ngIf","accepted"===e.state),a.Jb(1),a.Dc("ngIf","pending"===e.state),a.Jb(2),a.dd(a.zc(10,7,e.createdAt,"short")),a.Jb(3),a.Dc("host",e.following.host)("redundancyAllowed",e.following.hostRedundancyAllowed)}}function Bo(e,t){1&e&&(a.bc(0),a.hc(1,Jo),a.ac())}function Go(e,t){1&e&&(a.bc(0),a.hc(1,No),a.ac())}function Yo(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",29),a.dc(2,"div",30),a.ad(3,Bo,2,0,"ng-container",25),a.ad(4,Go,2,0,"ng-container",25),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngIf",e.search),a.Jb(1),a.Dc("ngIf",!e.search)}}function Ho(e,t){1&e&&(a.dc(0,"div",31),a.hc(1,jo),a.cc())}Lo="\u5DF2\u63A5\u53D7",$o="\u64F1\u7F6E\u4E2D",Jo="\u6C92\u6709\u4E3B\u6A5F\u7B26\u5408\u76EE\u524D\u7684\u904E\u6FFE\u5668\u3002",No="\u60A8\u7684\u7AD9\u81FA\u4E26\u672A\u8FFD\u8E64\u4EFB\u4F55\u4EBA\u3002",jo="\u770B\u8D77\u4F86\u60A8\u4F3C\u4E4E\u4E0D\u5728 HTTPS \u4F3A\u670D\u5668\u4E0A\u3002\u60A8\u7684\u7DB2\u8DEF\u4F3A\u670D\u5668\u5FC5\u9808\u555F\u7528 TLS \u624D\u80FD\u8FFD\u8E64\u4F3A\u670D\u5668\u3002";let Xo=(()=>{class e extends i.g{constructor(e,t,n,o){super(),this.notifier=e,this.confirmService=t,this.followService=n,this.i18n=o,this.following=[],this.totalRecords=0,this.sort={field:"createdAt",order:-1},this.pagination={count:this.rowsPerPage,start:0}}ngOnInit(){this.initialize()}getIdentifier(){return"FollowingListComponent"}addDomainsToFollow(){this.batchDomainsModal.openModal()}httpEnabled(){return"https:"===window.location.protocol}addFollowing(e){return _o(this,void 0,void 0,(function*(){this.followService.follow(e).subscribe(()=>{this.notifier.success(this.i18n("Follow request(s) sent!")),this.loadData()},e=>this.notifier.error(e.message))}))}removeFollowing(e){return _o(this,void 0,void 0,(function*(){!1!==(yield this.confirmService.confirm(this.i18n("Do you really want to unfollow {{host}}?",{host:e.following.host}),this.i18n("Unfollow")))&&this.followService.unfollow(e).subscribe(()=>{this.notifier.success(this.i18n("You are not following {{host}} anymore.",{host:e.following.host})),this.loadData()},e=>this.notifier.error(e.message))}))}loadData(){this.followService.getFollowing({pagination:this.pagination,sort:this.sort,search:this.search}).subscribe(e=>{this.following=e.data,this.totalRecords=e.total},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.f),a.Xb(co.a),a.Xb(Tn.a),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-followers-list"]],viewQuery:function(e,t){var n;1&e&&a.gd(Mo,!0),2&e&&a.Oc(n=a.tc())&&(t.batchDomainsModal=n.first)},features:[a.Gb],decls:11,vars:13,consts:[[3,"value","lazy","paginator","totalRecords","rows","rowsPerPageOptions","sortField","sortOrder","showCurrentPageReport","onLazyLoad","onPage",6,"currentPageReportTemplate"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"domains",6,"action"],["batchDomainsModal",""],["ngProjectAs","warning",5,["warning"]],["class","alert alert-warning",4,"ngIf"],[1,"caption"],[1,"ml-auto","has-feedback","has-clear"],["type","text","name","table-filter","id","table-filter",3,"keyup",6,"placeholder"],[1,"glyphicon","glyphicon-remove-sign","form-control-feedback","form-control-clear",3,"click"],[1,"sr-only"],[1,"ml-2","follow-button",3,"click","key.enter"],["iconName","add"],["pSortableColumn","state",2,"width","100px"],["field","state"],["pSortableColumn","createdAt",2,"width","150px"],["field","createdAt"],["pSortableColumn","redundancyAllowed",2,"width","160px"],["field","redundancyAllowed"],[2,"width","150px"],["target","_blank","rel","noopener noreferrer",3,"href",6,"title"],[1,"glyphicon","glyphicon-new-window"],[4,"ngIf"],[3,"host","redundancyAllowed"],[1,"action-cell"],[3,"click"],["colspan","6"],[1,"empty-table-message"],[1,"alert","alert-warning"]],template:function(e,t){1&e&&(a.dc(0,"p-table",0),a.jc(1,yo),a.sc("onLazyLoad",(function(e){return t.loadLazy(e)}))("onPage",(function(e){return t.onPage(e)})),a.ad(2,Do,11,0,"ng-template",1),a.ad(3,zo,13,0,"ng-template",2),a.ad(4,Vo,15,10,"ng-template",3),a.ad(5,Yo,5,2,"ng-template",4),a.cc(),a.dc(6,"my-batch-domains-modal",5,6),a.jc(8,wo),a.sc("domains",(function(e){return t.addFollowing(e)})),a.bc(9,7),a.ad(10,Ho,2,0,"div",8),a.ac(),a.cc()),2&e&&(a.lc("{first}")("{last}")("{totalRecords}"),a.ic(1),a.Dc("value",t.following)("lazy",!0)("paginator",t.totalRecords>0)("totalRecords",t.totalRecords)("rows",t.rowsPerPage)("rowsPerPageOptions",t.rowsPerPageOptions)("sortField",t.sort.field)("sortOrder",t.sort.order)("showCurrentPageReport",!0),a.Jb(10),a.Dc("ngIf",!1===t.httpEnabled()))},directives:[Pn.q,An.d,Co,p.u,ro.a,Pn.p,Pn.o,Po,Sn.a],pipes:[p.f],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}",'a[_ngcontent-%COMP%]{display:inline-block}a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{color:var(--mainForegroundColor)}a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:80%;color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]{justify-content:flex-end}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:250px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:250px){.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.follow-button[_ngcontent-%COMP%]{display:inline-block;border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.follow-button[_ngcontent-%COMP%]:active, .follow-button[_ngcontent-%COMP%]:focus, .follow-button[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.follow-button.focus-visible[_ngcontent-%COMP%], .follow-button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.follow-button[_ngcontent-%COMP%], .follow-button[_ngcontent-%COMP%]:active, .follow-button[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.follow-button[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.follow-button.disabled[_ngcontent-%COMP%], .follow-button[disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}.follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], .follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], .follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], .follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], .follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:#fff}.follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], .follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], .follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], .follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], .follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:#fff}.follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:#fff}.follow-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;width:20px;margin-right:5px;top:-1px}']}),e})();var Qo=n("fyHm"),Ko=n("aEDk");let qo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Rb({type:e,selectors:[["my-video-redundancy-information"]],inputs:{redundancyElement:"redundancyElement"},decls:23,vars:14,consts:[[1,"label"],["target","_blank","rel","noopener noreferrer",3,"href"]],template:function(e,t){1&e&&(a.dc(0,"div"),a.dc(1,"span",0),a.cd(2,"Url"),a.cc(),a.dc(3,"a",1),a.cd(4),a.cc(),a.cc(),a.dc(5,"div"),a.dc(6,"span",0),a.cd(7,"Created on"),a.cc(),a.dc(8,"span"),a.cd(9),a.xc(10,"date"),a.cc(),a.cc(),a.dc(11,"div"),a.dc(12,"span",0),a.cd(13,"Expires on"),a.cc(),a.dc(14,"span"),a.cd(15),a.xc(16,"date"),a.cc(),a.cc(),a.dc(17,"div"),a.dc(18,"span",0),a.cd(19,"Size"),a.cc(),a.dc(20,"span"),a.cd(21),a.xc(22,"bytes"),a.cc(),a.cc()),2&e&&(a.Jb(3),a.Dc("href",t.redundancyElement.fileUrl,a.Tc),a.Jb(1),a.dd(t.redundancyElement.fileUrl),a.Jb(5),a.dd(a.zc(10,5,t.redundancyElement.createdAt,"medium")),a.Jb(6),a.dd(a.zc(16,8,t.redundancyElement.expiresOn,"medium")),a.Jb(6),a.dd(a.zc(22,11,t.redundancyElement.size,1)))},pipes:[p.f,Ko.b],styles:[".label[_ngcontent-%COMP%]{display:inline-block;min-width:100px;font-weight:600}"]}),e})();var Wo,Zo,ec,tc,nc,oc,cc=n("I5S5");function ic(e,t){1&e&&(a.dc(0,"th",19),a.hc(1,nc),a.cc())}function ac(e,t){1&e&&(a.dc(0,"th",20),a.hc(1,oc),a.cc())}function rc(e,t){if(1&e&&(a.dc(0,"tr"),a.Yb(1,"th",13),a.ad(2,ic,2,0,"th",14),a.dc(3,"th",15),a.nc(4,tc),a.Yb(5,"p-sortIcon",16),a.kc(),a.cc(),a.ad(6,ac,2,0,"th",17),a.Yb(7,"th",18),a.cc()),2&e){const e=a.wc();a.Jb(2),a.Dc("ngIf",e.isDisplayingRemoteVideos()),a.Jb(4),a.Dc("ngIf",e.isDisplayingRemoteVideos())}}Wo="\u986F\u793A",Zo="\u6211\u7684\u5F71\u7247\u88AB\u9060\u7AEF\u7AD9\u81FA\u8907\u88FD\u4E86",ec="\u6211\u7684\u7AD9\u81FA\u8907\u88FD\u4E86\u9060\u7AEF\u5F71\u7247",tc="\u5F71\u7247 " + "\ufffd#5\ufffd" + "" + "\ufffd/#5\ufffd" + "",nc="\u7B56\u7565",oc="\u7E3D\u5927\u5C0F";const lc=["ngbTooltip","\u5217\u51FA\u5197\u9918"],sc=["title","\u5728\u65B0\u5206\u9801\u4E2D\u958B\u555F\u5F71\u7247"];function dc(e,t){if(1&e&&(a.dc(0,"td"),a.cd(1),a.cc()),2&e){const e=a.wc().$implicit,t=a.wc();a.Jb(1),a.dd(t.getRedundancyStrategy(e))}}function gc(e,t){if(1&e&&(a.dc(0,"td"),a.cd(1),a.xc(2,"bytes"),a.cc()),2&e){const e=a.wc().$implicit,t=a.wc();a.Jb(1),a.dd(a.zc(2,1,t.getTotalSize(e),1))}}function uc(e,t){if(1&e){const e=a.ec();a.dc(0,"tr"),a.dc(1,"td"),a.dc(2,"span",21),a.jc(3,lc),a.Yb(4,"i",22),a.cc(),a.cc(),a.ad(5,dc,2,1,"td",23),a.dc(6,"td"),a.dc(7,"a",24),a.jc(8,sc),a.cd(9),a.Yb(10,"span",25),a.cc(),a.cc(),a.ad(11,gc,3,4,"td",23),a.dc(12,"td",26),a.dc(13,"my-delete-button",27),a.sc("click",(function(){a.Rc(e);const n=t.$implicit;return a.wc().removeRedundancy(n)})),a.cc(),a.cc(),a.cc()}if(2&e){const e=t.expanded,n=t.$implicit,o=a.wc();a.Jb(2),a.Dc("pRowToggler",n),a.Jb(2),a.Dc("ngClass",e?"glyphicon glyphicon-menu-down":"glyphicon glyphicon-menu-right"),a.Jb(1),a.Dc("ngIf",o.isDisplayingRemoteVideos()),a.Jb(2),a.Dc("href",n.url,a.Tc),a.Jb(2),a.ed(" ",n.name," "),a.Jb(2),a.Dc("ngIf",o.isDisplayingRemoteVideos())}}function bc(e,t){if(1&e&&(a.dc(0,"div",30),a.Yb(1,"my-video-redundancy-information",31),a.cc()),2&e){const e=t.$implicit;a.Jb(1),a.Dc("redundancyElement",e)}}function pc(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",28),a.ad(2,bc,2,1,"div",29),a.cc(),a.cc()),2&e){const e=a.wc().$implicit,t=a.wc();a.Jb(1),a.Kb("colspan",t.getColspan()),a.Jb(1),a.Dc("ngForOf",e.redundancies.files)}}function fc(e,t){if(1&e&&(a.dc(0,"div"),a.Yb(1,"my-video-redundancy-information",31),a.cc()),2&e){const e=t.$implicit;a.Jb(1),a.Dc("redundancyElement",e)}}function hc(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",28),a.ad(2,fc,2,1,"div",32),a.cc(),a.cc()),2&e){const e=a.wc().$implicit,t=a.wc();a.Jb(1),a.Kb("colspan",t.getColspan()),a.Jb(1),a.Dc("ngForOf",e.redundancies.streamingPlaylists)}}function mc(e,t){if(1&e&&(a.ad(0,pc,3,2,"tr",23),a.ad(1,hc,3,2,"tr",23)),2&e){const e=t.$implicit;a.Dc("ngIf",0!==e.redundancies.files.length),a.Jb(1),a.Dc("ngIf",0!==e.redundancies.streamingPlaylists.length)}}var vc,Cc,Oc,Pc;function _c(e,t){1&e&&(a.bc(0),a.hc(1,vc),a.ac())}function Mc(e,t){1&e&&(a.bc(0),a.hc(1,Cc),a.ac())}function yc(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",33),a.dc(2,"div",34),a.ad(3,_c,2,0,"ng-container",23),a.ad(4,Mc,2,0,"ng-container",23),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngIf",e.isDisplayingRemoteVideos()),a.Jb(1),a.Dc("ngIf",!e.isDisplayingRemoteVideos())}}function wc(e,t){1&e&&(a.dc(0,"div",40),a.hc(1,Pc),a.cc())}function xc(e,t){if(1&e&&(a.dc(0,"div",41),a.Yb(1,"p-chart",42),a.cc()),2&e){const e=t.$implicit;a.Jb(1),a.Dc("data",e.graphData)("options",e.options)}}function kc(e,t){if(1&e&&(a.dc(0,"div",35),a.dc(1,"div",36),a.hc(2,Oc),a.cc(),a.dc(3,"div",37),a.ad(4,wc,2,0,"div",38),a.ad(5,xc,2,2,"div",39),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(4),a.Dc("ngIf",e.noRedundancies),a.Jb(1),a.Dc("ngForOf",e.redundanciesGraphsData)}}vc="\u60A8\u7684\u7AD9\u81FA\u4E26\u672A\u93E1\u50CF\u4EFB\u4F55\u5F71\u7247\u3002",Cc="\u60A8\u7684\u7AD9\u81FA\u6C92\u6709\u5DF2\u93E1\u50CF\u7684\u5F71\u7247\u3002",Oc="\u7B56\u7565\u7D71\u8A08\u5DF2\u555F\u7528",Pc="\u60A8\u7684\u7AD9\u81FA\u672A\u555F\u7528\u7B56\u7565\u7D71\u8A08\u3002";let Tc=(()=>{class e extends i.g{constructor(e,t,n,o,c){super(),this.notifier=e,this.confirmService=t,this.redundancyService=n,this.serverService=o,this.i18n=c,this.videoRedundancies=[],this.totalRecords=0,this.sort={field:"name",order:1},this.pagination={count:this.rowsPerPage,start:0},this.displayType="my-videos",this.redundanciesGraphsData=[],this.noRedundancies=!1,this.bytesPipe=new Ko.b}getIdentifier(){return"VideoRedundanciesListComponent"}ngOnInit(){this.loadSelectLocalStorage(),this.initialize(),this.serverService.getServerStats().subscribe(e=>{const t=e.videosRedundancy;0===t.length&&(this.noRedundancies=!0);for(const n of t)this.buildPieData(n)})}getColspan(){return this.isDisplayingRemoteVideos()?5:4}isDisplayingRemoteVideos(){return"remote-videos"===this.displayType}getTotalSize(e){return e.redundancies.files.reduce((e,t)=>e+t.size,0)+e.redundancies.streamingPlaylists.reduce((e,t)=>e+t.size,0)}onDisplayTypeChanged(){this.pagination.start=0,this.saveSelectLocalStorage(),this.loadData()}getRedundancyStrategy(e){return 0!==e.redundancies.files.length?e.redundancies.files[0].strategy:0!==e.redundancies.streamingPlaylists.length?e.redundancies.streamingPlaylists[0].strategy:""}buildPieData(e){const t=e.totalSize?e.totalSize-e.totalUsed:e.totalUsed;0!==t&&this.redundanciesGraphsData.push({stats:e,graphData:{labels:[this.i18n("Used"),this.i18n("Available")],datasets:[{data:[e.totalUsed,t],backgroundColor:["#FF6384","#36A2EB"],hoverBackgroundColor:["#FF6384","#36A2EB"]}]},options:{title:{display:!0,text:e.strategy},tooltips:{callbacks:{label:(e,t)=>{let n=t.labels[e.index];return n?n+=": ":n="",n+=this.bytesPipe.transform(t.datasets[e.datasetIndex].data[e.index],1),n}}}}})}removeRedundancy(e){return t=this,void 0,o=function*(){const t=this.i18n("Do you really want to remove this video redundancy?");!1!==(yield this.confirmService.confirm(t,this.i18n("Remove redundancy")))&&this.redundancyService.removeVideoRedundancies(e).subscribe(()=>{this.notifier.success(this.i18n("Video redundancies removed!")),this.loadData()},e=>this.notifier.error(e.message))},new((n=void 0)||(n=Promise))((function(e,c){function i(e){try{r(o.next(e))}catch(t){c(t)}}function a(e){try{r(o.throw(e))}catch(t){c(t)}}function r(t){var o;t.done?e(t.value):(o=t.value,o instanceof n?o:new n((function(e){e(o)}))).then(i,a)}r((o=o.apply(t,[])).next())}));var t,n,o}loadData(){this.redundancyService.listVideoRedundancies({pagination:this.pagination,sort:this.sort,target:this.displayType}).subscribe(e=>{this.videoRedundancies=e.data,this.totalRecords=e.total},e=>this.notifier.error(e.message))}loadSelectLocalStorage(){const t=Qo.a.getItem(e.LOCAL_STORAGE_DISPLAY_TYPE);t&&(this.displayType=t)}saveSelectLocalStorage(){Qo.a.setItem(e.LOCAL_STORAGE_DISPLAY_TYPE,this.displayType)}}return e.LOCAL_STORAGE_DISPLAY_TYPE="video-redundancies-list-display-type",e.\u0275fac=function(t){return new(t||e)(a.Xb(g.f),a.Xb(co.a),a.Xb(Oo.a),a.Xb(g.i),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-video-redundancies-list"]],features:[a.Gb],decls:16,vars:11,consts:[[1,"admin-sub-header"],[1,"select-filter-block"],["for","displayType"],[1,"peertube-select-container"],["id","displayType","name","displayType",1,"form-control",3,"ngModel","ngModelChange"],["value","my-videos"],["value","remote-videos"],["dataKey","id",3,"value","lazy","paginator","totalRecords","rows","rowsPerPageOptions","sortField","sortOrder","expandedRowKeys","onLazyLoad","onPage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],["class","redundancies-charts",4,"ngIf"],[2,"width","40px"],["style","width: 160px;",4,"ngIf"],["pSortableColumn","name"],["field","name"],["style","width: 100px;",4,"ngIf"],[2,"width","150px"],[2,"width","160px"],[2,"width","100px"],[1,"expander",3,"pRowToggler",6,"ngbTooltip"],[3,"ngClass"],[4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"href",6,"title"],[1,"glyphicon","glyphicon-new-window"],[1,"action-cell"],[3,"click"],[1,"expand-cell"],["class","expansion-block",4,"ngFor","ngForOf"],[1,"expansion-block"],[3,"redundancyElement"],[4,"ngFor","ngForOf"],["colspan","6"],[1,"empty-table-message"],[1,"redundancies-charts"],[1,"form-sub-title"],[1,"chart-blocks"],["class","no-results",4,"ngIf"],["class","chart-block",4,"ngFor","ngForOf"],[1,"no-results"],[1,"chart-block"],["type","pie","width","300px","height","300px",3,"data","options"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.dc(2,"label",2),a.hc(3,Wo),a.cc(),a.dc(4,"div",3),a.dc(5,"select",4),a.sc("ngModelChange",(function(e){return t.displayType=e}))("ngModelChange",(function(){return t.onDisplayTypeChanged()})),a.dc(6,"option",5),a.hc(7,Zo),a.cc(),a.dc(8,"option",6),a.hc(9,ec),a.cc(),a.cc(),a.cc(),a.cc(),a.cc(),a.dc(10,"p-table",7),a.sc("onLazyLoad",(function(e){return t.loadLazy(e)}))("onPage",(function(e){return t.onPage(e)})),a.ad(11,rc,8,2,"ng-template",8),a.ad(12,uc,14,6,"ng-template",9),a.ad(13,mc,2,2,"ng-template",10),a.ad(14,yc,5,2,"ng-template",11),a.cc(),a.ad(15,kc,6,2,"div",12)),2&e&&(a.Jb(5),a.Dc("ngModel",t.displayType),a.Jb(5),a.Dc("value",t.videoRedundancies)("lazy",!0)("paginator",t.totalRecords>0)("totalRecords",t.totalRecords)("rows",t.rowsPerPage)("rowsPerPageOptions",t.rowsPerPageOptions)("sortField",t.sort.field)("sortOrder",t.sort.order)("expandedRowKeys",t.expandedRows),a.Jb(5),a.Dc("ngIf",t.isDisplayingRemoteVideos()))},directives:[f.F,f.t,f.w,f.y,f.I,Pn.q,An.d,p.u,Pn.p,Pn.o,h.y,Pn.k,p.r,Sn.a,p.t,qo,cc.b],pipes:[Ko.b],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}",'a[_ngcontent-%COMP%]{display:inline-block}a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{color:var(--mainForegroundColor)}a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:80%;color:var(--inputPlaceholderColor)}.expansion-block[_ngcontent-%COMP%]{margin-bottom:20px}.admin-sub-header[_ngcontent-%COMP%]{justify-content:flex-end}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]:not(:last-child){margin-right:10px}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:2px}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:auto;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;font-size:15px}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}@media screen and (max-width:auto){.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{width:100%}}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:15px;content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid transparent;border-top-color:#000;margin-top:-2px;z-index:100}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 35px 0 12px;width:calc(100% + 2px);position:relative;left:1px;border:1px solid #c6c6c6;background:transparent none;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:30px;text-overflow:ellipsis;color:var(--mainForegroundColor)}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.redundancies-charts[_ngcontent-%COMP%]{margin-top:50px}.redundancies-charts[_ngcontent-%COMP%]   .chart-blocks[_ngcontent-%COMP%]{display:flex;justify-content:center}.redundancies-charts[_ngcontent-%COMP%]   .chart-blocks[_ngcontent-%COMP%]   .chart-block[_ngcontent-%COMP%]{margin:0 20px}']}),e})();var Ac,Ic,Sc,Rc;Ac="\u8FFD\u8E64\u8207\u5197\u9918",Ic="\u6B63\u5728\u8FFD\u8E64",Sc="\u8FFD\u8E64\u8005",Rc="\u5F71\u7247\u5197\u9918";let Dc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Rb({type:e,selectors:[["ng-component"]],decls:11,vars:0,consts:[[1,"admin-sub-header"],[1,"form-sub-title"],[1,"admin-sub-nav"],["routerLink","following-list","routerLinkActive","active"],["routerLink","followers-list","routerLinkActive","active"],["routerLink","video-redundancies-list","routerLinkActive","active"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.hc(2,Ac),a.cc(),a.dc(3,"div",2),a.dc(4,"a",3),a.hc(5,Ic),a.cc(),a.dc(6,"a",4),a.hc(7,Sc),a.cc(),a.dc(8,"a",5),a.hc(9,Rc),a.cc(),a.cc(),a.cc(),a.Yb(10,"router-outlet"))},directives:[O.k,O.j,O.m],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}"]}),e})();const zc=[{path:"follows",component:Dc,canActivate:[g.l],data:{userRight:Mn.e.MANAGE_SERVER_FOLLOW},children:[{path:"",redirectTo:"following-list",pathMatch:"full"},{path:"following-list",component:Xo,data:{meta:{title:"Following list"}}},{path:"followers-list",component:oo,data:{meta:{title:"Followers list"}}},{path:"following-add",redirectTo:"following-list"},{path:"video-redundancies-list",component:Tc}]}];var Ec=function(e){return e[e.NONE=0]="NONE",e[e.BY_PASS_VIDEO_AUTO_BLACKLIST=1]="BY_PASS_VIDEO_AUTO_BLACKLIST",e}({});let Lc=(()=>{class e extends i.b{constructor(){super(...arguments),this.videoQuotaOptions=[],this.videoQuotaDailyOptions=[],this.roles=[]}ngOnInit(){this.serverConfig=this.serverService.getTmpConfig(),this.serverService.getConfig().subscribe(e=>this.serverConfig=e),this.buildRoles()}get subscribersCount(){return(this.user?this.user.account.followersCount:0)+(this.user?this.user.videoChannels.map(e=>e.followersCount).reduce((e,t)=>e+t,0):0)}isInBigView(){return this.screenService.getWindowInnerWidth()>1600}buildRoles(){this.roles=this.auth.getUser().role!==Mn.f.ADMINISTRATOR?[{value:Mn.f.USER.toString(),label:Mn.b[Mn.f.USER]}]:Object.keys(Mn.b).map(e=>({value:e.toString(),label:Mn.b[e]}))}isTranscodingInformationDisplayed(){const e=parseInt(this.form.value.videoQuota,10);return 0!==this.serverConfig.transcoding.enabledResolutions.length&&e>0}computeQuotaWithTranscoding(){const e=this.serverConfig.transcoding,t=e.enabledResolutions,n=Mn.k.H_4K;let o=0;for(const c of t)o+=c/n;return e.hls.enabled&&(o*=2),o*parseInt(this.form.value.videoQuota,10)}resetPassword(){}buildAdminFlags(e){return e.byPassAutoBlacklist?Ec.BY_PASS_VIDEO_AUTO_BLACKLIST:Ec.NONE}buildQuotaOptions(){this.videoQuotaOptions=this.configService.videoQuotaOptions.map(e=>{var t;return{value:null===(t=e.value)||void 0===t?void 0:t.toString(),label:e.label,disabled:e.disabled}}),this.videoQuotaDailyOptions=this.configService.videoQuotaDailyOptions.map(e=>{var t;return{value:null===(t=e.value)||void 0===t?void 0:t.toString(),label:e.label,disabled:e.disabled}}),console.log(this.videoQuotaOptions,this.videoQuotaDailyOptions)}}return e.\u0275fac=function(t){return $c(t||e)},e.\u0275dir=a.Sb({type:e,features:[a.Gb]}),e})();const $c=a.fc(Lc);var Jc,Nc,jc=n("Qmuk"),Fc=n("fR23"),Uc=n("Ubd+"),Vc=n("vQJr");function Bc(e,t){1&e&&(a.bc(0),a.hc(1,Jc),a.ac())}function Gc(e,t){1&e&&(a.bc(0),a.hc(1,Nc),a.ac())}function Yc(e,t){if(1&e&&(a.dc(0,"div",9),a.cd(1),a.cc()),2&e){const e=a.wc();a.Jb(1),a.ed(" ",e.formErrors.password," ")}}Jc="\u986F\u793A",Nc="\u96B1\u85CF";const Hc=function(e){return{"input-error":e}};let Xc=(()=>{class e extends i.b{constructor(e,t,n,o,c){super(),this.formValidatorService=e,this.userValidatorsService=t,this.notifier=n,this.userService=o,this.i18n=c,this.showPassword=!1}ngOnInit(){this.buildForm({password:this.userValidatorsService.USER_PASSWORD})}formValidated(){this.error=void 0,this.userService.updateUser(this.userId,this.form.value).subscribe(()=>{this.notifier.success(this.i18n("Password changed for user {{username}}.",{username:this.username}))},e=>this.error=e.message)}togglePasswordVisibility(){this.showPassword=!this.showPassword}getFormButtonTitle(){return this.i18n("Update user password")}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(u.a),a.Xb(jc.a),a.Xb(g.f),a.Xb(Vc.a),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-user-password"]],inputs:{userId:"userId"},features:[a.Gb],decls:10,vars:10,consts:[["role","form",3,"formGroup","ngSubmit"],[1,"form-group"],[1,"input-group"],["id","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"input-group-append"],["type","button",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[4,"ngIf"],["class","form-error",4,"ngIf"],["type","submit",3,"value","disabled"],[1,"form-error"]],template:function(e,t){1&e&&(a.dc(0,"form",0),a.sc("ngSubmit",(function(){return t.formValidated()})),a.dc(1,"div",1),a.dc(2,"div",2),a.Yb(3,"input",3),a.dc(4,"div",4),a.dc(5,"button",5),a.sc("click",(function(){return t.togglePasswordVisibility()})),a.ad(6,Bc,2,0,"ng-container",6),a.ad(7,Gc,2,0,"ng-container",6),a.cc(),a.cc(),a.cc(),a.ad(8,Yc,2,1,"div",7),a.cc(),a.Yb(9,"input",8),a.cc()),2&e&&(a.Dc("formGroup",t.form),a.Jb(3),a.Dc("ngClass",a.Hc(8,Hc,t.formErrors.password)),a.Kb("type",t.showPassword?"text":"password"),a.Jb(3),a.Dc("ngIf",!t.showPassword),a.Jb(1),a.Dc("ngIf",!!t.showPassword),a.Jb(1),a.Dc("ngIf",t.formErrors.password),a.Jb(1),a.Ec("value",t.getFormButtonTitle()),a.Dc("disabled",!t.form.valid))},directives:[f.J,f.u,f.m,f.d,f.t,f.k,p.r,p.u],styles:['input[_ngcontent-%COMP%]:not([type=submit]):not([type=checkbox]){display:inline-block;height:30px;width:340px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;display:block;border-top-right-radius:0;border-bottom-right-radius:0;border:1px solid #c6c6c6;border-right:none}input[_ngcontent-%COMP%]:not([type=submit]):not([type=checkbox])::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit]):not([type=checkbox])::-moz-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit]):not([type=checkbox])::-ms-input-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit]):not([type=checkbox])::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:340px){input[_ngcontent-%COMP%]:not([type=submit]):not([type=checkbox]){width:100%}}input[type=submit][_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer;margin-top:10px}input[type=submit].focus-visible[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}input[type=submit][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}input[type=submit].disabled[_ngcontent-%COMP%], input[type=submit][disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:#fff}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:#fff}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:#fff}.input-group-append[_ngcontent-%COMP%]{height:30px}']}),e})();var Qc,Kc;Qc="\u4F7F\u7528\u8005",Kc="\u96FB\u5B50\u90F5\u4EF6";const qc=["placeholder","mail@example.com"];var Wc,Zc,ei;Wc="\u89D2\u8272",Zc="\u5F71\u7247\u914D\u984D",ei="\u6BCF\u65E5\u5F71\u7247\u914D\u984D";const ti=["labelText","\u5F71\u7247\u516C\u958B\u524D\u7121\u9808\u5BE9\u6838"];var ni,oi;function ci(e,t){1&e&&(a.bc(0),a.dc(1,"li",33),a.hc(2,ni),a.cc(),a.ac())}ni="\u5EFA\u7ACB",oi="\u7DE8\u8F2F";const ii=function(e){return["/accounts",e]};function ai(e,t){if(1&e&&(a.dc(0,"a",36),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Dc("routerLink",a.Hc(2,ii,null==e.user?null:e.user.username)),a.Jb(1),a.dd(null==e.user?null:e.user.username)}}function ri(e,t){if(1&e&&(a.bc(0),a.dc(1,"li",33),a.hc(2,oi),a.cc(),a.dc(3,"li",34),a.ad(4,ai,2,4,"a",35),a.cc(),a.ac()),2&e){const e=a.wc();a.Jb(4),a.Dc("ngIf",e.user)}}var li,si,di,gi,ui,bi;li="{VAR_PLURAL, plural, =1 {\u5F71\u7247} other {\u5F71\u7247}}",li=a.mc(li,{VAR_PLURAL:"\ufffd0\ufffd"}),si="{VAR_PLURAL, plural, =1 {\u983B\u9053} other {\u983B\u9053}}",si=a.mc(si,{VAR_PLURAL:"\ufffd0\ufffd"}),di="{VAR_PLURAL, plural, =1 {\u8A02\u95B1\u8005} other {\u8A02\u95B1\u8005}}",di=a.mc(di,{VAR_PLURAL:"\ufffd0\ufffd"}),gi="\u5217\u5165\u56DE\u5831",ui="\u63A5\u53D7\u64B0\u5BEB\u7684\u56DE\u5831",bi="{VAR_PLURAL, plural, =1 {\u7559\u8A00} other {\u7559\u8A00}}",bi=a.mc(bi,{VAR_PLURAL:"\ufffd0\ufffd"});const pi=function(){return["/admin/moderation/video-abuses/list"]},fi=function(e){return{search:e}};function hi(e,t){if(1&e&&(a.dc(0,"div",38),a.dc(1,"div"),a.dc(2,"a"),a.dc(3,"div",39),a.cd(4),a.xc(5,"bytes"),a.cc(),a.dc(6,"div",40),a.hc(7,li),a.cc(),a.cc(),a.cc(),a.dc(8,"div"),a.dc(9,"a"),a.dc(10,"div",39),a.cd(11),a.cc(),a.dc(12,"div",40),a.hc(13,si),a.cc(),a.cc(),a.cc(),a.dc(14,"div"),a.dc(15,"a"),a.dc(16,"div",39),a.cd(17),a.cc(),a.dc(18,"div",40),a.hc(19,di),a.cc(),a.cc(),a.cc(),a.dc(20,"div"),a.dc(21,"a",41),a.dc(22,"div",39),a.cd(23),a.cc(),a.dc(24,"div",40),a.hc(25,gi),a.cc(),a.cc(),a.cc(),a.dc(26,"div"),a.dc(27,"a",41),a.dc(28,"div",39),a.cd(29),a.cc(),a.dc(30,"div",40),a.hc(31,ui),a.cc(),a.cc(),a.cc(),a.dc(32,"div"),a.dc(33,"a"),a.dc(34,"div",39),a.cd(35),a.cc(),a.dc(36,"div",40),a.hc(37,bi),a.cc(),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc(2);a.Jb(4),a.fd("",e.user.videosCount," (",a.zc(5,16,e.user.videoQuotaUsed,0),")"),a.Jb(3),a.lc(e.user.videosCount),a.ic(7),a.Jb(4),a.dd(e.user.videoChannels.length||0),a.Jb(2),a.lc(e.user.videoChannels.length),a.ic(13),a.Jb(4),a.dd(e.subscribersCount),a.Jb(2),a.lc(e.subscribersCount),a.ic(19),a.Jb(2),a.Dc("routerLink",a.Gc(19,pi))("queryParams",a.Hc(20,fi,"reportee:"+(null==e.user?null:e.user.account.displayName))),a.Jb(2),a.dd(e.user.videoAbusesCount),a.Jb(4),a.Dc("routerLink",a.Gc(22,pi))("queryParams",a.Hc(23,fi,"reporter:"+(null==e.user?null:e.user.account.displayName)+" state:accepted")),a.Jb(2),a.fd("",e.user.videoAbusesAcceptedCount," / ",e.user.videoAbusesCreatedCount,""),a.Jb(6),a.dd(e.user.videoCommentsCount),a.Jb(2),a.lc(e.user.videoCommentsCount),a.ic(37)}}function mi(e,t){if(1&e&&a.ad(0,hi,38,25,"div",37),2&e){const e=a.wc();a.Dc("ngIf",!e.isCreation()&&e.user)}}function vi(e,t){}function Ci(e,t){1&e&&a.ad(0,vi,0,0,"ng-template")}function Oi(e,t){if(1&e&&(a.dc(0,"div",42),a.Yb(1,"div",43),a.dc(2,"div",44),a.ad(3,Ci,1,0,void 0,45),a.cc(),a.cc()),2&e){a.wc();const e=a.Pc(8);a.Jb(3),a.Dc("ngTemplateOutlet",e)}}function Pi(e,t){if(1&e&&(a.dc(0,"div",46),a.cd(1),a.cc()),2&e){const e=a.wc();a.Jb(1),a.dd(e.error)}}var _i,Mi;function yi(e,t){1&e&&(a.dc(0,"div",47),a.hc(1,_i),a.cc())}function wi(e,t){if(1&e&&(a.dc(0,"div",47),a.Yb(1,"my-actor-avatar-info",48),a.cc()),2&e){const e=a.wc();a.Jb(1),a.Dc("actor",e.user.account)}}_i="\u65B0\u4F7F\u7528\u8005",Mi="\u4F7F\u7528\u8005\u540D\u7A31";const xi=["placeholder","john"];function ki(e,t){if(1&e&&(a.dc(0,"div",51),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.ed(" ",e.formErrors.username," ")}}const Ti=function(e){return{"input-error":e}};function Ai(e,t){if(1&e&&(a.dc(0,"div",15),a.dc(1,"label",49),a.hc(2,Mi),a.cc(),a.dc(3,"input",50),a.jc(4,xi),a.cc(),a.ad(5,ki,2,1,"div",18),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngClass",a.Hc(2,Ti,e.formErrors.username)),a.Jb(2),a.Dc("ngIf",e.formErrors.username)}}function Ii(e,t){if(1&e&&(a.dc(0,"div",51),a.cd(1),a.cc()),2&e){const e=a.wc();a.Jb(1),a.ed(" ",e.formErrors.email," ")}}var Si,Ri,Di,zi,Ei,Li,$i;function Ji(e,t){1&e&&(a.bc(0),a.hc(1,Ri),a.ac())}function Ni(e,t){1&e&&(a.dc(0,"my-help"),a.ad(1,Ji,2,0,"ng-template",54),a.cc())}function ji(e,t){if(1&e&&(a.dc(0,"div",51),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.ed(" ",e.formErrors.password," ")}}function Fi(e,t){if(1&e&&(a.dc(0,"div",15),a.dc(1,"label",52),a.hc(2,Si),a.cc(),a.ad(3,Ni,2,0,"my-help",4),a.Yb(4,"input",53),a.ad(5,ji,2,1,"div",18),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngIf",e.isPasswordOptional()),a.Jb(1),a.Dc("ngClass",a.Hc(3,Ti,e.formErrors.password)),a.Jb(1),a.Dc("ngIf",e.formErrors.password)}}function Ui(e,t){if(1&e&&(a.dc(0,"option",55),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.value),a.Jb(1),a.ed(" ",e.label," ")}}function Vi(e,t){if(1&e&&(a.dc(0,"div",51),a.cd(1),a.cc()),2&e){const e=a.wc();a.Jb(1),a.ed(" ",e.formErrors.role," ")}}function Bi(e,t){if(1&e&&(a.dc(0,"option",56),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.value)("disabled",e.disabled),a.Jb(1),a.ed(" ",e.label," ")}}function Gi(e,t){if(1&e&&(a.dc(0,"div",57),a.nc(1,Di),a.Yb(2,"strong"),a.Yb(3,"br"),a.xc(4,"bytes"),a.kc(),a.cc()),2&e){const e=a.wc();a.Jb(4),a.lc(a.zc(4,1,e.computeQuotaWithTranscoding(),0)),a.ic(1)}}function Yi(e,t){if(1&e&&(a.dc(0,"option",56),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.value)("disabled",e.disabled),a.Jb(1),a.ed(" ",e.label," ")}}function Hi(e,t){}function Xi(e,t){1&e&&a.ad(0,Hi,0,0,"ng-template")}function Qi(e,t){if(1&e&&(a.dc(0,"div",58),a.ad(1,Xi,1,0,void 0,45),a.cc()),2&e){a.wc();const e=a.Pc(8);a.Jb(1),a.Dc("ngTemplateOutlet",e)}}Si="\u5BC6\u78BC",Ri="\u5982\u679C\u60A8\u5C07\u5BC6\u78BC\u7559\u7A7A\uFF0C\u5C31\u6703\u50B3\u9001\u96FB\u5B50\u90F5\u4EF6\u7D66\u4F7F\u7528\u8005\u3002",Di="\u8F49\u63DB\u7DE8\u78BC\u5DF2\u555F\u7528\u3002\u5F71\u7247\u914D\u984D\u50C5\u8003\u616E" + "\ufffd#2\ufffd" + "\u539F\u59CB" + "\ufffd/#2\ufffd" + "\u5F71\u7247\u5927\u5C0F\u3002" + "\ufffd#3\ufffd\ufffd/#3\ufffd" + " \u6B64\u4F7F\u7528\u8005\u6700\u591A\u53EA\u80FD\u4E0A\u50B3 ~ " + "\ufffd0\ufffd" + "\u3002 ",zi="\u5371\u96AA\u5340",Ei="\u900F\u904E\u96FB\u5B50\u90F5\u4EF6\u50B3\u9001\u91CD\u8A2D\u5BC6\u78BC\u9023\u7D50\u7D66\u4F7F\u7528\u8005",Li="\u8981\u6C42\u65B0\u5BC6\u78BC",$i="\u624B\u52D5\u8A2D\u5B9A\u4F7F\u7528\u8005\u5BC6\u78BC";const Ki=function(e){return{"form-row":e}};function qi(e,t){if(1&e){const e=a.ec();a.dc(0,"div",8),a.dc(1,"div",9),a.Yb(2,"div",59),a.dc(3,"div",47),a.hc(4,zi),a.cc(),a.cc(),a.dc(5,"div",12),a.dc(6,"div",60),a.dc(7,"div",61),a.dc(8,"label"),a.hc(9,Ei),a.cc(),a.dc(10,"button",62),a.sc("click",(function(){return a.Rc(e),a.wc().resetPassword()})),a.hc(11,Li),a.cc(),a.cc(),a.dc(12,"div",15),a.dc(13,"label"),a.hc(14,$i),a.cc(),a.Yb(15,"my-user-password",63),a.cc(),a.cc(),a.cc(),a.cc()}if(2&e){const e=a.wc();a.Jb(5),a.Dc("ngClass",a.Hc(2,Ki,e.isInBigView())),a.Jb(10),a.Dc("userId",e.user.id)}}const Wi=function(e){return{"col-5":e}};let Zi=(()=>{class e extends Lc{constructor(e,t,n,o,c,i,a,r,l,s,d){super(),this.serverService=e,this.formValidatorService=t,this.configService=n,this.screenService=o,this.auth=c,this.userValidatorsService=i,this.route=a,this.router=r,this.notifier=l,this.userService=s,this.i18n=d,this.buildQuotaOptions()}ngOnInit(){super.ngOnInit();const e={role:Mn.f.USER.toString(),videoQuota:"-1",videoQuotaDaily:"-1"};this.buildForm({username:this.userValidatorsService.USER_USERNAME,email:this.userValidatorsService.USER_EMAIL,password:this.isPasswordOptional()?this.userValidatorsService.USER_PASSWORD_OPTIONAL:this.userValidatorsService.USER_PASSWORD,role:this.userValidatorsService.USER_ROLE,videoQuota:this.userValidatorsService.USER_VIDEO_QUOTA,videoQuotaDaily:this.userValidatorsService.USER_VIDEO_QUOTA_DAILY,byPassAutoBlacklist:null},e)}formValidated(){this.error=void 0;const e=this.form.value;e.adminFlags=this.buildAdminFlags(this.form.value),e.videoQuota=parseInt(this.form.value.videoQuota,10),e.videoQuotaDaily=parseInt(this.form.value.videoQuotaDaily,10),this.userService.addUser(e).subscribe(()=>{this.notifier.success(this.i18n("User {{username}} created.",{username:e.username})),this.router.navigate(["/admin/users/list"])},e=>this.error=e.message)}isCreation(){return!0}isPasswordOptional(){return this.route.snapshot.data.serverConfig.email.enabled}getFormButtonTitle(){return this.i18n("Create user")}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.i),a.Xb(u.a),a.Xb(s),a.Xb(Fc.a),a.Xb(g.a),a.Xb(jc.a),a.Xb(O.a),a.Xb(O.h),a.Xb(g.f),a.Xb(i.j),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-user-create"]],features:[a.Gb],decls:52,vars:28,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/users"],[4,"ngIf"],["dashboard",""],["class","form-row",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"form-row","mt-4"],[1,"form-group","col-12","col-lg-4","col-xl-3"],["id","user",1,"anchor"],["class","account-title",4,"ngIf"],[1,"form-group","form-group-right","col-12","col-lg-8","col-xl-9",3,"ngClass"],["role","form",3,"formGroup","ngClass","ngSubmit"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","email"],["type","text","id","email","formControlName","email","autocomplete","off",1,"form-control",3,"ngClass",6,"placeholder"],["class","form-error",4,"ngIf"],["for","role"],[1,"peertube-select-container"],["id","role","formControlName","role",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","videoQuota"],["id","videoQuota","formControlName","videoQuota",1,"form-control"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","transcoding-information",4,"ngIf"],["for","videoQuotaDaily"],["id","videoQuotaDaily","formControlName","videoQuotaDaily",1,"form-control"],["inputName","byPassAutoBlacklist","formControlName","byPassAutoBlacklist",6,"labelText"],["type","submit",3,"value","disabled"],["class","col-7",4,"ngIf"],["class","form-row mt-4",4,"ngIf"],[1,"breadcrumb-item","active"],["aria-current","page",1,"breadcrumb-item","active"],[3,"routerLink",4,"ngIf"],[3,"routerLink"],["class","dashboard",4,"ngIf"],[1,"dashboard"],[1,"dashboard-num"],[1,"dashboard-label"],[3,"routerLink","queryParams"],[1,"form-row"],[1,"col-12","col-xl-3"],[1,"form-group-right","col-12","col-xl-9"],[4,"ngTemplateOutlet"],[1,"alert","alert-danger"],[1,"account-title"],[3,"actor"],["for","username"],["type","text","id","username","formControlName","username",1,"form-control",3,"ngClass",6,"placeholder"],[1,"form-error"],["for","password"],["type","password","id","password","autocomplete","new-password","formControlName","password",1,"form-control",3,"ngClass"],["ptTemplate","customHtml"],[3,"value"],[3,"value","disabled"],[1,"transcoding-information"],[1,"col-7"],["id","danger",1,"anchor"],[1,"danger-zone"],[1,"form-group","reset-password-email"],[3,"click"],[3,"userId"]],template:function(e,t){1&e&&(a.dc(0,"nav",0),a.dc(1,"ol",1),a.dc(2,"li",2),a.dc(3,"a",3),a.hc(4,Qc),a.cc(),a.cc(),a.ad(5,ci,3,0,"ng-container",4),a.ad(6,ri,5,1,"ng-container",4),a.cc(),a.cc(),a.ad(7,mi,1,1,"ng-template",null,5,a.bd),a.ad(9,Oi,4,1,"div",6),a.ad(10,Pi,2,1,"div",7),a.dc(11,"div",8),a.dc(12,"div",9),a.Yb(13,"div",10),a.ad(14,yi,2,0,"div",11),a.ad(15,wi,2,1,"div",11),a.cc(),a.dc(16,"div",12),a.dc(17,"form",13),a.sc("ngSubmit",(function(){return t.formValidated()})),a.ad(18,Ai,6,4,"div",14),a.dc(19,"div",15),a.dc(20,"label",16),a.hc(21,Kc),a.cc(),a.dc(22,"input",17),a.jc(23,qc),a.cc(),a.ad(24,Ii,2,1,"div",18),a.cc(),a.ad(25,Fi,6,5,"div",14),a.dc(26,"div",15),a.dc(27,"label",19),a.hc(28,Wc),a.cc(),a.dc(29,"div",20),a.dc(30,"select",21),a.ad(31,Ui,2,2,"option",22),a.cc(),a.cc(),a.ad(32,Vi,2,1,"div",18),a.cc(),a.dc(33,"div",15),a.dc(34,"label",23),a.hc(35,Zc),a.cc(),a.dc(36,"div",20),a.dc(37,"select",24),a.ad(38,Bi,2,3,"option",25),a.cc(),a.cc(),a.ad(39,Gi,5,4,"div",26),a.cc(),a.dc(40,"div",15),a.dc(41,"label",27),a.hc(42,ei),a.cc(),a.dc(43,"div",20),a.dc(44,"select",28),a.ad(45,Yi,2,3,"option",25),a.cc(),a.cc(),a.cc(),a.dc(46,"div",15),a.dc(47,"my-peertube-checkbox",29),a.jc(48,ti),a.cc(),a.cc(),a.Yb(49,"input",30),a.cc(),a.ad(50,Qi,2,1,"div",31),a.cc(),a.cc(),a.ad(51,qi,16,4,"div",32)),2&e&&(a.Jb(5),a.Dc("ngIf",t.isCreation()),a.Jb(1),a.Dc("ngIf",!t.isCreation()),a.Jb(3),a.Dc("ngIf",!t.isInBigView()),a.Jb(1),a.Dc("ngIf",t.error),a.Jb(4),a.Dc("ngIf",t.isCreation()),a.Jb(1),a.Dc("ngIf",!t.isCreation()&&t.user),a.Jb(1),a.Dc("ngClass",a.Hc(22,Ki,t.isInBigView())),a.Jb(1),a.Dc("formGroup",t.form)("ngClass",a.Hc(24,Wi,t.isInBigView())),a.Jb(1),a.Dc("ngIf",t.isCreation()),a.Jb(4),a.Dc("ngClass",a.Hc(26,Ti,t.formErrors.email)),a.Jb(2),a.Dc("ngIf",t.formErrors.email),a.Jb(1),a.Dc("ngIf",t.isCreation()),a.Jb(6),a.Dc("ngForOf",t.roles),a.Jb(1),a.Dc("ngIf",t.formErrors.role),a.Jb(6),a.Dc("ngForOf",t.videoQuotaOptions),a.Jb(1),a.Dc("ngIf",t.isTranscodingInformationDisplayed()),a.Jb(6),a.Dc("ngForOf",t.videoQuotaDailyOptions),a.Jb(4),a.Ec("value",t.getFormButtonTitle()),a.Dc("disabled",!t.form.valid),a.Jb(1),a.Dc("ngIf",t.isInBigView()),a.Jb(1),a.Dc("ngIf",!t.isCreation()&&t.user))},directives:[O.k,p.u,p.r,f.J,f.u,f.m,f.d,f.t,f.k,f.F,p.t,P.a,p.C,Uc.a,m.a,_.a,f.y,f.I,Xc],pipes:[Ko.b],styles:['label[_ngcontent-%COMP%]{font-weight:400;font-size:100%}.account-title[_ngcontent-%COMP%]{text-transform:uppercase;color:var(--mainColor);font-weight:700;font-size:110%;margin-bottom:10px}input[_ngcontent-%COMP%]:not([type=submit]){display:inline-block;height:30px;width:340px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;display:block}input[_ngcontent-%COMP%]:not([type=submit])::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit])::-moz-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit])::-ms-input-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit])::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:340px){input[_ngcontent-%COMP%]:not([type=submit]){width:100%}}.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:340px;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;font-size:15px}.peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}@media screen and (max-width:340px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:15px;content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid transparent;border-top-color:#000;margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 35px 0 12px;width:calc(100% + 2px);position:relative;left:1px;border:1px solid #c6c6c6;background:transparent none;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:30px;text-overflow:ellipsis;color:var(--mainForegroundColor)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}button[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer;margin-top:10px}button.focus-visible[_ngcontent-%COMP%], button[_ngcontent-%COMP%]:focus, input[type=submit].focus-visible[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}button[_ngcontent-%COMP%], button[_ngcontent-%COMP%]:active, button[_ngcontent-%COMP%]:focus, input[type=submit][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}button[_ngcontent-%COMP%]:hover, input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}button.disabled[_ngcontent-%COMP%], button[disabled][_ngcontent-%COMP%], input[type=submit].disabled[_ngcontent-%COMP%], input[type=submit][disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:#fff}button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:#fff}button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:#fff}.transcoding-information[_ngcontent-%COMP%]{margin-top:5px;font-size:11px}.danger-zone[_ngcontent-%COMP%]   .reset-password-email[_ngcontent-%COMP%]{margin-bottom:30px}.danger-zone[_ngcontent-%COMP%]   .reset-password-email[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin-top:0}.breadcrumb[_ngcontent-%COMP%]{flex-wrap:wrap;padding:.75rem 1rem;margin-bottom:1rem;list-style:none;background-color:var(--submenuColor);border-radius:.25rem}.breadcrumb[_ngcontent-%COMP%], .breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]{display:flex}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--mainColor)}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%] + .breadcrumb-item[_ngcontent-%COMP%]{padding-left:.5rem}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%] + .breadcrumb-item[_ngcontent-%COMP%]:before{display:inline-block;padding-right:.5rem;color:#6c757d;content:"/"}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item.active[_ngcontent-%COMP%]{color:#6c757d}.dashboard[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:0 -5px;max-width:900px}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{box-sizing:border-box;flex:0 0 33.33333333%;padding:0 5px;margin-bottom:10px}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none;color:inherit;display:block;font-size:18px}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:active, .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important;opacity:.8}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:20px;background:var(--submenuColor);border-radius:4px;box-sizing:border-box;height:100%}.dashboard[_ngcontent-%COMP%]   .dashboard-num[_ngcontent-%COMP%], .dashboard[_ngcontent-%COMP%]   .dashboard-text[_ngcontent-%COMP%]{text-align:center;font-size:130%;line-height:21px;color:var(--mainForegroundColor);line-height:30px;margin-bottom:20px}.dashboard[_ngcontent-%COMP%]   .dashboard-label[_ngcontent-%COMP%]{font-size:90%;color:var(--inputPlaceholderColor);text-align:center}my-actor-avatar-info[_ngcontent-%COMP%]     .actor-img-edit-container, my-actor-avatar-info[_ngcontent-%COMP%]     .actor-info-followers, my-actor-avatar-info[_ngcontent-%COMP%]     .actor-info-username{display:none}']}),e})();var ea,ta,na=n("SF7L");ea="\u4F7F\u7528\u8005",ta="\u96FB\u5B50\u90F5\u4EF6";const oa=["placeholder","mail@example.com"];var ca,ia,aa;ca="\u89D2\u8272",ia="\u5F71\u7247\u914D\u984D",aa="\u6BCF\u65E5\u5F71\u7247\u914D\u984D";const ra=["labelText","\u5F71\u7247\u516C\u958B\u524D\u7121\u9808\u5BE9\u6838"];var la,sa;function da(e,t){1&e&&(a.bc(0),a.dc(1,"li",33),a.hc(2,la),a.cc(),a.ac())}la="\u5EFA\u7ACB",sa="\u7DE8\u8F2F";const ga=function(e){return["/accounts",e]};function ua(e,t){if(1&e&&(a.dc(0,"a",36),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Dc("routerLink",a.Hc(2,ga,null==e.user?null:e.user.username)),a.Jb(1),a.dd(null==e.user?null:e.user.username)}}function ba(e,t){if(1&e&&(a.bc(0),a.dc(1,"li",33),a.hc(2,sa),a.cc(),a.dc(3,"li",34),a.ad(4,ua,2,4,"a",35),a.cc(),a.ac()),2&e){const e=a.wc();a.Jb(4),a.Dc("ngIf",e.user)}}var pa,fa,ha,ma,va,Ca;pa="{VAR_PLURAL, plural, =1 {\u5F71\u7247} other {\u5F71\u7247}}",pa=a.mc(pa,{VAR_PLURAL:"\ufffd0\ufffd"}),fa="{VAR_PLURAL, plural, =1 {\u983B\u9053} other {\u983B\u9053}}",fa=a.mc(fa,{VAR_PLURAL:"\ufffd0\ufffd"}),ha="{VAR_PLURAL, plural, =1 {\u8A02\u95B1\u8005} other {\u8A02\u95B1\u8005}}",ha=a.mc(ha,{VAR_PLURAL:"\ufffd0\ufffd"}),ma="\u5217\u5165\u56DE\u5831",va="\u63A5\u53D7\u64B0\u5BEB\u7684\u56DE\u5831",Ca="{VAR_PLURAL, plural, =1 {\u7559\u8A00} other {\u7559\u8A00}}",Ca=a.mc(Ca,{VAR_PLURAL:"\ufffd0\ufffd"});const Oa=function(){return["/admin/moderation/video-abuses/list"]},Pa=function(e){return{search:e}};function _a(e,t){if(1&e&&(a.dc(0,"div",38),a.dc(1,"div"),a.dc(2,"a"),a.dc(3,"div",39),a.cd(4),a.xc(5,"bytes"),a.cc(),a.dc(6,"div",40),a.hc(7,pa),a.cc(),a.cc(),a.cc(),a.dc(8,"div"),a.dc(9,"a"),a.dc(10,"div",39),a.cd(11),a.cc(),a.dc(12,"div",40),a.hc(13,fa),a.cc(),a.cc(),a.cc(),a.dc(14,"div"),a.dc(15,"a"),a.dc(16,"div",39),a.cd(17),a.cc(),a.dc(18,"div",40),a.hc(19,ha),a.cc(),a.cc(),a.cc(),a.dc(20,"div"),a.dc(21,"a",41),a.dc(22,"div",39),a.cd(23),a.cc(),a.dc(24,"div",40),a.hc(25,ma),a.cc(),a.cc(),a.cc(),a.dc(26,"div"),a.dc(27,"a",41),a.dc(28,"div",39),a.cd(29),a.cc(),a.dc(30,"div",40),a.hc(31,va),a.cc(),a.cc(),a.cc(),a.dc(32,"div"),a.dc(33,"a"),a.dc(34,"div",39),a.cd(35),a.cc(),a.dc(36,"div",40),a.hc(37,Ca),a.cc(),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc(2);a.Jb(4),a.fd("",e.user.videosCount," (",a.zc(5,16,e.user.videoQuotaUsed,0),")"),a.Jb(3),a.lc(e.user.videosCount),a.ic(7),a.Jb(4),a.dd(e.user.videoChannels.length||0),a.Jb(2),a.lc(e.user.videoChannels.length),a.ic(13),a.Jb(4),a.dd(e.subscribersCount),a.Jb(2),a.lc(e.subscribersCount),a.ic(19),a.Jb(2),a.Dc("routerLink",a.Gc(19,Oa))("queryParams",a.Hc(20,Pa,"reportee:"+(null==e.user?null:e.user.account.displayName))),a.Jb(2),a.dd(e.user.videoAbusesCount),a.Jb(4),a.Dc("routerLink",a.Gc(22,Oa))("queryParams",a.Hc(23,Pa,"reporter:"+(null==e.user?null:e.user.account.displayName)+" state:accepted")),a.Jb(2),a.fd("",e.user.videoAbusesAcceptedCount," / ",e.user.videoAbusesCreatedCount,""),a.Jb(6),a.dd(e.user.videoCommentsCount),a.Jb(2),a.lc(e.user.videoCommentsCount),a.ic(37)}}function Ma(e,t){if(1&e&&a.ad(0,_a,38,25,"div",37),2&e){const e=a.wc();a.Dc("ngIf",!e.isCreation()&&e.user)}}function ya(e,t){}function wa(e,t){1&e&&a.ad(0,ya,0,0,"ng-template")}function xa(e,t){if(1&e&&(a.dc(0,"div",42),a.Yb(1,"div",43),a.dc(2,"div",44),a.ad(3,wa,1,0,void 0,45),a.cc(),a.cc()),2&e){a.wc();const e=a.Pc(8);a.Jb(3),a.Dc("ngTemplateOutlet",e)}}function ka(e,t){if(1&e&&(a.dc(0,"div",46),a.cd(1),a.cc()),2&e){const e=a.wc();a.Jb(1),a.dd(e.error)}}var Ta,Aa;function Ia(e,t){1&e&&(a.dc(0,"div",47),a.hc(1,Ta),a.cc())}function Sa(e,t){if(1&e&&(a.dc(0,"div",47),a.Yb(1,"my-actor-avatar-info",48),a.cc()),2&e){const e=a.wc();a.Jb(1),a.Dc("actor",e.user.account)}}Ta="\u65B0\u4F7F\u7528\u8005",Aa="\u4F7F\u7528\u8005\u540D\u7A31";const Ra=["placeholder","john"];function Da(e,t){if(1&e&&(a.dc(0,"div",51),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.ed(" ",e.formErrors.username," ")}}const za=function(e){return{"input-error":e}};function Ea(e,t){if(1&e&&(a.dc(0,"div",15),a.dc(1,"label",49),a.hc(2,Aa),a.cc(),a.dc(3,"input",50),a.jc(4,Ra),a.cc(),a.ad(5,Da,2,1,"div",18),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngClass",a.Hc(2,za,e.formErrors.username)),a.Jb(2),a.Dc("ngIf",e.formErrors.username)}}function La(e,t){if(1&e&&(a.dc(0,"div",51),a.cd(1),a.cc()),2&e){const e=a.wc();a.Jb(1),a.ed(" ",e.formErrors.email," ")}}var $a,Ja,Na,ja,Fa,Ua,Va;function Ba(e,t){1&e&&(a.bc(0),a.hc(1,Ja),a.ac())}function Ga(e,t){1&e&&(a.dc(0,"my-help"),a.ad(1,Ba,2,0,"ng-template",54),a.cc())}function Ya(e,t){if(1&e&&(a.dc(0,"div",51),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.ed(" ",e.formErrors.password," ")}}function Ha(e,t){if(1&e&&(a.dc(0,"div",15),a.dc(1,"label",52),a.hc(2,$a),a.cc(),a.ad(3,Ga,2,0,"my-help",4),a.Yb(4,"input",53),a.ad(5,Ya,2,1,"div",18),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngIf",e.isPasswordOptional()),a.Jb(1),a.Dc("ngClass",a.Hc(3,za,e.formErrors.password)),a.Jb(1),a.Dc("ngIf",e.formErrors.password)}}function Xa(e,t){if(1&e&&(a.dc(0,"option",55),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.value),a.Jb(1),a.ed(" ",e.label," ")}}function Qa(e,t){if(1&e&&(a.dc(0,"div",51),a.cd(1),a.cc()),2&e){const e=a.wc();a.Jb(1),a.ed(" ",e.formErrors.role," ")}}function Ka(e,t){if(1&e&&(a.dc(0,"option",56),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.value)("disabled",e.disabled),a.Jb(1),a.ed(" ",e.label," ")}}function qa(e,t){if(1&e&&(a.dc(0,"div",57),a.nc(1,Na),a.Yb(2,"strong"),a.Yb(3,"br"),a.xc(4,"bytes"),a.kc(),a.cc()),2&e){const e=a.wc();a.Jb(4),a.lc(a.zc(4,1,e.computeQuotaWithTranscoding(),0)),a.ic(1)}}function Wa(e,t){if(1&e&&(a.dc(0,"option",56),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.value)("disabled",e.disabled),a.Jb(1),a.ed(" ",e.label," ")}}function Za(e,t){}function er(e,t){1&e&&a.ad(0,Za,0,0,"ng-template")}function tr(e,t){if(1&e&&(a.dc(0,"div",58),a.ad(1,er,1,0,void 0,45),a.cc()),2&e){a.wc();const e=a.Pc(8);a.Jb(1),a.Dc("ngTemplateOutlet",e)}}$a="\u5BC6\u78BC",Ja="\u5982\u679C\u60A8\u5C07\u5BC6\u78BC\u7559\u7A7A\uFF0C\u5C31\u6703\u50B3\u9001\u96FB\u5B50\u90F5\u4EF6\u7D66\u4F7F\u7528\u8005\u3002",Na="\u8F49\u63DB\u7DE8\u78BC\u5DF2\u555F\u7528\u3002\u5F71\u7247\u914D\u984D\u50C5\u8003\u616E" + "\ufffd#2\ufffd" + "\u539F\u59CB" + "\ufffd/#2\ufffd" + "\u5F71\u7247\u5927\u5C0F\u3002" + "\ufffd#3\ufffd\ufffd/#3\ufffd" + " \u6B64\u4F7F\u7528\u8005\u6700\u591A\u53EA\u80FD\u4E0A\u50B3 ~ " + "\ufffd0\ufffd" + "\u3002 ",ja="\u5371\u96AA\u5340",Fa="\u900F\u904E\u96FB\u5B50\u90F5\u4EF6\u50B3\u9001\u91CD\u8A2D\u5BC6\u78BC\u9023\u7D50\u7D66\u4F7F\u7528\u8005",Ua="\u8981\u6C42\u65B0\u5BC6\u78BC",Va="\u624B\u52D5\u8A2D\u5B9A\u4F7F\u7528\u8005\u5BC6\u78BC";const nr=function(e){return{"form-row":e}};function or(e,t){if(1&e){const e=a.ec();a.dc(0,"div",8),a.dc(1,"div",9),a.Yb(2,"div",59),a.dc(3,"div",47),a.hc(4,ja),a.cc(),a.cc(),a.dc(5,"div",12),a.dc(6,"div",60),a.dc(7,"div",61),a.dc(8,"label"),a.hc(9,Fa),a.cc(),a.dc(10,"button",62),a.sc("click",(function(){return a.Rc(e),a.wc().resetPassword()})),a.hc(11,Ua),a.cc(),a.cc(),a.dc(12,"div",15),a.dc(13,"label"),a.hc(14,Va),a.cc(),a.Yb(15,"my-user-password",63),a.cc(),a.cc(),a.cc(),a.cc()}if(2&e){const e=a.wc();a.Jb(5),a.Dc("ngClass",a.Hc(2,nr,e.isInBigView())),a.Jb(10),a.Dc("userId",e.user.id)}}const cr=function(e){return{"col-5":e}};let ir=(()=>{class e extends Lc{constructor(e,t,n,o,c,i,a,r,l,s,d){super(),this.formValidatorService=e,this.serverService=t,this.configService=n,this.screenService=o,this.auth=c,this.userValidatorsService=i,this.route=a,this.router=r,this.notifier=l,this.userService=s,this.i18n=d,this.buildQuotaOptions()}ngOnInit(){super.ngOnInit();const e={role:Mn.f.USER.toString(),videoQuota:"-1",videoQuotaDaily:"-1"};this.buildForm({email:this.userValidatorsService.USER_EMAIL,role:this.userValidatorsService.USER_ROLE,videoQuota:this.userValidatorsService.USER_VIDEO_QUOTA,videoQuotaDaily:this.userValidatorsService.USER_VIDEO_QUOTA_DAILY,byPassAutoBlacklist:null},e),this.paramsSub=this.route.params.subscribe(e=>{this.userService.getUser(e.id,!0).subscribe(e=>this.onUserFetched(e),e=>this.error=e.message)})}ngOnDestroy(){this.paramsSub.unsubscribe()}formValidated(){this.error=void 0;const e=this.form.value;e.adminFlags=this.buildAdminFlags(this.form.value),e.videoQuota=parseInt(this.form.value.videoQuota,10),e.videoQuotaDaily=parseInt(this.form.value.videoQuotaDaily,10),this.userService.updateUser(this.user.id,e).subscribe(()=>{this.notifier.success(this.i18n("User {{username}} updated.",{username:this.user.username})),this.router.navigate(["/admin/users/list"])},e=>this.error=e.message)}isCreation(){return!1}isPasswordOptional(){return!1}getFormButtonTitle(){return this.i18n("Update user")}resetPassword(){this.userService.askResetPassword(this.user.email).subscribe(()=>{this.notifier.success(this.i18n("An email asking for password reset has been sent to {{username}}.",{username:this.user.username}))},e=>this.error=e.message)}onUserFetched(e){this.user=new na.a(e),this.form.patchValue({email:e.email,role:e.role.toString(),videoQuota:e.videoQuota,videoQuotaDaily:e.videoQuotaDaily,byPassAutoBlacklist:e.adminFlags&Ec.BY_PASS_VIDEO_AUTO_BLACKLIST})}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(u.a),a.Xb(g.i),a.Xb(s),a.Xb(Fc.a),a.Xb(g.a),a.Xb(jc.a),a.Xb(O.a),a.Xb(O.h),a.Xb(g.f),a.Xb(i.j),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-user-update"]],features:[a.Gb],decls:52,vars:28,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/users"],[4,"ngIf"],["dashboard",""],["class","form-row",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"form-row","mt-4"],[1,"form-group","col-12","col-lg-4","col-xl-3"],["id","user",1,"anchor"],["class","account-title",4,"ngIf"],[1,"form-group","form-group-right","col-12","col-lg-8","col-xl-9",3,"ngClass"],["role","form",3,"formGroup","ngClass","ngSubmit"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","email"],["type","text","id","email","formControlName","email","autocomplete","off",1,"form-control",3,"ngClass",6,"placeholder"],["class","form-error",4,"ngIf"],["for","role"],[1,"peertube-select-container"],["id","role","formControlName","role",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","videoQuota"],["id","videoQuota","formControlName","videoQuota",1,"form-control"],[3,"value","disabled",4,"ngFor","ngForOf"],["class","transcoding-information",4,"ngIf"],["for","videoQuotaDaily"],["id","videoQuotaDaily","formControlName","videoQuotaDaily",1,"form-control"],["inputName","byPassAutoBlacklist","formControlName","byPassAutoBlacklist",6,"labelText"],["type","submit",3,"value","disabled"],["class","col-7",4,"ngIf"],["class","form-row mt-4",4,"ngIf"],[1,"breadcrumb-item","active"],["aria-current","page",1,"breadcrumb-item","active"],[3,"routerLink",4,"ngIf"],[3,"routerLink"],["class","dashboard",4,"ngIf"],[1,"dashboard"],[1,"dashboard-num"],[1,"dashboard-label"],[3,"routerLink","queryParams"],[1,"form-row"],[1,"col-12","col-xl-3"],[1,"form-group-right","col-12","col-xl-9"],[4,"ngTemplateOutlet"],[1,"alert","alert-danger"],[1,"account-title"],[3,"actor"],["for","username"],["type","text","id","username","formControlName","username",1,"form-control",3,"ngClass",6,"placeholder"],[1,"form-error"],["for","password"],["type","password","id","password","autocomplete","new-password","formControlName","password",1,"form-control",3,"ngClass"],["ptTemplate","customHtml"],[3,"value"],[3,"value","disabled"],[1,"transcoding-information"],[1,"col-7"],["id","danger",1,"anchor"],[1,"danger-zone"],[1,"form-group","reset-password-email"],[3,"click"],[3,"userId"]],template:function(e,t){1&e&&(a.dc(0,"nav",0),a.dc(1,"ol",1),a.dc(2,"li",2),a.dc(3,"a",3),a.hc(4,ea),a.cc(),a.cc(),a.ad(5,da,3,0,"ng-container",4),a.ad(6,ba,5,1,"ng-container",4),a.cc(),a.cc(),a.ad(7,Ma,1,1,"ng-template",null,5,a.bd),a.ad(9,xa,4,1,"div",6),a.ad(10,ka,2,1,"div",7),a.dc(11,"div",8),a.dc(12,"div",9),a.Yb(13,"div",10),a.ad(14,Ia,2,0,"div",11),a.ad(15,Sa,2,1,"div",11),a.cc(),a.dc(16,"div",12),a.dc(17,"form",13),a.sc("ngSubmit",(function(){return t.formValidated()})),a.ad(18,Ea,6,4,"div",14),a.dc(19,"div",15),a.dc(20,"label",16),a.hc(21,ta),a.cc(),a.dc(22,"input",17),a.jc(23,oa),a.cc(),a.ad(24,La,2,1,"div",18),a.cc(),a.ad(25,Ha,6,5,"div",14),a.dc(26,"div",15),a.dc(27,"label",19),a.hc(28,ca),a.cc(),a.dc(29,"div",20),a.dc(30,"select",21),a.ad(31,Xa,2,2,"option",22),a.cc(),a.cc(),a.ad(32,Qa,2,1,"div",18),a.cc(),a.dc(33,"div",15),a.dc(34,"label",23),a.hc(35,ia),a.cc(),a.dc(36,"div",20),a.dc(37,"select",24),a.ad(38,Ka,2,3,"option",25),a.cc(),a.cc(),a.ad(39,qa,5,4,"div",26),a.cc(),a.dc(40,"div",15),a.dc(41,"label",27),a.hc(42,aa),a.cc(),a.dc(43,"div",20),a.dc(44,"select",28),a.ad(45,Wa,2,3,"option",25),a.cc(),a.cc(),a.cc(),a.dc(46,"div",15),a.dc(47,"my-peertube-checkbox",29),a.jc(48,ra),a.cc(),a.cc(),a.Yb(49,"input",30),a.cc(),a.ad(50,tr,2,1,"div",31),a.cc(),a.cc(),a.ad(51,or,16,4,"div",32)),2&e&&(a.Jb(5),a.Dc("ngIf",t.isCreation()),a.Jb(1),a.Dc("ngIf",!t.isCreation()),a.Jb(3),a.Dc("ngIf",!t.isInBigView()),a.Jb(1),a.Dc("ngIf",t.error),a.Jb(4),a.Dc("ngIf",t.isCreation()),a.Jb(1),a.Dc("ngIf",!t.isCreation()&&t.user),a.Jb(1),a.Dc("ngClass",a.Hc(22,nr,t.isInBigView())),a.Jb(1),a.Dc("formGroup",t.form)("ngClass",a.Hc(24,cr,t.isInBigView())),a.Jb(1),a.Dc("ngIf",t.isCreation()),a.Jb(4),a.Dc("ngClass",a.Hc(26,za,t.formErrors.email)),a.Jb(2),a.Dc("ngIf",t.formErrors.email),a.Jb(1),a.Dc("ngIf",t.isCreation()),a.Jb(6),a.Dc("ngForOf",t.roles),a.Jb(1),a.Dc("ngIf",t.formErrors.role),a.Jb(6),a.Dc("ngForOf",t.videoQuotaOptions),a.Jb(1),a.Dc("ngIf",t.isTranscodingInformationDisplayed()),a.Jb(6),a.Dc("ngForOf",t.videoQuotaDailyOptions),a.Jb(4),a.Ec("value",t.getFormButtonTitle()),a.Dc("disabled",!t.form.valid),a.Jb(1),a.Dc("ngIf",t.isInBigView()),a.Jb(1),a.Dc("ngIf",!t.isCreation()&&t.user))},directives:[O.k,p.u,p.r,f.J,f.u,f.m,f.d,f.t,f.k,f.F,p.t,P.a,p.C,Uc.a,m.a,_.a,f.y,f.I,Xc],pipes:[Ko.b],styles:['label[_ngcontent-%COMP%]{font-weight:400;font-size:100%}.account-title[_ngcontent-%COMP%]{text-transform:uppercase;color:var(--mainColor);font-weight:700;font-size:110%;margin-bottom:10px}input[_ngcontent-%COMP%]:not([type=submit]){display:inline-block;height:30px;width:340px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;display:block}input[_ngcontent-%COMP%]:not([type=submit])::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit])::-moz-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit])::-ms-input-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit])::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:340px){input[_ngcontent-%COMP%]:not([type=submit]){width:100%}}.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:340px;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;font-size:15px}.peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}@media screen and (max-width:340px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:15px;content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid transparent;border-top-color:#000;margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 35px 0 12px;width:calc(100% + 2px);position:relative;left:1px;border:1px solid #c6c6c6;background:transparent none;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:30px;text-overflow:ellipsis;color:var(--mainForegroundColor)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}button[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer;margin-top:10px}button.focus-visible[_ngcontent-%COMP%], button[_ngcontent-%COMP%]:focus, input[type=submit].focus-visible[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}button[_ngcontent-%COMP%], button[_ngcontent-%COMP%]:active, button[_ngcontent-%COMP%]:focus, input[type=submit][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}button[_ngcontent-%COMP%]:hover, input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}button.disabled[_ngcontent-%COMP%], button[disabled][_ngcontent-%COMP%], input[type=submit].disabled[_ngcontent-%COMP%], input[type=submit][disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:#fff}button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:#fff}button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:#fff}.transcoding-information[_ngcontent-%COMP%]{margin-top:5px;font-size:11px}.danger-zone[_ngcontent-%COMP%]   .reset-password-email[_ngcontent-%COMP%]{margin-bottom:30px}.danger-zone[_ngcontent-%COMP%]   .reset-password-email[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin-top:0}.breadcrumb[_ngcontent-%COMP%]{flex-wrap:wrap;padding:.75rem 1rem;margin-bottom:1rem;list-style:none;background-color:var(--submenuColor);border-radius:.25rem}.breadcrumb[_ngcontent-%COMP%], .breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]{display:flex}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--mainColor)}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%] + .breadcrumb-item[_ngcontent-%COMP%]{padding-left:.5rem}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item[_ngcontent-%COMP%] + .breadcrumb-item[_ngcontent-%COMP%]:before{display:inline-block;padding-right:.5rem;color:#6c757d;content:"/"}.breadcrumb[_ngcontent-%COMP%]   .breadcrumb-item.active[_ngcontent-%COMP%]{color:#6c757d}.dashboard[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:0 -5px;max-width:900px}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{box-sizing:border-box;flex:0 0 33.33333333%;padding:0 5px;margin-bottom:10px}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none;color:inherit;display:block;font-size:18px}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:active, .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important;opacity:.8}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:20px;background:var(--submenuColor);border-radius:4px;box-sizing:border-box;height:100%}.dashboard[_ngcontent-%COMP%]   .dashboard-num[_ngcontent-%COMP%], .dashboard[_ngcontent-%COMP%]   .dashboard-text[_ngcontent-%COMP%]{text-align:center;font-size:130%;line-height:21px;color:var(--mainForegroundColor);line-height:30px;margin-bottom:20px}.dashboard[_ngcontent-%COMP%]   .dashboard-label[_ngcontent-%COMP%]{font-size:90%;color:var(--inputPlaceholderColor);text-align:center}my-actor-avatar-info[_ngcontent-%COMP%]     .actor-img-edit-container, my-actor-avatar-info[_ngcontent-%COMP%]     .actor-info-followers, my-actor-avatar-info[_ngcontent-%COMP%]     .actor-info-username{display:none}']}),e})();var ar=n("92VT"),rr=n("wJRF"),lr=n("eEm8"),sr=n("lKr9"),dr=function(e,t,n,o){return new(n||(n=Promise))((function(c,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function r(e){try{l(o.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}))};const gr=["userBanModal"];var ur,br;ur="\u4F7F\u7528\u8005\u6E05\u55AE",br="\u5EFA\u7ACB\u4F7F\u7528\u8005";const pr=["currentPageReportTemplate","\u6B63\u5728\u986F\u793A " + "\ufffd0\ufffd" + " \u5230 " + "\ufffd1\ufffd" + " \u7684 " + "\ufffd2\ufffd" + " \u4F7F\u7528\u8005"],fr=["placeholder","\u904E\u6FFE\u5668\u2026\u2026"];var hr;hr="\u6E05\u9664\u904E\u6FFE\u5668";const mr=["label","\u6279\u6B21\u52D5\u4F5C"];function vr(e,t){if(1&e&&(a.dc(0,"my-action-dropdown",17),a.jc(1,mr),a.cc()),2&e){const e=a.wc(2);a.Dc("actions",e.bulkUserActions)("entry",e.selectedUsers)}}function Cr(e,t){if(1&e){const e=a.ec();a.dc(0,"div",11),a.dc(1,"div"),a.ad(2,vr,2,2,"my-action-dropdown",12),a.cc(),a.dc(3,"div",13),a.dc(4,"input",14),a.jc(5,fr),a.sc("keyup",(function(t){return a.Rc(e),a.wc().onSearch(t)})),a.cc(),a.dc(6,"a",15),a.sc("click",(function(){return a.Rc(e),a.wc().resetSearch()})),a.cc(),a.dc(7,"span",16),a.hc(8,hr),a.cc(),a.cc(),a.cc()}if(2&e){const e=a.wc();a.Jb(2),a.Dc("ngIf",e.isInSelectionMode())}}var Or,Pr,_r,Mr,yr,wr;function xr(e,t){1&e&&(a.dc(0,"tr"),a.dc(1,"th",18),a.Yb(2,"p-tableHeaderCheckbox"),a.cc(),a.Yb(3,"th",18),a.dc(4,"th",19),a.nc(5,Or),a.Yb(6,"p-sortIcon",20),a.kc(),a.cc(),a.dc(7,"th"),a.hc(8,Pr),a.cc(),a.dc(9,"th",21),a.nc(10,_r),a.Yb(11,"p-sortIcon",22),a.kc(),a.cc(),a.dc(12,"th",23),a.hc(13,Mr),a.cc(),a.dc(14,"th",24),a.hc(15,yr),a.cc(),a.dc(16,"th",25),a.nc(17,wr),a.Yb(18,"p-sortIcon",26),a.kc(),a.cc(),a.Yb(19,"th",27),a.cc())}Or="\u4F7F\u7528\u8005\u540D\u7A31 " + "\ufffd#6\ufffd" + "" + "\ufffd/#6\ufffd" + "",Pr="\u96FB\u5B50\u90F5\u4EF6",_r="\u5F71\u7247\u914D\u984D " + "\ufffd#11\ufffd" + "" + "\ufffd/#11\ufffd" + "",Mr="\u89D2\u8272",yr="\u8EAB\u4EFD\u9A57\u8B49\u5916\u639B\u7A0B\u5F0F",wr="" + "\ufffd#18\ufffd" + "" + "\ufffd/#18\ufffd" + " \u5EFA\u7ACB";const kr=["title","\u5728\u65B0\u5206\u9801\u4E2D\u958B\u555F\u5E33\u865F"];function Tr(e,t){if(1&e&&(a.dc(0,"span",43),a.Yb(1,"i",44),a.cc()),2&e){const e=a.wc(),t=e.expanded;a.Dc("pRowToggler",e.$implicit),a.Jb(1),a.Dc("ngClass",t?"glyphicon glyphicon-menu-down":"glyphicon glyphicon-menu-right")}}var Ar;function Ir(e,t){1&e&&(a.dc(0,"span",45),a.hc(1,Ar),a.cc())}function Sr(e,t){if(1&e&&(a.dc(0,"td",40),a.cd(1),a.cc()),2&e){const e=a.wc().$implicit;a.Dc("title",e.email),a.Jb(1),a.dd(e.email)}}Ar="\uFF08\u5DF2\u963B\u64CB\uFF09";const Rr=["title","\u4F7F\u7528\u8005\u7684\u96FB\u5B50\u90F5\u4EF6\u5FC5\u9808\u9A57\u8B49\u904E\u624D\u80FD\u767B\u5165"];function Dr(e,t){if(1&e&&(a.dc(0,"td",48),a.jc(1,Rr),a.dc(2,"em"),a.cd(3),a.cc(),a.cc()),2&e){const e=a.wc(2).$implicit;a.Jb(3),a.ed("? ",e.email,"")}}const zr=["title","\u4F7F\u7528\u8005\u7684\u96FB\u5B50\u90F5\u4EF6\u5DF2\u9A57\u8B49\uFF0F\u4F7F\u7528\u8005\u53EF\u4EE5\u4E0D\u900F\u904E\u96FB\u5B50\u90F5\u4EF6\u9A57\u8B49\u767B\u5165"];function Er(e,t){if(1&e&&(a.dc(0,"td",48),a.jc(1,zr),a.cd(2),a.cc()),2&e){const e=a.wc(2).$implicit;a.Jb(2),a.ed(" \u2713 ",e.email," ")}}function Lr(e,t){if(1&e&&(a.ad(0,Dr,4,1,"td",46),a.ad(1,Er,3,1,"ng-template",null,47,a.bd)),2&e){const e=a.Pc(2),t=a.wc().$implicit;a.Dc("ngIf",!1===t.emailVerified)("ngIfElse",e)}}function $r(e,t){if(1&e&&(a.bc(0),a.cd(1),a.ac()),2&e){const e=a.wc().$implicit;a.Jb(1),a.dd(e.pluginAuth)}}function Jr(e,t){if(1&e){const e=a.ec();a.dc(0,"my-user-moderation-dropdown",49),a.sc("userChanged",(function(){return a.Rc(e),a.wc(2).onUserChanged()}))("userDeleted",(function(){return a.Rc(e),a.wc(2).onUserChanged()})),a.cc()}if(2&e){const e=a.wc().$implicit;a.Dc("user",e)}}const Nr=function(e){return{banned:e}},jr=function(e){return[e]};function Fr(e,t){if(1&e){const e=a.ec();a.dc(0,"tr",28),a.dc(1,"td"),a.Yb(2,"p-tableCheckbox",29),a.cc(),a.dc(3,"td",30),a.ad(4,Tr,2,2,"span",31),a.cc(),a.dc(5,"td"),a.dc(6,"a",32),a.jc(7,kr),a.dc(8,"div",33),a.dc(9,"img",34),a.sc("error",(function(t){return a.Rc(e),a.wc().switchToDefaultAvatar(t)})),a.cc(),a.dc(10,"div"),a.cd(11),a.dc(12,"span",35),a.cd(13),a.cc(),a.cc(),a.cc(),a.ad(14,Ir,2,0,"span",36),a.cc(),a.cc(),a.ad(15,Sr,2,2,"td",37),a.ad(16,Lr,3,2,"ng-template",null,38,a.bd),a.dc(18,"td"),a.cd(19),a.cc(),a.dc(20,"td"),a.cd(21),a.cc(),a.dc(22,"td"),a.ad(23,$r,2,1,"ng-container",39),a.cc(),a.dc(24,"td",40),a.cd(25),a.xc(26,"date"),a.cc(),a.dc(27,"td",41),a.ad(28,Jr,1,1,"my-user-moderation-dropdown",42),a.cc(),a.cc()}if(2&e){const e=t.$implicit,n=a.Pc(17),o=a.wc();a.Dc("pSelectableRow",e)("ngClass",a.Hc(21,Nr,e.blocked)),a.Jb(2),a.Dc("value",e),a.Jb(2),a.Dc("ngIf",e.blockedReason),a.Jb(2),a.Dc("routerLink",a.Hc(23,jr,"/accounts/"+e.username)),a.Jb(3),a.Dc("src",null==e||null==e.account||null==e.account.avatar?null:e.account.avatar.path,a.Tc),a.Jb(2),a.ed(" ",e.account.displayName," "),a.Jb(2),a.dd(e.username),a.Jb(1),a.Dc("ngIf",e.blocked),a.Jb(1),a.Dc("ngIf",!o.requiresEmailVerification||e.blocked)("ngIfElse",n),a.Jb(4),a.fd("",e.videoQuotaUsed," / ",e.videoQuota,""),a.Jb(2),a.dd(e.roleLabel),a.Jb(2),a.Dc("ngIf",e.pluginAuth),a.Jb(1),a.Dc("title",e.createdAt),a.Jb(1),a.dd(a.zc(26,18,e.createdAt,"short")),a.Jb(3),a.Dc("ngIf",!o.isInSelectionMode())}}var Ur;function Vr(e,t){if(1&e&&(a.dc(0,"tr",50),a.dc(1,"td",51),a.dc(2,"span",52),a.hc(3,Ur),a.cc(),a.cd(4),a.cc(),a.cc()),2&e){const e=t.$implicit;a.Jb(4),a.ed(" ",e.blockedReason," ")}}Ur="\u963B\u64CB\u7406\u7531\uFF1A";let Br=(()=>{class e extends i.g{constructor(e,t,n,o,c,i){super(),this.notifier=e,this.confirmService=t,this.serverService=n,this.userService=o,this.auth=c,this.i18n=i,this.users=[],this.totalRecords=0,this.sort={field:"createdAt",order:1},this.pagination={count:this.rowsPerPage,start:0},this.selectedUsers=[],this.bulkUserActions=[]}get authUser(){return this.auth.getUser()}get requiresEmailVerification(){return this.serverConfig.signup.requiresEmailVerification}ngOnInit(){this.serverConfig=this.serverService.getTmpConfig(),this.serverService.getConfig().subscribe(e=>this.serverConfig=e),this.initialize(),this.bulkUserActions=[[{label:this.i18n("Delete"),description:this.i18n("Videos will be deleted, comments will be tombstoned."),handler:e=>this.removeUsers(e),isDisplayed:e=>e.every(e=>this.authUser.canManage(e))},{label:this.i18n("Ban"),description:this.i18n("User won't be able to login anymore, but videos and comments will be kept as is."),handler:e=>this.openBanUserModal(e),isDisplayed:e=>e.every(e=>this.authUser.canManage(e)&&!1===e.blocked)},{label:this.i18n("Unban"),handler:e=>this.unbanUsers(e),isDisplayed:e=>e.every(e=>this.authUser.canManage(e)&&!0===e.blocked)}],[{label:this.i18n("Set Email as Verified"),handler:e=>this.setEmailsAsVerified(e),isDisplayed:e=>this.requiresEmailVerification&&e.every(e=>this.authUser.canManage(e)&&!e.blocked&&!1===e.emailVerified)}]]}getIdentifier(){return"UserListComponent"}openBanUserModal(e){for(const t of e)if("root"===t.username)return void this.notifier.error(this.i18n("You cannot ban root."));this.userBanModal.openModal(e)}onUserChanged(){this.loadData()}switchToDefaultAvatar(e){e.target.src=rr.a.GET_DEFAULT_AVATAR_URL()}unbanUsers(e){return dr(this,void 0,void 0,(function*(){const t=this.i18n("Do you really want to unban {{num}} users?",{num:e.length});!1!==(yield this.confirmService.confirm(t,this.i18n("Unban")))&&this.userService.unbanUsers(e).subscribe(()=>{const t=this.i18n("{{num}} users unbanned.",{num:e.length});this.notifier.success(t),this.loadData()},e=>this.notifier.error(e.message))}))}removeUsers(e){return dr(this,void 0,void 0,(function*(){for(const n of e)if("root"===n.username)return void this.notifier.error(this.i18n("You cannot delete root."));const t=this.i18n("If you remove these users, you will not be able to create others with the same username!");!1!==(yield this.confirmService.confirm(t,this.i18n("Delete")))&&this.userService.removeUser(e).subscribe(()=>{this.notifier.success(this.i18n("{{num}} users deleted.",{num:e.length})),this.loadData()},e=>this.notifier.error(e.message))}))}setEmailsAsVerified(e){return dr(this,void 0,void 0,(function*(){this.userService.updateUsers(e,{emailVerified:!0}).subscribe(()=>{this.notifier.success(this.i18n("{{num}} users email set as verified.",{num:e.length})),this.loadData()},e=>this.notifier.error(e.message))}))}isInSelectionMode(){return 0!==this.selectedUsers.length}loadData(){this.selectedUsers=[],this.userService.getUsers(this.pagination,this.sort,this.search).subscribe(e=>{this.users=e.data,this.totalRecords=e.total},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.f),a.Xb(g.c),a.Xb(g.i),a.Xb(i.j),a.Xb(g.a),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-user-list"]],viewQuery:function(e,t){var n;1&e&&a.Xc(gr,!0),2&e&&a.Oc(n=a.tc())&&(t.userBanModal=n.first)},features:[a.Gb],decls:15,vars:15,consts:[[1,"admin-sub-header"],[1,"form-sub-title"],["routerLink","/admin/users/create",1,"add-button"],["iconName","add"],["dataKey","id",3,"value","lazy","paginator","totalRecords","rows","rowsPerPageOptions","sortField","sortOrder","resizableColumns","selection","showCurrentPageReport","expandedRowKeys","onLazyLoad","selectionChange","onPage",6,"currentPageReportTemplate"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[3,"userBanned"],["userBanModal",""],[1,"caption"],["theme","orange",3,"actions","entry",4,"ngIf",6,"label"],[1,"has-feedback","has-clear"],["type","text","name","table-filter","id","table-filter",3,"keyup",6,"placeholder"],[1,"glyphicon","glyphicon-remove-sign","form-control-feedback","form-control-clear",3,"click"],[1,"sr-only"],["theme","orange",3,"actions","entry",6,"label"],[2,"width","40px"],["pResizableColumn","","pSortableColumn","username"],["field","username"],["pSortableColumn","videoQuotaUsed",2,"width","140px"],["field","videoQuotaUsed"],[2,"width","120px"],["pResizableColumn","",2,"width","140px"],["pSortableColumn","createdAt",2,"width","150px"],["field","createdAt"],[2,"width","50px"],[3,"pSelectableRow","ngClass"],[3,"value"],[1,"expand-cell"],["class","expander",3,"pRowToggler",4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"routerLink",6,"title"],[1,"chip","two-lines"],["alt","Avatar",1,"avatar",3,"src","error"],[1,"text-muted"],["class","banned-info",4,"ngIf"],[3,"title",4,"ngIf","ngIfElse"],["emailWithVerificationStatus",""],[4,"ngIf"],[3,"title"],[1,"action-cell"],["container","body",3,"user","userChanged","userDeleted",4,"ngIf"],[1,"expander",3,"pRowToggler"],[3,"ngClass"],[1,"banned-info"],[4,"ngIf","ngIfElse",6,"title"],["emailVerifiedNotFalse",""],[6,"title"],["container","body",3,"user","userChanged","userDeleted"],[1,"user-blocked-reason"],["colspan","7"],[1,"ban-reason-label"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.hc(2,ur),a.cc(),a.dc(3,"a",2),a.Yb(4,"my-global-icon",3),a.bc(5),a.hc(6,br),a.ac(),a.cc(),a.cc(),a.dc(7,"p-table",4),a.jc(8,pr),a.sc("onLazyLoad",(function(e){return t.loadLazy(e)}))("selectionChange",(function(e){return t.selectedUsers=e}))("onPage",(function(e){return t.onPage(e)})),a.ad(9,Cr,9,1,"ng-template",5),a.ad(10,xr,20,0,"ng-template",6),a.ad(11,Fr,29,25,"ng-template",7),a.ad(12,Vr,5,1,"ng-template",8),a.cc(),a.dc(13,"my-user-ban-modal",9,10),a.sc("userBanned",(function(){return t.onUserChanged()})),a.cc()),2&e&&(a.Jb(7),a.lc("{first}")("{last}")("{totalRecords}"),a.ic(8),a.Dc("value",t.users)("lazy",!0)("paginator",t.totalRecords>0)("totalRecords",t.totalRecords)("rows",t.rowsPerPage)("rowsPerPageOptions",t.rowsPerPageOptions)("sortField",t.sort.field)("sortOrder",t.sort.order)("resizableColumns",!0)("selection",t.selectedUsers)("showCurrentPageReport",!0)("expandedRowKeys",t.expandedRows))},directives:[O.k,ro.a,Pn.q,An.d,ar.a,p.u,lr.a,Pn.s,Pn.j,Pn.p,Pn.o,Pn.m,p.r,Pn.r,Pn.k,sr.a],pipes:[p.f],styles:['.add-button[_ngcontent-%COMP%]{display:inline-block;border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.add-button[_ngcontent-%COMP%]:active, .add-button[_ngcontent-%COMP%]:focus, .add-button[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.add-button.focus-visible[_ngcontent-%COMP%], .add-button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.add-button[_ngcontent-%COMP%], .add-button[_ngcontent-%COMP%]:active, .add-button[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.add-button[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.add-button.disabled[_ngcontent-%COMP%], .add-button[disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}.add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], .add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], .add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], .add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], .add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:#fff}.add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], .add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], .add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], .add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], .add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:#fff}.add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:#fff}.add-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;width:20px;margin-right:5px;top:-1px}tr.banned[_ngcontent-%COMP%]{color:red}.banned-info[_ngcontent-%COMP%]{font-style:italic}.ban-reason-label[_ngcontent-%COMP%]{font-weight:600}.caption[_ngcontent-%COMP%]{justify-content:space-between}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:250px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:250px){.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}p-tableCheckbox[_ngcontent-%COMP%]{position:relative;top:-2.5px}.chip[_ngcontent-%COMP%]{align-items:center;border-radius:5rem;display:inline-flex;font-size:90%;color:var(--mainForegroundColor);line-height:1rem;margin:.1rem;max-width:320px;overflow:hidden;padding:.2rem .4rem;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}.chip[_ngcontent-%COMP%], .chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:1.2rem;vertical-align:middle}.chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-left:-.4rem;margin-right:.2rem;width:1.2rem;border-radius:50%;display:inline-block;line-height:1.25;position:relative}.chip.two-lines[_ngcontent-%COMP%]{height:2rem}.chip.two-lines[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:2rem;width:2rem}.chip.two-lines[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:2rem;margin-left:.1rem;margin-right:.1rem;justify-content:center}']}),e})(),Gr=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Rb({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&a.Yb(0,"router-outlet")},directives:[O.m],encapsulation:2}),e})();var Yr=n("trhE");const Hr=[{path:"users",component:Gr,canActivate:[g.l],data:{userRight:Mn.e.MANAGE_USERS},children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:Br,data:{meta:{title:"Users list"}}},{path:"create",component:Zi,data:{meta:{title:"Create a user"}},resolve:{serverConfig:Yr.a}},{path:"update/:id",component:ir,data:{meta:{title:"Update a user"}}}]}];var Xr=n("joIj");const Qr=["modal"];var Kr,qr;Kr="\u7BA1\u7406\u8A55\u8AD6",qr="\n        \u6B64\u8A55\u8AD6\u53EA\u80FD\u88AB\u60A8\u6216\u5176\u4ED6\u7248\u4E3B\u770B\u898B\u3002\n      ";const Wr=["value","\u53D6\u6D88"],Zr=["value","\u66F4\u65B0\u6B64\u8A55\u8AD6"];function el(e,t){if(1&e&&(a.dc(0,"div",12),a.cd(1),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.ed(" ",e.formErrors.moderationComment," ")}}const tl=function(e){return{"input-error":e}};function nl(e,t){if(1&e){const e=a.ec();a.dc(0,"div",1),a.dc(1,"h4",2),a.hc(2,Kr),a.cc(),a.dc(3,"my-global-icon",3),a.sc("click",(function(){return a.Rc(e),a.wc().hide()})),a.cc(),a.cc(),a.dc(4,"div",4),a.dc(5,"form",5),a.sc("ngSubmit",(function(){return a.Rc(e),a.wc().banUser()})),a.dc(6,"div",6),a.dc(7,"textarea",7),a.cd(8,"        "),a.cc(),a.ad(9,el,2,1,"div",8),a.cc(),a.dc(10,"div",6),a.hc(11,qr),a.cc(),a.dc(12,"div",9),a.dc(13,"input",10),a.jc(14,Wr),a.sc("click",(function(){return a.Rc(e),a.wc().hide()}))("key.enter",(function(){return a.Rc(e),a.wc().hide()})),a.cc(),a.dc(15,"input",11),a.jc(16,Zr),a.cc(),a.cc(),a.cc(),a.cc()}if(2&e){const e=a.wc();a.Jb(5),a.Dc("formGroup",e.form),a.Jb(2),a.Dc("ngClass",a.Hc(4,tl,e.formErrors.moderationComment)),a.Jb(2),a.Dc("ngIf",e.formErrors.moderationComment),a.Jb(6),a.Dc("disabled",!e.form.valid)}}let ol=(()=>{class e extends i.b{constructor(e,t,n,o,c,i){super(),this.formValidatorService=e,this.modalService=t,this.notifier=n,this.videoAbuseService=o,this.videoAbuseValidatorsService=c,this.i18n=i,this.commentUpdated=new a.n}ngOnInit(){this.buildForm({moderationComment:this.videoAbuseValidatorsService.VIDEO_ABUSE_MODERATION_COMMENT})}openModal(e){this.abuseToComment=e,this.openedModal=this.modalService.open(this.modal,{centered:!0}),this.form.patchValue({moderationComment:this.abuseToComment.moderationComment})}hide(){this.abuseToComment=void 0,this.openedModal.close(),this.form.reset()}banUser(){return e=this,void 0,n=function*(){const e=this.form.value.moderationComment;this.videoAbuseService.updateVideoAbuse(this.abuseToComment,{moderationComment:e}).subscribe(()=>{this.notifier.success(this.i18n("Comment updated.")),this.commentUpdated.emit(e),this.hide()},e=>this.notifier.error(e.message))},new((t=void 0)||(t=Promise))((function(o,c){function i(e){try{r(n.next(e))}catch(t){c(t)}}function a(e){try{r(n.throw(e))}catch(t){c(t)}}function r(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,a)}r((n=n.apply(e,[])).next())}));var e,t,n}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(u.a),a.Xb(h.k),a.Xb(g.f),a.Xb(i.l),a.Xb(i.m),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-moderation-comment-modal"]],viewQuery:function(e,t){var n;1&e&&a.Xc(Qr,!0),2&e&&a.Oc(n=a.tc())&&(t.modal=n.first)},outputs:{commentUpdated:"commentUpdated"},features:[a.Gb],decls:2,vars:0,consts:[["modal",""],[1,"modal-header"],[1,"modal-title"],["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group"],["formControlName","moderationComment","ngbAutofocus","","i18-placeholder","","placeholder","Comment this report\u2026",1,"form-control",3,"ngClass"],["class","form-error",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button",1,"action-button","action-button-cancel",3,"click","key.enter",6,"value"],["type","submit",1,"action-button-submit",3,"disabled",6,"value"],[1,"form-error"]],template:function(e,t){1&e&&a.ad(0,nl,17,6,"ng-template",null,0,a.bd)},directives:[ro.a,f.J,f.u,f.m,f.d,f.t,f.k,p.r,p.u],styles:["textarea[_ngcontent-%COMP%]{display:inline-block;height:30px;width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;color:var(--textareaForegroundColor);background-color:var(--textareaBackgroundColor);height:100px;padding:5px 15px;font-size:15px}textarea[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:100%){textarea[_ngcontent-%COMP%]{width:100%}}"]}),e})();var cl=n("aaN0"),il=n("V8il"),al=n("H9+z"),rl=n("HB7e"),ll=n("gNPL"),sl=n("LTwV"),dl=n("pLZG"),gl=n("jhN1"),ul=function(e,t,n,o){return new(n||(n=Promise))((function(c,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function r(e){try{l(o.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}))};const bl=["moderationCommentModal"],pl=["currentPageReportTemplate","\u6B63\u5728\u986F\u793A " + "\ufffd0\ufffd" + " \u5230 " + "\ufffd1\ufffd" + " \u7684 " + "\ufffd2\ufffd" + " \u56DE\u5831"];var fl,hl,ml,vl,Cl,Ol;fl="\u9032\u968E\u56DE\u5831\u904E\u6FFE\u5668",hl="\u672A\u89E3\u6C7A\u7684\u56DE\u5831",ml="\u5DF2\u63A5\u53D7\u7684\u56DE\u5831",vl="\u5DF2\u62D2\u7D55\u7684\u56DE\u5831",Cl="\u5217\u5165\u9ED1\u540D\u55AE\u7684\u5F71\u7247\u56DE\u5831",Ol="\u5DF2\u522A\u9664\u7684\u5F71\u7247\u56DE\u5831";const Pl=["placeholder","\u904E\u6FFE\u5668\u2026\u2026"];var _l;_l="\u6E05\u9664\u904E\u6FFE\u5668";const Ml=function(){return["/admin/moderation/video-abuses/list"]},yl=function(){return{search:"state:pending"}},wl=function(){return{search:"state:accepted"}},xl=function(){return{search:"state:rejected"}},kl=function(){return{search:"videoIs:blacklisted"}},Tl=function(){return{search:"videoIs:deleted"}};function Al(e,t){if(1&e){const e=a.ec();a.dc(0,"div",8),a.dc(1,"div",9),a.dc(2,"div",10),a.dc(3,"div",11),a.dc(4,"div",12),a.Yb(5,"span",13),a.cc(),a.dc(6,"div",14),a.dc(7,"h6",15),a.hc(8,fl),a.cc(),a.dc(9,"a",16),a.hc(10,hl),a.cc(),a.dc(11,"a",16),a.hc(12,ml),a.cc(),a.dc(13,"a",16),a.hc(14,vl),a.cc(),a.dc(15,"a",16),a.hc(16,Cl),a.cc(),a.dc(17,"a",16),a.hc(18,Ol),a.cc(),a.cc(),a.cc(),a.dc(19,"input",17),a.jc(20,Pl),a.sc("keyup",(function(t){return a.Rc(e),a.wc().onAbuseSearch(t)})),a.cc(),a.dc(21,"a",18),a.sc("click",(function(){return a.Rc(e),a.wc().resetTableFilter()})),a.cc(),a.dc(22,"span",19),a.hc(23,_l),a.cc(),a.cc(),a.cc(),a.cc()}2&e&&(a.Jb(9),a.Dc("routerLink",a.Gc(10,Ml))("queryParams",a.Gc(11,yl)),a.Jb(2),a.Dc("routerLink",a.Gc(12,Ml))("queryParams",a.Gc(13,wl)),a.Jb(2),a.Dc("routerLink",a.Gc(14,Ml))("queryParams",a.Gc(15,xl)),a.Jb(2),a.Dc("routerLink",a.Gc(16,Ml))("queryParams",a.Gc(17,kl)),a.Jb(2),a.Dc("routerLink",a.Gc(18,Ml))("queryParams",a.Gc(19,Tl)))}var Il,Sl,Rl,Dl;function zl(e,t){1&e&&(a.dc(0,"tr"),a.Yb(1,"th",20),a.dc(2,"th",21),a.hc(3,Il),a.cc(),a.dc(4,"th"),a.hc(5,Sl),a.cc(),a.dc(6,"th",22),a.nc(7,Rl),a.Yb(8,"p-sortIcon",23),a.kc(),a.cc(),a.dc(9,"th",24),a.nc(10,Dl),a.Yb(11,"p-sortIcon",25),a.kc(),a.cc(),a.Yb(12,"th",26),a.cc())}Il="\u56DE\u5831\u8005",Sl="\u5F71\u7247",Rl="" + "\ufffd#8\ufffd" + "" + "\ufffd/#8\ufffd" + " \u5EFA\u7ACB",Dl="\u9673\u8FF0 " + "\ufffd#11\ufffd" + "" + "\ufffd/#11\ufffd" + "";const El=["ngbTooltip","\u66F4\u591A\u8CC7\u8A0A"],Ll=["title","\u5728\u65B0\u5206\u9801\u4E2D\u958B\u555F\u5E33\u865F"],$l=["label","\u52D5\u4F5C"],Jl=["title","\u5728\u65B0\u5206\u9801\u4E2D\u958B\u555F\u5F71\u7247"];var Nl;Nl="\u7531 " + "\ufffd0\ufffd" + " \u65BC " + "\ufffd1\ufffd" + " ";const jl=["title","\u6B64\u5F71\u7247\u5DF2\u88AB\u591A\u6B21\u56DE\u5831\u3002"];function Fl(e,t){if(1&e&&(a.dc(0,"span",51),a.jc(1,jl),a.cd(2),a.cc()),2&e){const e=a.wc(2).$implicit;a.Jb(2),a.fd(" ",e.nth,"/",e.count," ")}}function Ul(e,t){1&e&&a.Yb(0,"span",52)}const Vl=["title","\u5F71\u7247\u5DF2\u88AB\u52A0\u5165\u9ED1\u540D\u55AE"];function Bl(e,t){1&e&&(a.dc(0,"span",53),a.jc(1,Vl),a.cc())}function Gl(e,t){if(1&e&&(a.dc(0,"td"),a.dc(1,"a",43),a.jc(2,Jl),a.dc(3,"div",44),a.dc(4,"div",45),a.Yb(5,"img",46),a.ad(6,Fl,3,2,"span",47),a.cc(),a.dc(7,"div",48),a.dc(8,"div"),a.cd(9),a.ad(10,Ul,1,0,"span",49),a.ad(11,Bl,2,0,"span",50),a.cc(),a.dc(12,"div",33),a.hc(13,Nl),a.cc(),a.cc(),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc().$implicit,t=a.wc();a.Jb(1),a.Dc("href",t.getVideoUrl(e),a.Tc),a.Jb(4),a.Dc("src",e.video.thumbnailPath,a.Tc),a.Jb(1),a.Dc("ngIf",e.count>1),a.Jb(3),a.ed(" ",e.video.name," "),a.Jb(1),a.Dc("ngIf",!e.video.blacklisted),a.Jb(1),a.Dc("ngIf",e.video.blacklisted),a.Jb(2),a.lc(null==e.video.channel?null:e.video.channel.displayName)(null==e.video.channel?null:e.video.channel.host),a.ic(13)}}const Yl=["title","\u5F71\u7247\u5DF2\u88AB\u522A\u9664"];var Hl,Xl;function Ql(e,t){if(1&e&&(a.dc(0,"td",36),a.dc(1,"div",54),a.jc(2,Yl),a.dc(3,"div",45),a.dc(4,"span"),a.hc(5,Hl),a.cc(),a.cc(),a.dc(6,"div",48),a.dc(7,"div"),a.cd(8),a.Yb(9,"span",55),a.cc(),a.dc(10,"div",33),a.hc(11,Xl),a.cc(),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc().$implicit;a.Dc("pRowToggler",e),a.Jb(8),a.ed(" ",e.video.name," "),a.Jb(3),a.lc(null==e.video.channel?null:e.video.channel.displayName)(null==e.video.channel?null:e.video.channel.host),a.ic(11)}}function Kl(e,t){if(1&e&&a.Yb(0,"span",56),2&e){const e=a.wc().$implicit;a.Dc("title",e.state.label)}}function ql(e,t){if(1&e&&a.Yb(0,"span",57),2&e){const e=a.wc().$implicit;a.Dc("title",e.state.label)}}function Wl(e,t){if(1&e&&a.Yb(0,"span",58),2&e){const e=a.wc().$implicit;a.Dc("ngbTooltip",e.moderationComment)}}Hl="\u5DF2\u522A\u9664",Xl="\u7531 " + "\ufffd0\ufffd" + " \u65BC " + "\ufffd1\ufffd" + " ";const Zl=function(e){return{show:e}};function es(e,t){if(1&e){const e=a.ec();a.dc(0,"tr"),a.dc(1,"td",27),a.jc(2,El),a.dc(3,"span",28),a.Yb(4,"i",29),a.cc(),a.cc(),a.dc(5,"td"),a.dc(6,"a",30),a.jc(7,Ll),a.dc(8,"div",31),a.dc(9,"img",32),a.sc("error",(function(t){return a.Rc(e),a.wc().switchToDefaultAvatar(t)})),a.cc(),a.dc(10,"div"),a.cd(11),a.dc(12,"span",33),a.cd(13),a.cc(),a.cc(),a.cc(),a.cc(),a.cc(),a.ad(14,Gl,14,8,"td",34),a.ad(15,Ql,12,4,"td",35),a.dc(16,"td",36),a.cd(17),a.xc(18,"date"),a.cc(),a.dc(19,"td",37),a.ad(20,Kl,1,1,"span",38),a.ad(21,ql,1,1,"span",39),a.ad(22,Wl,1,1,"span",40),a.cc(),a.dc(23,"td",41),a.dc(24,"my-action-dropdown",42),a.jc(25,$l),a.cc(),a.cc(),a.cc()}if(2&e){const e=t.expanded,n=t.$implicit,o=a.wc();a.Jb(1),a.Dc("pRowToggler",n),a.Jb(3),a.Dc("ngClass",e?"glyphicon glyphicon-menu-down":"glyphicon glyphicon-menu-right"),a.Jb(2),a.Dc("href",n.reporterAccount.url,a.Tc),a.Jb(3),a.Dc("src",null==n.reporterAccount.avatar?null:n.reporterAccount.avatar.path,a.Tc),a.Jb(2),a.ed(" ",n.reporterAccount.displayName," "),a.Jb(2),a.dd(n.reporterAccount.nameWithHost),a.Jb(1),a.Dc("ngIf",!n.video.deleted),a.Jb(1),a.Dc("ngIf",n.video.deleted),a.Jb(1),a.Dc("pRowToggler",n),a.Jb(1),a.dd(a.zc(18,17,n.createdAt,"short")),a.Jb(2),a.Dc("pRowToggler",n),a.Jb(1),a.Dc("ngIf",o.isVideoAbuseAccepted(n)),a.Jb(1),a.Dc("ngIf",o.isVideoAbuseRejected(n)),a.Jb(1),a.Dc("ngIf",n.moderationComment),a.Jb(2),a.Dc("ngClass",a.Hc(20,Zl,e))("actions",o.videoAbuseActions)("entry",n)}}function ts(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",59),a.Yb(2,"my-video-abuse-details",60),a.cc(),a.cc()),2&e){const e=t.$implicit;a.Jb(2),a.Dc("videoAbuse",e)}}var ns,os;function cs(e,t){1&e&&(a.bc(0),a.hc(1,ns),a.ac())}function is(e,t){1&e&&(a.bc(0),a.hc(1,os),a.ac())}function as(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",61),a.dc(2,"div",62),a.ad(3,cs,2,0,"ng-container",34),a.ad(4,is,2,0,"ng-container",34),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngIf",e.search),a.Jb(1),a.Dc("ngIf",!e.search)}}ns="\u627E\u4E0D\u5230\u7B26\u5408\u76EE\u524D\u904E\u6FFE\u5668\u7684\u5F71\u7247\u6FEB\u7528\u3002",os="\u627E\u4E0D\u5230\u5F71\u7247\u6FEB\u7528\u3002";let rs=(()=>{class e extends i.g{constructor(e,t,n,o,c,i,a,r,l,s,d){super(),this.notifier=e,this.videoAbuseService=t,this.blocklistService=n,this.videoService=o,this.videoBlacklistService=c,this.confirmService=i,this.i18n=a,this.markdownRenderer=r,this.sanitizer=l,this.route=s,this.router=d,this.videoAbuses=[],this.totalRecords=0,this.sort={field:"createdAt",order:1},this.pagination={count:this.rowsPerPage,start:0},this.videoAbuseActions=[],this.videoAbuseActions=[[{label:this.i18n("Internal actions"),isHeader:!0},{label:this.i18n("Delete report"),handler:e=>this.removeVideoAbuse(e)},{label:this.i18n("Add note"),handler:e=>this.openModerationCommentModal(e),isDisplayed:e=>!e.moderationComment},{label:this.i18n("Update note"),handler:e=>this.openModerationCommentModal(e),isDisplayed:e=>!!e.moderationComment},{label:this.i18n("Mark as accepted"),handler:e=>this.updateVideoAbuseState(e,Mn.g.ACCEPTED),isDisplayed:e=>!this.isVideoAbuseAccepted(e)},{label:this.i18n("Mark as rejected"),handler:e=>this.updateVideoAbuseState(e,Mn.g.REJECTED),isDisplayed:e=>!this.isVideoAbuseRejected(e)}],[{label:this.i18n("Actions for the video"),isHeader:!0,isDisplayed:e=>!e.video.deleted},{label:this.i18n("Blacklist video"),isDisplayed:e=>!e.video.deleted&&!e.video.blacklisted,handler:e=>{this.videoBlacklistService.blacklistVideo(e.video.id,void 0,!0).subscribe(()=>{this.notifier.success(this.i18n("Video blacklisted.")),this.updateVideoAbuseState(e,Mn.g.ACCEPTED)},e=>this.notifier.error(e.message))}},{label:this.i18n("Unblacklist video"),isDisplayed:e=>!e.video.deleted&&e.video.blacklisted,handler:e=>{this.videoBlacklistService.removeVideoFromBlacklist(e.video.id).subscribe(()=>{this.notifier.success(this.i18n("Video unblacklisted.")),this.updateVideoAbuseState(e,Mn.g.ACCEPTED)},e=>this.notifier.error(e.message))}},{label:this.i18n("Delete video"),isDisplayed:e=>!e.video.deleted,handler:e=>ul(this,void 0,void 0,(function*(){!1!==(yield this.confirmService.confirm(this.i18n("Do you really want to delete this video?"),this.i18n("Delete")))&&this.videoService.removeVideo(e.video.id).subscribe(()=>{this.notifier.success(this.i18n("Video deleted.")),this.updateVideoAbuseState(e,Mn.g.ACCEPTED)},e=>this.notifier.error(e.message))}))}],[{label:this.i18n("Actions for the reporter"),isHeader:!0},{label:this.i18n("Mute reporter"),handler:e=>ul(this,void 0,void 0,(function*(){const t=e.reporterAccount;this.blocklistService.blockAccountByInstance(t).subscribe(()=>{this.notifier.success(this.i18n("Account {{nameWithHost}} muted by the instance.",{nameWithHost:t.nameWithHost})),t.mutedByInstance=!0},e=>this.notifier.error(e.message))}))},{label:this.i18n("Mute server"),isDisplayed:e=>!e.reporterAccount.userId,handler:e=>ul(this,void 0,void 0,(function*(){this.blocklistService.blockServerByInstance(e.reporterAccount.host).subscribe(()=>{this.notifier.success(this.i18n("Server {{host}} muted by the instance.",{host:e.reporterAccount.host}))},e=>this.notifier.error(e.message))}))}]]}ngOnInit(){this.initialize(),this.route.queryParams.pipe(Object(dl.a)(e=>null!=e.search)).subscribe(e=>{this.search=e.search,this.setTableFilter(e.search),this.loadData()})}ngAfterViewInit(){this.search&&this.setTableFilter(this.search)}getIdentifier(){return"VideoAbuseListComponent"}openModerationCommentModal(e){this.moderationCommentModal.openModal(e)}onModerationCommentUpdated(){this.loadData()}onAbuseSearch(e){this.onSearch(e),this.setQueryParams(e.target.value)}setQueryParams(e){const t={};e&&Object.assign(t,{search:e}),this.router.navigate(["/admin/moderation/video-abuses/list"],{queryParams:t})}resetTableFilter(){this.setTableFilter(""),this.setQueryParams(""),this.resetSearch()}isVideoAbuseAccepted(e){return e.state.id===Mn.g.ACCEPTED}isVideoAbuseRejected(e){return e.state.id===Mn.g.REJECTED}getVideoUrl(e){return cl.a.buildClientUrl(e.video.uuid)}getVideoEmbed(e){const t=Object(rl.c)(),n=Object(al.b)({baseUrl:t+"/videos/embed/"+e.video.uuid,warningTitle:!1});return Object(al.a)(n)}switchToDefaultAvatar(e){e.target.src=rr.a.GET_DEFAULT_AVATAR_URL()}removeVideoAbuse(e){return ul(this,void 0,void 0,(function*(){!1!==(yield this.confirmService.confirm(this.i18n("Do you really want to delete this abuse report?"),this.i18n("Delete")))&&this.videoAbuseService.removeVideoAbuse(e).subscribe(()=>{this.notifier.success(this.i18n("Abuse deleted.")),this.loadData()},e=>this.notifier.error(e.message))}))}updateVideoAbuseState(e,t){this.videoAbuseService.updateVideoAbuse(e,{state:t}).subscribe(()=>this.loadData(),e=>this.notifier.error(e.message))}loadData(){return this.videoAbuseService.getVideoAbuses({pagination:this.pagination,sort:this.sort,search:this.search}).subscribe(e=>ul(this,void 0,void 0,(function*(){var t;this.totalRecords=e.total;const n=[];for(const o of e.data)Object.assign(o,{reasonHtml:yield this.toHtml(o.reason),moderationCommentHtml:yield this.toHtml(o.moderationComment),embedHtml:this.sanitizer.bypassSecurityTrustHtml(this.getVideoEmbed(o)),reporterAccount:new Xr.a(o.reporterAccount)}),(null===(t=o.video.channel)||void 0===t?void 0:t.ownerAccount)&&(o.video.channel.ownerAccount=new Xr.a(o.video.channel.ownerAccount)),o.updatedAt===o.createdAt&&delete o.updatedAt,n.push(o);this.videoAbuses=n})),e=>this.notifier.error(e.message))}toHtml(e){return this.markdownRenderer.textMarkdownToHTML(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.f),a.Xb(i.l),a.Xb(ll.a),a.Xb(sl.a),a.Xb(i.n),a.Xb(g.c),a.Xb(l.a),a.Xb(il.c),a.Xb(gl.b),a.Xb(O.a),a.Xb(O.h))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-video-abuse-list"]],viewQuery:function(e,t){var n;1&e&&a.Xc(bl,!0),2&e&&a.Oc(n=a.tc())&&(t.moderationCommentModal=n.first)},features:[a.Gb],decls:9,vars:14,consts:[["dataKey","id",3,"value","lazy","paginator","totalRecords","rows","rowsPerPageOptions","sortField","sortOrder","resizableColumns","showCurrentPageReport","expandedRowKeys","onLazyLoad","onPage",6,"currentPageReportTemplate"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],[3,"commentUpdated"],["moderationCommentModal",""],[1,"caption"],[1,"ml-auto"],[1,"input-group","has-feedback","has-clear"],["ngbDropdown","","placement","bottom-left auto","container","body",1,"input-group-prepend","c-hand"],["ngbDropdownToggle","",1,"input-group-text"],["aria-haspopup","menu","role","button",1,"caret"],["role","menu","ngbDropdownMenu",""],[1,"dropdown-header"],[1,"dropdown-item",3,"routerLink","queryParams"],["type","text","name","table-filter","id","table-filter",3,"keyup",6,"placeholder"],[1,"glyphicon","glyphicon-remove-sign","form-control-feedback","form-control-clear",3,"click"],[1,"sr-only"],[2,"width","40px"],["pResizableColumn","",2,"width","20%"],["pSortableColumn","createdAt",2,"width","150px"],["field","createdAt"],["pSortableColumn","state",2,"width","80px"],["field","state"],[2,"width","150px"],["placement","top-left","container","body",1,"c-hand",3,"pRowToggler",6,"ngbTooltip"],[1,"expander"],[3,"ngClass"],["target","_blank","rel","noopener noreferrer",3,"href",6,"title"],[1,"chip","two-lines"],["alt","Avatar",1,"avatar",3,"src","error"],[1,"text-muted"],[4,"ngIf"],["class","c-hand",3,"pRowToggler",4,"ngIf"],[1,"c-hand",3,"pRowToggler"],[1,"c-hand","video-abuse-states",3,"pRowToggler"],["class","glyphicon glyphicon-ok",3,"title",4,"ngIf"],["class","glyphicon glyphicon-remove",3,"title",4,"ngIf"],["container","body","placement","left auto","class","glyphicon glyphicon-comment",3,"ngbTooltip",4,"ngIf"],[1,"action-cell"],["placement","bottom-right top-right left auto","container","body",3,"ngClass","actions","entry",6,"label"],["target","_blank","rel","noopener noreferrer",1,"video-table-video-link",3,"href",6,"title"],[1,"video-table-video"],[1,"video-table-video-image"],[3,"src"],["class","video-table-video-image-label",4,"ngIf",6,"title"],[1,"video-table-video-text"],["class","glyphicon glyphicon-new-window",4,"ngIf"],["class","glyphicon glyphicon-ban-circle",4,"ngIf",6,"title"],[1,"video-table-video-image-label",6,"title"],[1,"glyphicon","glyphicon-new-window"],[1,"glyphicon","glyphicon-ban-circle",6,"title"],[1,"video-table-video",6,"title"],[1,"glyphicon","glyphicon-trash"],[1,"glyphicon","glyphicon-ok",3,"title"],[1,"glyphicon","glyphicon-remove",3,"title"],["container","body","placement","left auto",1,"glyphicon","glyphicon-comment",3,"ngbTooltip"],["colspan","6",1,"expand-cell"],[3,"videoAbuse"],["colspan","6"],[1,"empty-table-message"]],template:function(e,t){1&e&&(a.dc(0,"p-table",0),a.jc(1,pl),a.sc("onLazyLoad",(function(e){return t.loadLazy(e)}))("onPage",(function(e){return t.onPage(e)})),a.ad(2,Al,24,20,"ng-template",1),a.ad(3,zl,13,0,"ng-template",2),a.ad(4,es,26,22,"ng-template",3),a.ad(5,ts,3,1,"ng-template",4),a.ad(6,as,5,2,"ng-template",5),a.cc(),a.dc(7,"my-moderation-comment-modal",6,7),a.sc("commentUpdated",(function(){return t.onModerationCommentUpdated()})),a.cc()),2&e&&(a.lc("{first}")("{last}")("{totalRecords}"),a.ic(1),a.Dc("value",t.videoAbuses)("lazy",!0)("paginator",t.totalRecords>0)("totalRecords",t.totalRecords)("rows",t.rowsPerPage)("rowsPerPageOptions",t.rowsPerPageOptions)("sortField",t.sort.field)("sortOrder",t.sort.order)("resizableColumns",!0)("showCurrentPageReport",!0)("expandedRowKeys",t.expandedRows))},styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.caption[_ngcontent-%COMP%]{justify-content:flex-end}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:250px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;flex-grow:1}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:250px){.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}.moderation-expanded[_ngcontent-%COMP%]{font-size:90%}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;vertical-align:top;text-align:right}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]{display:inline-flex;word-wrap:break-word}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0!important}.video-table-states[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:.4rem}.screenratio[_ngcontent-%COMP%]{position:relative;width:100%;height:0;padding-bottom:56%}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;position:absolute;height:100%;width:100%;display:inline-flex;justify-content:center;align-items:center;color:var(--inputPlaceholderColor)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{text-decoration:none!important}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.screenratio[_ngcontent-%COMP%]   div.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.screenratio[_ngcontent-%COMP%]     iframe{position:absolute;width:100%!important;height:100%!important;left:0;top:0}.chip[_ngcontent-%COMP%]{align-items:center;border-radius:5rem;display:inline-flex;font-size:90%;color:var(--mainForegroundColor);line-height:1rem;margin:.1rem;max-width:320px;overflow:hidden;padding:.2rem .4rem;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}.chip[_ngcontent-%COMP%], .chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:1.2rem;vertical-align:middle}.chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-left:-.4rem;margin-right:.2rem;width:1.2rem;border-radius:50%;display:inline-block;line-height:1.25;position:relative}.chip.two-lines[_ngcontent-%COMP%]{height:2rem}.chip.two-lines[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:2rem;width:2rem}.chip.two-lines[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:2rem;margin-left:.1rem;margin-right:.1rem;justify-content:center}my-action-dropdown.show[_ngcontent-%COMP%]     .dropdown-root{display:block!important}.video-table-video-link[_ngcontent-%COMP%]{position:relative;top:3px}.video-table-video-link[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]{display:inline-flex}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;height:45px;width:80px;margin-right:.5rem;border-radius:2px;border:none;background:transparent;display:inline-flex;justify-content:center;align-items:center;position:relative}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover{text-decoration:none!important}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--inputPlaceholderColor)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .video-table-video-image-label[_ngcontent-%COMP%]{display:inline-block;background-color:rgba(0,0,0,.7);color:#fff;position:absolute;border-radius:3px;font-size:10px;padding:0 3px;line-height:1.3;bottom:2px;right:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;justify-content:center;font-size:90%;color:var(--mainForegroundColor);line-height:1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:80%;color:grey;margin-left:.1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{font-size:80%}",".video-details-date-updated[_ngcontent-%COMP%]{font-size:90%;margin-top:.1rem}.video-details-links[_ngcontent-%COMP%]:active, .video-details-links[_ngcontent-%COMP%]:focus, .video-details-links[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.video-abuse-states[_ngcontent-%COMP%]   .glyphicon-comment[_ngcontent-%COMP%]{margin-left:.5rem}.input-group[_ngcontent-%COMP%]{width:300px;min-height:30px;padding-top:0;padding-bottom:0}.input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{font-size:14px;color:grey}.input-group[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{margin-left:0}"]}),e})();var ls=function(e,t,n,o){return new(n||(n=Promise))((function(c,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function r(e){try{l(o.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}))};const ss=["currentPageReportTemplate","\u6B63\u5728\u986F\u793A " + "\ufffd0\ufffd" + " \u5230 " + "\ufffd1\ufffd" + " \u7684 " + "\ufffd2\ufffd" + " \u5DF2\u52A0\u5165\u9ED1\u540D\u55AE\u7684\u5F71\u7247"],ds=["placeholder","\u904E\u6FFE\u5668\u2026\u2026"];var gs,us,bs,ps,fs;function hs(e,t){if(1&e){const e=a.ec();a.dc(0,"div",6),a.dc(1,"div",7),a.dc(2,"input",8),a.jc(3,ds),a.sc("keyup",(function(t){return a.Rc(e),a.wc().onSearch(t)})),a.cc(),a.dc(4,"a",9),a.sc("click",(function(){return a.Rc(e),a.wc().resetSearch()})),a.cc(),a.dc(5,"span",10),a.hc(6,gs),a.cc(),a.cc(),a.cc()}}function ms(e,t){1&e&&(a.dc(0,"tr"),a.Yb(1,"th",11),a.dc(2,"th",12),a.nc(3,us),a.Yb(4,"p-sortIcon",13),a.kc(),a.cc(),a.dc(5,"th",14),a.hc(6,bs),a.cc(),a.dc(7,"th",15),a.hc(8,ps),a.cc(),a.dc(9,"th",16),a.nc(10,fs),a.Yb(11,"p-sortIcon",17),a.kc(),a.cc(),a.Yb(12,"th",18),a.cc())}gs="\u6E05\u9664\u904E\u6FFE\u5668",us="\u5F71\u7247 " + "\ufffd#4\ufffd" + "" + "\ufffd/#4\ufffd" + "",bs="\u654F\u611F\u7684",ps="\u672A\u52A0\u5165\u806F\u76DF",fs="\u65E5\u671F " + "\ufffd#11\ufffd" + "" + "\ufffd/#11\ufffd" + "";const vs=["title","\u5728\u65B0\u5206\u9801\u4E2D\u958B\u555F\u5F71\u7247"],Cs=["title","\u5F71\u7247\u5DF2\u88AB\u52A0\u5165\u9ED1\u540D\u55AE"],Os=["label","\u52D5\u4F5C"];function Ps(e,t){1&e&&a.Yb(0,"td")}const _s=["ngbTooltip","\u66F4\u591A\u8CC7\u8A0A"];function Ms(e,t){if(1&e&&(a.dc(0,"td",30),a.jc(1,_s),a.dc(2,"span",31),a.Yb(3,"i",32),a.cc(),a.cc()),2&e){const e=a.wc(),t=e.expanded;a.Dc("pRowToggler",e.$implicit),a.Jb(3),a.Dc("ngClass",t?"glyphicon glyphicon-menu-down":"glyphicon glyphicon-menu-right")}}function ys(e,t){if(1&e&&(a.bc(0),a.dc(1,"td",33),a.cd(2),a.cc(),a.dc(3,"td",33),a.cd(4),a.cc(),a.dc(5,"td",33),a.cd(6),a.xc(7,"date"),a.cc(),a.ac()),2&e){const e=a.wc().$implicit,t=a.wc();a.Jb(1),a.Dc("pRowToggler",e),a.Jb(1),a.dd(t.booleanToText(e.video.nsfw)),a.Jb(1),a.Dc("pRowToggler",e),a.Jb(1),a.dd(t.booleanToText(e.unfederated)),a.Jb(1),a.Dc("pRowToggler",e),a.Jb(1),a.dd(a.zc(7,6,e.createdAt,"short"))}}function ws(e,t){if(1&e&&(a.bc(0),a.dc(1,"td"),a.cd(2),a.cc(),a.dc(3,"td"),a.cd(4),a.cc(),a.dc(5,"td"),a.cd(6),a.xc(7,"date"),a.cc(),a.ac()),2&e){const e=a.wc().$implicit,t=a.wc();a.Jb(2),a.dd(t.booleanToText(e.video.nsfw)),a.Jb(2),a.dd(t.booleanToText(e.unfederated)),a.Jb(2),a.dd(a.zc(7,3,e.createdAt,"short"))}}const xs=function(e){return{show:e}};function ks(e,t){if(1&e&&(a.dc(0,"tr"),a.ad(1,Ps,1,0,"td",19),a.ad(2,Ms,4,2,"td",20),a.dc(3,"td"),a.dc(4,"a",21),a.jc(5,vs),a.dc(6,"div",22),a.dc(7,"div",23),a.Yb(8,"img",24),a.cc(),a.dc(9,"div",25),a.dc(10,"div"),a.cd(11),a.dc(12,"span",26),a.jc(13,Cs),a.cc(),a.cc(),a.dc(14,"div",27),a.cd(15),a.cc(),a.cc(),a.cc(),a.cc(),a.cc(),a.ad(16,ys,8,9,"ng-container",19),a.ad(17,ws,8,6,"ng-container",19),a.dc(18,"td",28),a.dc(19,"my-action-dropdown",29),a.jc(20,Os),a.cc(),a.cc(),a.cc()),2&e){const e=t.$implicit,n=t.expanded,o=a.wc();a.Jb(1),a.Dc("ngIf",!e.reason),a.Jb(1),a.Dc("ngIf",e.reason),a.Jb(2),a.Dc("href",o.getVideoUrl(e),a.Tc),a.Jb(4),a.Dc("src",e.video.thumbnailPath,a.Tc),a.Jb(3),a.ed(" ",e.video.name," "),a.Jb(4),a.fd("by ",null==e.video.channel?null:e.video.channel.displayName," on ",null==e.video.channel?null:e.video.channel.host," "),a.Jb(1),a.Dc("ngIf",e.reason),a.Jb(1),a.Dc("ngIf",!e.reason),a.Jb(2),a.Dc("ngClass",a.Hc(12,xs,n))("actions",o.videoBlacklistActions)("entry",e)}}var Ts,As,Is;function Ss(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",34),a.dc(2,"div",35),a.dc(3,"span",36),a.hc(4,Ts),a.cc(),a.Yb(5,"span",37),a.cc(),a.cc(),a.cc()),2&e){const e=t.$implicit;a.Jb(5),a.Dc("innerHTML",e.reasonHtml,a.Sc)}}function Rs(e,t){1&e&&(a.bc(0),a.hc(1,As),a.ac())}function Ds(e,t){1&e&&(a.bc(0),a.hc(1,Is),a.ac())}function zs(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",38),a.dc(2,"div",39),a.ad(3,Rs,2,0,"ng-container",19),a.ad(4,Ds,2,0,"ng-container",19),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngIf",e.search),a.Jb(1),a.Dc("ngIf",!e.search)}}Ts="\u9ED1\u540D\u55AE\u7406\u7531\uFF1A",As="\u627E\u4E0D\u5230\u7B26\u5408\u76EE\u524D\u904E\u6FFE\u5668\u7684\u9ED1\u540D\u55AE\u5F71\u7247\u3002",Is="\u627E\u4E0D\u5230\u9ED1\u540D\u55AE\u5F71\u7247\u3002";let Es=(()=>{class e extends i.g{constructor(e,t,n,o,c,i){super(),this.notifier=e,this.serverService=t,this.confirmService=n,this.videoBlacklistService=o,this.markdownRenderer=c,this.i18n=i,this.blacklist=[],this.totalRecords=0,this.sort={field:"createdAt",order:-1},this.pagination={count:this.rowsPerPage,start:0},this.listBlacklistTypeFilter=void 0,this.videoBlacklistActions=[]}ngOnInit(){this.serverService.getConfig().subscribe(e=>{e.autoBlacklist.videos.ofUsers.enabled&&(this.listBlacklistTypeFilter=Mn.h.MANUAL)}),this.initialize(),this.videoBlacklistActions=[{label:this.i18n("Unblacklist"),handler:e=>this.removeVideoFromBlacklist(e)}]}getIdentifier(){return"VideoBlacklistListComponent"}getVideoUrl(e){return cl.a.buildClientUrl(e.video.uuid)}booleanToText(e){return this.i18n(!0===e?"yes":"no")}toHtml(e){return this.markdownRenderer.textMarkdownToHTML(e)}removeVideoFromBlacklist(e){return ls(this,void 0,void 0,(function*(){const t=this.i18n("Do you really want to remove this video from the blacklist? It will be available again in the videos list.");!1!==(yield this.confirmService.confirm(t,this.i18n("Unblacklist")))&&this.videoBlacklistService.removeVideoFromBlacklist(e.video.id).subscribe(()=>{this.notifier.success(this.i18n("Video {{name}} removed from the blacklist.",{name:e.video.name})),this.loadData()},e=>this.notifier.error(e.message))}))}loadData(){this.videoBlacklistService.listBlacklist({pagination:this.pagination,sort:this.sort,search:this.search,type:this.listBlacklistTypeFilter}).subscribe(e=>ls(this,void 0,void 0,(function*(){this.totalRecords=e.total,this.blacklist=e.data;for(const e of this.blacklist)Object.assign(e,{reasonHtml:yield this.toHtml(e.reason)})})),e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.f),a.Xb(g.i),a.Xb(g.c),a.Xb(i.n),a.Xb(il.c),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-video-blacklist-list"]],features:[a.Gb],decls:7,vars:13,consts:[["dataKey","id",3,"value","lazy","paginator","totalRecords","rows","rowsPerPageOptions","sortField","sortOrder","showCurrentPageReport","expandedRowKeys","onLazyLoad","onPage",6,"currentPageReportTemplate"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],[1,"caption"],[1,"ml-auto","has-feedback","has-clear"],["type","text","name","table-filter","id","table-filter",3,"keyup",6,"placeholder"],[1,"glyphicon","glyphicon-remove-sign","form-control-feedback","form-control-clear",3,"click"],[1,"sr-only"],[2,"width","40px"],["pSortableColumn","name"],["field","name"],[2,"width","100px"],[2,"width","120px"],["pSortableColumn","createdAt",2,"width","150px"],["field","createdAt"],[2,"width","150px"],[4,"ngIf"],["class","expand-cell c-hand","placement","top-left","container","body",3,"pRowToggler",4,"ngIf",6,"ngbTooltip"],["target","_blank","rel","noopener noreferrer",1,"video-table-video-link",3,"href",6,"title"],[1,"video-table-video"],[1,"video-table-video-image"],[3,"src"],[1,"video-table-video-text"],[1,"glyphicon","glyphicon-ban-circle",6,"title"],[1,"text-muted"],[1,"action-cell"],["placement","bottom-right","container","body",3,"ngClass","actions","entry",6,"label"],["placement","top-left","container","body",1,"expand-cell","c-hand",3,"pRowToggler",6,"ngbTooltip"],[1,"expander"],[3,"ngClass"],[1,"c-hand",3,"pRowToggler"],["colspan","6",1,"expand-cell"],[1,"d-flex","moderation-expanded"],[1,"col-2","moderation-expanded-label"],[1,"col-9","moderation-expanded-text",3,"innerHTML"],["colspan","6"],[1,"empty-table-message"]],template:function(e,t){1&e&&(a.dc(0,"p-table",0),a.jc(1,ss),a.sc("onLazyLoad",(function(e){return t.loadLazy(e)}))("onPage",(function(e){return t.onPage(e)})),a.ad(2,hs,7,0,"ng-template",1),a.ad(3,ms,13,0,"ng-template",2),a.ad(4,ks,21,14,"ng-template",3),a.ad(5,Ss,6,1,"ng-template",4),a.ad(6,zs,5,2,"ng-template",5),a.cc()),2&e&&(a.lc("{first}")("{last}")("{totalRecords}"),a.ic(1),a.Dc("value",t.blacklist)("lazy",!0)("paginator",t.totalRecords>0)("totalRecords",t.totalRecords)("rows",t.rowsPerPage)("rowsPerPageOptions",t.rowsPerPageOptions)("sortField",t.sort.field)("sortOrder",t.sort.order)("showCurrentPageReport",!0)("expandedRowKeys",t.expandedRows))},directives:[Pn.q,An.d,Pn.p,Pn.o,p.u,lr.a,p.r,h.y,Pn.k],pipes:[p.f],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.caption[_ngcontent-%COMP%]{justify-content:flex-end}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:250px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;flex-grow:1}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:250px){.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}.moderation-expanded[_ngcontent-%COMP%]{font-size:90%}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;vertical-align:top;text-align:right}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]{display:inline-flex;word-wrap:break-word}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0!important}.video-table-states[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:.4rem}.screenratio[_ngcontent-%COMP%]{position:relative;width:100%;height:0;padding-bottom:56%}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;position:absolute;height:100%;width:100%;display:inline-flex;justify-content:center;align-items:center;color:var(--inputPlaceholderColor)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{text-decoration:none!important}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.screenratio[_ngcontent-%COMP%]   div.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.screenratio[_ngcontent-%COMP%]     iframe{position:absolute;width:100%!important;height:100%!important;left:0;top:0}.chip[_ngcontent-%COMP%]{align-items:center;border-radius:5rem;display:inline-flex;font-size:90%;color:var(--mainForegroundColor);line-height:1rem;margin:.1rem;max-width:320px;overflow:hidden;padding:.2rem .4rem;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}.chip[_ngcontent-%COMP%], .chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:1.2rem;vertical-align:middle}.chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-left:-.4rem;margin-right:.2rem;width:1.2rem;border-radius:50%;display:inline-block;line-height:1.25;position:relative}.chip.two-lines[_ngcontent-%COMP%]{height:2rem}.chip.two-lines[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:2rem;width:2rem}.chip.two-lines[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:2rem;margin-left:.1rem;margin-right:.1rem;justify-content:center}my-action-dropdown.show[_ngcontent-%COMP%]     .dropdown-root{display:block!important}.video-table-video-link[_ngcontent-%COMP%]{position:relative;top:3px}.video-table-video-link[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]{display:inline-flex}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;height:45px;width:80px;margin-right:.5rem;border-radius:2px;border:none;background:transparent;display:inline-flex;justify-content:center;align-items:center;position:relative}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover{text-decoration:none!important}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--inputPlaceholderColor)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .video-table-video-image-label[_ngcontent-%COMP%]{display:inline-block;background-color:rgba(0,0,0,.7);color:#fff;position:absolute;border-radius:3px;font-size:10px;padding:0 3px;line-height:1.3;bottom:2px;right:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;justify-content:center;font-size:90%;color:var(--mainForegroundColor);line-height:1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:80%;color:grey;margin-left:.1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{font-size:80%}"]}),e})();var Ls,$s=n("YvhO");function Js(e,t){if(1&e){const e=a.ec();a.dc(0,"span",3),a.sc("click",(function(){return a.Rc(e),a.wc().removeSelectedVideosFromBlacklist()})),a.Yb(1,"my-global-icon",4),a.bc(2),a.hc(3,Ls),a.ac(),a.cc()}}Ls="\u53D6\u6D88\u9ED1\u540D\u55AE";const Ns=["label","\u53D6\u6D88\u9ED1\u540D\u55AE"];function js(e,t){if(1&e){const e=a.ec();a.dc(0,"my-button",5),a.jc(1,Ns),a.sc("click",(function(){a.Rc(e);const n=t.$implicit;return a.wc().removeVideoFromBlacklist(n)})),a.cc()}}let Fs=(()=>{class e{constructor(e,t,n,o,c,i,a,r){this.router=e,this.route=t,this.notifier=n,this.authService=o,this.screenService=c,this.serverService=i,this.i18n=a,this.videoBlacklistService=r,this.selection={},this.miniatureDisplayOptions={date:!0,views:!1,by:!0,privacyLabel:!1,privacyText:!0,state:!1,blacklistInfo:!1,nsfw:!0},this.pagination={currentPage:1,itemsPerPage:5,totalItems:null},this.videos=[],this.getVideosObservableFunction=this.getVideosObservable.bind(this),this.titlePage=this.i18n("Auto-blacklisted videos")}getVideosObservable(e){const t=Object(rl.d)(this.pagination,{currentPage:e});return this.videoBlacklistService.getAutoBlacklistedAsVideoList(t)}removeVideoFromBlacklist(e){this.videoBlacklistService.removeVideoFromBlacklist(e.id).subscribe(()=>{this.notifier.success(this.i18n("Video {{name}} removed from blacklist.",{name:e.name})),this.videos=this.videos.filter(t=>t.id!==e.id)},e=>this.notifier.error(e.message))}removeSelectedVideosFromBlacklist(){const e=Object.keys(this.selection).filter(e=>!0===this.selection[e]).map(e=>parseInt(e,10));this.videoBlacklistService.removeVideoFromBlacklist(e).subscribe(()=>{this.notifier.success(this.i18n("{{num}} videos removed from blacklist.",{num:e.length})),this.selection={},this.videos=this.videos.filter(t=>!1===e.includes(t.id))},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(O.h),a.Xb(O.a),a.Xb(g.f),a.Xb(g.a),a.Xb(Fc.a),a.Xb(g.i),a.Xb(l.a),a.Xb(i.n))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-video-auto-blacklist-list"]],decls:3,vars:6,consts:[[3,"pagination","selection","videosModel","miniatureDisplayOptions","titlePage","getVideosObservableFunction","selectionChange","videosModelChange"],["ptTemplate","globalButtons"],["ptTemplate","rowButtons"],[1,"action-button","action-button-unblacklist-selection",3,"click"],["iconName","tick"],["icon","tick",3,"click",6,"label"]],template:function(e,t){1&e&&(a.dc(0,"my-videos-selection",0),a.sc("selectionChange",(function(e){return t.selection=e}))("videosModelChange",(function(e){return t.videos=e})),a.ad(1,Js,4,0,"ng-template",1),a.ad(2,js,2,0,"ng-template",2),a.cc()),2&e&&a.Dc("pagination",t.pagination)("selection",t.selection)("videosModel",t.videos)("miniatureDisplayOptions",t.miniatureDisplayOptions)("titlePage",t.titlePage)("getVideosObservableFunction",t.getVideosObservableFunction)},directives:[$s.a,_.a,ro.a,In.a],styles:['.action-button-unblacklist-selection[_ngcontent-%COMP%]{display:inline-block;border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.action-button-unblacklist-selection.focus-visible[_ngcontent-%COMP%], .action-button-unblacklist-selection[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.action-button-unblacklist-selection[_ngcontent-%COMP%], .action-button-unblacklist-selection[_ngcontent-%COMP%]:active, .action-button-unblacklist-selection[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.action-button-unblacklist-selection[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.action-button-unblacklist-selection.disabled[_ngcontent-%COMP%], .action-button-unblacklist-selection[disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}.action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;width:21px;margin-right:3px;top:-1px}.action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], .action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], .action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], .action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], .action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:#fff}.action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], .action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], .action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], .action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], .action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:#fff}.action-button-unblacklist-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:#fff}']}),e})();var Us,Vs,Bs,Gs,Ys,Hs;function Xs(e,t){1&e&&(a.dc(0,"a",8),a.hc(1,Vs),a.cc())}function Qs(e,t){if(1&e&&(a.dc(0,"a",9),a.hc(1,Bs),a.cc()),2&e){const e=a.wc();a.Jb(1),a.lc(e.autoBlacklistVideosEnabled?"Manually blacklisted videos":"Blacklisted videos"),a.ic(1)}}function Ks(e,t){1&e&&(a.dc(0,"a",10),a.hc(1,Gs),a.cc())}function qs(e,t){1&e&&(a.dc(0,"a",11),a.hc(1,Ys),a.cc())}function Ws(e,t){1&e&&(a.dc(0,"a",12),a.hc(1,Hs),a.cc())}Us="\u7BA1\u7406",Vs="\u5F71\u7247\u6FEB\u7528",Bs="" + "\ufffd0\ufffd" + "",Gs="\u81EA\u52D5\u5217\u5165\u9ED1\u540D\u55AE\u7684\u5F71\u7247",Ys="\u5DF2\u975C\u97F3\u7684\u5E33\u865F",Hs="\u5DF2\u975C\u97F3\u4F3A\u670D\u5668";let Zs=(()=>{class e{constructor(e,t){this.auth=e,this.serverService=t,this.autoBlacklistVideosEnabled=!1}ngOnInit(){this.serverService.getConfig().subscribe(e=>this.autoBlacklistVideosEnabled=e.autoBlacklist.videos.ofUsers.enabled)}hasVideoAbusesRight(){return this.auth.getUser().hasRight(Mn.e.MANAGE_VIDEO_ABUSES)}hasVideoBlacklistRight(){return this.auth.getUser().hasRight(Mn.e.MANAGE_VIDEO_BLACKLIST)}hasAccountsBlocklistRight(){return this.auth.getUser().hasRight(Mn.e.MANAGE_ACCOUNTS_BLOCKLIST)}hasServersBlocklistRight(){return this.auth.getUser().hasRight(Mn.e.MANAGE_SERVERS_BLOCKLIST)}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.a),a.Xb(g.i))},e.\u0275cmp=a.Rb({type:e,selectors:[["ng-component"]],decls:10,vars:5,consts:[[1,"admin-sub-header"],[1,"form-sub-title"],[1,"admin-sub-nav"],["routerLink","video-abuses/list","routerLinkActive","active",4,"ngIf"],["routerLink","video-blacklist/list","routerLinkActive","active",4,"ngIf"],["routerLink","video-auto-blacklist/list","routerLinkActive","active",4,"ngIf"],["routerLink","blocklist/accounts","routerLinkActive","active",4,"ngIf"],["routerLink","blocklist/servers","routerLinkActive","active",4,"ngIf"],["routerLink","video-abuses/list","routerLinkActive","active"],["routerLink","video-blacklist/list","routerLinkActive","active"],["routerLink","video-auto-blacklist/list","routerLinkActive","active"],["routerLink","blocklist/accounts","routerLinkActive","active"],["routerLink","blocklist/servers","routerLinkActive","active"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.hc(2,Us),a.cc(),a.dc(3,"div",2),a.ad(4,Xs,2,0,"a",3),a.ad(5,Qs,2,1,"a",4),a.ad(6,Ks,2,0,"a",5),a.ad(7,qs,2,0,"a",6),a.ad(8,Ws,2,0,"a",7),a.cc(),a.cc(),a.Yb(9,"router-outlet")),2&e&&(a.Jb(4),a.Dc("ngIf",t.hasVideoAbusesRight()),a.Jb(1),a.Dc("ngIf",t.hasVideoBlacklistRight()),a.Jb(1),a.Dc("ngIf",t.autoBlacklistVideosEnabled&&t.hasVideoBlacklistRight()),a.Jb(1),a.Dc("ngIf",t.hasAccountsBlocklistRight()),a.Jb(1),a.Dc("ngIf",t.hasServersBlocklistRight()))},directives:[p.u,O.m,O.k,O.j],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.caption[_ngcontent-%COMP%]{justify-content:flex-end}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:250px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;flex-grow:1}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:250px){.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}.moderation-expanded[_ngcontent-%COMP%]{font-size:90%}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;vertical-align:top;text-align:right}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]{display:inline-flex;word-wrap:break-word}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0!important}.video-table-states[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:.4rem}.screenratio[_ngcontent-%COMP%]{position:relative;width:100%;height:0;padding-bottom:56%}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;position:absolute;height:100%;width:100%;display:inline-flex;justify-content:center;align-items:center;color:var(--inputPlaceholderColor)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{text-decoration:none!important}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.screenratio[_ngcontent-%COMP%]   div.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.screenratio[_ngcontent-%COMP%]     iframe{position:absolute;width:100%!important;height:100%!important;left:0;top:0}.chip[_ngcontent-%COMP%]{align-items:center;border-radius:5rem;display:inline-flex;font-size:90%;color:var(--mainForegroundColor);line-height:1rem;margin:.1rem;max-width:320px;overflow:hidden;padding:.2rem .4rem;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}.chip[_ngcontent-%COMP%], .chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:1.2rem;vertical-align:middle}.chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-left:-.4rem;margin-right:.2rem;width:1.2rem;border-radius:50%;display:inline-block;line-height:1.25;position:relative}.chip.two-lines[_ngcontent-%COMP%]{height:2rem}.chip.two-lines[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:2rem;width:2rem}.chip.two-lines[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:2rem;margin-left:.1rem;margin-right:.1rem;justify-content:center}my-action-dropdown.show[_ngcontent-%COMP%]     .dropdown-root{display:block!important}.video-table-video-link[_ngcontent-%COMP%]{position:relative;top:3px}.video-table-video-link[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]{display:inline-flex}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;height:45px;width:80px;margin-right:.5rem;border-radius:2px;border:none;background:transparent;display:inline-flex;justify-content:center;align-items:center;position:relative}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover{text-decoration:none!important}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--inputPlaceholderColor)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .video-table-video-image-label[_ngcontent-%COMP%]{display:inline-block;background-color:rgba(0,0,0,.7);color:#fff;position:absolute;border-radius:3px;font-size:10px;padding:0 3px;line-height:1.3;bottom:2px;right:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;justify-content:center;font-size:90%;color:var(--mainForegroundColor);line-height:1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:80%;color:grey;margin-left:.1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{font-size:80%}"]}),e})();const ed=["currentPageReportTemplate","\u6B63\u5728\u986F\u793A " + "\ufffd0\ufffd" + " \u5230 " + "\ufffd1\ufffd" + " \u7684 " + "\ufffd2\ufffd" + " \u975C\u97F3\u5E33\u865F"],td=["placeholder","\u904E\u6FFE\u5668\u2026\u2026"];var nd,od,cd;function id(e,t){if(1&e){const e=a.ec();a.dc(0,"div",5),a.dc(1,"div",6),a.dc(2,"input",7),a.jc(3,td),a.sc("keyup",(function(t){return a.Rc(e),a.wc().onSearch(t)})),a.cc(),a.dc(4,"a",8),a.sc("click",(function(){return a.Rc(e),a.wc().resetSearch()})),a.cc(),a.dc(5,"span",9),a.hc(6,nd),a.cc(),a.cc(),a.cc()}}function ad(e,t){1&e&&(a.dc(0,"tr"),a.dc(1,"th",10),a.hc(2,od),a.cc(),a.dc(3,"th",11),a.nc(4,cd),a.Yb(5,"p-sortIcon",12),a.kc(),a.cc(),a.Yb(6,"th",13),a.cc())}nd="\u6E05\u9664\u904E\u6FFE\u5668",od="\u5E33\u865F",cd="\u975C\u97F3\u65BC " + "\ufffd#5\ufffd" + "" + "\ufffd/#5\ufffd" + "";const rd=["title","\u5728\u65B0\u5206\u9801\u4E2D\u958B\u555F\u5E33\u865F"];var ld,sd,dd;function gd(e,t){if(1&e){const e=a.ec();a.dc(0,"tr"),a.dc(1,"td"),a.dc(2,"a",14),a.jc(3,rd),a.dc(4,"div",15),a.dc(5,"img",16),a.sc("error",(function(t){return a.Rc(e),a.wc().switchToDefaultAvatar(t)})),a.cc(),a.dc(6,"div"),a.cd(7),a.dc(8,"span",17),a.cd(9),a.cc(),a.cc(),a.cc(),a.cc(),a.cc(),a.dc(10,"td"),a.cd(11),a.xc(12,"date"),a.cc(),a.dc(13,"td",18),a.dc(14,"button",19),a.sc("click",(function(){a.Rc(e);const n=t.$implicit;return a.wc().unblockAccount(n)})),a.hc(15,ld),a.cc(),a.cc(),a.cc()}if(2&e){const e=t.$implicit;a.Jb(2),a.Dc("href",e.blockedAccount.url,a.Tc),a.Jb(3),a.Dc("src",null==e.blockedAccount.avatar?null:e.blockedAccount.avatar.path,a.Tc),a.Jb(2),a.ed(" ",e.blockedAccount.displayName," "),a.Jb(2),a.dd(e.blockedAccount.nameWithHost),a.Jb(2),a.dd(a.zc(12,5,e.createdAt,"short"))}}function ud(e,t){1&e&&(a.bc(0),a.hc(1,sd),a.ac())}function bd(e,t){1&e&&(a.bc(0),a.hc(1,dd),a.ac())}function pd(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",20),a.dc(2,"div",21),a.ad(3,ud,2,0,"ng-container",22),a.ad(4,bd,2,0,"ng-container",22),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngIf",e.search),a.Jb(1),a.Dc("ngIf",!e.search)}}ld="\u89E3\u9664\u975C\u97F3",sd="\u6C92\u6709\u5E33\u865F\u7B26\u5408\u76EE\u524D\u7684\u904E\u6FFE\u5668\u3002",dd="\u627E\u4E0D\u5230\u5E33\u865F\u3002";let fd=(()=>{class e extends i.g{constructor(e,t,n){super(),this.notifier=e,this.blocklistService=t,this.i18n=n,this.blockedAccounts=[],this.totalRecords=0,this.sort={field:"createdAt",order:-1},this.pagination={count:this.rowsPerPage,start:0}}ngOnInit(){this.initialize()}getIdentifier(){return"InstanceAccountBlocklistComponent"}switchToDefaultAvatar(e){e.target.src=rr.a.GET_DEFAULT_AVATAR_URL()}unblockAccount(e){const t=e.blockedAccount;this.blocklistService.unblockAccountByInstance(t).subscribe(()=>{this.notifier.success(this.i18n("Account {{nameWithHost}} unmuted by your instance.",{nameWithHost:t.nameWithHost})),this.loadData()})}loadData(){return this.blocklistService.getInstanceAccountBlocklist({pagination:this.pagination,sort:this.sort,search:this.search}).subscribe(e=>{this.blockedAccounts=e.data,this.totalRecords=e.total},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.f),a.Xb(ll.a),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-instance-account-blocklist"]],features:[a.Gb],decls:6,vars:12,consts:[[3,"value","lazy","paginator","totalRecords","rows","rowsPerPageOptions","sortField","sortOrder","showCurrentPageReport","onLazyLoad","onPage",6,"currentPageReportTemplate"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"caption"],[1,"ml-auto","has-feedback","has-clear"],["type","text","name","table-filter","id","table-filter",3,"keyup",6,"placeholder"],[1,"glyphicon","glyphicon-remove-sign","form-control-feedback","form-control-clear",3,"click"],[1,"sr-only"],[2,"width","100%"],["pSortableColumn","createdAt",2,"width","150px"],["field","createdAt"],[2,"width","150px"],["target","_blank","rel","noopener noreferrer",3,"href",6,"title"],[1,"chip","two-lines"],["alt","Avatar",1,"avatar",3,"src","error"],[1,"text-muted"],[1,"action-cell"],[1,"unblock-button",3,"click"],["colspan","6"],[1,"empty-table-message"],[4,"ngIf"]],template:function(e,t){1&e&&(a.dc(0,"p-table",0),a.jc(1,ed),a.sc("onLazyLoad",(function(e){return t.loadLazy(e)}))("onPage",(function(e){return t.onPage(e)})),a.ad(2,id,7,0,"ng-template",1),a.ad(3,ad,7,0,"ng-template",2),a.ad(4,gd,16,8,"ng-template",3),a.ad(5,pd,5,2,"ng-template",4),a.cc()),2&e&&(a.lc("{first}")("{last}")("{totalRecords}"),a.ic(1),a.Dc("value",t.blockedAccounts)("lazy",!0)("paginator",t.totalRecords>0)("totalRecords",t.totalRecords)("rows",t.rowsPerPage)("rowsPerPageOptions",t.rowsPerPageOptions)("sortField",t.sort.field)("sortOrder",t.sort.order)("showCurrentPageReport",!0))},directives:[Pn.q,An.d,Pn.p,Pn.o,p.u],pipes:[p.f],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.caption[_ngcontent-%COMP%]{justify-content:flex-end}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:250px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;flex-grow:1}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:250px){.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}.moderation-expanded[_ngcontent-%COMP%]{font-size:90%}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;vertical-align:top;text-align:right}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]{display:inline-flex;word-wrap:break-word}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0!important}.video-table-states[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:.4rem}.screenratio[_ngcontent-%COMP%]{position:relative;width:100%;height:0;padding-bottom:56%}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;position:absolute;height:100%;width:100%;display:inline-flex;justify-content:center;align-items:center;color:var(--inputPlaceholderColor)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{text-decoration:none!important}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.screenratio[_ngcontent-%COMP%]   div.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.screenratio[_ngcontent-%COMP%]     iframe{position:absolute;width:100%!important;height:100%!important;left:0;top:0}.chip[_ngcontent-%COMP%]{align-items:center;border-radius:5rem;display:inline-flex;font-size:90%;color:var(--mainForegroundColor);line-height:1rem;margin:.1rem;max-width:320px;overflow:hidden;padding:.2rem .4rem;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}.chip[_ngcontent-%COMP%], .chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:1.2rem;vertical-align:middle}.chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-left:-.4rem;margin-right:.2rem;width:1.2rem;border-radius:50%;display:inline-block;line-height:1.25;position:relative}.chip.two-lines[_ngcontent-%COMP%]{height:2rem}.chip.two-lines[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:2rem;width:2rem}.chip.two-lines[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:2rem;margin-left:.1rem;margin-right:.1rem;justify-content:center}my-action-dropdown.show[_ngcontent-%COMP%]     .dropdown-root{display:block!important}.video-table-video-link[_ngcontent-%COMP%]{position:relative;top:3px}.video-table-video-link[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]{display:inline-flex}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;height:45px;width:80px;margin-right:.5rem;border-radius:2px;border:none;background:transparent;display:inline-flex;justify-content:center;align-items:center;position:relative}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover{text-decoration:none!important}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--inputPlaceholderColor)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .video-table-video-image-label[_ngcontent-%COMP%]{display:inline-block;background-color:rgba(0,0,0,.7);color:#fff;position:absolute;border-radius:3px;font-size:10px;padding:0 3px;line-height:1.3;bottom:2px;right:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;justify-content:center;font-size:90%;color:var(--mainForegroundColor);line-height:1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:80%;color:grey;margin-left:.1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{font-size:80%}",'.unblock-button[_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.unblock-button.focus-visible[_ngcontent-%COMP%], .unblock-button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(88,88,88,.05)}.unblock-button[_ngcontent-%COMP%], .unblock-button[_ngcontent-%COMP%]:active, .unblock-button[_ngcontent-%COMP%]:focus{background-color:#e5e5e5;color:var(--greyForegroundColor)}.unblock-button.disabled[_ngcontent-%COMP%], .unblock-button[_ngcontent-%COMP%]:active, .unblock-button[_ngcontent-%COMP%]:focus, .unblock-button[_ngcontent-%COMP%]:hover, .unblock-button[disabled][_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:#efefef}.unblock-button.disabled[_ngcontent-%COMP%], .unblock-button[disabled][_ngcontent-%COMP%]{cursor:default}.unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:var(--greyForegroundColor)}.unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:var(--greyForegroundColor)}.unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:var(--greyForegroundColor)}']}),e})();const hd=["batchDomainsModal"],md=["currentPageReportTemplate","\u6B63\u5728\u986F\u793A " + "\ufffd0\ufffd" + " \u5230 " + "\ufffd1\ufffd" + " \u7684 " + "\ufffd2\ufffd" + " \u975C\u97F3\u7DB2\u57DF"],vd=["action","\u975C\u97F3\u7DB2\u57DF"],Cd=["placeholder","\u904E\u6FFE\u5668\u2026\u2026"];var Od,Pd,_d,Md;function yd(e,t){if(1&e){const e=a.ec();a.dc(0,"div",7),a.dc(1,"div",8),a.dc(2,"input",9),a.jc(3,Cd),a.sc("keyup",(function(t){return a.Rc(e),a.wc().onSearch(t)})),a.cc(),a.dc(4,"a",10),a.sc("click",(function(){return a.Rc(e),a.wc().resetSearch()})),a.cc(),a.dc(5,"span",11),a.hc(6,Od),a.cc(),a.cc(),a.dc(7,"a",12),a.sc("click",(function(){return a.Rc(e),a.wc().addServersToBlock()}))("key.enter",(function(){return a.Rc(e),a.wc().addServersToBlock()})),a.Yb(8,"my-global-icon",13),a.bc(9),a.hc(10,Pd),a.ac(),a.cc(),a.cc()}}function wd(e,t){1&e&&(a.dc(0,"tr"),a.dc(1,"th",14),a.hc(2,_d),a.cc(),a.dc(3,"th",15),a.nc(4,Md),a.Yb(5,"p-sortIcon",16),a.kc(),a.cc(),a.Yb(6,"th",17),a.cc())}Od="\u6E05\u9664\u904E\u6FFE\u5668",Pd="\u975C\u97F3\u7DB2\u57DF",_d="\u5BE6\u9AD4",Md="\u975C\u97F3\u65BC " + "\ufffd#5\ufffd" + "" + "\ufffd/#5\ufffd" + "";const xd=["title","\u5728\u65B0\u5206\u9801\u4E2D\u958B\u555F\u7AD9\u81FA"];var kd,Td,Ad;function Id(e,t){if(1&e){const e=a.ec();a.dc(0,"tr"),a.dc(1,"td"),a.dc(2,"a",18),a.jc(3,xd),a.cd(4),a.Yb(5,"span",19),a.cc(),a.cc(),a.dc(6,"td"),a.cd(7),a.xc(8,"date"),a.cc(),a.dc(9,"td",20),a.dc(10,"button",21),a.sc("click",(function(){a.Rc(e);const n=t.$implicit;return a.wc().unblockServer(n)})),a.hc(11,kd),a.cc(),a.cc(),a.cc()}if(2&e){const e=t.$implicit;a.Jb(2),a.Dc("href","https://"+e.blockedServer.host,a.Tc),a.Jb(2),a.ed(" ",e.blockedServer.host," "),a.Jb(3),a.dd(a.zc(8,3,e.createdAt,"short"))}}function Sd(e,t){1&e&&(a.bc(0),a.hc(1,Td),a.ac())}function Rd(e,t){1&e&&(a.bc(0),a.hc(1,Ad),a.ac())}function Dd(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",22),a.dc(2,"div",23),a.ad(3,Sd,2,0,"ng-container",24),a.ad(4,Rd,2,0,"ng-container",24),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("ngIf",e.search),a.Jb(1),a.Dc("ngIf",!e.search)}}kd="\u89E3\u9664\u975C\u97F3",Td="\u627E\u4E0D\u5230\u7B26\u5408\u76EE\u524D\u904E\u6FFE\u5668\u7684\u4F3A\u670D\u5668\u3002",Ad="\u627E\u4E0D\u5230\u4F3A\u670D\u5668\u3002";let zd=(()=>{class e extends i.g{constructor(e,t,n){super(),this.notifier=e,this.blocklistService=t,this.i18n=n,this.blockedServers=[],this.totalRecords=0,this.sort={field:"createdAt",order:-1},this.pagination={count:this.rowsPerPage,start:0}}ngOnInit(){this.initialize()}getIdentifier(){return"InstanceServerBlocklistComponent"}unblockServer(e){const t=e.blockedServer.host;this.blocklistService.unblockServerByInstance(t).subscribe(()=>{this.notifier.success(this.i18n("Instance {{host}} unmuted by your instance.",{host:t})),this.loadData()})}addServersToBlock(){this.batchDomainsModal.openModal()}onDomainsToBlock(e){e.forEach(e=>{this.blocklistService.blockServerByInstance(e).subscribe(()=>{this.notifier.success(this.i18n("Instance {{domain}} muted by your instance.",{domain:e})),this.loadData()})})}loadData(){return this.blocklistService.getInstanceServerBlocklist({pagination:this.pagination,sort:this.sort,search:this.search}).subscribe(e=>{this.blockedServers=e.data,this.totalRecords=e.total},e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.f),a.Xb(ll.a),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-instance-server-blocklist"]],viewQuery:function(e,t){var n;1&e&&a.gd(hd,!0),2&e&&a.Oc(n=a.tc())&&(t.batchDomainsModal=n.first)},features:[a.Gb],decls:9,vars:12,consts:[[3,"value","lazy","paginator","totalRecords","rows","rowsPerPageOptions","sortField","sortOrder","showCurrentPageReport","onLazyLoad","onPage",6,"currentPageReportTemplate"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"domains",6,"action"],["batchDomainsModal",""],[1,"caption"],[1,"ml-auto","has-feedback","has-clear"],["type","text","name","table-filter","id","table-filter",3,"keyup",6,"placeholder"],[1,"glyphicon","glyphicon-remove-sign","form-control-feedback","form-control-clear",3,"click"],[1,"sr-only"],[1,"ml-2","block-button",3,"click","key.enter"],["iconName","add"],[2,"width","100%"],["pSortableColumn","createdAt",2,"width","150px"],["field","createdAt"],[2,"width","150px"],["target","_blank","rel","noopener noreferrer",3,"href",6,"title"],[1,"glyphicon","glyphicon-new-window"],[1,"action-cell"],[1,"unblock-button",3,"click"],["colspan","6"],[1,"empty-table-message"],[4,"ngIf"]],template:function(e,t){1&e&&(a.dc(0,"p-table",0),a.jc(1,md),a.sc("onLazyLoad",(function(e){return t.loadLazy(e)}))("onPage",(function(e){return t.onPage(e)})),a.ad(2,yd,11,0,"ng-template",1),a.ad(3,wd,7,0,"ng-template",2),a.ad(4,Id,12,6,"ng-template",3),a.ad(5,Dd,5,2,"ng-template",4),a.cc(),a.dc(6,"my-batch-domains-modal",5,6),a.jc(8,vd),a.sc("domains",(function(e){return t.onDomainsToBlock(e)})),a.cc()),2&e&&(a.lc("{first}")("{last}")("{totalRecords}"),a.ic(1),a.Dc("value",t.blockedServers)("lazy",!0)("paginator",t.totalRecords>0)("totalRecords",t.totalRecords)("rows",t.rowsPerPage)("rowsPerPageOptions",t.rowsPerPageOptions)("sortField",t.sort.field)("sortOrder",t.sort.order)("showCurrentPageReport",!0))},directives:[Pn.q,An.d,Co,ro.a,Pn.p,Pn.o,p.u],pipes:[p.f],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.caption[_ngcontent-%COMP%]{justify-content:flex-end}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:250px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;flex-grow:1}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:250px){.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}.moderation-expanded[_ngcontent-%COMP%]{font-size:90%}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;vertical-align:top;text-align:right}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]{display:inline-flex;word-wrap:break-word}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0!important}.video-table-states[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:.4rem}.screenratio[_ngcontent-%COMP%]{position:relative;width:100%;height:0;padding-bottom:56%}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;position:absolute;height:100%;width:100%;display:inline-flex;justify-content:center;align-items:center;color:var(--inputPlaceholderColor)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{text-decoration:none!important}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.screenratio[_ngcontent-%COMP%]   div.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.screenratio[_ngcontent-%COMP%]     iframe{position:absolute;width:100%!important;height:100%!important;left:0;top:0}.chip[_ngcontent-%COMP%]{align-items:center;border-radius:5rem;display:inline-flex;font-size:90%;color:var(--mainForegroundColor);line-height:1rem;margin:.1rem;max-width:320px;overflow:hidden;padding:.2rem .4rem;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}.chip[_ngcontent-%COMP%], .chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:1.2rem;vertical-align:middle}.chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-left:-.4rem;margin-right:.2rem;width:1.2rem;border-radius:50%;display:inline-block;line-height:1.25;position:relative}.chip.two-lines[_ngcontent-%COMP%]{height:2rem}.chip.two-lines[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:2rem;width:2rem}.chip.two-lines[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:2rem;margin-left:.1rem;margin-right:.1rem;justify-content:center}my-action-dropdown.show[_ngcontent-%COMP%]     .dropdown-root{display:block!important}.video-table-video-link[_ngcontent-%COMP%]{position:relative;top:3px}.video-table-video-link[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]{display:inline-flex}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;height:45px;width:80px;margin-right:.5rem;border-radius:2px;border:none;background:transparent;display:inline-flex;justify-content:center;align-items:center;position:relative}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover{text-decoration:none!important}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--inputPlaceholderColor)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .video-table-video-image-label[_ngcontent-%COMP%]{display:inline-block;background-color:rgba(0,0,0,.7);color:#fff;position:absolute;border-radius:3px;font-size:10px;padding:0 3px;line-height:1.3;bottom:2px;right:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;justify-content:center;font-size:90%;color:var(--mainForegroundColor);line-height:1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:80%;color:grey;margin-left:.1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{font-size:80%}",'a[_ngcontent-%COMP%]{display:inline-block}a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{color:var(--mainForegroundColor)}a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:80%;color:var(--inputPlaceholderColor)}.unblock-button[_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.unblock-button.focus-visible[_ngcontent-%COMP%], .unblock-button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(88,88,88,.05)}.unblock-button[_ngcontent-%COMP%], .unblock-button[_ngcontent-%COMP%]:active, .unblock-button[_ngcontent-%COMP%]:focus{background-color:#e5e5e5;color:var(--greyForegroundColor)}.unblock-button.disabled[_ngcontent-%COMP%], .unblock-button[_ngcontent-%COMP%]:active, .unblock-button[_ngcontent-%COMP%]:focus, .unblock-button[_ngcontent-%COMP%]:hover, .unblock-button[disabled][_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:#efefef}.unblock-button.disabled[_ngcontent-%COMP%], .unblock-button[disabled][_ngcontent-%COMP%]{cursor:default}.unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:var(--greyForegroundColor)}.unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], .unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:var(--greyForegroundColor)}.unblock-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:var(--greyForegroundColor)}.block-button[_ngcontent-%COMP%]{display:inline-block;border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.block-button[_ngcontent-%COMP%]:active, .block-button[_ngcontent-%COMP%]:focus, .block-button[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.block-button.focus-visible[_ngcontent-%COMP%], .block-button[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.block-button[_ngcontent-%COMP%], .block-button[_ngcontent-%COMP%]:active, .block-button[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.block-button[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.block-button.disabled[_ngcontent-%COMP%], .block-button[disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}.block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], .block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], .block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], .block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], .block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:#fff}.block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], .block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], .block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], .block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], .block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:#fff}.block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:#fff}.block-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;width:20px;margin-right:5px;top:-1px}']}),e})();const Ed=[{path:"moderation",component:Zs,children:[{path:"",redirectTo:"video-abuses/list",pathMatch:"full"},{path:"video-abuses",redirectTo:"video-abuses/list",pathMatch:"full"},{path:"video-blacklist",redirectTo:"video-blacklist/list",pathMatch:"full"},{path:"video-auto-blacklist",redirectTo:"video-auto-blacklist/list",pathMatch:"full"},{path:"video-abuses/list",component:rs,canActivate:[g.l],data:{userRight:Mn.e.MANAGE_VIDEO_ABUSES,meta:{title:"Video abuses list"}}},{path:"video-auto-blacklist/list",component:Fs,canActivate:[g.l],data:{userRight:Mn.e.MANAGE_VIDEO_BLACKLIST,meta:{title:"Auto-blacklisted videos"}}},{path:"video-blacklist/list",component:Es,canActivate:[g.l],data:{userRight:Mn.e.MANAGE_VIDEO_BLACKLIST,meta:{title:"Blacklisted videos"}}},{path:"blocklist/accounts",component:fd,canActivate:[g.l],data:{userRight:Mn.e.MANAGE_ACCOUNTS_BLOCKLIST,meta:{title:"Muted accounts"}}},{path:"blocklist/servers",component:zd,canActivate:[g.l],data:{userRight:Mn.e.MANAGE_SERVERS_BLOCKLIST,meta:{title:"Muted instances"}}}]}];var Ld=n("lJxs");let $d=(()=>{class e{constructor(e,t,n){this.authHttp=e,this.restService=t,this.restExtractor=n}getJobs(t,n,c,i){let a=new r.f;return a=this.restService.addRestGetParams(a,c,i),"all"!==n&&(a=a.append("jobType",n)),this.authHttp.get(e.BASE_JOB_URL+"/"+t,{params:a}).pipe(Object(Ld.a)(e=>this.restExtractor.convertResultListDateToHuman(e,["createdAt","processedOn","finishedOn"])),Object(Ld.a)(e=>this.restExtractor.applyToResultListData(e,this.prettyPrintData)),Object(Ld.a)(e=>this.restExtractor.applyToResultListData(e,this.buildUniqId)),Object(o.a)(e=>this.restExtractor.handleError(e)))}prettyPrintData(e){const t=JSON.stringify(e.data,null,2);return Object.assign(e,{data:t})}buildUniqId(e){return Object.assign(e,{uniqId:`${e.id}-${e.type}`})}}return e.BASE_JOB_URL=c.a.apiUrl+"/api/v1/jobs",e.\u0275fac=function(t){return new(t||e)(a.oc(r.b),a.oc(i.f),a.oc(i.e))},e.\u0275prov=a.Tb({token:e,factory:e.\u0275fac}),e})();var Jd,Nd,jd,Fd,Ud,Vd;function Bd(e,t){if(1&e&&(a.dc(0,"option",12),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e),a.Jb(1),a.dd(e)}}function Gd(e,t){if(1&e&&(a.dc(0,"option",12),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e),a.Jb(1),a.dd(e)}}function Yd(e,t){1&e&&(a.dc(0,"tr"),a.Yb(1,"th",13),a.dc(2,"th",14),a.hc(3,jd),a.cc(),a.dc(4,"th",15),a.hc(5,Fd),a.cc(),a.dc(6,"th",16),a.nc(7,Ud),a.Yb(8,"p-sortIcon",17),a.kc(),a.cc(),a.dc(9,"th",18),a.hc(10,Vd),a.cc(),a.cc())}Jd="\u5DE5\u4F5C\u985E\u578B",Nd="\u5DE5\u4F5C\u72C0\u614B",jd="ID",Fd="\u985E\u578B",Ud="" + "\ufffd#8\ufffd" + "" + "\ufffd/#8\ufffd" + " \u5EFA\u7ACB",Vd="\u72C0\u614B";const Hd=["ngbTooltip","\u66F4\u591A\u8CC7\u8A0A"];var Xd,Qd,Kd,qd,Wd;function Zd(e,t){1&e&&(a.dc(0,"td",28),a.Yb(1,"span",29),a.dc(2,"span"),a.hc(3,Xd),a.cc(),a.cc())}function eg(e,t){1&e&&(a.dc(0,"td",30),a.Yb(1,"span",31),a.dc(2,"span"),a.hc(3,Qd),a.cc(),a.cc())}function tg(e,t){1&e&&(a.dc(0,"td",30),a.Yb(1,"span",32),a.dc(2,"span"),a.hc(3,Kd),a.cc(),a.cc())}function ng(e,t){1&e&&(a.dc(0,"td",33),a.Yb(1,"span",34),a.dc(2,"span"),a.hc(3,qd),a.cc(),a.cc())}function og(e,t){1&e&&(a.dc(0,"td",35),a.Yb(1,"span",36),a.dc(2,"span"),a.hc(3,Wd),a.cc(),a.cc())}function cg(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",19),a.dc(2,"span",20),a.jc(3,Hd),a.Yb(4,"i",21),a.cc(),a.cc(),a.dc(5,"td",22),a.cd(6),a.cc(),a.dc(7,"td",15),a.cd(8),a.cc(),a.dc(9,"td",23),a.cd(10),a.cc(),a.ad(11,Zd,4,0,"td",24),a.ad(12,eg,4,0,"td",25),a.ad(13,tg,4,0,"td",25),a.ad(14,ng,4,0,"td",26),a.ad(15,og,4,0,"td",27),a.cc()),2&e){const e=t.expanded,n=t.$implicit;a.Jb(2),a.Dc("pRowToggler",n),a.Jb(2),a.Dc("ngClass",e?"glyphicon glyphicon-menu-down":"glyphicon glyphicon-menu-right"),a.Jb(1),a.Dc("title",n.id),a.Jb(1),a.dd(n.id),a.Jb(2),a.dd(n.type),a.Jb(2),a.dd(n.createdAt),a.Jb(1),a.Dc("ngIf","delayed"===n.state),a.Jb(1),a.Dc("ngIf","waiting"===n.state),a.Jb(1),a.Dc("ngIf","active"===n.state),a.Jb(1),a.Dc("ngIf","completed"===n.state),a.Jb(1),a.Dc("ngIf","failed"===n.state)}}function ig(e,t){if(1&e&&(a.dc(0,"tr",39),a.dc(1,"td",37),a.dc(2,"pre"),a.cd(3),a.cc(),a.cc(),a.cc()),2&e){const e=a.wc().$implicit;a.Jb(3),a.dd(e.error)}}Xd="\u5DF2\u5EF6\u9072\u3002",Qd="\u5373\u5C07\u958B\u59CB\u2026\u2026",Kd="\u6B63\u5728\u57F7\u884C\u2026\u2026",qd="\u5DF2\u7D50\u675F",Wd="\u5931\u6557";const ag=function(e,t,n,o){return[e,t,n,o]};function rg(e,t){if(1&e&&(a.dc(0,"tr"),a.dc(1,"td",37),a.dc(2,"pre"),a.cd(3),a.cc(),a.cc(),a.cc(),a.dc(4,"tr"),a.dc(5,"td",37),a.dc(6,"pre"),a.cd(7),a.cc(),a.cc(),a.cc(),a.ad(8,ig,4,1,"tr",38)),2&e){const e=t.$implicit;a.Jb(3),a.dd(a.Kc(3,ag,"Job: "+e.id,"Type: "+e.type,"Processed on "+(e.processedOn||"-"),"Finished on "+(e.finishedOn||"-")).join("\n")),a.Jb(4),a.dd(e.data),a.Jb(1),a.Dc("ngIf",e.error)}}const lg=function(){return{"table-layout":"auto"}};let sg=(()=>{class e extends i.g{constructor(e,t,n){super(),this.notifier=e,this.jobsService=t,this.i18n=n,this.jobState="waiting",this.jobStates=["active","completed","failed","waiting","delayed"],this.jobType="all",this.jobTypes=["all","activitypub-follow","activitypub-http-broadcast","activitypub-http-fetcher","activitypub-http-unicast","email","video-transcoding","video-file-import","video-import","videos-views","activitypub-refresher","video-redundancy"],this.jobs=[],this.sort={field:"createdAt",order:-1},this.pagination={count:this.rowsPerPage,start:0}}ngOnInit(){this.loadJobStateAndType(),this.initialize()}getIdentifier(){return"JobsComponent"}onJobStateOrTypeChanged(){this.pagination.start=0,this.loadData(),this.saveJobStateAndType()}loadData(){this.jobsService.getJobs(this.jobState,this.jobType,this.pagination,this.sort).subscribe(e=>{this.jobs=e.data,this.totalRecords=e.total},e=>this.notifier.error(e.message))}loadJobStateAndType(){const t=Qo.a.getItem(e.LOCAL_STORAGE_STATE);t&&(this.jobState=t);const n=Qo.a.getItem(e.LOCAL_STORAGE_TYPE);n&&(this.jobType=n)}saveJobStateAndType(){Qo.a.setItem(e.LOCAL_STORAGE_STATE,this.jobState),Qo.a.setItem(e.LOCAL_STORAGE_TYPE,this.jobType)}}return e.LOCAL_STORAGE_STATE="jobs-list-state",e.LOCAL_STORAGE_TYPE="jobs-list-type",e.\u0275fac=function(t){return new(t||e)(a.Xb(g.f),a.Xb($d),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-jobs"]],features:[a.Gb],decls:17,vars:15,consts:[[1,"admin-sub-header"],[1,"select-filter-block"],["for","jobType"],[1,"peertube-select-container"],["id","jobType","name","jobType",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","jobState"],["id","jobState","name","jobState",1,"form-control",3,"ngModel","ngModelChange"],["dataKey","uniqId",3,"value","lazy","paginator","totalRecords","rows","sortField","sortOrder","first","tableStyle","expandedRowKeys","onLazyLoad","onPage"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[3,"value"],[2,"width","40px"],[1,"job-id"],[1,"job-type"],["pSortableColumn","createdAt",1,"job-date"],["field","createdAt"],[1,"job-state"],[1,"expand-cell"],[1,"expander",3,"pRowToggler",6,"ngbTooltip"],[3,"ngClass"],[1,"job-id",3,"title"],[1,"job-date"],["class","job-state","class","text-muted",4,"ngIf"],["class","job-state","class","text-warning",4,"ngIf"],["class","job-state","class","text-success",4,"ngIf"],["class","job-state","class","text-danger",4,"ngIf"],[1,"text-muted"],[1,"glyphicon","glyphicon-repeat"],[1,"text-warning"],[1,"glyphicon","glyphicon-hourglass"],[1,"glyphicon","glyphicon-cog"],[1,"text-success"],[1,"glyphicon","glyphicon-ok"],[1,"text-danger"],[1,"glyphicon","glyphicon-remove"],["colspan","4"],["class","job-error",4,"ngIf"],[1,"job-error"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.dc(2,"label",2),a.hc(3,Jd),a.cc(),a.dc(4,"div",3),a.dc(5,"select",4),a.sc("ngModelChange",(function(e){return t.jobType=e}))("ngModelChange",(function(){return t.onJobStateOrTypeChanged()})),a.ad(6,Bd,2,2,"option",5),a.cc(),a.cc(),a.cc(),a.dc(7,"div",1),a.dc(8,"label",6),a.hc(9,Nd),a.cc(),a.dc(10,"div",3),a.dc(11,"select",7),a.sc("ngModelChange",(function(e){return t.jobState=e}))("ngModelChange",(function(){return t.onJobStateOrTypeChanged()})),a.ad(12,Gd,2,2,"option",5),a.cc(),a.cc(),a.cc(),a.cc(),a.dc(13,"p-table",8),a.sc("onLazyLoad",(function(e){return t.loadLazy(e)}))("onPage",(function(e){return t.onPage(e)})),a.ad(14,Yd,11,0,"ng-template",9),a.ad(15,cg,16,11,"ng-template",10),a.ad(16,rg,9,8,"ng-template",11),a.cc()),2&e&&(a.Jb(5),a.Dc("ngModel",t.jobType),a.Jb(1),a.Dc("ngForOf",t.jobTypes),a.Jb(5),a.Dc("ngModel",t.jobState),a.Jb(1),a.Dc("ngForOf",t.jobStates),a.Jb(1),a.Dc("value",t.jobs)("lazy",!0)("paginator",t.totalRecords>0)("totalRecords",t.totalRecords)("rows",t.rowsPerPage)("sortField",t.sort.field)("sortOrder",t.sort.order)("first",t.pagination.start)("tableStyle",a.Gc(14,lg))("expandedRowKeys",t.expandedRows))},directives:[f.F,f.t,f.w,p.t,Pn.q,An.d,f.y,f.I,Pn.p,Pn.o,h.y,Pn.k,p.r,p.u],styles:['.job-id[_ngcontent-%COMP%]{max-width:30vw!important}.job-type[_ngcontent-%COMP%]{width:150px!important}.job-date[_ngcontent-%COMP%]{width:170px!important}.job-state[_ngcontent-%COMP%]{max-width:60px}.admin-sub-header[_ngcontent-%COMP%]{flex-direction:row!important;justify-content:flex-end}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]:not(:last-child){margin-right:10px}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:2px}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:auto;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;font-size:15px}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}@media screen and (max-width:auto){.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{width:100%}}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:15px;content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid transparent;border-top-color:#000;margin-top:-2px;z-index:100}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 35px 0 12px;width:calc(100% + 2px);position:relative;left:1px;border:1px solid #c6c6c6;background:transparent none;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:30px;text-overflow:ellipsis;color:var(--mainForegroundColor)}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.admin-sub-header[_ngcontent-%COMP%]   .select-filter-block[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}td[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{margin-right:10px}pre[_ngcontent-%COMP%]{font-size:11px}.job-error[_ngcontent-%COMP%]{color:red}']}),e})();var dg=n("twO/"),gg=n("oSzE"),ug=n("23KU"),bg=n("uE2L"),pg=function(e,t,n,o){var c=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var r=t[i],l=o?o(n[r],e[r],r,n,e):void 0;void 0===l&&(l=e[r]),c?Object(bg.a)(n,r,l):Object(ug.a)(n,r,l)}return n},fg=n("mkut"),hg=n("7gMY"),mg=n("IzLi"),vg=n("pyRK"),Cg=Object.prototype.hasOwnProperty,Og=n("5WsY"),Pg=function(e){return Object(Og.a)(e)?Object(hg.a)(e,!0):function(e){if(!Object(mg.a)(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Object(vg.a)(e),n=[];for(var o in e)("constructor"!=o||!t&&Cg.call(e,o))&&n.push(o);return n}(e)},_g=n("3/ER"),Mg=n("jN84"),yg=n("tPH9"),wg=n("U6JX"),xg=Object(wg.a)(Object.getPrototypeOf,Object),kg=n("WJ6P"),Tg=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Object(yg.a)(t,Object(Mg.a)(e)),e=xg(e);return t}:kg.a,Ag=n("TFwu"),Ig=n("25cm"),Sg=function(e){return Object(Ig.a)(e,Pg,Tg)},Rg=n("YM6B"),Dg=Object.prototype.hasOwnProperty,zg=n("Ce4a"),Eg=function(e){var t=new e.constructor(e.byteLength);return new zg.a(t).set(new zg.a(e)),t},Lg=/\w*$/,$g=n("ylTp"),Jg=$g.a?$g.a.prototype:void 0,Ng=Jg?Jg.valueOf:void 0,jg=Object.create,Fg=function(){function e(){}return function(t){if(!Object(mg.a)(t))return{};if(jg)return jg(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Ug=n("/1FC"),Vg=n("WOAq"),Bg=n("EUcb"),Gg=n("ovuK"),Yg=n("xutz"),Hg=Yg.a&&Yg.a.isMap,Xg=Hg?Object(Gg.a)(Hg):function(e){return Object(Bg.a)(e)&&"[object Map]"==Object(Rg.a)(e)},Qg=Yg.a&&Yg.a.isSet,Kg=Qg?Object(Gg.a)(Qg):function(e){return Object(Bg.a)(e)&&"[object Set]"==Object(Rg.a)(e)},qg={};qg["[object Arguments]"]=qg["[object Array]"]=qg["[object ArrayBuffer]"]=qg["[object DataView]"]=qg["[object Boolean]"]=qg["[object Date]"]=qg["[object Float32Array]"]=qg["[object Float64Array]"]=qg["[object Int8Array]"]=qg["[object Int16Array]"]=qg["[object Int32Array]"]=qg["[object Map]"]=qg["[object Number]"]=qg["[object Object]"]=qg["[object RegExp]"]=qg["[object Set]"]=qg["[object String]"]=qg["[object Symbol]"]=qg["[object Uint8Array]"]=qg["[object Uint8ClampedArray]"]=qg["[object Uint16Array]"]=qg["[object Uint32Array]"]=!0,qg["[object Error]"]=qg["[object Function]"]=qg["[object WeakMap]"]=!1;var Wg=function e(t,n,o,c,i,a){var r,l=1&n,s=2&n,d=4&n;if(o&&(r=i?o(t,c,i,a):o(t)),void 0!==r)return r;if(!Object(mg.a)(t))return t;var g=Object(Ug.a)(t);if(g){if(r=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Dg.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!l)return function(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t}(t,r)}else{var u=Object(Rg.a)(t),b="[object Function]"==u||"[object GeneratorFunction]"==u;if(Object(Vg.a)(t))return Object(_g.a)(t,l);if("[object Object]"==u||"[object Arguments]"==u||b&&!i){if(r=s||b?{}:function(e){return"function"!=typeof e.constructor||Object(vg.a)(e)?{}:Fg(xg(e))}(t),!l)return s?function(e,t){return pg(e,Tg(e),t)}(t,function(e,t){return e&&pg(t,Pg(t),e)}(r,t)):function(e,t){return pg(e,Object(Mg.a)(e),t)}(t,function(e,t){return e&&pg(t,Object(fg.a)(t),e)}(r,t))}else{if(!qg[u])return i?t:{};r=function(e,t,n){var o,c,i=e.constructor;switch(t){case"[object ArrayBuffer]":return Eg(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function(e,t){var n=t?Eg(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?Eg(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return(c=new(o=e).constructor(o.source,Lg.exec(o))).lastIndex=o.lastIndex,c;case"[object Set]":return new i;case"[object Symbol]":return Ng?Object(Ng.call(e)):{}}}(t,u,l)}}a||(a=new gg.a);var p=a.get(t);if(p)return p;a.set(t,r),Kg(t)?t.forEach((function(c){r.add(e(c,n,o,c,t,a))})):Xg(t)&&t.forEach((function(c,i){r.set(i,e(c,n,o,i,t,a))}));var f=d?s?Sg:Ag.a:s?keysIn:fg.a,h=g?void 0:f(t);return function(e,t){for(var n=-1,o=null==e?0:e.length;++n<o&&!1!==t(e[n],n););}(h||t,(function(c,i){h&&(c=t[i=c]),Object(ug.a)(r,i,e(c,n,o,i,t,a))})),r},Zg=n("IlA0"),eu=n("UTJH"),tu=n("5iG2"),nu=n("Tchk"),ou=function(e,t){return null==(e=function(e,t){return t.length<2?e:Object(eu.a)(e,Object(tu.a)(t,0,-1))}(e,t=Object(Zg.a)(t,e)))||delete e[Object(nu.a)((n=t,o=null==n?0:n.length,o?n[o-1]:void 0))];var n,o},cu=n("8M4i"),iu=Function.prototype.toString,au=Object.prototype.hasOwnProperty,ru=iu.call(Object),lu=function(e){return function(e){if(!Object(Bg.a)(e)||"[object Object]"!=Object(cu.a)(e))return!1;var t=xg(e);if(null===t)return!0;var n=au.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&iu.call(n)==ru}(e)?void 0:e},su=n("Tjpy"),du=Object(su.a)((function(e,t){var n={};if(null==e)return n;var o=!1;t=Object(dg.a)(t,(function(t){return t=Object(Zg.a)(t,e),o||(o=t.length>1),t})),pg(e,Sg(e),n),o&&(n=Wg(n,7,lu));for(var c=t.length;c--;)ou(n,t[c]);return n}));class gu{constructor(e){this.date=new Date(e.timestamp),this.localeDate=this.date.toLocaleString(),this.level=e.level,this.message=e.message;const t=du(e,"timestamp","level","message","label");if(0!==Object.keys(t).length&&(this.meta=JSON.stringify(t,void 0,2)),"audit"===e.level)try{const t=JSON.parse(e.message);this.by=t.user,this.domain=t.domain,this.action=t.action,this.meta=JSON.stringify(t,null,2),this.message=""}catch(n){console.error("Cannot parse audit message.",n)}}}let uu=(()=>{class e{constructor(e,t,n){this.authHttp=e,this.restService=t,this.restExtractor=n}getLogs(t){const{isAuditLog:n,startDate:c}=t;let i=new r.f;return i=i.append("startDate",c),n||(i=i.append("level",t.level)),t.endDate&&i.append("endDate",t.endDate),this.authHttp.get(n?e.BASE_AUDIT_LOG_URL:e.BASE_LOG_URL,{params:i}).pipe(Object(Ld.a)(e=>e.map(e=>new gu(e))),Object(o.a)(e=>this.restExtractor.handleError(e)))}}return e.BASE_LOG_URL=c.a.apiUrl+"/api/v1/server/logs",e.BASE_AUDIT_LOG_URL=c.a.apiUrl+"/api/v1/server/audit-logs",e.\u0275fac=function(t){return new(t||e)(a.oc(r.b),a.oc(i.f),a.oc(i.e))},e.\u0275prov=a.Tb({token:e,factory:e.\u0275fac}),e})();const bu=["logsElement"],pu=["label","\u91CD\u65B0\u6574\u7406"];function fu(e,t){if(1&e&&(a.dc(0,"option",10),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.id),a.Jb(1),a.dd(e.label)}}function hu(e,t){if(1&e&&(a.dc(0,"option",10),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.id),a.Jb(1),a.dd(e.label)}}function mu(e,t){if(1&e&&(a.dc(0,"option",10),a.cd(1),a.cc()),2&e){const e=t.$implicit;a.Dc("value",e.id),a.Jb(1),a.dd(e.label)}}function vu(e,t){if(1&e){const e=a.ec();a.dc(0,"div",1),a.dc(1,"select",2),a.sc("ngModelChange",(function(t){return a.Rc(e),a.wc().level=t}))("ngModelChange",(function(){return a.Rc(e),a.wc().refresh()})),a.ad(2,mu,2,2,"option",3),a.cc(),a.cc()}if(2&e){const e=a.wc();a.Jb(1),a.Dc("ngModel",e.level),a.Jb(1),a.Dc("ngForOf",e.levelChoices)}}var Cu,Ou;function Pu(e,t){1&e&&(a.dc(0,"div"),a.hc(1,Cu),a.cc())}function _u(e,t){if(1&e&&(a.dc(0,"strong",16),a.hc(1,Ou),a.cc()),2&e){const e=a.wc().$implicit;a.Jb(1),a.lc(e.by),a.ic(1)}}function Mu(e,t){if(1&e&&(a.dc(0,"strong",17),a.cd(1),a.cc()),2&e){const e=a.wc().$implicit;a.Jb(1),a.fd("",e.domain," -> ",e.action,"")}}Cu="\u6B63\u5728\u8F09\u5165\u2026\u2026",Ou="\u7531 " + "\ufffd0\ufffd" + " ->";const yu=function(e,t){return{error:e,warn:t}};function wu(e,t){if(1&e&&(a.dc(0,"div",11),a.dc(1,"span",12),a.cd(2),a.cc(),a.dc(3,"span",13),a.cd(4),a.cc(),a.ad(5,_u,2,1,"strong",14),a.ad(6,Mu,2,2,"strong",15),a.cd(7),a.dc(8,"pre"),a.cd(9),a.cc(),a.cc()),2&e){const e=t.$implicit;a.Dc("ngClass",a.Ic(7,yu,"error"===e.level,"warn"===e.level)),a.Jb(2),a.dd(e.level),a.Jb(2),a.ed("[",e.localeDate,"]"),a.Jb(1),a.Dc("ngIf",e.by),a.Jb(1),a.Dc("ngIf",e.domain),a.Jb(1),a.ed(" ",e.message," "),a.Jb(2),a.dd(e.meta)}}let xu=(()=>{class e{constructor(e,t,n){this.logsService=e,this.notifier=t,this.i18n=n,this.loading=!1,this.logs=[],this.timeChoices=[],this.levelChoices=[],this.logTypeChoices=[]}ngOnInit(){this.buildTimeChoices(),this.buildLevelChoices(),this.buildLogTypeChoices(),this.load()}refresh(){this.logs=[],this.load()}load(){this.loading=!0,this.logsService.getLogs({isAuditLog:this.isAuditLog(),level:this.level,startDate:this.startDate}).subscribe(e=>{this.logs=e,setTimeout(()=>{this.logsElement.nativeElement.scrollIntoView({block:"end",inline:"nearest"})})},e=>this.notifier.error(e.message),()=>this.loading=!1)}isAuditLog(){return"audit"===this.logType}buildTimeChoices(){const e=new Date;e.setHours(e.getHours()-1);const t=new Date;t.setDate(t.getDate()-1);const n=new Date;n.setDate(n.getDate()-7),this.timeChoices=[{id:n.toISOString(),label:this.i18n("Last week")},{id:t.toISOString(),label:this.i18n("Last day")},{id:e.toISOString(),label:this.i18n("Last hour")}],this.startDate=e.toISOString()}buildLevelChoices(){this.levelChoices=[{id:"debug",label:this.i18n("Debug")},{id:"info",label:this.i18n("Info")},{id:"warn",label:this.i18n("Warning")},{id:"error",label:this.i18n("Error")}],this.level="warn"}buildLogTypeChoices(){this.logTypeChoices=[{id:"standard",label:this.i18n("Standard logs")},{id:"audit",label:this.i18n("Audit logs")}],this.logType="audit"}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(uu),a.Xb(g.f),a.Xb(l.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&a.Xc(bu,!0),2&e&&a.Oc(n=a.tc())&&(t.logsElement=n.first)},decls:15,vars:7,consts:[[1,"header"],[1,"peertube-select-container"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","peertube-select-container",4,"ngIf"],["icon","refresh",3,"click",6,"label"],[1,"logs"],[4,"ngIf"],["logsElement",""],["class","log-row",3,"ngClass",4,"ngFor","ngForOf"],[3,"value"],[1,"log-row",3,"ngClass"],[1,"log-level"],[1,"log-date"],["class","log-by",4,"ngIf"],["class","log-domain-action",4,"ngIf"],[1,"log-by"],[1,"log-domain-action"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.dc(2,"select",2),a.sc("ngModelChange",(function(e){return t.logType=e}))("ngModelChange",(function(){return t.refresh()})),a.ad(3,fu,2,2,"option",3),a.cc(),a.cc(),a.dc(4,"div",1),a.dc(5,"select",2),a.sc("ngModelChange",(function(e){return t.startDate=e}))("ngModelChange",(function(){return t.refresh()})),a.ad(6,hu,2,2,"option",3),a.cc(),a.cc(),a.ad(7,vu,3,2,"div",4),a.dc(8,"my-button",5),a.jc(9,pu),a.sc("click",(function(){return t.refresh()})),a.cc(),a.cc(),a.dc(10,"div",6),a.ad(11,Pu,2,0,"div",7),a.dc(12,"div",null,8),a.ad(14,wu,10,10,"div",9),a.cc(),a.cc()),2&e&&(a.Jb(2),a.Dc("ngModel",t.logType),a.Jb(1),a.Dc("ngForOf",t.logTypeChoices),a.Jb(2),a.Dc("ngModel",t.startDate),a.Jb(1),a.Dc("ngForOf",t.timeChoices),a.Jb(1),a.Dc("ngIf",!t.isAuditLog()),a.Jb(4),a.Dc("ngIf",t.loading),a.Jb(3),a.Dc("ngForOf",t.logs))},directives:[f.F,f.t,f.w,p.t,p.u,In.a,f.y,f.I,p.r],styles:['.logs[_ngcontent-%COMP%]{font-family:monospace;font-size:13px;max-height:500px;overflow-y:auto;background:rgba(0,0,0,.03);padding:20px}.logs[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]{margin-top:1px;word-break:break-word}.logs[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.07)}.logs[_ngcontent-%COMP%]   .log-level[_ngcontent-%COMP%]{font-weight:600;margin-right:5px}.logs[_ngcontent-%COMP%]   .log-by[_ngcontent-%COMP%]{margin:0 5px}.logs[_ngcontent-%COMP%]   .warn[_ngcontent-%COMP%]{color:var(--mainColor)}.logs[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red}.logs[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin-bottom:5px;white-space:pre-wrap;word-wrap:break-word}.header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:10px}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:150px;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;font-size:15px}.header[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.header[_ngcontent-%COMP%]   .peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}@media screen and (max-width:150px){.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{width:100%}}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:15px;content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid transparent;border-top-color:#000;margin-top:-2px;z-index:100}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 35px 0 12px;width:calc(100% + 2px);position:relative;left:1px;border:1px solid #c6c6c6;background:transparent none;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:30px;text-overflow:ellipsis;color:var(--mainForegroundColor)}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%]{margin-left:10px}@media screen and (max-width:800px){.header[_ngcontent-%COMP%]{flex-direction:column}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%]{width:100%!important;margin-left:0!important;margin-bottom:10px!important}.header[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%]{text-align:center}}@media screen and (max-width:1040px){.main-col[_nghost-%COMP%]:not(.expanded)   .header[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .header[_ngcontent-%COMP%]{flex-direction:column}.main-col[_nghost-%COMP%]:not(.expanded)   .header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%], .main-col[_nghost-%COMP%]:not(.expanded)   .header[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%]{width:100%!important;margin-left:0!important;margin-bottom:10px!important}.main-col[_nghost-%COMP%]:not(.expanded)   .header[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%]{text-align:center}}']}),e})();var ku,Tu,Au,Iu,Su=n("XRCn");function Ru(e,t){1&e&&(a.dc(0,"a",6),a.hc(1,Tu),a.cc())}function Du(e,t){1&e&&(a.dc(0,"a",7),a.hc(1,Au),a.cc())}function zu(e,t){1&e&&(a.dc(0,"a",8),a.hc(1,Iu),a.cc())}ku="\u7CFB\u7D71",Tu="\u5DE5\u4F5C",Au="\u7D00\u9304",Iu="\u9664\u932F";let Eu=(()=>{class e{constructor(e){this.auth=e}hasLogsRight(){return this.auth.getUser().hasRight(Su.f.MANAGE_LOGS)}hasJobsRight(){return this.auth.getUser().hasRight(Su.f.MANAGE_JOBS)}hasDebugRight(){return this.auth.getUser().hasRight(Su.f.MANAGE_DEBUG)}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["ng-component"]],decls:8,vars:3,consts:[[1,"admin-sub-header"],[1,"form-sub-title"],[1,"admin-sub-nav"],["routerLink","jobs","routerLinkActive","active",4,"ngIf"],["routerLink","logs","routerLinkActive","active",4,"ngIf"],["routerLink","debug","routerLinkActive","active",4,"ngIf"],["routerLink","jobs","routerLinkActive","active"],["routerLink","logs","routerLinkActive","active"],["routerLink","debug","routerLinkActive","active"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.hc(2,ku),a.cc(),a.dc(3,"div",2),a.ad(4,Ru,2,0,"a",3),a.ad(5,Du,2,0,"a",4),a.ad(6,zu,2,0,"a",5),a.cc(),a.cc(),a.Yb(7,"router-outlet")),2&e&&(a.Jb(4),a.Dc("ngIf",t.hasJobsRight()),a.Jb(1),a.Dc("ngIf",t.hasLogsRight()),a.Jb(1),a.Dc("ngIf",t.hasDebugRight()))},directives:[p.u,O.m,O.k,O.j],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}"]}),e})(),Lu=(()=>{class e{constructor(e,t,n){this.authHttp=e,this.restService=t,this.restExtractor=n}getDebug(){return this.authHttp.get(e.BASE_DEBUG_URL).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}}return e.BASE_DEBUG_URL=c.a.apiUrl+"/api/v1/server/debug",e.\u0275fac=function(t){return new(t||e)(a.oc(r.b),a.oc(i.f),a.oc(i.e))},e.\u0275prov=a.Tb({token:e,factory:e.\u0275fac}),e})(),$u=(()=>{class e{constructor(e,t){this.debugService=e,this.notifier=t}ngOnInit(){this.load()}load(){this.debugService.getDebug().subscribe(e=>this.debug=e,e=>this.notifier.error(e.message))}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(Lu),a.Xb(g.f))},e.\u0275cmp=a.Rb({type:e,selectors:[["ng-component"]],decls:37,vars:1,consts:[[1,"root"],["href","https://github.com/Chocobozzz/PeerTube/issues/1643#issuecomment-464789666"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"h4"),a.cd(2,"IP"),a.cc(),a.dc(3,"p"),a.cd(4,"PeerTube thinks your web browser public IP is "),a.dc(5,"strong"),a.cd(6),a.cc(),a.cd(7,"."),a.cc(),a.dc(8,"p"),a.cd(9,"If this is not your correct public IP, please consider fixing it because:"),a.cc(),a.dc(10,"ul"),a.dc(11,"li"),a.cd(12,"Views may not be counted correctly (reduced compared to what they should be)"),a.cc(),a.dc(13,"li"),a.cd(14,"Anti brute force system could be overzealous"),a.cc(),a.dc(15,"li"),a.cd(16,"P2P system could not work correctly"),a.cc(),a.cc(),a.dc(17,"p"),a.cd(18,"To fix it:"),a.cc(),a.Yb(19,"p"),a.dc(20,"ul"),a.dc(21,"li"),a.cd(22,"Check the "),a.dc(23,"code"),a.cd(24,"trust_proxy"),a.cc(),a.cd(25," configuration key"),a.cc(),a.dc(26,"li"),a.cd(27,"If you run PeerTube using Docker, check you run the "),a.dc(28,"code"),a.cd(29,"reverse-proxy"),a.cc(),a.cd(30," with "),a.dc(31,"code"),a.cd(32,'network_mode: "host"'),a.cc(),a.cd(33," (see "),a.dc(34,"a",1),a.cd(35,"issue 1643"),a.cc(),a.cd(36,")"),a.cc(),a.cc(),a.cc()),2&e&&(a.Jb(6),a.dd(null==t.debug?null:t.debug.ip))},styles:[".root[_ngcontent-%COMP%]{font-size:15px}.root[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-size:14px;font-weight:600}"]}),e})();const Ju=[{path:"system",component:Eu,data:{},children:[{path:"",redirectTo:"jobs",pathMatch:"full"},{path:"jobs",canActivate:[g.l],component:sg,data:{meta:{userRight:Mn.e.MANAGE_JOBS,title:"Jobs"}}},{path:"logs",canActivate:[g.l],component:xu,data:{meta:{userRight:Mn.e.MANAGE_LOGS,title:"Logs"}}},{path:"debug",canActivate:[g.l],component:$u,data:{meta:{userRight:Mn.e.MANAGE_DEBUG,title:"Debug"}}}]}];var Nu=n("j0I5"),ju=n("eIep"),Fu=(n("8aVP"),n("To7i"));let Uu=(()=>{class e{constructor(e,t,n,o,c){this.authHttp=e,this.restExtractor=t,this.restService=n,this.i18n=o,this.pluginService=c}getPluginTypeOptions(){return[{label:this.i18n("Plugins"),value:Nu.a.PLUGIN},{label:this.i18n("Themes"),value:Nu.a.THEME}]}getPluginTypeLabel(e){return this.i18n(e===Nu.a.PLUGIN?"plugin":"theme")}getPlugins(t,n,c){const i=this.restService.componentPaginationToRestPagination(n);let a=new r.f;return a=this.restService.addRestGetParams(a,i,c),a=a.append("pluginType",t.toString()),this.authHttp.get(e.BASE_PLUGIN_URL,{params:a}).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}searchAvailablePlugins(t,n,c,i){const a=this.restService.componentPaginationToRestPagination(n);let l=new r.f;return l=this.restService.addRestGetParams(l,a,c),l=l.append("pluginType",t.toString()),i&&(l=l.append("search",i)),this.authHttp.get(e.BASE_PLUGIN_URL+"/available",{params:l}).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}getPlugin(t){return this.authHttp.get(e.BASE_PLUGIN_URL+"/"+t).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}getPluginRegisteredSettings(t,n){const c=this.pluginService.nameToNpmName(t,n);return this.authHttp.get(e.BASE_PLUGIN_URL+"/"+c+"/registered-settings").pipe(Object(ju.a)(e=>this.translateSettingsLabel(c,e)),Object(o.a)(e=>this.restExtractor.handleError(e)))}updatePluginSettings(t,n,c){const i=this.pluginService.nameToNpmName(t,n);return this.authHttp.put(e.BASE_PLUGIN_URL+"/"+i+"/settings",{settings:c}).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}uninstall(t,n){const c={npmName:this.pluginService.nameToNpmName(t,n)};return this.authHttp.post(e.BASE_PLUGIN_URL+"/uninstall",c).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}update(t,n){const c={npmName:this.pluginService.nameToNpmName(t,n)};return this.authHttp.post(e.BASE_PLUGIN_URL+"/update",c).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}install(t){return this.authHttp.post(e.BASE_PLUGIN_URL+"/install",{npmName:t}).pipe(Object(o.a)(e=>this.restExtractor.handleError(e)))}translateSettingsLabel(e,t){return this.pluginService.translationsObservable.pipe(Object(Ld.a)(t=>t[e]),Object(Ld.a)(e=>({registeredSettings:t.registeredSettings.map(t=>Object.assign({},t,{label:Object(Su.u)(t.label,e)}))})))}}return e.BASE_PLUGIN_URL=c.a.apiUrl+"/api/v1/plugins",e.\u0275fac=function(t){return new(t||e)(a.oc(r.b),a.oc(i.e),a.oc(i.f),a.oc(l.a),a.oc(Fu.a))},e.\u0275prov=a.Tb({token:e,factory:e.\u0275fac}),e})();var Vu=n("6dmf"),Bu=n("aIhz"),Gu=n("XNiG"),Yu=n("t2ka");const Hu=function(){return["ui-clickable","ui-button-icon-left"]};function Xu(e,t){if(1&e&&a.Yb(0,"span",8),2&e){const e=a.wc(2).$implicit;a.Lb(e.icon),a.Dc("ngClass",a.Gc(3,Hu))}}function Qu(e,t){if(1&e&&(a.bc(0),a.ad(1,Xu,1,4,"span",6),a.dc(2,"span",7),a.cd(3),a.cc(),a.ac()),2&e){const e=a.wc().$implicit;a.Jb(1),a.Dc("ngIf",e.icon),a.Jb(2),a.dd(e.label||"ui-btn")}}function Ku(e,t){1&e&&a.Zb(0)}const qu=function(e,t){return{$implicit:e,index:t}};function Wu(e,t){if(1&e&&a.ad(0,Ku,1,0,"ng-container",9),2&e){const e=a.wc(),t=e.$implicit,n=e.index,o=a.wc();a.Dc("ngTemplateOutlet",o.itemTemplate)("ngTemplateOutletContext",a.Ic(2,qu,t,n))}}const Zu=function(e,t,n,o,c){return{"ui-state-active":e,"ui-state-disabled":t,"ui-state-focus":n,"ui-button-text-icon-left":o,"ui-button-icon-only":c}};function eb(e,t){if(1&e){const e=a.ec();a.dc(0,"div",2,3),a.sc("click",(function(n){a.Rc(e);const o=t.$implicit,c=t.index;return a.wc().onItemClick(n,o,c)}))("keydown.enter",(function(n){a.Rc(e);const o=t.$implicit,c=t.index;return a.wc().onItemClick(n,o,c)}))("focus",(function(t){return a.Rc(e),a.wc().onFocus(t)}))("blur",(function(t){return a.Rc(e),a.wc().onBlur(t)})),a.ad(2,Qu,4,2,"ng-container",4),a.ad(3,Wu,1,5,"ng-template",null,5,a.bd),a.cc()}if(2&e){const e=t.$implicit,n=a.Pc(1),o=a.Pc(4),c=a.wc();a.Mb("ui-button ui-widget ui-state-default ui-button-text-only ",e.styleClass,""),a.Dc("ngClass",a.Lc(11,Zu,c.isSelected(e),c.disabled||e.disabled,n==c.focusedItem,null!=e.icon,e.icon&&!e.label)),a.Kb("aria-pressed",c.isSelected(e))("title",e.title)("aria-label",e.label)("tabindex",c.tabindex)("aria-labelledby",c.ariaLabelledBy),a.Jb(2),a.Dc("ngIf",!c.itemTemplate)("ngIfElse",o)}}const tb={provide:f.s,useExisting:Object(a.ab)(()=>nb),multi:!0};let nb=(()=>{let e=class{constructor(e){this.cd=e,this.tabindex=0,this.onOptionClick=new a.n,this.onChange=new a.n,this.onModelChange=()=>{},this.onModelTouched=()=>{}}get options(){return this._options}set options(e){}ngOnChanges(e){e.options&&(this._options=this.optionLabel?Yu.b.generateSelectItems(e.options.currentValue,this.optionLabel):e.options.currentValue)}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e}onItemClick(e,t,n){if(!this.disabled&&!t.disabled){if(this.multiple){let e=this.findItemIndex(t);this.value=-1!=e?this.value.filter((t,n)=>n!=e):[...this.value||[],t.value]}else this.value=t.value;this.onOptionClick.emit({originalEvent:e,option:t,index:n}),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}}onFocus(e){this.focusedItem=e.target}onBlur(e){this.focusedItem=null,this.onModelTouched()}isSelected(e){return this.multiple?-1!=this.findItemIndex(e):Yu.b.equals(e.value,this.value,this.dataKey)}findItemIndex(e){let t=-1;if(this.value)for(let n=0;n<this.value.length;n++)if(this.value[n]==e.value){t=n;break}return t}};return e.\u0275fac=function(t){return new(t||e)(a.Xb(a.h))},e.\u0275cmp=a.Rb({type:e,selectors:[["p-selectButton"]],contentQueries:function(e,t,n){var o;1&e&&a.Pb(n,a.R,!0),2&e&&a.Oc(o=a.tc())&&(t.itemTemplate=o.first)},inputs:{tabindex:"tabindex",options:"options",disabled:"disabled",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",dataKey:"dataKey",optionLabel:"optionLabel"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[a.Ib([tb]),a.Hb],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["role","button",3,"class","ngClass","click","keydown.enter","focus","blur",4,"ngFor","ngForOf"],["role","button",3,"ngClass","click","keydown.enter","focus","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"ui-button-text","ui-clickable"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.ad(1,eb,5,17,"div",1),a.cc()),2&e&&(a.Lb(t.styleClass),a.Dc("ngClass","ui-selectbutton ui-buttonset ui-widget ui-corner-all ui-buttonset-"+(t.options?t.options.length:0))("ngStyle",t.style),a.Jb(1),a.Dc("ngForOf",t.options))},directives:[p.r,p.y,p.t,p.u,p.C],encapsulation:2}),e})(),ob=(()=>{let e=class{};return e.\u0275mod=a.Vb({type:e}),e.\u0275inj=a.Ub({factory:function(t){return new(t||e)},imports:[[p.c]]}),e})();var cb=n("F3OD"),ib=n("arj/"),ab=function(e,t,n,o){return new(n||(n=Promise))((function(c,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function r(e){try{l(o.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}))};function rb(e,t){if(1&e&&(a.dc(0,"div",5),a.cd(1),a.cc()),2&e){const e=a.wc();a.Jb(1),a.ed(" ",e.getNoResultMessage(),"\n")}}const lb=["title","\u5230\u5916\u639B\u7A0B\u5F0F\u9996\u9801"],sb=["title","\u5230\u5916\u639B\u7A0B\u5F0F\u9996\u9801"],db=["label","\u89E3\u9664\u5B89\u88DD"],gb=["label","\u8A2D\u5B9A"];function ub(e,t){if(1&e&&(a.dc(0,"my-edit-button",20),a.jc(1,gb),a.cc()),2&e){const e=a.wc().$implicit,t=a.wc();a.Dc("routerLink",t.getShowRouterLink(e))}}function bb(e,t){if(1&e){const e=a.ec();a.dc(0,"my-button",21),a.sc("click",(function(){a.Rc(e);const t=a.wc().$implicit;return a.wc().update(t)})),a.cc()}if(2&e){const e=a.wc().$implicit,t=a.wc();a.Dc("loading",t.isUpdating(e))("label",t.getUpdateLabel(e)),a.Kb("disabled",t.isUpdating(e))}}function pb(e,t){if(1&e){const e=a.ec();a.dc(0,"div",6),a.dc(1,"div",7),a.dc(2,"div",8),a.dc(3,"span",9),a.cd(4),a.cc(),a.dc(5,"span",10),a.cd(6),a.cc(),a.dc(7,"a",11),a.jc(8,lb),a.Yb(9,"my-global-icon",12),a.cc(),a.dc(10,"a",11),a.jc(11,sb),a.Yb(12,"my-global-icon",13),a.cc(),a.dc(13,"div",14),a.ad(14,ub,2,1,"my-edit-button",15),a.ad(15,bb,1,3,"my-button",16),a.dc(16,"my-delete-button",17),a.jc(17,db),a.sc("click",(function(){a.Rc(e);const n=t.$implicit;return a.wc().uninstall(n)})),a.cc(),a.cc(),a.cc(),a.dc(18,"div",18),a.dc(19,"div",19),a.cd(20),a.cc(),a.cc(),a.cc(),a.cc()}if(2&e){const e=t.$implicit,n=a.wc();a.Jb(4),a.dd(e.name),a.Jb(2),a.dd(e.version),a.Jb(1),a.Dc("href",e.homepage,a.Tc),a.Jb(3),a.Dc("href","https://www.npmjs.com/package/peertube-plugin-"+e.name,a.Tc),a.Jb(4),a.Dc("ngIf",n.pluginType!==n.PluginType.THEME),a.Jb(1),a.Dc("ngIf",n.isUpdateAvailable(e)),a.Jb(5),a.dd(e.description)}}let fb=(()=>{class e{constructor(e,t,n,o,c,i,a){this.i18n=e,this.pluginService=t,this.pluginApiService=n,this.notifier=o,this.confirmService=c,this.router=i,this.route=a,this.pluginTypeOptions=[],this.pluginType=Nu.a.PLUGIN,this.pagination={currentPage:1,itemsPerPage:10,totalItems:null},this.sort="name",this.plugins=[],this.updating={},this.PluginType=Nu.a,this.onDataSubject=new Gu.a,this.pluginTypeOptions=this.pluginApiService.getPluginTypeOptions()}ngOnInit(){const e=this.route.snapshot.queryParams;e.pluginType&&(this.pluginType=parseInt(e.pluginType,10)),this.reloadPlugins()}reloadPlugins(){this.pagination.currentPage=1,this.plugins=[],this.router.navigate([],{queryParams:{pluginType:this.pluginType}}),this.loadMorePlugins()}loadMorePlugins(){this.pluginApiService.getPlugins(this.pluginType,this.pagination,this.sort).subscribe(e=>{this.plugins=this.plugins.concat(e.data),this.pagination.totalItems=e.total,this.onDataSubject.next(e.data)},e=>this.notifier.error(e.message))}onNearOfBottom(){Object(Vu.a)(this.pagination)&&(this.pagination.currentPage+=1,this.loadMorePlugins())}getNoResultMessage(){return this.i18n(this.pluginType===Nu.a.PLUGIN?"You don't have plugins installed yet.":"You don't have themes installed yet.")}isUpdateAvailable(e){return e.latestVersion&&Object(Bu.a)(e.latestVersion,e.version)>0}getUpdateLabel(e){return this.i18n("Update to {{version}}",{version:e.latestVersion})}isUpdating(e){return!!this.updating[this.getUpdatingKey(e)]}uninstall(e){return ab(this,void 0,void 0,(function*(){!1!==(yield this.confirmService.confirm(this.i18n("Do you really want to uninstall {{pluginName}}?",{pluginName:e.name}),this.i18n("Uninstall")))&&this.pluginApiService.uninstall(e.name,e.type).subscribe(()=>{this.notifier.success(this.i18n("{{pluginName}} uninstalled.",{pluginName:e.name})),this.plugins=this.plugins.filter(t=>t.name!==e.name),this.pagination.totalItems--},e=>this.notifier.error(e.message))}))}update(e){return ab(this,void 0,void 0,(function*(){const t=this.getUpdatingKey(e);this.updating[t]||(this.updating[t]=!0,this.pluginApiService.update(e.name,e.type).pipe().subscribe(n=>{this.updating[t]=!1,this.notifier.success(this.i18n("{{pluginName}} updated.",{pluginName:e.name})),Object.assign(e,n)},e=>this.notifier.error(e.message)))}))}getShowRouterLink(e){return["/admin","plugins","show",this.pluginService.nameToNpmName(e.name,e.type)]}getUpdatingKey(e){return e.name+e.type}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(l.a),a.Xb(Fu.a),a.Xb(Uu),a.Xb(g.f),a.Xb(g.c),a.Xb(O.h),a.Xb(O.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-plugin-list-installed"]],decls:5,vars:6,consts:[[1,"toggle-plugin-type"],[3,"options","ngModel","ngModelChange"],["class","no-results",4,"ngIf"],["myInfiniteScroller","",1,"plugins",3,"autoInit","dataObservable","nearOfBottom"],["class","card plugin",4,"ngFor","ngForOf"],[1,"no-results"],[1,"card","plugin"],[1,"card-body"],[1,"first-row"],[1,"plugin-name"],[1,"plugin-version"],["target","_blank","rel","noopener noreferrer",1,"plugin-icon",3,"href",6,"title"],["iconName","home"],["iconName","npm"],[1,"buttons"],[3,"routerLink",4,"ngIf",6,"label"],["class","update-button","icon","refresh",3,"loading","label","click",4,"ngIf"],[3,"click",6,"label"],[1,"second-row"],[1,"description"],[3,"routerLink",6,"label"],["icon","refresh",1,"update-button",3,"loading","label","click"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"p-selectButton",1),a.sc("ngModelChange",(function(e){return t.pluginType=e}))("ngModelChange",(function(){return t.reloadPlugins()})),a.cc(),a.cc(),a.ad(2,rb,2,1,"div",2),a.dc(3,"div",3),a.sc("nearOfBottom",(function(){return t.onNearOfBottom()})),a.ad(4,pb,21,7,"div",4),a.cc()),2&e&&(a.Jb(1),a.Dc("options",t.pluginTypeOptions)("ngModel",t.pluginType),a.Jb(1),a.Dc("ngIf",0===t.pagination.totalItems),a.Jb(1),a.Dc("autoInit",!0)("dataObservable",t.onDataSubject.asObservable()),a.Jb(1),a.Dc("ngForOf",t.plugins))},directives:[nb,f.t,f.w,p.u,cb.a,p.t,ro.a,Sn.a,ib.a,O.i,In.a],styles:[".toggle-plugin-type[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:30px}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button-text{font-size:15px;font-weight:600}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button.ui-state-default{background-color:#f0f0f0;border:1px solid #f0f0f0}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button.ui-state-active{background-color:var(--mainColor);border-color:var(--mainColor)}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button.ui-state-active:hover{background-color:var(--mainHoverColor);border-color:var(--mainHoverColor)}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button:not(.ui-state-active).ui-state-focus{box-shadow:0 0 0 .1rem rgba(87,85,217,.2)}",'.plugin[_ngcontent-%COMP%]{margin:15px 0;background-color:var(--submenuColor)}.first-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.first-row[_ngcontent-%COMP%]   .plugin-name[_ngcontent-%COMP%]{font-size:16px;margin-right:10px;font-weight:600}.first-row[_ngcontent-%COMP%]   .plugin-version[_ngcontent-%COMP%]{opacity:.6}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]{margin-left:10px}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:var(--greyForegroundColor)}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:var(--greyForegroundColor)}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:var(--greyForegroundColor)}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[iconName=npm][_ngcontent-%COMP%]     svg path{fill:var(--greyForegroundColor)}.first-row[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-left:auto;width:-webkit-max-content;width:-moz-max-content;width:max-content}.first-row[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:last-child){margin-right:10px}.second-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;align-items:center;justify-content:space-between}.second-row[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{opacity:.8}.action-button[_ngcontent-%COMP%]{display:inline-block;border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.action-button[_ngcontent-%COMP%]:active, .action-button[_ngcontent-%COMP%]:focus, .action-button[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.action-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;width:21px;margin-right:0;top:-2px}',".update-button[disabled=true][_ngcontent-%COMP%]     .action-button{cursor:default!important}"]}),e})();var hb=n("Kj3r"),mb=n("/uUt");const vb=["placeholder","\u641C\u5C0B\u2026\u2026"];var Cb,Ob,Pb,_b,Mb;function yb(e,t){1&e&&(a.dc(0,"div",9),a.hc(1,Cb),a.cc())}function wb(e,t){1&e&&(a.bc(0),a.Yb(1,"my-global-icon",12),a.bc(2),a.hc(3,Ob),a.ac(),a.ac())}function xb(e,t){if(1&e&&(a.bc(0),a.Yb(1,"my-global-icon",13),a.bc(2),a.hc(3,_b),a.ac(),a.ac()),2&e){const e=a.wc(2);a.Jb(3),a.lc(e.pagination.totalItems)(e.pagination.totalItems)(e.search),a.ic(3)}}function kb(e,t){if(1&e&&(a.dc(0,"div",10),a.ad(1,wb,4,0,"ng-container",11),a.ad(2,xb,4,3,"ng-container",11),a.cc()),2&e){const e=a.wc();a.Jb(1),a.Dc("ngIf",!e.search),a.Jb(1),a.Dc("ngIf",!!e.search)}}function Tb(e,t){1&e&&(a.dc(0,"div",14),a.hc(1,Mb),a.cc())}Cb="\n  \u8981\u8F09\u5165\u60A8\u65B0\u7684\u5DF2\u5B89\u88DD\u5916\u639B\u7A0B\u5F0F\u6216\u4F48\u666F\u4E3B\u984C\uFF0C\u8ACB\u91CD\u65B0\u6574\u7406\u9801\u9762\u3002\n",Ob="\u6D41\u884C",Pb="{VAR_PLURAL, plural, =1 {result} other {results}}",Pb=a.mc(Pb,{VAR_PLURAL:"\ufffd1\ufffd"}),_b="" + "\ufffd0\ufffd" + " " + Pb + " for \"" + "\ufffd2\ufffd" + "\" ",Mb="\n  \u6C92\u6709\u7D50\u679C\u3002\n";const Ab=["title","\u5230\u5916\u639B\u7A0B\u5F0F\u9996\u9801"],Ib=["title","\u5230\u5916\u639B\u7A0B\u5F0F npm \u8EDF\u9AD4\u5305"];function Sb(e,t){1&e&&(a.dc(0,"span",28),a.cd(1,"Installed"),a.cc())}function Rb(e,t){if(1&e){const e=a.ec();a.dc(0,"my-button",29),a.sc("click",(function(){a.Rc(e);const t=a.wc().$implicit;return a.wc().install(t)})),a.cc()}if(2&e){const e=a.wc().$implicit,t=a.wc();a.Dc("loading",t.isInstalling(e)),a.Kb("disabled",t.isInstalling(e))}}function Db(e,t){if(1&e&&(a.dc(0,"div",15),a.dc(1,"div",16),a.dc(2,"div",17),a.dc(3,"span",18),a.cd(4),a.cc(),a.dc(5,"span",19),a.cd(6),a.cc(),a.dc(7,"a",20),a.jc(8,Ab),a.Yb(9,"my-global-icon",21),a.cc(),a.dc(10,"a",20),a.jc(11,Ib),a.Yb(12,"my-global-icon",22),a.cc(),a.ad(13,Sb,2,0,"span",23),a.dc(14,"div",24),a.ad(15,Rb,1,2,"my-button",25),a.cc(),a.cc(),a.dc(16,"div",26),a.dc(17,"div",27),a.cd(18),a.cc(),a.cc(),a.cc(),a.cc()),2&e){const e=t.$implicit;a.Jb(4),a.dd(e.name),a.Jb(2),a.dd(e.latestVersion),a.Jb(1),a.Dc("href",e.homepage,a.Tc),a.Jb(3),a.Dc("href","https://www.npmjs.com/package/peertube-plugin-"+e.name,a.Tc),a.Jb(3),a.Dc("ngIf",e.installed),a.Jb(2),a.Dc("ngIf",!1===e.installed),a.Jb(3),a.dd(e.description)}}let zb=(()=>{class e{constructor(e,t,n,o,c,i,a){this.server=e,this.i18n=t,this.pluginService=n,this.notifier=o,this.confirmService=c,this.router=i,this.route=a,this.pluginTypeOptions=[],this.pluginType=Nu.a.PLUGIN,this.pagination={currentPage:1,itemsPerPage:10,totalItems:null},this.sort="-popularity",this.search="",this.isSearching=!1,this.plugins=[],this.installing={},this.pluginInstalled=!1,this.onDataSubject=new Gu.a,this.searchSubject=new Gu.a,this.pluginTypeOptions=this.pluginService.getPluginTypeOptions()}ngOnInit(){const e=this.route.snapshot.queryParams;e.pluginType&&(this.pluginType=parseInt(e.pluginType,10)),this.searchSubject.asObservable().pipe(Object(hb.a)(400),Object(mb.a)()).subscribe(e=>{this.search=e,this.reloadPlugins()}),this.reloadPlugins()}onSearchChange(e){this.searchSubject.next(e.target.value)}reloadPlugins(){this.pagination.currentPage=1,this.plugins=[],this.router.navigate([],{queryParams:{pluginType:this.pluginType}}),this.loadMorePlugins()}loadMorePlugins(){this.isSearching=!0,this.pluginService.searchAvailablePlugins(this.pluginType,this.pagination,this.sort,this.search).subscribe(e=>{this.isSearching=!1,this.plugins=this.plugins.concat(e.data),this.pagination.totalItems=e.total,this.onDataSubject.next(e.data)},e=>{console.error(e);const t=this.i18n("The plugin index is not available. Please retry later.");this.notifier.error(t)})}onNearOfBottom(){Object(Vu.a)(this.pagination)&&(this.pagination.currentPage+=1,this.loadMorePlugins())}isInstalling(e){return!!this.installing[e.npmName]}install(e){return t=this,void 0,o=function*(){this.installing[e.npmName]||!1!==(yield this.confirmService.confirm(this.i18n("Please only install plugins or themes you trust, since they can execute any code on your instance."),this.i18n("Install {{pluginName}}?",{pluginName:e.name})))&&(this.installing[e.npmName]=!0,this.pluginService.install(e.npmName).subscribe(()=>{this.installing[e.npmName]=!1,this.pluginInstalled=!0,this.notifier.success(this.i18n("{{pluginName}} installed.",{pluginName:e.name})),e.installed=!0},e=>this.notifier.error(e.message)))},new((n=void 0)||(n=Promise))((function(e,c){function i(e){try{r(o.next(e))}catch(t){c(t)}}function a(e){try{r(o.throw(e))}catch(t){c(t)}}function r(t){var o;t.done?e(t.value):(o=t.value,o instanceof n?o:new n((function(e){e(o)}))).then(i,a)}r((o=o.apply(t,[])).next())}));var t,n,o}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(g.i),a.Xb(l.a),a.Xb(Uu),a.Xb(g.f),a.Xb(g.c),a.Xb(O.h),a.Xb(O.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-plugin-search"]],decls:10,vars:8,consts:[[1,"toggle-plugin-type"],[3,"options","ngModel","ngModelChange"],[1,"search-bar"],["type","text",3,"input",6,"placeholder"],["class","alert alert-info",4,"ngIf"],["class","result-title",4,"ngIf"],["class","no-results",4,"ngIf"],["myInfiniteScroller","",1,"plugins",3,"autoInit","dataObservable","nearOfBottom"],["class","card plugin",4,"ngFor","ngForOf"],[1,"alert","alert-info"],[1,"result-title"],[4,"ngIf"],["iconName","trending"],["iconName","search"],[1,"no-results"],[1,"card","plugin"],[1,"card-body"],[1,"first-row"],[1,"plugin-name"],[1,"plugin-version"],["target","_blank","rel","noopener noreferrer",1,"plugin-icon",3,"href",6,"title"],["iconName","home"],["iconName","npm"],["class","badge badge-success",4,"ngIf"],[1,"buttons"],["class","update-button","label","Install","icon","cloud-download",3,"loading","click",4,"ngIf"],[1,"second-row"],[1,"description"],[1,"badge","badge-success"],["label","Install","icon","cloud-download",1,"update-button",3,"loading","click"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"p-selectButton",1),a.sc("ngModelChange",(function(e){return t.pluginType=e}))("ngModelChange",(function(){return t.reloadPlugins()})),a.cc(),a.cc(),a.dc(2,"div",2),a.dc(3,"input",3),a.jc(4,vb),a.sc("input",(function(e){return t.onSearchChange(e)})),a.cc(),a.cc(),a.ad(5,yb,2,0,"div",4),a.ad(6,kb,3,2,"div",5),a.ad(7,Tb,2,0,"div",6),a.dc(8,"div",7),a.sc("nearOfBottom",(function(){return t.onNearOfBottom()})),a.ad(9,Db,19,7,"div",8),a.cc()),2&e&&(a.Jb(1),a.Dc("options",t.pluginTypeOptions)("ngModel",t.pluginType),a.Jb(4),a.Dc("ngIf",t.pluginInstalled),a.Jb(1),a.Dc("ngIf",!t.isSearching),a.Jb(1),a.Dc("ngIf",0===t.pagination.totalItems),a.Jb(1),a.Dc("autoInit",!0)("dataObservable",t.onDataSubject.asObservable()),a.Jb(1),a.Dc("ngForOf",t.plugins))},directives:[nb,f.t,f.w,p.u,cb.a,p.t,ro.a,In.a],styles:[".toggle-plugin-type[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:30px}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button-text{font-size:15px;font-weight:600}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button.ui-state-default{background-color:#f0f0f0;border:1px solid #f0f0f0}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button.ui-state-active{background-color:var(--mainColor);border-color:var(--mainColor)}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button.ui-state-active:hover{background-color:var(--mainHoverColor);border-color:var(--mainHoverColor)}.toggle-plugin-type[_ngcontent-%COMP%]   p-selectButton[_ngcontent-%COMP%]     .ui-button:not(.ui-state-active).ui-state-focus{box-shadow:0 0 0 .1rem rgba(87,85,217,.2)}",'.plugin[_ngcontent-%COMP%]{margin:15px 0;background-color:var(--submenuColor)}.first-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.first-row[_ngcontent-%COMP%]   .plugin-name[_ngcontent-%COMP%]{font-size:16px;margin-right:10px;font-weight:600}.first-row[_ngcontent-%COMP%]   .plugin-version[_ngcontent-%COMP%]{opacity:.6}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]{margin-left:10px}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:var(--greyForegroundColor)}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], .first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:var(--greyForegroundColor)}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:var(--greyForegroundColor)}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[iconName=npm][_ngcontent-%COMP%]     svg path{fill:var(--greyForegroundColor)}.first-row[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-left:auto;width:-webkit-max-content;width:-moz-max-content;width:max-content}.first-row[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:last-child){margin-right:10px}.second-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;align-items:center;justify-content:space-between}.second-row[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{opacity:.8}.action-button[_ngcontent-%COMP%]{display:inline-block;border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.action-button[_ngcontent-%COMP%]:active, .action-button[_ngcontent-%COMP%]:focus, .action-button[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.action-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;width:21px;margin-right:0;top:-2px}',".search-bar[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:30px 0}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:60%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;height:35px}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:60%){.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.result-title[_ngcontent-%COMP%]{font-size:22px;font-weight:600;margin-bottom:15px}.result-title[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{margin-right:5px}.badge[_ngcontent-%COMP%]{font-size:13px;font-weight:600;margin-left:15px}"]}),e})();function Eb(e,t){if(1&e&&a.Yb(0,"label",15),2&e){const e=a.wc().$implicit;a.Dc("innerHTML",e.label,a.Sc),a.Kb("for",e.name)}}function Lb(e,t){if(1&e&&a.Yb(0,"input",16),2&e){const e=a.wc().$implicit;a.Dc("id",e.name)("formControlName",e.name)}}function $b(e,t){if(1&e&&a.Yb(0,"textarea",16),2&e){const e=a.wc().$implicit;a.Dc("id",e.name)("formControlName",e.name)}}function Jb(e,t){1&e&&a.Yb(0,"my-help",17)}function Nb(e,t){1&e&&a.Yb(0,"my-help",18)}const jb=function(e){return{"input-error":e}};function Fb(e,t){if(1&e&&a.Yb(0,"my-markdown-textarea",19),2&e){const e=a.wc().$implicit,t=a.wc(3);a.Dc("id",e.name)("formControlName",e.name)("classes",a.Hc(3,jb,t.formErrors["settings.name"]))}}function Ub(e,t){if(1&e&&a.Yb(0,"my-markdown-textarea",20),2&e){const e=a.wc().$implicit,t=a.wc(3);a.Dc("id",e.name)("formControlName",e.name)("classes",a.Hc(3,jb,t.formErrors["settings.name"]))}}function Vb(e,t){if(1&e&&a.Yb(0,"my-peertube-checkbox",21),2&e){const e=a.wc().$implicit;a.Dc("id",e.name)("formControlName",e.name)("labelInnerHTML",e.label)}}function Bb(e,t){if(1&e&&(a.dc(0,"div",22),a.cd(1),a.cc()),2&e){const e=a.wc().$implicit,t=a.wc(3);a.Jb(1),a.ed(" ",t.formErrors[e.name]," ")}}function Gb(e,t){if(1&e&&(a.dc(0,"div",6),a.ad(1,Eb,1,2,"label",7),a.ad(2,Lb,1,2,"input",8),a.ad(3,$b,1,2,"textarea",8),a.ad(4,Jb,1,0,"my-help",9),a.ad(5,Nb,1,0,"my-help",10),a.ad(6,Fb,1,5,"my-markdown-textarea",11),a.ad(7,Ub,1,5,"my-markdown-textarea",12),a.ad(8,Vb,1,3,"my-peertube-checkbox",13),a.ad(9,Bb,2,1,"div",14),a.cc()),2&e){const e=t.$implicit,n=a.wc(3);a.Jb(1),a.Dc("ngIf","input-checkbox"!==e.type),a.Jb(1),a.Dc("ngIf","input"===e.type),a.Jb(1),a.Dc("ngIf","input-textarea"===e.type),a.Jb(1),a.Dc("ngIf","markdown-text"===e.type),a.Jb(1),a.Dc("ngIf","markdown-enhanced"===e.type),a.Jb(1),a.Dc("ngIf","markdown-text"===e.type),a.Jb(1),a.Dc("ngIf","markdown-enhanced"===e.type),a.Jb(1),a.Dc("ngIf","input-checkbox"===e.type),a.Jb(1),a.Dc("ngIf",n.formErrors[e.name])}}function Yb(e,t){if(1&e){const e=a.ec();a.dc(0,"form",3),a.sc("ngSubmit",(function(){return a.Rc(e),a.wc(2).formValidated()})),a.ad(1,Gb,10,9,"div",4),a.Yb(2,"input",5),a.cc()}if(2&e){const e=a.wc(2);a.Dc("formGroup",e.form),a.Jb(1),a.Dc("ngForOf",e.registeredSettings),a.Jb(1),a.Dc("disabled",!e.form.valid)}}var Hb;function Xb(e,t){if(1&e&&(a.dc(0,"div",23),a.hc(1,Hb),a.cc()),2&e){const e=a.wc(2);a.Jb(1),a.lc(e.pluginTypeLabel),a.ic(1)}}function Qb(e,t){if(1&e&&(a.bc(0),a.dc(1,"h2"),a.bc(2),a.cd(3),a.ac(),a.cd(4),a.cc(),a.ad(5,Yb,3,3,"form",1),a.ad(6,Xb,2,1,"div",2),a.ac()),2&e){const e=a.wc();a.Jb(3),a.dd(e.pluginTypeLabel),a.Jb(1),a.ed(" ",e.plugin.name," "),a.Jb(1),a.Dc("ngIf",e.hasRegisteredSettings()),a.Jb(1),a.Dc("ngIf",!e.hasRegisteredSettings())}}Hb="\n    \u6B64 " + "\ufffd0\ufffd" + " \u6C92\u6709\u8A2D\u5B9A\u3002\n  ";let Kb=(()=>{class e extends i.b{constructor(e,t,n,o,c){super(),this.formValidatorService=e,this.i18n=t,this.pluginService=n,this.notifier=o,this.route=c,this.registeredSettings=[]}ngOnInit(){this.sub=this.route.params.subscribe(e=>{this.loadPlugin(e.npmName)})}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}formValidated(){this.pluginService.updatePluginSettings(this.plugin.name,this.plugin.type,this.form.value).subscribe(()=>{this.notifier.success(this.i18n("Settings updated."))},e=>this.notifier.error(e.message))}hasRegisteredSettings(){return Array.isArray(this.registeredSettings)&&0!==this.registeredSettings.length}loadPlugin(e){this.pluginService.getPlugin(e).pipe(Object(ju.a)(e=>this.pluginService.getPluginRegisteredSettings(e.name,e.type).pipe(Object(Ld.a)(t=>({plugin:e,registeredSettings:t.registeredSettings}))))).subscribe(({plugin:e,registeredSettings:t})=>{this.plugin=e,this.registeredSettings=t,this.pluginTypeLabel=this.pluginService.getPluginTypeLabel(this.plugin.type),this.buildSettingsForm()},e=>this.notifier.error(e.message))}buildSettingsForm(){const e={},t={};for(const n of this.registeredSettings)e[n.name]=null,t[n.name]=this.getSetting(n.name);this.buildForm(e),this.form.patchValue(t)}getSetting(e){const t=this.plugin.settings;return t&&t[e]?t[e]:this.registeredSettings.find(t=>t.name===e).default}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(i.c),a.Xb(l.a),a.Xb(Uu),a.Xb(g.f),a.Xb(O.a))},e.\u0275cmp=a.Rb({type:e,selectors:[["my-plugin-show-installed"]],features:[a.Gb],decls:1,vars:1,consts:[[4,"ngIf"],["role","form",3,"formGroup","ngSubmit",4,"ngIf"],["class","no-settings",4,"ngIf"],["role","form",3,"formGroup","ngSubmit"],["class","form-group",4,"ngFor","ngForOf"],["type","submit","value","Update plugin settings",3,"disabled"],[1,"form-group"],[3,"innerHTML",4,"ngIf"],["type","text",3,"id","formControlName",4,"ngIf"],["helpType","markdownText",4,"ngIf"],["helpType","markdownEnhanced",4,"ngIf"],["markdownType","text","textareaWidth","500px",3,"id","formControlName","classes",4,"ngIf"],["markdownType","enhanced","textareaWidth","500px",3,"id","formControlName","classes",4,"ngIf"],[3,"id","formControlName","labelInnerHTML",4,"ngIf"],["class","form-error",4,"ngIf"],[3,"innerHTML"],["type","text",3,"id","formControlName"],["helpType","markdownText"],["helpType","markdownEnhanced"],["markdownType","text","textareaWidth","500px",3,"id","formControlName","classes"],["markdownType","enhanced","textareaWidth","500px",3,"id","formControlName","classes"],[3,"id","formControlName","labelInnerHTML"],[1,"form-error"],[1,"no-settings"]],template:function(e,t){1&e&&a.ad(0,Qb,7,4,"ng-container",0),2&e&&a.Dc("ngIf",t.plugin)},directives:[p.u,f.J,f.u,f.m,p.t,f.d,f.t,f.k,m.a,v.a,P.a],styles:['h2[_ngcontent-%COMP%]{margin-bottom:20px}input[_ngcontent-%COMP%]:not([type=submit]){display:inline-block;height:30px;width:340px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;display:block}input[_ngcontent-%COMP%]:not([type=submit])::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit])::-moz-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit])::-ms-input-placeholder{color:var(--inputPlaceholderColor)}input[_ngcontent-%COMP%]:not([type=submit])::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:340px){input[_ngcontent-%COMP%]:not([type=submit]){width:100%}}textarea[_ngcontent-%COMP%]{display:inline-block;height:30px;width:340px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;color:var(--textareaForegroundColor);background-color:var(--textareaBackgroundColor);height:200px;padding:5px 15px;font-size:15px;display:block}textarea[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}textarea[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:340px){textarea[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:340px;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;font-size:15px}.peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}@media screen and (max-width:340px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:15px;content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid transparent;border-top-color:#000;margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 35px 0 12px;width:calc(100% + 2px);position:relative;left:1px;border:1px solid #c6c6c6;background:transparent none;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:30px;text-overflow:ellipsis;color:var(--mainForegroundColor)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}button[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer;margin-top:10px}button.focus-visible[_ngcontent-%COMP%], button[_ngcontent-%COMP%]:focus, input[type=submit].focus-visible[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}button[_ngcontent-%COMP%], button[_ngcontent-%COMP%]:active, button[_ngcontent-%COMP%]:focus, input[type=submit][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}button[_ngcontent-%COMP%]:hover, input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}button.disabled[_ngcontent-%COMP%], button[disabled][_ngcontent-%COMP%], input[type=submit].disabled[_ngcontent-%COMP%], input[type=submit][disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000000"]{fill:#fff}button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000000"]{stroke:#fff}button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000000"]{stop-color:#fff}']}),e})();var qb,Wb,Zb;qb="\u5916\u639B\u7A0B\u5F0F\uFF0F\u4F48\u666F\u4E3B\u984C",Wb="\u5DF2\u5B89\u88DD",Zb="\u641C\u5C0B";let ep=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Rb({type:e,selectors:[["ng-component"]],decls:9,vars:0,consts:[[1,"admin-sub-header"],[1,"form-sub-title"],[1,"admin-sub-nav"],["routerLink","list-installed","routerLinkActive","active"],["routerLink","search","routerLinkActive","active"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.hc(2,qb),a.cc(),a.dc(3,"div",2),a.dc(4,"a",3),a.hc(5,Wb),a.cc(),a.dc(6,"a",4),a.hc(7,Zb),a.cc(),a.cc(),a.cc(),a.Yb(8,"router-outlet"))},directives:[O.k,O.j,O.m],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}@media screen and (max-width:800px){  .plugins .plugin .first-row{flex-wrap:wrap}  .plugins .plugin .first-row .plugin-icon,   .plugins .plugin .first-row .plugin-name,   .plugins .plugin .first-row .plugin-version{margin-bottom:10px}  .plugins .plugin .first-row .buttons my-button .action-button,   .plugins .plugin .first-row .buttons my-delete-button .action-button,   .plugins .plugin .first-row .buttons my-edit-button .action-button{padding:0 13px}  .plugins .plugin .first-row .buttons my-button .button-label,   .plugins .plugin .first-row .buttons my-delete-button .button-label,   .plugins .plugin .first-row .buttons my-edit-button .button-label{display:none}}"]}),e})();const tp=[{path:"",component:kn,canActivate:[_n.a],canActivateChild:[_n.a],children:[{path:"",redirectTo:"users",pathMatch:"full"},...zc,...Hr,...Ed,...Ju,...On,{path:"plugins",component:ep,canActivate:[g.l],data:{userRight:Mn.e.MANAGE_PLUGINS},children:[{path:"",redirectTo:"list-installed",pathMatch:"full"},{path:"list-installed",component:fb,data:{meta:{title:"List installed plugins"}}},{path:"search",component:zb,data:{meta:{title:"Search plugins"}}},{path:"show/:npmName",component:Kb,data:{meta:{title:"Show plugin"}}}]}]}];let np=(()=>{class e{}return e.\u0275mod=a.Vb({type:e}),e.\u0275inj=a.Ub({factory:function(t){return new(t||e)},imports:[[O.l.forChild(tp)],O.l]}),e})();var op,cp,ip,ap,rp,lp,sp,dp,gp,up,bp;function pp(e,t){if(1&e&&(a.dc(0,"div",2),a.dc(1,"span",3),a.hc(2,dp),a.cc(),a.dc(3,"time",19),a.cd(4),a.xc(5,"date"),a.cc(),a.cc()),2&e){const e=a.wc();a.Jb(4),a.dd(a.zc(5,1,e.videoAbuse.updatedAt,"medium"))}}function fp(e,t){if(1&e&&(a.dc(0,"div",11),a.dc(1,"span",3),a.hc(2,gp),a.cc(),a.Yb(3,"span",13),a.cc()),2&e){const e=a.wc();a.Jb(3),a.Dc("innerHTML",e.videoAbuse.moderationCommentHtml,a.Sc)}}function hp(e,t){1&e&&(a.dc(0,"span"),a.hc(1,up),a.cc())}function mp(e,t){1&e&&(a.dc(0,"span"),a.hc(1,bp),a.cc())}function vp(e,t){if(1&e&&(a.dc(0,"div"),a.ad(1,hp,2,0,"span",17),a.ad(2,mp,2,0,"span",17),a.cc()),2&e){const e=a.wc();a.Jb(1),a.Dc("ngIf",e.videoAbuse.video.deleted),a.Jb(1),a.Dc("ngIf",!e.videoAbuse.video.deleted)}}function Cp(e,t){if(1&e&&a.Yb(0,"div",20),2&e){const e=a.wc();a.Dc("innerHTML",e.videoAbuse.embedHtml,a.Sc)}}op="\u56DE\u5831\u8005",cp="{VAR_PLURAL, plural, =1 {1 \u56DE\u5831} other {{INTERPOLATION} \u56DE\u5831}}",cp=a.mc(cp,{VAR_PLURAL:"\ufffd0\ufffd",INTERPOLATION:"\ufffd1\ufffd"}),ip="" + cp + "" + "\ufffd#13\ufffd" + "" + "\ufffd/#13\ufffd" + " ",ap="\u56DE\u5831\u8005",rp="{VAR_PLURAL, plural, =1 {1 \u56DE\u5831} other {{INTERPOLATION} \u56DE\u5831}}",rp=a.mc(rp,{VAR_PLURAL:"\ufffd0\ufffd",INTERPOLATION:"\ufffd1\ufffd"}),lp="" + rp + "" + "\ufffd#25\ufffd" + "" + "\ufffd/#25\ufffd" + " ",sp="\u56DE\u5831",dp="\u5DF2\u66F4\u65B0",gp="\u6CE8\u610F",up="\u5F71\u7247\u5DF2\u88AB\u522A\u9664",bp="\u5F71\u7247\u5DF2\u52A0\u5165\u9ED1\u540D\u55AE";const Op=function(){return["/admin/moderation/video-abuses/list"]},Pp=function(e){return{search:e}};let _p=(()=>{class e{switchToDefaultAvatar(e){e.target.src=rr.a.GET_DEFAULT_AVATAR_URL()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Rb({type:e,selectors:[["my-video-abuse-details"]],inputs:{videoAbuse:"videoAbuse"},decls:39,vars:39,consts:[[1,"d-flex","moderation-expanded"],[1,"col-8"],[1,"d-flex"],[1,"col-3","moderation-expanded-label"],[1,"col-9","moderation-expanded-text"],[1,"chip",3,"routerLink","queryParams"],["alt","Avatar",1,"avatar",3,"src","error"],[1,"text-muted"],[1,"ml-auto","text-muted","video-details-links",3,"routerLink","queryParams"],[1,"ml-1","glyphicon","glyphicon-flag"],["class","d-flex",4,"ngIf"],[1,"mt-3","d-flex"],[1,"ml-1","text-muted",3,"routerLink","queryParams"],[1,"col-9","moderation-expanded-text",3,"innerHTML"],["class","mt-3 d-flex",4,"ngIf"],[1,"col-4"],[1,"screenratio"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"col-9","moderation-expanded-text","video-details-date-updated"],[3,"innerHTML"]],template:function(e,t){1&e&&(a.dc(0,"div",0),a.dc(1,"div",1),a.dc(2,"div",2),a.dc(3,"span",3),a.hc(4,op),a.cc(),a.dc(5,"span",4),a.dc(6,"a",5),a.dc(7,"img",6),a.sc("error",(function(e){return t.switchToDefaultAvatar(e)})),a.cc(),a.dc(8,"div"),a.dc(9,"span",7),a.cd(10),a.cc(),a.cc(),a.cc(),a.dc(11,"a",8),a.nc(12,ip),a.Yb(13,"span",9),a.kc(),a.cc(),a.cc(),a.cc(),a.dc(14,"div",2),a.dc(15,"span",3),a.hc(16,ap),a.cc(),a.dc(17,"span",4),a.dc(18,"a",5),a.dc(19,"img",6),a.sc("error",(function(e){return t.switchToDefaultAvatar(e)})),a.cc(),a.dc(20,"div"),a.dc(21,"span",7),a.cd(22),a.cc(),a.cc(),a.cc(),a.dc(23,"a",8),a.nc(24,lp),a.Yb(25,"span",9),a.kc(),a.cc(),a.cc(),a.cc(),a.ad(26,pp,6,4,"div",10),a.dc(27,"div",11),a.dc(28,"span",3),a.bc(29),a.hc(30,sp),a.ac(),a.dc(31,"a",12),a.cd(32),a.cc(),a.cc(),a.Yb(33,"span",13),a.cc(),a.ad(34,fp,4,1,"div",14),a.cc(),a.dc(35,"div",15),a.dc(36,"div",16),a.ad(37,vp,3,2,"div",17),a.ad(38,Cp,1,1,"div",18),a.cc(),a.cc(),a.cc()),2&e&&(a.Jb(6),a.Dc("routerLink",a.Gc(24,Op))("queryParams",a.Hc(25,Pp,'reporter:"'+t.videoAbuse.reporterAccount.displayName+'"')),a.Jb(1),a.Dc("src",null==t.videoAbuse.reporterAccount.avatar?null:t.videoAbuse.reporterAccount.avatar.path,a.Tc),a.Jb(3),a.dd(t.videoAbuse.reporterAccount.nameWithHost),a.Jb(1),a.Dc("routerLink",a.Gc(27,Op))("queryParams",a.Hc(28,Pp,'reportee:"'+t.videoAbuse.reporterAccount.displayName+'"')),a.Jb(2),a.lc(t.videoAbuse.countReportsForReporter)(t.videoAbuse.countReportsForReporter),a.ic(12),a.Jb(5),a.Dc("routerLink",a.Gc(30,Op))("queryParams",a.Hc(31,Pp,'reportee:"'+t.videoAbuse.video.channel.ownerAccount.displayName+'"')),a.Jb(1),a.Dc("src",null==t.videoAbuse.video.channel.ownerAccount||null==t.videoAbuse.video.channel.ownerAccount.avatar?null:t.videoAbuse.video.channel.ownerAccount.avatar.path,a.Tc),a.Jb(3),a.dd(t.videoAbuse.video.channel.ownerAccount?t.videoAbuse.video.channel.ownerAccount.nameWithHost:""),a.Jb(1),a.Dc("routerLink",a.Gc(33,Op))("queryParams",a.Hc(34,Pp,'reportee:"'+t.videoAbuse.video.channel.ownerAccount.displayName+'"')),a.Jb(2),a.lc(t.videoAbuse.countReportsForReportee)(t.videoAbuse.countReportsForReportee),a.ic(24),a.Jb(1),a.Dc("ngIf",t.videoAbuse.updatedAt),a.Jb(5),a.Dc("routerLink",a.Gc(36,Op))("queryParams",a.Hc(37,Pp,"#"+t.videoAbuse.id)),a.Jb(1),a.ed("#",t.videoAbuse.id,""),a.Jb(1),a.Dc("innerHTML",t.videoAbuse.reasonHtml,a.Sc),a.Jb(1),a.Dc("ngIf",t.videoAbuse.moderationComment),a.Jb(3),a.Dc("ngIf",t.videoAbuse.video.deleted||t.videoAbuse.video.blacklisted),a.Jb(1),a.Dc("ngIf",!t.videoAbuse.video.deleted&&!t.videoAbuse.video.blacklisted))},directives:[O.k,p.u],pipes:[p.f],styles:[".form-sub-title[_ngcontent-%COMP%]{flex-grow:0;margin-right:30px}.caption[_ngcontent-%COMP%]{justify-content:flex-end}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:250px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;flex-grow:1}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}@media screen and (max-width:250px){.caption[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.empty-table-message[_ngcontent-%COMP%]{min-height:40vh;max-height:500px;display:flex;justify-content:center;align-items:center}.moderation-expanded[_ngcontent-%COMP%]{font-size:90%}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;vertical-align:top;text-align:right}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]{display:inline-flex;word-wrap:break-word}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0!important}.video-table-states[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:.4rem}.screenratio[_ngcontent-%COMP%]{position:relative;width:100%;height:0;padding-bottom:56%}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;position:absolute;height:100%;width:100%;display:inline-flex;justify-content:center;align-items:center;color:var(--inputPlaceholderColor)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{text-decoration:none!important}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.screenratio[_ngcontent-%COMP%]   div.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.screenratio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.screenratio[_ngcontent-%COMP%]     iframe{position:absolute;width:100%!important;height:100%!important;left:0;top:0}.chip[_ngcontent-%COMP%]{align-items:center;border-radius:5rem;display:inline-flex;font-size:90%;color:var(--mainForegroundColor);line-height:1rem;margin:.1rem;max-width:320px;overflow:hidden;padding:.2rem .4rem;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}.chip[_ngcontent-%COMP%], .chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:1.2rem;vertical-align:middle}.chip[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-left:-.4rem;margin-right:.2rem;width:1.2rem;border-radius:50%;display:inline-block;line-height:1.25;position:relative}.chip.two-lines[_ngcontent-%COMP%]{height:2rem}.chip.two-lines[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{height:2rem;width:2rem}.chip.two-lines[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:2rem;margin-left:.1rem;margin-right:.1rem;justify-content:center}my-action-dropdown.show[_ngcontent-%COMP%]     .dropdown-root{display:block!important}.video-table-video-link[_ngcontent-%COMP%]{position:relative;top:3px}.video-table-video-link[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]{display:inline-flex}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease;height:45px;width:80px;margin-right:.5rem;border-radius:2px;border:none;background:transparent;display:inline-flex;justify-content:center;align-items:center;position:relative}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover{text-decoration:none!important}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--inputPlaceholderColor)}.video-table-video[_ngcontent-%COMP%]   .video-table-video-image[_ngcontent-%COMP%]   .video-table-video-image-label[_ngcontent-%COMP%]{display:inline-block;background-color:rgba(0,0,0,.7);color:#fff;position:absolute;border-radius:3px;font-size:10px;padding:0 3px;line-height:1.3;bottom:2px;right:2px}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;justify-content:center;font-size:90%;color:var(--mainForegroundColor);line-height:1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:80%;color:grey;margin-left:.1rem}.video-table-video[_ngcontent-%COMP%]   .video-table-video-text[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{font-size:80%}"]}),e})();var Mp=n("UXJo"),yp=n("CwEU"),wp=n("cH1L"),xp=n("vxfF"),kp=n("06+q"),Tp=n("1JpH"),Ap=n("bT2D"),Ip=n("4SI2"),Sp=n("gcFA"),Rp=n("1wmk"),Dp=n("yc0L"),zp=n("MEIN"),Ep=n("drR3"),Lp=n("9BrR"),$p=n("NNUv"),Jp=n("MGin"),Np=n("cC62"),jp=n("btCD"),Fp=n("dvLV"),Up=n("2e92"),Vp=n("86yf"),Bp=n("dlBO"),Gp=n("0s8y"),Yp=n("6DTk"),Hp=n("8/xE"),Xp=n("fgyJ"),Qp=n("5hiN"),Kp=n("8d3D"),qp=n("QKku"),Wp=n("dzsG"),Zp=n("HqLa"),ef=n("WMbD"),tf=n("V+8P"),nf=n("t1iq");let of=(()=>{class e{}return e.\u0275mod=a.Vb({type:e}),e.\u0275inj=a.Ub({factory:function(t){return new(t||e)},providers:[$d,uu,Lu,s,Uu],imports:[[np,i.h,Pn.t,ob,cc.a]]}),e})();a.Uc(rs,[O.m,O.i,O.k,O.j,O.o,p.r,p.s,p.t,p.u,p.C,p.y,p.z,p.A,p.B,p.w,p.x,f.J,f.y,f.I,f.d,f.z,f.C,f.b,f.F,f.G,f.B,f.t,f.u,f.E,f.q,f.p,f.A,f.c,f.e,f.w,f.x,f.v,f.j,f.m,f.k,f.n,f.g,h.e,h.f,h.j,h.h,h.g,h.t,h.w,h.o,h.n,h.p,h.q,h.s,h.y,h.c,Mp.a,An.b,An.a,An.d,yp.a,C.a,wp.b,xp.b,xp.a,xp.d,xp.e,kp.a,Tp.a,Ap.a,Ip.a,Sp.a,Rp.a,Dp.a,$s.a,zp.a,Ep.a,Lp.a,$p.a,Jp.a,In.a,Sn.a,ib.a,lr.a,v.a,cb.a,io.h,m.a,wn.a,Np.a,io.f,P.a,jp.a,Fp.a,Up.b,Up.a,Vp.a,Bp.a,ar.a,sr.a,Gp.a,Yp.a,Hp.a,Xp.a,ro.a,Qp.a,_.a,Kp.a,qp.a,Uc.a,Pn.q,Pn.p,Pn.m,Pn.k,Pn.c,Pn.j,Pn.g,Pn.d,Pn.b,Pn.o,Pn.u,Pn.r,Pn.s,Pn.i,Pn.h,Pn.n,Pn.e,Pn.f,Pn.l,Pn.a,nb,cc.b,kn,Dc,oo,Xo,Po,Tc,qo,Gr,Zi,ir,Xc,Br,Zs,Es,rs,_p,Fs,ol,zd,fd,ep,fb,zb,Kb,Eu,sg,xu,$u,vn,mn,Co],[p.b,p.J,p.q,p.l,p.G,p.g,p.E,p.H,p.d,p.f,p.j,p.k,p.m,Ko.b,Ko.K,Wp.a,Zp.a,ef.a,tf.a,nf.a])}}]);