(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"2Qox":function(t,n,e){"use strict";e.d(n,"a",(function(){return X}));var o=e("fXoL"),i=e("ey9i"),c=e("XRCn"),a=e("H9+z"),s=(e("DQE6"),e("a9tR"),e("4Yo8")),r=e("7FIj"),l=e("ofXK"),d=e("tyNb"),g=e("UkmY"),u=e("qZuT"),b=e("l9Pe"),p=e("1kSV"),m=e("/xt7"),h=e("3Pt+"),v=e("C8Cb");const C=["moreDropdown"];function f(t,n){1&t&&o.Yb(0,"my-global-icon",11)}function O(t,n){if(1&t&&(o.bc(0),o.dd(1),o.ac()),2&t){const t=o.wc();o.Jb(1),o.ed(t.position)}}function P(t,n){if(1&t&&o.Yb(0,"my-video-thumbnail",12),2&t){const t=o.wc();o.Dc("video",t.playlistElement.video)("nsfw",t.isVideoBlur(t.playlistElement.video))("videoRouterLink",t.buildRouterLink())("queryParams",t.buildRouterQuery())}}function M(t,n){1&t&&o.Yb(0,"div",13)}const y=function(t){return["/accounts",t]};function _(t,n){if(1&t&&(o.dc(0,"a",18),o.dd(1),o.cc()),2&t){const t=o.wc(2);o.Dc("routerLink",o.Hc(2,y,t.playlistElement.video.byAccount)),o.Jb(1),o.fd(" ",t.playlistElement.video.byAccount," ")}}function w(t,n){if(1&t&&(o.dc(0,"span",19),o.dd(1),o.cc()),2&t){const t=o.wc(2);o.Jb(1),o.ed(t.playlistElement.video.byAccount)}}function x(t,n){if(1&t&&(o.bc(0),o.dc(1,"a",14),o.dd(2),o.cc(),o.bd(3,_,2,4,"a",15),o.bd(4,w,2,1,"span",16),o.dc(5,"span",17),o.dd(6),o.cc(),o.ac()),2&t){const t=o.wc();o.Jb(1),o.Dc("routerLink",t.buildRouterLink())("queryParams",t.buildRouterQuery()),o.Kb("title",t.playlistElement.video.name),o.Jb(1),o.ed(t.playlistElement.video.name),o.Jb(1),o.Dc("ngIf",t.accountLink),o.Jb(1),o.Dc("ngIf",!t.accountLink),o.Jb(2),o.ed(t.formatTimestamp(t.playlistElement))}}var k,S,T;function D(t,n){1&t&&(o.bc(0),o.hc(1,k),o.ac())}function I(t,n){1&t&&(o.bc(0),o.hc(1,S),o.ac())}function L(t,n){1&t&&(o.bc(0),o.hc(1,T),o.ac())}function A(t,n){if(1&t&&(o.dc(0,"span",20),o.bd(1,D,2,0,"ng-container",4),o.bd(2,I,2,0,"ng-container",4),o.bd(3,L,2,0,"ng-container",4),o.cc()),2&t){const t=o.wc();o.Jb(1),o.Dc("ngIf",t.isUnavailable(t.playlistElement)),o.Jb(1),o.Dc("ngIf",t.isPrivate(t.playlistElement)),o.Jb(1),o.Dc("ngIf",t.isDeleted(t.playlistElement))}}k="\u0E44\u0E21\u0E48\u0E1E\u0E23\u0E49\u0E2D\u0E21\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19",S="\u0E2A\u0E48\u0E27\u0E19\u0E15\u0E31\u0E27",T="\u0E16\u0E39\u0E01\u0E25\u0E1A";const E=function(t){return["/my-account","video-playlists",t]};function F(t,n){if(1&t&&o.Yb(0,"my-edit-button",21),2&t){const t=o.wc();o.Dc("routerLink",o.Hc(1,E,t.playlist.uuid))}}var R,V;R="\u0E25\u0E1A\u0E2D\u0E2D\u0E01\u0E08\u0E32\u0E01 " + "\ufffd0\ufffd" + "",V="\u0E41\u0E01\u0E49\u0E44\u0E02\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E40\u0E23\u0E34\u0E48\u0E21/\u0E08\u0E1A";const j=["labelText","\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19\u0E17\u0E35\u0E48"],N=["labelText","\u0E08\u0E1A\u0E17\u0E35\u0E48"],U=["value","\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01"];function J(t,n){if(1&t){const t=o.ec();o.dc(0,"div",30),o.dc(1,"div"),o.dc(2,"my-peertube-checkbox",31),o.jc(3,j),o.sc("ngModelChange",(function(n){return o.Sc(t),o.wc(3).timestampOptions.startTimestampEnabled=n})),o.cc(),o.dc(4,"my-timestamp-input",32),o.sc("ngModelChange",(function(n){return o.Sc(t),o.wc(3).timestampOptions.startTimestamp=n})),o.cc(),o.cc(),o.dc(5,"div"),o.dc(6,"my-peertube-checkbox",33),o.jc(7,N),o.sc("ngModelChange",(function(n){return o.Sc(t),o.wc(3).timestampOptions.stopTimestampEnabled=n})),o.cc(),o.dc(8,"my-timestamp-input",32),o.sc("ngModelChange",(function(n){return o.Sc(t),o.wc(3).timestampOptions.stopTimestamp=n})),o.cc(),o.cc(),o.dc(9,"input",34),o.jc(10,U),o.sc("click",(function(){o.Sc(t);const n=o.wc(3);return n.updateTimestamps(n.playlistElement)})),o.cc(),o.cc()}if(2&t){const t=o.wc(3);o.Jb(2),o.Dc("ngModel",t.timestampOptions.startTimestampEnabled),o.Jb(2),o.Dc("timestamp",t.timestampOptions.startTimestamp)("maxTimestamp",t.playlistElement.video.duration)("disabled",!t.timestampOptions.startTimestampEnabled)("ngModel",t.timestampOptions.startTimestamp),o.Jb(2),o.Dc("ngModel",t.timestampOptions.stopTimestampEnabled),o.Jb(2),o.Dc("timestamp",t.timestampOptions.stopTimestamp)("maxTimestamp",t.playlistElement.video.duration)("disabled",!t.timestampOptions.stopTimestampEnabled)("ngModel",t.timestampOptions.stopTimestamp)}}function B(t,n){if(1&t){const t=o.ec();o.bc(0),o.dc(1,"div",26),o.sc("click",(function(n){o.Sc(t);const e=o.wc(2);return e.toggleDisplayTimestampsOptions(n,e.playlistElement)})),o.Yb(2,"my-global-icon",28),o.bc(3),o.hc(4,V),o.ac(),o.cc(),o.bd(5,J,11,10,"div",29),o.ac()}if(2&t){const t=o.wc(2);o.Jb(5),o.Dc("ngIf",t.displayTimestampOptions)}}function z(t,n){if(1&t){const t=o.ec();o.dc(0,"div",22,23),o.sc("openChange",(function(){return o.Sc(t),o.wc().onDropdownOpenChange()})),o.dc(2,"my-global-icon",24),o.sc("click",(function(n){return o.Sc(t),n.preventDefault()})),o.cc(),o.dc(3,"div",25),o.bd(4,B,6,1,"ng-container",4),o.dc(5,"span",26),o.sc("click",(function(){o.Sc(t);const n=o.wc();return n.removeFromPlaylist(n.playlistElement)})),o.Yb(6,"my-global-icon",27),o.bc(7),o.hc(8,R),o.ac(),o.cc(),o.cc(),o.cc()}if(2&t){const t=o.wc();o.Jb(4),o.Dc("ngIf",t.playlistElement.video),o.Jb(4),o.lc(null==t.playlist?null:t.playlist.displayName),o.ic(8)}}const H=function(t){return{playing:t}};let X=(()=>{class t{constructor(t,n,e,i,c,a){this.authService=t,this.serverService=n,this.notifier=e,this.i18n=i,this.videoPlaylistService=c,this.cdr=a,this.owned=!1,this.playing=!1,this.rowLink=!1,this.accountLink=!0,this.touchScreenEditButton=!1,this.elementRemoved=new o.n,this.displayTimestampOptions=!1,this.timestampOptions={}}ngOnInit(){this.serverConfig=this.serverService.getTmpConfig(),this.serverService.getConfig().subscribe(t=>{this.serverConfig=t,this.cdr.detectChanges()})}isUnavailable(t){return t.type===c.m.UNAVAILABLE}isPrivate(t){return t.type===c.m.PRIVATE}isDeleted(t){return t.type===c.m.DELETED}buildRouterLink(){return this.playlist?["/videos/watch/playlist",this.playlist.uuid]:null}buildRouterQuery(){return this.playlistElement&&this.playlistElement.video?{videoId:this.playlistElement.video.uuid,start:this.playlistElement.startTimestamp,stop:this.playlistElement.stopTimestamp,resume:!0}:{}}isVideoBlur(t){return t.isVideoNSFWForUser(this.authService.getUser(),this.serverConfig)}removeFromPlaylist(t){this.videoPlaylistService.removeVideoFromPlaylist(this.playlist.id,t.id,this.playlistElement.video?this.playlistElement.video.id:void 0).subscribe(()=>{this.notifier.success(this.i18n("Video removed from {{name}}",{name:this.playlist.displayName})),this.elementRemoved.emit(t)},t=>this.notifier.error(t.message)),this.moreDropdown.close()}updateTimestamps(t){const n={};n.startTimestamp=this.timestampOptions.startTimestampEnabled?this.timestampOptions.startTimestamp:null,n.stopTimestamp=this.timestampOptions.stopTimestampEnabled?this.timestampOptions.stopTimestamp:null,this.videoPlaylistService.updateVideoOfPlaylist(this.playlist.id,t.id,n,this.playlistElement.video.id).subscribe(()=>{this.notifier.success(this.i18n("Timestamps updated")),t.startTimestamp=n.startTimestamp,t.stopTimestamp=n.stopTimestamp,this.cdr.detectChanges()},t=>this.notifier.error(t.message)),this.moreDropdown.close()}formatTimestamp(t){const n=t.startTimestamp,e=t.stopTimestamp,o=Object(a.j)(n,!0,":"),i=Object(a.j)(e,!0,":");return null===n&&null===e?"":null!==n&&null===e?this.i18n("Starts at ")+o:null===n&&null!==e?this.i18n("Stops at ")+i:this.i18n("Starts at ")+o+this.i18n(" and stops at ")+i}onDropdownOpenChange(){this.displayTimestampOptions=!1}toggleDisplayTimestampsOptions(t,n){t.preventDefault(),this.displayTimestampOptions=!this.displayTimestampOptions,!0===this.displayTimestampOptions&&(this.timestampOptions={startTimestampEnabled:!1,stopTimestampEnabled:!1,startTimestamp:0,stopTimestamp:n.video.duration},n.startTimestamp&&(this.timestampOptions.startTimestampEnabled=!0,this.timestampOptions.startTimestamp=n.startTimestamp),n.stopTimestamp&&(this.timestampOptions.stopTimestampEnabled=!0,this.timestampOptions.stopTimestamp=n.stopTimestamp)),setTimeout(()=>{this.cdr.detectChanges()})}}return t.\u0275fac=function(n){return new(n||t)(o.Xb(i.a),o.Xb(i.s),o.Xb(i.k),o.Xb(r.a),o.Xb(s.a),o.Xb(o.h))},t.\u0275cmp=o.Rb({type:t,selectors:[["my-video-playlist-element-miniature"]],viewQuery:function(t,n){var e;1&t&&o.hd(C,!0),2&t&&o.Pc(e=o.tc())&&(n.moreDropdown=e.first)},inputs:{playlist:"playlist",playlistElement:"playlistElement",owned:"owned",playing:"playing",rowLink:"rowLink",accountLink:"accountLink",position:"position",touchScreenEditButton:"touchScreenEditButton"},outputs:{elementRemoved:"elementRemoved"},decls:12,vars:13,consts:[[1,"video",3,"ngClass"],[3,"routerLink","queryParams"],[1,"position"],["iconName","play",4,"ngIf"],[4,"ngIf"],[3,"video","nsfw","videoRouterLink","queryParams",4,"ngIf"],["class","fake-thumbnail",4,"ngIf"],[1,"video-info"],["class","video-info-name",4,"ngIf"],[3,"routerLink",4,"ngIf"],["class","more","ngbDropdown","","placement","bottom auto","autoClose","outside",3,"openChange",4,"ngIf"],["iconName","play"],[3,"video","nsfw","videoRouterLink","queryParams"],[1,"fake-thumbnail"],["tabindex","-1",1,"video-info-name",3,"routerLink","queryParams"],["tabindex","-1","class","video-info-account",3,"routerLink",4,"ngIf"],["tabindex","-1","class","video-info-account",4,"ngIf"],["tabindex","-1",1,"video-info-timestamp"],["tabindex","-1",1,"video-info-account",3,"routerLink"],["tabindex","-1",1,"video-info-account"],[1,"video-info-name"],[3,"routerLink"],["ngbDropdown","","placement","bottom auto","autoClose","outside",1,"more",3,"openChange"],["moreDropdown","ngbDropdown"],["iconName","more-vertical","ngbDropdownToggle","","role","button",1,"icon-more",3,"click"],["ngbDropdownMenu",""],[1,"dropdown-item",3,"click"],["iconName","delete","aria-hidden","true"],["iconName","edit","aria-hidden","true"],["class","timestamp-options",4,"ngIf"],[1,"timestamp-options"],["inputName","startAt",3,"ngModel","ngModelChange",6,"labelText"],[3,"timestamp","maxTimestamp","disabled","ngModel","ngModelChange"],["inputName","stopAt",3,"ngModel","ngModelChange",6,"labelText"],["type","submit",3,"click",6,"value"]],template:function(t,n){1&t&&(o.dc(0,"div",0),o.dc(1,"a",1),o.dc(2,"div",2),o.bd(3,f,1,0,"my-global-icon",3),o.bd(4,O,2,1,"ng-container",4),o.cc(),o.bd(5,P,1,4,"my-video-thumbnail",5),o.bd(6,M,1,0,"div",6),o.dc(7,"div",7),o.bd(8,x,7,7,"ng-container",4),o.bd(9,A,4,3,"span",8),o.cc(),o.cc(),o.bd(10,F,1,3,"my-edit-button",9),o.bd(11,z,9,2,"div",10),o.cc()),2&t&&(o.Dc("ngClass",o.Hc(11,H,n.playing)),o.Jb(1),o.Dc("routerLink",n.buildRouterLink())("queryParams",n.buildRouterQuery()),o.Jb(2),o.Dc("ngIf",n.playing),o.Jb(1),o.Dc("ngIf",!n.playing),o.Jb(1),o.Dc("ngIf",n.playlistElement.video),o.Jb(1),o.Dc("ngIf",!n.playlistElement.video),o.Jb(2),o.Dc("ngIf",n.playlistElement.video),o.Jb(1),o.Dc("ngIf",!n.playlistElement.video),o.Jb(1),o.Dc("ngIf",n.owned&&n.touchScreenEditButton),o.Jb(1),o.Dc("ngIf",n.owned))},directives:[l.r,d.k,l.u,g.a,u.a,b.a,d.i,p.e,p.j,p.h,m.a,h.t,h.w,v.a],styles:['.fake-thumbnail[_ngcontent-%COMP%], my-video-thumbnail[_ngcontent-%COMP%]     .video-thumbnail{width:130px;height:72px}.fake-thumbnail[_ngcontent-%COMP%]{background-color:#ececec}.fake-thumbnail[_ngcontent-%COMP%], my-video-thumbnail[_ngcontent-%COMP%]{display:flex;margin-right:10px}.video[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:var(--mainBackgroundColor);padding:10px;border-bottom:1px solid rgba(0,0,0,.1)}.video[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.05)}.video[_ngcontent-%COMP%]:hover   .more[_ngcontent-%COMP%]{opacity:1}@media not all and (hover:hover) and (pointer:fine){.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{opacity:1!important}}.video.playing[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.02)}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--mainForegroundColor);display:flex;min-width:0;align-items:center;cursor:pointer}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]{font-weight:600;margin-right:10px;color:var(--greyForegroundColor);min-width:25px}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{width:17px;position:relative;left:-2px}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-self:flex-start;min-width:0}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:auto}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-account[_ngcontent-%COMP%], .video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .video-info-timestamp[_ngcontent-%COMP%]{color:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   .video-info-name[_ngcontent-%COMP%]{font-size:18px;font-weight:600;display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%], .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{justify-self:flex-end;margin-left:auto;cursor:pointer;min-width:24px}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{opacity:0}.video[_ngcontent-%COMP%]   .more.show[_ngcontent-%COMP%]{opacity:1}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]{display:flex}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     .feather, .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     .material{color:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg circle[fill="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg g[fill="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg path[fill="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg polygon[fill="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg circle[stroke="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg g[stroke="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg path[stroke="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .icon-more[_ngcontent-%COMP%]:after{border:none}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{padding:6px 15px}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{width:22px;opacity:.7;margin-right:10px;position:relative;top:-2px}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]{padding-top:0;padding-left:35px;margin-bottom:15px}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer;margin-top:10px}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input.focus-visible[_ngcontent-%COMP%], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active, .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input.disabled[_ngcontent-%COMP%], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:#fff}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:#fff}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:#fff}.video[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   .timestamp-options[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:#fff}@media screen and (min-width:800px){.expanded[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%], .expanded   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{display:none}.expanded[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%], .expanded   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%]{display:inline-flex}}@media screen and (max-width:800px){.expanded[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%], .expanded   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{display:none}.expanded[_nghost-%COMP%]   .video.playing[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%], .expanded   [_nghost-%COMP%]   .video.playing[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{display:inline-flex;height:-webkit-max-content;height:-moz-max-content;height:max-content}.expanded[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%], .expanded   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%]{display:none}}@media screen and (max-width:500px){.expanded[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit, .expanded   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit{padding:0 13px}.expanded[_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit .button-label, .expanded   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit .button-label{display:none}}@media screen and (min-width:1040px){.main-col[_nghost-%COMP%]:not(.expanded)   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{display:none}.main-col[_nghost-%COMP%]:not(.expanded)   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%]{display:inline-flex}}@media screen and (max-width:1040px){.main-col[_nghost-%COMP%]:not(.expanded)   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{display:none}.main-col[_nghost-%COMP%]:not(.expanded)   .video.playing[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video.playing[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]{display:inline-flex;height:-webkit-max-content;height:-moz-max-content;height:max-content}.main-col[_nghost-%COMP%]:not(.expanded)   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%], .main-col:not(.expanded)   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%] + .more[_ngcontent-%COMP%]{display:none}}@media screen and (max-width:740px){.main-col[_nghost-%COMP%]:not(.expanded)   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit, .main-col:not(.expanded)   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit{padding:0 13px}.main-col[_nghost-%COMP%]:not(.expanded)   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit .button-label, .main-col:not(.expanded)   [_nghost-%COMP%]   .video[_ngcontent-%COMP%]   my-edit-button[_ngcontent-%COMP%]     .action-button-edit .button-label{display:none}}'],changeDetection:0}),t})()},"3JDX":function(t,n,e){t.exports=function(t){function n(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return o.colors[Math.abs(n)%o.colors.length]}function o(t){let e;function a(...t){if(!a.enabled)return;const n=a,i=Number(new Date);n.diff=i-(e||i),n.prev=e,n.curr=i,e=i,t[0]=o.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let c=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(e,i)=>{if("%%"===e)return e;c++;const a=o.formatters[i];return"function"==typeof a&&(e=a.call(n,t[c]),t.splice(c,1),c--),e}),o.formatArgs.call(n,t),(n.log||o.log).apply(n,t)}return a.namespace=t,a.enabled=o.enabled(t),a.useColors=o.useColors(),a.color=n(t),a.destroy=i,a.extend=c,"function"==typeof o.init&&o.init(a),o.instances.push(a),a}function i(){const t=o.instances.indexOf(this);return-1!==t&&(o.instances.splice(t,1),!0)}function c(t,n){const e=o(this.namespace+(void 0===n?":":n)+t);return e.log=this.log,e}function a(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return o.debug=o,o.default=o,o.coerce=function(t){return t instanceof Error?t.stack||t.message:t},o.disable=function(){const t=[...o.names.map(a),...o.skips.map(a).map(t=>"-"+t)].join(",");return o.enable(""),t},o.enable=function(t){let n;o.save(t),o.names=[],o.skips=[];const e=("string"==typeof t?t:"").split(/[\s,]+/),i=e.length;for(n=0;n<i;n++)e[n]&&("-"===(t=e[n].replace(/\*/g,".*?"))[0]?o.skips.push(new RegExp("^"+t.substr(1)+"$")):o.names.push(new RegExp("^"+t+"$")));for(n=0;n<o.instances.length;n++){const t=o.instances[n];t.enabled=o.enabled(t.namespace)}},o.enabled=function(t){if("*"===t[t.length-1])return!0;let n,e;for(n=0,e=o.skips.length;n<e;n++)if(o.skips[n].test(t))return!1;for(n=0,e=o.names.length;n<e;n++)if(o.names[n].test(t))return!0;return!1},o.humanize=e("FGiv"),Object.keys(t).forEach(n=>{o[n]=t[n]}),o.instances=[],o.names=[],o.skips=[],o.formatters={},o.selectColor=n,o.enable(o.load()),o}},"4Yo8":function(t,n,e){"use strict";e.d(n,"a",(function(){return k}));var o=e("NOtv"),i=e("BeL+"),c=e("jtHE"),a=e("XNiG"),s=e("VRyK"),r=e("D0XW"),l=e("LRne"),d=e("OsX3"),g=e("pLZG"),u=e("lJxs"),b=e("pxpQ"),p=e("eIep"),m=e("w1tV"),h=e("JIr8"),v=e("vkgz"),C=e("tk/3"),f=e("ey9i"),O=e("6rF9"),P=e("xMQD"),M=e("AytR"),y=e("DQE6"),_=e("a9tR"),w=e("fXoL");const x=o("peertube:playlists:VideoPlaylistService");let k=(()=>{class t{constructor(t,n,e,o,l){this.authHttp=t,this.serverService=n,this.restExtractor=e,this.restService=o,this.ngZone=l,this.videoExistsInPlaylistNotifier=new c.a(1),this.videoExistsInPlaylistCacheSubject=new a.a,this.videoExistsObservableCache={},this.videoExistsCache={},this.myAccountPlaylistCache=void 0,this.myAccountPlaylistCacheSubject=new a.a,this.videoExistsInPlaylistObservable=Object(s.a)(this.videoExistsInPlaylistNotifier.pipe(Object(d.a)(500,Object(O.l)(this.ngZone,r.a)),Object(g.a)(t=>0!==t.length),Object(u.a)(t=>Object(i.a)(t)),Object(b.b)(Object(O.d)(this.ngZone,r.a)),Object(p.a)(t=>this.doVideosExistInPlaylist(t)),Object(m.a)()),this.videoExistsInPlaylistCacheSubject)}listChannelPlaylists(t,n){const e=P.m.BASE_VIDEO_CHANNEL_URL+t.nameWithHost+"/video-playlists",o=this.restService.componentPaginationToRestPagination(n);let i=new C.f;return i=this.restService.addRestGetParams(i,o),this.authHttp.get(e,{params:i}).pipe(Object(p.a)(t=>this.extractPlaylists(t)),Object(h.a)(t=>this.restExtractor.handleError(t)))}listMyPlaylistWithCache(t,n){if(!n){if(this.myAccountPlaylistCacheRunning)return this.myAccountPlaylistCacheRunning;if(this.myAccountPlaylistCache)return Object(l.a)(this.myAccountPlaylistCache)}const e=this.listAccountPlaylists(t.account,void 0,"-updatedAt",n).pipe(Object(v.a)(t=>{n||(this.myAccountPlaylistCacheRunning=void 0,this.myAccountPlaylistCache=t)}),Object(m.a)());return n||(this.myAccountPlaylistCacheRunning=e),e}listAccountPlaylists(t,n,e,o){const i=P.b.BASE_ACCOUNT_URL+t.nameWithHost+"/video-playlists",c=n?this.restService.componentPaginationToRestPagination(n):void 0;let a=new C.f;return a=this.restService.addRestGetParams(a,c,e),o&&(a=this.restService.addObjectParams(a,{search:o})),this.authHttp.get(i,{params:a}).pipe(Object(p.a)(t=>this.extractPlaylists(t)),Object(h.a)(t=>this.restExtractor.handleError(t)))}getVideoPlaylist(n){return this.authHttp.get(t.BASE_VIDEO_PLAYLIST_URL+n).pipe(Object(p.a)(t=>this.extractPlaylist(t)),Object(h.a)(t=>this.restExtractor.handleError(t)))}createVideoPlaylist(n){const e=Object(O.n)(n);return this.authHttp.post(t.BASE_VIDEO_PLAYLIST_URL,e).pipe(Object(v.a)(t=>{this.myAccountPlaylistCache&&(this.myAccountPlaylistCache.total++,this.myAccountPlaylistCache.data.push({id:t.videoPlaylist.id,displayName:n.displayName}),this.myAccountPlaylistCacheSubject.next(this.myAccountPlaylistCache))}),Object(h.a)(t=>this.restExtractor.handleError(t)))}updateVideoPlaylist(n,e){const o=Object(O.n)(e);return this.authHttp.put(t.BASE_VIDEO_PLAYLIST_URL+n.id,o).pipe(Object(u.a)(this.restExtractor.extractDataBool),Object(v.a)(()=>{this.myAccountPlaylistCache&&(this.myAccountPlaylistCache.data.find(t=>t.id===n.id).displayName=e.displayName,this.myAccountPlaylistCacheSubject.next(this.myAccountPlaylistCache))}),Object(h.a)(t=>this.restExtractor.handleError(t)))}removeVideoPlaylist(n){return this.authHttp.delete(t.BASE_VIDEO_PLAYLIST_URL+n.id).pipe(Object(u.a)(this.restExtractor.extractDataBool),Object(v.a)(()=>{this.myAccountPlaylistCache&&(this.myAccountPlaylistCache.total--,this.myAccountPlaylistCache.data=this.myAccountPlaylistCache.data.filter(t=>t.id!==n.id),this.myAccountPlaylistCacheSubject.next(this.myAccountPlaylistCache))}),Object(h.a)(t=>this.restExtractor.handleError(t)))}addVideoInPlaylist(n,e){return this.authHttp.post(t.BASE_VIDEO_PLAYLIST_URL+n+"/videos",e).pipe(Object(v.a)(t=>{this.videoExistsCache[e.videoId].push({playlistId:n,playlistElementId:t.videoPlaylistElement.id,startTimestamp:e.startTimestamp,stopTimestamp:e.stopTimestamp}),this.runPlaylistCheck(e.videoId)}),Object(h.a)(t=>this.restExtractor.handleError(t)))}updateVideoOfPlaylist(n,e,o,i){return this.authHttp.put(t.BASE_VIDEO_PLAYLIST_URL+n+"/videos/"+e,o).pipe(Object(u.a)(this.restExtractor.extractDataBool),Object(v.a)(()=>{const t=this.videoExistsCache[i].find(t=>t.playlistElementId===e);t.startTimestamp=o.startTimestamp,t.stopTimestamp=o.stopTimestamp,this.runPlaylistCheck(i)}),Object(h.a)(t=>this.restExtractor.handleError(t)))}removeVideoFromPlaylist(n,e,o){return this.authHttp.delete(t.BASE_VIDEO_PLAYLIST_URL+n+"/videos/"+e).pipe(Object(u.a)(this.restExtractor.extractDataBool),Object(v.a)(()=>{o&&(this.videoExistsCache[o]=this.videoExistsCache[o].filter(t=>t.playlistElementId!==e),this.runPlaylistCheck(o))}),Object(h.a)(t=>this.restExtractor.handleError(t)))}reorderPlaylist(n,e,o){return this.authHttp.post(t.BASE_VIDEO_PLAYLIST_URL+n+"/videos/reorder",{startPosition:e,insertAfterPosition:o}).pipe(Object(u.a)(this.restExtractor.extractDataBool),Object(h.a)(t=>this.restExtractor.handleError(t)))}getPlaylistVideos(n,e){const o=t.BASE_VIDEO_PLAYLIST_URL+n+"/videos",i=this.restService.componentPaginationToRestPagination(e);let c=new C.f;return c=this.restService.addRestGetParams(c,i),this.authHttp.get(o,{params:c}).pipe(Object(p.a)(t=>this.extractVideoPlaylistElements(t)),Object(h.a)(t=>this.restExtractor.handleError(t)))}listenToMyAccountPlaylistsChange(){return this.myAccountPlaylistCacheSubject.asObservable()}listenToVideoPlaylistChange(t){if(this.videoExistsObservableCache[t])return this.videoExistsObservableCache[t];const n=this.videoExistsInPlaylistObservable.pipe(Object(u.a)(n=>n[t]),Object(g.a)(t=>!!t),Object(v.a)(n=>this.videoExistsCache[t]=n));return this.videoExistsObservableCache[t]=n,n}runPlaylistCheck(t){return x("Running playlist check."),this.videoExistsCache[t]?(x("Found cache for %d.",t),this.videoExistsInPlaylistCacheSubject.next({[t]:this.videoExistsCache[t]})):(x("Fetching from network for %d.",t),this.videoExistsInPlaylistNotifier.next(t))}extractPlaylists(t){return this.serverService.getServerLocale().pipe(Object(u.a)(n=>{const e=t.data,o=t.total,i=[];for(const t of e)i.push(new _.a(t,n));return{data:i,total:o}}))}extractPlaylist(t){return this.serverService.getServerLocale().pipe(Object(u.a)(n=>new _.a(t,n)))}extractVideoPlaylistElements(t){return this.serverService.getServerLocale().pipe(Object(u.a)(n=>{const e=t.data,o=t.total,i=[];for(const t of e)i.push(new y.a(t,n));return{total:o,data:i}}))}doVideosExistInPlaylist(n){const e=t.MY_VIDEO_PLAYLIST_URL+"videos-exist";let o=new C.f;return o=this.restService.addObjectParams(o,{videoIds:n}),this.authHttp.get(e,{params:o,headers:{ignoreLoadingBar:""}}).pipe(Object(h.a)(t=>this.restExtractor.handleError(t)))}}return t.BASE_VIDEO_PLAYLIST_URL=M.a.apiUrl+"/api/v1/video-playlists/",t.MY_VIDEO_PLAYLIST_URL=M.a.apiUrl+"/api/v1/users/me/video-playlists/",t.\u0275fac=function(n){return new(n||t)(w.oc(C.b),w.oc(f.s),w.oc(f.n),w.oc(f.o),w.oc(w.D))},t.\u0275prov=w.Tb({token:t,factory:t.\u0275fac}),t})()},"5rWp":function(t,n,e){"use strict";var o=e("b613");e.d(n,"b",(function(){return o.a})),e("Dmbs"),e("gY50");var i=e("hHkf");e.d(n,"a",(function(){return i.a}))},"BeL+":function(t,n,e){"use strict";var o=e("msdH"),i=function(t){return t!=t},c=function(t,n){return!(null==t||!t.length)&&function(t,n,e){return n==n?function(t,n,e){for(var o=-1,i=t.length;++o<i;)if(t[o]===n)return o;return-1}(t,n):function(t,n,e,o){for(var i=t.length,c=-1;++c<i;)if(n(t[c],c,t))return c;return-1}(t,i)}(t,n)>-1},a=e("ZWiB"),s=e("pVw1"),r=e("GYlH"),l=s.a&&1/Object(r.a)(new s.a([,-0]))[1]==1/0?function(t){return new s.a(t)}:function(){};n.a=function(t){return t&&t.length?function(t,n,e){var i=-1,s=c,d=t.length,g=!0,u=[],b=u;if(d>=200){var p=l(t);if(p)return Object(r.a)(p);g=!1,s=a.a,b=new o.a}else b=u;t:for(;++i<d;){var m=t[i],h=m;if(m=0!==m?m:0,g&&h==h){for(var v=b.length;v--;)if(b[v]===h)continue t;u.push(m)}else s(b,h,void 0)||(b!==u&&b.push(h),u.push(m))}return u}(t):[]}},DQE6:function(t,n,e){"use strict";e.d(n,"a",(function(){return i}));var o=e("xMQD");class i{constructor(t,n){this.id=t.id,this.position=t.position,this.startTimestamp=t.startTimestamp,this.stopTimestamp=t.stopTimestamp,this.type=t.type,t.video&&(this.video=new o.j(t.video,n))}}},DTAc:function(t,n,e){"use strict";e.d(n,"a",(function(){return E}));var o,i,c=e("NOtv"),a=e("XNiG"),s=e("Kj3r"),r=e("pLZG"),l=e("ey9i"),d=e("sWvm"),g=e("XRCn"),u=e("H9+z"),b=e("4Yo8"),p=e("fXoL"),m=e("7FIj"),h=e("UkmY"),v=e("ofXK"),C=e("3Pt+"),f=e("/xt7"),O=e("C8Cb");o="\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E44\u0E1B\u0E22\u0E31\u0E07",i="\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01";const P=["placeholder","\u0E04\u0E49\u0E19\u0E2B\u0E32\u0E40\u0E1E\u0E25\u0E22\u0E4C\u0E25\u0E34\u0E2A\u0E15\u0E4C"];var M;M="\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E40\u0E1E\u0E25\u0E22\u0E4C\u0E25\u0E34\u0E2A\u0E15\u0E4C\u0E2A\u0E48\u0E27\u0E19\u0E15\u0E31\u0E27";const y=["labelText","\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19\u0E17\u0E35\u0E48"],_=["labelText","\u0E08\u0E1A\u0E17\u0E35\u0E48"];function w(t,n){if(1&t){const t=p.ec();p.dc(0,"div",14),p.dc(1,"div"),p.dc(2,"my-peertube-checkbox",15),p.jc(3,y),p.sc("ngModelChange",(function(n){return p.Sc(t),p.wc().timestampOptions.startTimestampEnabled=n})),p.cc(),p.dc(4,"my-timestamp-input",16),p.sc("ngModelChange",(function(n){return p.Sc(t),p.wc().timestampOptions.startTimestamp=n})),p.cc(),p.cc(),p.dc(5,"div"),p.dc(6,"my-peertube-checkbox",17),p.jc(7,_),p.sc("ngModelChange",(function(n){return p.Sc(t),p.wc().timestampOptions.stopTimestampEnabled=n})),p.cc(),p.dc(8,"my-timestamp-input",16),p.sc("ngModelChange",(function(n){return p.Sc(t),p.wc().timestampOptions.stopTimestamp=n})),p.cc(),p.cc(),p.cc()}if(2&t){const t=p.wc();p.Jb(2),p.Dc("ngModel",t.timestampOptions.startTimestampEnabled),p.Jb(2),p.Dc("timestamp",t.timestampOptions.startTimestamp)("maxTimestamp",t.video.duration)("disabled",!t.timestampOptions.startTimestampEnabled)("ngModel",t.timestampOptions.startTimestamp),p.Jb(2),p.Dc("ngModel",t.timestampOptions.stopTimestampEnabled),p.Jb(2),p.Dc("timestamp",t.timestampOptions.stopTimestamp)("maxTimestamp",t.video.duration)("disabled",!t.timestampOptions.stopTimestampEnabled)("ngModel",t.timestampOptions.stopTimestamp)}}function x(t,n){if(1&t&&(p.dc(0,"div",22),p.dd(1),p.cc()),2&t){const t=p.wc().$implicit,n=p.wc();p.Jb(1),p.fd(" ",n.formatTimestamp(t)," ")}}function k(t,n){if(1&t){const t=p.ec();p.dc(0,"div",18),p.sc("click",(function(e){p.Sc(t);const o=n.$implicit;return p.wc().togglePlaylist(e,o)})),p.dc(1,"my-peertube-checkbox",19),p.sc("ngModelChange",(function(e){return p.Sc(t),n.$implicit.inPlaylist=e})),p.cc(),p.dc(2,"div",20),p.dd(3),p.bd(4,x,2,1,"div",21),p.cc(),p.cc()}if(2&t){const t=n.$implicit;p.Jb(1),p.Dc("inputName","in-playlist-"+t.id)("ngModel",t.inPlaylist)("onPushWorkaround",!0),p.Jb(2),p.fd(" ",t.displayName," "),p.Jb(1),p.Dc("ngIf",t.inPlaylist&&(t.startTimestamp||t.stopTimestamp))}}var S;S="\u0E0A\u0E37\u0E48\u0E2D\u0E17\u0E35\u0E48\u0E41\u0E2A\u0E14\u0E07";const T=["value","\u0E2A\u0E23\u0E49\u0E32\u0E07"];function D(t,n){if(1&t&&(p.dc(0,"div",29),p.dd(1),p.cc()),2&t){const t=p.wc(2);p.Jb(1),p.fd(" ",t.formErrors.displayName," ")}}const I=function(t){return{"input-error":t}};function L(t,n){if(1&t){const t=p.ec();p.dc(0,"form",23),p.sc("ngSubmit",(function(){return p.Sc(t),p.wc().createPlaylist()})),p.dc(1,"div",24),p.dc(2,"label",25),p.hc(3,S),p.cc(),p.Yb(4,"input",26),p.bd(5,D,2,1,"div",27),p.cc(),p.dc(6,"input",28),p.jc(7,T),p.cc(),p.cc()}if(2&t){const t=p.wc();p.Dc("formGroup",t.form),p.Jb(4),p.Dc("ngClass",p.Hc(4,I,t.formErrors.displayName)),p.Jb(1),p.Dc("ngIf",t.formErrors.displayName),p.Jb(1),p.Dc("disabled",!t.form.valid)}}const A=c("peertube:playlists:VideoAddToPlaylistComponent");let E=(()=>{class t extends d.c{constructor(t,n,e,o,i,c,s){super(),this.formValidatorService=t,this.authService=n,this.notifier=e,this.i18n=o,this.videoPlaylistService=i,this.videoPlaylistValidatorsService=c,this.cd=s,this.lazyLoad=!1,this.isNewPlaylistBlockOpened=!1,this.videoPlaylistSearchChanged=new a.a,this.videoPlaylists=[],this.displayOptions=!1,this.disabled=!1,this.playlistsData=[]}get user(){return this.authService.getUser()}ngOnInit(){this.buildForm({displayName:this.videoPlaylistValidatorsService.VIDEO_PLAYLIST_DISPLAY_NAME}),this.videoPlaylistService.listenToMyAccountPlaylistsChange().subscribe(t=>{this.playlistsData=t.data,this.videoPlaylistService.runPlaylistCheck(this.video.id)}),this.videoPlaylistSearchChanged.pipe(Object(s.a)(500)).subscribe(()=>this.load()),!1===this.lazyLoad&&this.load()}ngOnChanges(t){t.video&&this.reload()}ngOnDestroy(){this.unsubscribePlaylistChanges()}disableForReuse(){this.disabled=!0}enabledForReuse(){this.disabled=!1}reload(){A("Reloading component"),this.videoPlaylists=[],this.videoPlaylistSearch=void 0,this.resetOptions(!0),this.load(),this.cd.markForCheck()}load(){A("Loading component"),this.listenToPlaylistChanges(),this.videoPlaylistService.listMyPlaylistWithCache(this.user,this.videoPlaylistSearch).subscribe(t=>{this.playlistsData=t.data,this.videoPlaylistService.runPlaylistCheck(this.video.id)})}openChange(t){!1===t&&(this.isNewPlaylistBlockOpened=!1,this.displayOptions=!1)}openCreateBlock(t){t.preventDefault(),this.isNewPlaylistBlockOpened=!0}togglePlaylist(t,n){t.preventDefault(),!0===n.inPlaylist?this.removeVideoFromPlaylist(n):this.addVideoInPlaylist(n),n.inPlaylist=!n.inPlaylist,this.resetOptions(),this.cd.markForCheck()}createPlaylist(){this.videoPlaylistService.createVideoPlaylist({displayName:this.form.value.displayName,privacy:g.n.PRIVATE}).subscribe(()=>{this.isNewPlaylistBlockOpened=!1,this.cd.markForCheck()},t=>this.notifier.error(t.message))}resetOptions(t=!1){this.displayOptions=!1,this.timestampOptions={},this.timestampOptions.startTimestampEnabled=!1,this.timestampOptions.stopTimestampEnabled=!1,t&&(this.timestampOptions.startTimestamp=0,this.timestampOptions.stopTimestamp=this.video.duration)}formatTimestamp(t){return`(${t.startTimestamp?Object(u.j)(t.startTimestamp):""}-${t.stopTimestamp?Object(u.j)(t.stopTimestamp):""})`}onVideoPlaylistSearchChanged(){this.videoPlaylistSearchChanged.next()}removeVideoFromPlaylist(t){t.playlistElementId&&this.videoPlaylistService.removeVideoFromPlaylist(t.id,t.playlistElementId,this.video.id).subscribe(()=>{this.notifier.success(this.i18n("Video removed from {{name}}",{name:t.displayName}))},t=>{this.notifier.error(t.message)},()=>this.cd.markForCheck())}listenToPlaylistChanges(){this.unsubscribePlaylistChanges(),this.listenToPlaylistChangeSub=this.videoPlaylistService.listenToVideoPlaylistChange(this.video.id).pipe(Object(r.a)(()=>!1===this.disabled)).subscribe(t=>this.rebuildPlaylists(t))}unsubscribePlaylistChanges(){this.listenToPlaylistChangeSub&&(this.listenToPlaylistChangeSub.unsubscribe(),this.listenToPlaylistChangeSub=void 0)}rebuildPlaylists(t){A("Got existing results for %d.",this.video.id,t),this.videoPlaylists=[];for(const n of this.playlistsData){const e=t.find(t=>t.playlistId===n.id);this.videoPlaylists.push({id:n.id,displayName:n.displayName,inPlaylist:!!e,playlistElementId:e?e.playlistElementId:void 0,startTimestamp:e?e.startTimestamp:void 0,stopTimestamp:e?e.stopTimestamp:void 0})}A("Rebuilt playlist state for video %d.",this.video.id,this.videoPlaylists),this.cd.markForCheck()}addVideoInPlaylist(t){const n={videoId:this.video.id};this.timestampOptions.startTimestampEnabled&&(n.startTimestamp=this.timestampOptions.startTimestamp),this.timestampOptions.stopTimestampEnabled&&(n.stopTimestamp=this.timestampOptions.stopTimestamp),this.videoPlaylistService.addVideoInPlaylist(t.id,n).subscribe(()=>{const e=n.startTimestamp||n.stopTimestamp?this.i18n("Video added in {{n}} at timestamps {{t}}",{n:t.displayName,t:this.formatTimestamp(t)}):this.i18n("Video added in {{n}}",{n:t.displayName});this.notifier.success(e)},t=>{this.notifier.error(t.message)},()=>this.cd.markForCheck())}}return t.\u0275fac=function(n){return new(n||t)(p.Xb(d.d),p.Xb(l.a),p.Xb(l.k),p.Xb(m.a),p.Xb(b.a),p.Xb(d.q),p.Xb(p.h))},t.\u0275cmp=p.Rb({type:t,selectors:[["my-video-add-to-playlist"]],inputs:{video:"video",currentVideoTimestamp:"currentVideoTimestamp",lazyLoad:"lazyLoad"},features:[p.Gb,p.Hb],decls:20,vars:5,consts:[[1,"root"],[1,"header"],[1,"first-row"],[1,"title"],[1,"options",3,"click"],["iconName","cog","aria-hidden","true"],["class","options-row",4,"ngIf"],[1,"input-container"],["type","text",3,"ngModel","ngModelChange",6,"placeholder"],[1,"playlists"],["class","playlist dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"new-playlist-button","dropdown-item",3,"hidden","click"],["iconName","add","aria-hidden","true"],["class","new-playlist-block dropdown-item",3,"formGroup","ngSubmit",4,"ngIf"],[1,"options-row"],["inputName","startAt",3,"ngModel","ngModelChange",6,"labelText"],[3,"timestamp","maxTimestamp","disabled","ngModel","ngModelChange"],["inputName","stopAt",3,"ngModel","ngModelChange",6,"labelText"],[1,"playlist","dropdown-item",3,"click"],[3,"inputName","ngModel","onPushWorkaround","ngModelChange"],[1,"display-name"],["class","timestamp-info",4,"ngIf"],[1,"timestamp-info"],[1,"new-playlist-block","dropdown-item",3,"formGroup","ngSubmit"],[1,"form-group"],["for","displayName"],["type","text","id","displayName","formControlName","displayName",3,"ngClass"],["class","form-error",4,"ngIf"],["type","submit",3,"disabled",6,"value"],[1,"form-error"]],template:function(t,n){1&t&&(p.dc(0,"div",0),p.dc(1,"div",1),p.dc(2,"div",2),p.dc(3,"div",3),p.hc(4,o),p.cc(),p.dc(5,"div",4),p.sc("click",(function(){return n.displayOptions=!n.displayOptions})),p.Yb(6,"my-global-icon",5),p.dc(7,"span"),p.hc(8,i),p.cc(),p.cc(),p.cc(),p.bd(9,w,9,10,"div",6),p.cc(),p.dc(10,"div",7),p.dc(11,"input",8),p.jc(12,P),p.sc("ngModelChange",(function(t){return n.videoPlaylistSearch=t}))("ngModelChange",(function(){return n.onVideoPlaylistSearchChanged()})),p.cc(),p.cc(),p.dc(13,"div",9),p.bd(14,k,5,5,"div",10),p.cc(),p.dc(15,"div",11),p.sc("click",(function(t){return n.openCreateBlock(t)})),p.Yb(16,"my-global-icon",12),p.dc(17,"span"),p.hc(18,M),p.cc(),p.cc(),p.bd(19,L,8,6,"form",13),p.cc()),2&t&&(p.Jb(9),p.Dc("ngIf",n.displayOptions),p.Jb(2),p.Dc("ngModel",n.videoPlaylistSearch),p.Jb(3),p.Dc("ngForOf",n.videoPlaylists),p.Jb(1),p.Dc("hidden",n.isNewPlaylistBlockOpened),p.Jb(4),p.Dc("ngIf",n.isNewPlaylistBlockOpened))},directives:[h.a,v.u,C.d,C.t,C.w,v.t,f.a,O.a,C.J,C.u,C.m,C.k,v.r],styles:['.dropdown-item[_ngcontent-%COMP%], .header[_ngcontent-%COMP%], .input-container[_ngcontent-%COMP%]{padding:8px 24px}.header[_ngcontent-%COMP%]{min-width:240px;margin-bottom:10px;border-bottom:1px solid rgba(0,0,0,.1)}.header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;align-items:center}.header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:18px;flex-grow:1}.header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:14px;cursor:pointer}.header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{width:16px;height:23px;margin-right:3px}.header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:#333}.header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:#333}.header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:#333}.header[_ngcontent-%COMP%]   .first-row[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:#333}.header[_ngcontent-%COMP%]   .options-row[_ngcontent-%COMP%]{margin-top:10px;padding-left:10px}.header[_ngcontent-%COMP%]   .options-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center}.playlists[_ngcontent-%COMP%]{max-height:180px;overflow-y:auto}.playlist[_ngcontent-%COMP%]{display:inline-flex;cursor:pointer}.playlist[_ngcontent-%COMP%]   my-peertube-checkbox[_ngcontent-%COMP%]{margin-right:10px;align-self:center}.playlist[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.playlist[_ngcontent-%COMP%]   .display-name[_ngcontent-%COMP%]   .timestamp-info[_ngcontent-%COMP%]{font-size:.9em;color:var(--greyForegroundColor);margin-left:5px}.new-playlist-block[_ngcontent-%COMP%], .new-playlist-button[_ngcontent-%COMP%]{padding-top:10px;border-top:1px solid rgba(0,0,0,.1)}.new-playlist-button[_ngcontent-%COMP%]{cursor:pointer}.new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;left:-1px;top:-1px;margin-right:4px;width:21px;height:21px}.new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:#333}.new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:#333}.new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:#333}.new-playlist-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:#333}input[type=text][_ngcontent-%COMP%]{display:inline-block;height:30px;width:200px;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px;display:block}input[type=text][_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}input[type=text][_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}input[type=text][_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}input[type=text][readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width:200px){input[type=text][_ngcontent-%COMP%]{width:100%}}input[type=submit][_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}input[type=submit].focus-visible[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}input[type=submit][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}input[type=submit][_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}input[type=submit].disabled[_ngcontent-%COMP%], input[type=submit][disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:#fff}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:#fff}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:#fff}input[type=submit][_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:#fff}'],changeDetection:0}),t})()},Dmbs:function(t,n,e){"use strict";e.d(n,"a",(function(){return z}));var o,i,c,a,s,r,l,d=e("cp0P"),g=e("GyhO"),u=e("VRyK"),b=e("ey9i"),p=e("xMQD"),m=e("XRCn"),h=e("b613"),v=e("fXoL"),C=e("tyNb"),f=e("7FIj"),O=e("ofXK"),P=e("1kSV"),M=e("gY50"),y=e("gCBE");function _(t,n){1&t&&v.Zb(0)}function w(t,n){1&t&&v.hc(0,s)}function x(t,n){if(1&t&&(v.dc(0,"span"),v.dd(1),v.bc(2),v.hc(3,l),v.ac(),v.cc()),2&t){const t=v.wc(3);v.Jb(1),v.gd("",t.subscribeStatus(!0).length,"/",t.subscribed.size," ")}}function k(t,n){if(1&t&&(v.dc(0,"span"),v.hc(1,r),v.cc(),v.bd(2,x,4,2,"span",9)),2&t){const t=v.wc(2);v.Jb(2),v.Dc("ngIf",t.isAtLeastOneChannelSubscribed)}}function S(t,n){if(1&t&&(v.dc(0,"span",19),v.dd(1),v.xc(2,"myNumberFormatter"),v.cc()),2&t){const t=v.wc(2);v.Jb(1),v.fd(" ",v.yc(2,1,t.videoChannels[0].followersCount)," ")}}o="\u0E1C\u0E48\u0E32\u0E19\u0E1A\u0E31\u0E0D\u0E0A\u0E35 ActivityPub",i="\u0E15\u0E34\u0E14\u0E15\u0E32\u0E21\u0E14\u0E49\u0E27\u0E22\u0E1A\u0E31\u0E0D\u0E0A\u0E35 Mastodon:",c="\u0E1C\u0E48\u0E32\u0E19\u0E1F\u0E35\u0E14",a="\u0E15\u0E34\u0E14\u0E15\u0E32\u0E21\u0E1C\u0E48\u0E32\u0E19 RSS",s="\u0E15\u0E34\u0E14\u0E15\u0E32\u0E21",r="\u0E15\u0E34\u0E14\u0E15\u0E32\u0E21\u0E17\u0E38\u0E01\u0E0A\u0E48\u0E2D\u0E07",l="channels subscribed";const T=function(t){return{"extra-text":t}};function D(t,n){if(1&t&&(v.dc(0,"span",14),v.bd(1,_,1,0,"ng-container",15),v.bd(2,w,1,0,"ng-template",null,16,v.cd),v.bd(4,k,3,1,"ng-template",null,17,v.cd),v.cc(),v.bd(6,S,3,3,"span",18)),2&t){const t=v.Qc(3),n=v.Qc(5),e=v.wc();v.Dc("ngClass",v.Hc(5,T,e.isAtLeastOneChannelSubscribed)),v.Jb(1),v.Dc("ngIf",e.account)("ngIfThen",n)("ngIfElse",t),v.Jb(5),v.Dc("ngIf",!e.isBigButton&&e.displayFollowers&&e.videoChannels.length>1&&0!==e.videoChannel.followersCount)}}function I(t,n){}function L(t,n){if(1&t){const t=v.ec();v.dc(0,"button",21),v.sc("click",(function(){return v.Sc(t),v.wc(2).subscribe()})),v.bd(1,I,0,0,"ng-template",22),v.cc()}if(2&t){v.wc(2);const t=v.Qc(2);v.Jb(1),v.Dc("ngTemplateOutlet",t)}}var A,E,F;function R(t,n){if(1&t){const t=v.ec();v.dc(0,"button",21),v.sc("click",(function(){return v.Sc(t),v.wc(2).unsubscribe()})),v.bc(1),v.hc(2,A),v.ac(),v.cc()}if(2&t){const t=v.wc(2);v.Jb(2),v.lc(t.account+""),v.ic(2)}}function V(t,n){if(1&t&&(v.bd(0,L,2,1,"button",20),v.bd(1,R,3,1,"button",20)),2&t){const t=v.wc();v.Dc("ngIf",!t.isAllChannelsSubscribed),v.Jb(1),v.Dc("ngIf",t.isAllChannelsSubscribed)}}function j(t,n){1&t&&v.Zb(0)}function N(t,n){1&t&&v.Zb(0)}function U(t,n){1&t&&(v.dc(0,"span"),v.hc(1,E),v.cc())}function J(t,n){1&t&&(v.dc(0,"span"),v.hc(1,F),v.cc())}A="{VAR_SELECT, select, undefined {\u0E40\u0E25\u0E34\u0E01\u0E15\u0E34\u0E14\u0E15\u0E32\u0E21} other {\u0E40\u0E25\u0E34\u0E01\u0E15\u0E34\u0E14\u0E15\u0E32\u0E21\u0E17\u0E38\u0E01\u0E0A\u0E48\u0E2D\u0E07}}",A=v.mc(A,{VAR_SELECT:"\ufffd0\ufffd"}),E="\u0E15\u0E34\u0E14\u0E15\u0E32\u0E21\u0E14\u0E49\u0E27\u0E22\u0E1A\u0E31\u0E0D\u0E0A\u0E35\u0E1A\u0E19\u0E40\u0E27\u0E47\u0E1A\u0E44\u0E0B\u0E15\u0E4C\u0E19\u0E35\u0E49",F="\u0E15\u0E34\u0E14\u0E15\u0E32\u0E21\u0E14\u0E49\u0E27\u0E22\u0E1A\u0E31\u0E0D\u0E0A\u0E35\u0E02\u0E2D\u0E07\u0E40\u0E27\u0E47\u0E1A\u0E44\u0E0B\u0E15\u0E4C\u0E19\u0E35\u0E49";const B=function(t,n,e){return{"subscribe-button":t,"unsubscribe-button":n,big:e}};let z=(()=>{class t{constructor(t,n,e,o,i,c){this.authService=t,this.router=n,this.notifier=e,this.userSubscriptionService=o,this.i18n=i,this.videoService=c,this.displayFollowers=!1,this.size="normal",this.subscribed=new Map}get handle(){return this.account?this.account.nameWithHost:this.videoChannel.name+"@"+this.videoChannel.host}get channelHandle(){return this.getChannelHandler(this.videoChannel)}get uri(){return this.account?this.account.url:this.videoChannels[0].url}get rssUri(){return(this.account?this.videoService.getAccountFeedUrls(this.account.id).find(t=>t.format===m.a.RSS):this.videoService.getVideoChannelFeedUrls(this.videoChannels[0].id).find(t=>t.format===m.a.RSS)).url}get videoChannel(){return this.videoChannels[0]}get isAllChannelsSubscribed(){return this.subscribeStatus(!0).length===this.videoChannels.length}get isAtLeastOneChannelSubscribed(){return this.subscribeStatus(!0).length>0}get isBigButton(){return this.isUserLoggedIn()&&this.videoChannels.length>1&&this.isAtLeastOneChannelSubscribed}ngOnInit(){this.loadSubscribedStatus()}ngOnChanges(){this.ngOnInit()}subscribe(){return this.isUserLoggedIn()?this.localSubscribe():this.gotoLogin()}localSubscribe(){const t=this.subscribeStatus(!1),n=this.videoChannels.map(t=>this.getChannelHandler(t)).filter(n=>t.includes(n)).map(t=>this.userSubscriptionService.addSubscription(t));Object(d.a)(n).subscribe(()=>{this.notifier.success(this.account?this.i18n("Subscribed to all current channels of {{nameWithHost}}. You will be notified of all their new videos.",{nameWithHost:this.account.displayName}):this.i18n("Subscribed to {{nameWithHost}}. You will be notified of all their new videos.",{nameWithHost:this.videoChannels[0].displayName}),this.i18n("Subscribed"))},t=>this.notifier.error(t.message))}unsubscribe(){this.isUserLoggedIn()&&this.localUnsubscribe()}localUnsubscribe(){const t=this.subscribeStatus(!0),n=this.videoChannels.map(t=>this.getChannelHandler(t)).filter(n=>t.includes(n)).map(t=>this.userSubscriptionService.deleteSubscription(t));Object(g.a)(...n).subscribe({complete:()=>{this.notifier.success(this.account?this.i18n("Unsubscribed from all channels of {{nameWithHost}}",{nameWithHost:this.account.nameWithHost}):this.i18n("Unsubscribed from {{nameWithHost}}",{nameWithHost:this.videoChannels[0].nameWithHost}),this.i18n("Unsubscribed"))},error:t=>this.notifier.error(t.message)})}isUserLoggedIn(){return this.authService.isLoggedIn()}gotoLogin(){this.router.navigate(["/login"])}subscribeStatus(t){const n=[];for(const[e,o]of this.subscribed.entries())o===t&&n.push(e);return n}getChannelHandler(t){return t.name+"@"+t.host}loadSubscribedStatus(){if(this.isUserLoggedIn())for(const t of this.videoChannels){const n=this.getChannelHandler(t);this.subscribed.set(n,!1),Object(u.a)(this.userSubscriptionService.listenToSubscriptionCacheChange(n),this.userSubscriptionService.doesSubscriptionExist(n)).subscribe(t=>this.subscribed.set(n,t),t=>this.notifier.error(t.message))}}}return t.\u0275fac=function(n){return new(n||t)(v.Xb(b.a),v.Xb(C.h),v.Xb(b.k),v.Xb(h.a),v.Xb(f.a),v.Xb(p.r))},t.\u0275cmp=v.Rb({type:t,selectors:[["my-subscribe-button"]],inputs:{account:"account",videoChannels:"videoChannels",displayFollowers:"displayFollowers",size:"size"},features:[v.Hb],decls:23,vars:14,consts:[[1,"btn-group-subscribe","btn-group",3,"ngClass"],["userLoggedOut",""],["userLoggedIn",""],[4,"ngIf","ngIfThen"],["ngbDropdown","","autoClose","outside","placement","bottom-right","role","group","aria-label","Multiple ways to subscribe to the current channel",1,"btn-group"],["ngbDropdownToggle","",1,"btn","btn-sm","dropdown-toggle-split"],["ngbDropdownMenu","",1,"dropdown-menu"],[1,"dropdown-header"],[1,"dropdown-item",3,"click"],[4,"ngIf"],[1,"dropdown-item","dropdown-item-neutral"],[3,"showHelp","uri"],[1,"dropdown-divider"],["target","_blank",1,"dropdown-item",3,"href"],[3,"ngClass"],[4,"ngIf","ngIfThen","ngIfElse"],["single",""],["multiple",""],["class","followers-count",4,"ngIf"],[1,"followers-count"],["type","button","class","btn btn-sm","role","button",3,"click",4,"ngIf"],["type","button","role","button",1,"btn","btn-sm",3,"click"],[3,"ngTemplateOutlet"]],template:function(t,n){if(1&t&&(v.dc(0,"div",0),v.bd(1,D,7,7,"ng-template",null,1,v.cd),v.bd(3,V,2,2,"ng-template",null,2,v.cd),v.bd(5,j,1,0,"ng-container",3),v.dc(6,"div",4),v.dc(7,"button",5),v.bd(8,N,1,0,"ng-container",3),v.cc(),v.dc(9,"div",6),v.dc(10,"h6",7),v.hc(11,o),v.cc(),v.dc(12,"button",8),v.sc("click",(function(){return n.subscribe()})),v.bd(13,U,2,0,"span",9),v.bd(14,J,2,0,"span",9),v.cc(),v.dc(15,"button",10),v.hc(16,i),v.cc(),v.Yb(17,"my-remote-subscribe",11),v.Yb(18,"div",12),v.dc(19,"h6",7),v.hc(20,c),v.cc(),v.dc(21,"a",13),v.hc(22,a),v.cc(),v.cc(),v.cc(),v.cc()),2&t){const t=v.Qc(2),e=v.Qc(4);v.Dc("ngClass",v.Jc(10,B,!n.isAllChannelsSubscribed,n.isAllChannelsSubscribed,n.isBigButton)),v.Jb(5),v.Dc("ngIf",n.isUserLoggedIn())("ngIfThen",e),v.Jb(3),v.Dc("ngIf",!n.isUserLoggedIn())("ngIfThen",t),v.Jb(5),v.Dc("ngIf",!n.isUserLoggedIn()),v.Jb(1),v.Dc("ngIf",n.isUserLoggedIn()),v.Jb(3),v.Dc("showHelp",!0)("uri",n.uri),v.Jb(4),v.Dc("href",n.rssUri,v.Uc)}},directives:[O.r,O.u,P.e,P.j,P.h,M.a,O.C],pipes:[y.a],styles:['.btn-group-subscribe[_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;cursor:pointer;float:right;padding:0}.btn-group-subscribe[_ngcontent-%COMP%]:active, .btn-group-subscribe[_ngcontent-%COMP%]:focus, .btn-group-subscribe[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.btn-group-subscribe[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%], .btn-group-subscribe[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%] > .dropdown-toggle[_ngcontent-%COMP%]{font-size:15px}.btn-group-subscribe[_ngcontent-%COMP%]:not(.big){white-space:nowrap}.btn-group-subscribe.big[_ngcontent-%COMP%]{height:35px}.btn-group-subscribe.big[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:first-child{width:175px}.btn-group-subscribe.big[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .extra-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{line-height:80%}.btn-group-subscribe.big[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .extra-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(:first-child){font-size:75%}.btn-group-subscribe[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%] > .dropdown-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-right:3px}.btn-group-subscribe[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{padding-right:4px}.btn-group-subscribe[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%] + .dropdown[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{padding-left:2px}.btn-group-subscribe[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%] + .dropdown[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:after{position:relative;top:1px}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-weight:600}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn.focus-visible[_ngcontent-%COMP%], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active, .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn.disabled[_ngcontent-%COMP%], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:#fff}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:#fff}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:#fff}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:#fff}.btn-group-subscribe.subscribe-button[_ngcontent-%COMP%]   span.followers-count[_ngcontent-%COMP%]{padding-left:5px}.btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#e5e5e5;color:var(--greyForegroundColor);font-weight:600}.btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn.focus-visible[_ngcontent-%COMP%], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(88,88,88,.05)}.btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn.disabled[_ngcontent-%COMP%], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active, .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus, .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover, .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[disabled][_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:#efefef}.btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn.disabled[_ngcontent-%COMP%], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[disabled][_ngcontent-%COMP%]{cursor:default}.btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:var(--greyForegroundColor)}.btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:var(--greyForegroundColor)}.btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:var(--greyForegroundColor)}.btn-group-subscribe.unsubscribe-button[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:var(--greyForegroundColor)}.btn-group-subscribe[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{cursor:default}.btn-group-subscribe[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer}.btn-group-subscribe[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item-neutral[_ngcontent-%COMP%]{cursor:default}.btn-group-subscribe[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item-neutral[_ngcontent-%COMP%]:focus, .btn-group-subscribe[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-item-neutral[_ngcontent-%COMP%]:hover{background-color:inherit}.btn-group-subscribe[_ngcontent-%COMP%]     form{padding:.25rem 1rem}.btn-group-subscribe[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block;height:30px;width:100%;color:var(--inputForegroundColor);background-color:var(--inputBackgroundColor);border:1px solid #c6c6c6;border-radius:3px;padding-left:15px;padding-right:15px;font-size:15px}.btn-group-subscribe[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:var(--inputPlaceholderColor)}.btn-group-subscribe[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--inputPlaceholderColor)}.btn-group-subscribe[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--inputPlaceholderColor)}.btn-group-subscribe[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{opacity:.7}@media screen and (max-width:100%){.btn-group-subscribe[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.extra-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.extra-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{line-height:75%}.extra-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(:first-child){font-size:60%;text-align:left}']}),t})()},FGiv:function(t,n){var e=1e3,o=6e4,i=60*o,c=24*i;function a(t,n,e,o){var i=n>=1.5*e;return Math.round(t/e)+" "+o+(i?"s":"")}t.exports=function(t,n){n=n||{};var s,r,l=typeof t;if("string"===l&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var n=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(n){var a=parseFloat(n[1]);switch((n[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*c;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*o;case"seconds":case"second":case"secs":case"sec":case"s":return a*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(t);if("number"===l&&isFinite(t))return n.long?(s=t,(r=Math.abs(s))>=c?a(s,r,c,"day"):r>=i?a(s,r,i,"hour"):r>=o?a(s,r,o,"minute"):r>=e?a(s,r,e,"second"):s+" ms"):function(t){var n=Math.abs(t);return n>=c?Math.round(t/c)+"d":n>=i?Math.round(t/i)+"h":n>=o?Math.round(t/o)+"m":n>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},HZcR:function(t,n,e){"use strict";e.d(n,"a",(function(){return _}));var o=e("mrSG"),i=e("fXoL"),c=e("ey9i"),a=e("HIM4"),s=e("xMQD"),r=(e("SZgj"),e("tTqN")),l=e("7FIj"),d=e("ofXK"),g=e("EcKj"),u=e("EKpO"),b=e("XZU/"),p=e("1kSV"),m=e("DTAc");const h=["playlistDropdown"],v=["playlistAdd"],C=["videoDownloadModal"],f=["videoReportModal"],O=["videoBlockModal"];function P(t,n){if(1&t){const t=i.ec();i.dc(0,"div",8,9),i.sc("openChange",(function(n){return i.Sc(t),i.Qc(5).openChange(n)})),i.Yb(2,"span",10),i.dc(3,"div",11),i.Yb(4,"my-video-add-to-playlist",12,13),i.cc(),i.cc()}if(2&t){const t=i.wc(2);i.Dc("placement",t.getPlaylistDropdownPlacement()),i.Jb(4),i.Dc("video",t.video)("lazyLoad",!0)}}const M=function(t){return{video:t}};function y(t,n){if(1&t){const t=i.ec();i.bc(0),i.bd(1,P,6,3,"div",1),i.dc(2,"my-action-dropdown",2),i.sc("click",(function(){return i.Sc(t),i.wc().loadDropdownInformation()})),i.cc(),i.Yb(3,"my-video-download",null,3),i.Yb(5,"my-video-report",4,5),i.dc(7,"my-video-block",6,7),i.sc("videoBlocked",(function(){return i.Sc(t),i.wc().onVideoBlocked()})),i.cc(),i.ac()}if(2&t){const t=i.wc();i.Jb(1),i.Dc("ngIf",t.isUserLoggedIn()&&t.displayOptions.playlist),i.Jb(1),i.Dc("actions",t.videoActions)("label",t.label)("entry",i.Hc(10,M,t.video))("buttonSize",t.buttonSize)("placement",t.placement)("buttonDirection",t.buttonDirection)("buttonStyled",t.buttonStyled),i.Jb(3),i.Dc("video",t.video),i.Jb(2),i.Dc("video",t.video)}}let _=(()=>{class t{constructor(t,n,e,o,c,a,s,r,l){this.authService=t,this.notifier=n,this.confirmService=e,this.blocklistService=o,this.videoBlocklistService=c,this.screenService=a,this.videoService=s,this.redundancyService=r,this.i18n=l,this.videoCaptions=[],this.displayOptions={playlist:!1,download:!0,update:!0,blacklist:!0,delete:!0,report:!0,duplicate:!0,mute:!0},this.placement="left",this.buttonStyled=!1,this.buttonSize="normal",this.buttonDirection="vertical",this.videoRemoved=new i.n,this.videoUnblocked=new i.n,this.videoBlocked=new i.n,this.videoAccountMuted=new i.n,this.modalOpened=new i.n,this.videoActions=[],this.loaded=!1}get user(){return this.authService.getUser()}ngOnChanges(){this.loaded&&(this.loaded=!1,this.playlistAdd.reload()),this.buildActions()}isUserLoggedIn(){return this.authService.isLoggedIn()}loadDropdownInformation(){this.isUserLoggedIn()&&!0!==this.loaded&&(this.loaded=!0,this.displayOptions.playlist&&this.playlistAdd.load())}showDownloadModal(){this.modalOpened.emit(),this.videoDownloadModal.show(this.video,this.videoCaptions)}showReportModal(){this.modalOpened.emit(),this.videoReportModal.show()}showBlockModal(){this.modalOpened.emit(),this.videoBlockModal.show()}isVideoUpdatable(){return this.video.isUpdatableBy(this.user)}isVideoRemovable(){return this.video.isRemovableBy(this.user)}isVideoBlockable(){return this.video.isBlockableBy(this.user)}isVideoUnblockable(){return this.video.isUnblockableBy(this.user)}isVideoDownloadable(){return this.video&&this.video instanceof s.n&&this.video.downloadEnabled}canVideoBeDuplicated(){return this.video.canBeDuplicatedBy(this.user)}isVideoAccountMutable(){return this.video.account.id!==this.user.account.id}unblockVideo(){return Object(o.a)(this,void 0,void 0,(function*(){const t=this.i18n("Do you really want to unblock this video? It will be available again in the videos list.");!1!==(yield this.confirmService.confirm(t,this.i18n("Unblock")))&&this.videoBlocklistService.unblockVideo(this.video.id).subscribe(()=>{this.notifier.success(this.i18n("Video {{name}} unblocked.",{name:this.video.name})),this.video.blacklisted=!1,this.video.blockedReason=null,this.videoUnblocked.emit()},t=>this.notifier.error(t.message))}))}removeVideo(){return Object(o.a)(this,void 0,void 0,(function*(){this.modalOpened.emit(),!1!==(yield this.confirmService.confirm(this.i18n("Do you really want to delete this video?"),this.i18n("Delete")))&&this.videoService.removeVideo(this.video.id).subscribe(()=>{this.notifier.success(this.i18n("Video {{videoName}} deleted.",{videoName:this.video.name})),this.videoRemoved.emit()},t=>this.notifier.error(t.message))}))}duplicateVideo(){this.redundancyService.addVideoRedundancy(this.video).subscribe(()=>{const t=this.i18n("This video will be duplicated by your instance.");this.notifier.success(t)},t=>this.notifier.error(t.message))}muteVideoAccount(){const t={nameWithHost:s.c.CREATE_BY_STRING(this.video.account.name,this.video.account.host)};this.blocklistService.blockAccountByUser(t).subscribe(()=>{this.notifier.success(this.i18n("Account {{nameWithHost}} muted.",t)),this.videoAccountMuted.emit()},t=>this.notifier.error(t.message))}onVideoBlocked(){this.videoBlocked.emit()}getPlaylistDropdownPlacement(){return this.screenService.isInSmallView()?"bottom-right":"bottom-left bottom-right"}buildActions(){this.videoActions=[[{label:this.i18n("Save to playlist"),handler:()=>this.playlistDropdown.toggle(),isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.playlist,iconName:"playlist-add"}],[{label:this.i18n("Download"),handler:()=>this.showDownloadModal(),isDisplayed:()=>this.displayOptions.download&&this.isVideoDownloadable(),iconName:"download"},{label:this.i18n("Update"),linkBuilder:({video:t})=>["/videos/update",t.uuid],iconName:"edit",isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.update&&this.isVideoUpdatable()},{label:this.i18n("Block"),handler:()=>this.showBlockModal(),iconName:"no",isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.blacklist&&this.isVideoBlockable()},{label:this.i18n("Unblock"),handler:()=>this.unblockVideo(),iconName:"undo",isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.blacklist&&this.isVideoUnblockable()},{label:this.i18n("Mirror"),handler:()=>this.duplicateVideo(),isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.duplicate&&this.canVideoBeDuplicated(),iconName:"cloud-download"},{label:this.i18n("Delete"),handler:()=>this.removeVideo(),isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.delete&&this.isVideoRemovable(),iconName:"delete"},{label:this.i18n("Report"),handler:()=>this.showReportModal(),isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.report,iconName:"flag"}],[{label:this.i18n("Mute account"),handler:()=>this.muteVideoAccount(),isDisplayed:()=>this.authService.isLoggedIn()&&this.displayOptions.mute&&this.isVideoAccountMutable(),iconName:"no"}]]}}return t.\u0275fac=function(n){return new(n||t)(i.Xb(c.a),i.Xb(c.k),i.Xb(c.d),i.Xb(a.b),i.Xb(a.g),i.Xb(c.q),i.Xb(s.r),i.Xb(s.f),i.Xb(l.a))},t.\u0275cmp=i.Rb({type:t,selectors:[["my-video-actions-dropdown"]],viewQuery:function(t,n){var e;1&t&&(i.hd(h,!0),i.hd(v,!0),i.hd(C,!0),i.hd(f,!0),i.hd(O,!0)),2&t&&(i.Pc(e=i.tc())&&(n.playlistDropdown=e.first),i.Pc(e=i.tc())&&(n.playlistAdd=e.first),i.Pc(e=i.tc())&&(n.videoDownloadModal=e.first),i.Pc(e=i.tc())&&(n.videoReportModal=e.first),i.Pc(e=i.tc())&&(n.videoBlockModal=e.first))},inputs:{video:"video",videoCaptions:"videoCaptions",displayOptions:"displayOptions",placement:"placement",label:"label",buttonStyled:"buttonStyled",buttonSize:"buttonSize",buttonDirection:"buttonDirection"},outputs:{videoRemoved:"videoRemoved",videoUnblocked:"videoUnblocked",videoBlocked:"videoBlocked",videoAccountMuted:"videoAccountMuted",modalOpened:"modalOpened"},features:[i.Hb],decls:1,vars:1,consts:[[4,"ngIf"],["class","playlist-dropdown","ngbDropdown","","role","button","autoClose","outside",3,"placement","openChange",4,"ngIf"],[3,"actions","label","entry","buttonSize","placement","buttonDirection","buttonStyled","click"],["videoDownloadModal",""],[3,"video"],["videoReportModal",""],[3,"video","videoBlocked"],["videoBlockModal",""],["ngbDropdown","","role","button","autoClose","outside",1,"playlist-dropdown",3,"placement","openChange"],["playlistDropdown","ngbDropdown"],["ngbDropdownAnchor","",1,"anchor"],["ngbDropdownMenu",""],[3,"video","lazyLoad"],["playlistAdd",""]],template:function(t,n){1&t&&i.bd(0,y,9,12,"ng-container",0),2&t&&i.Dc("ngIf",0!==n.videoActions.length)},directives:[d.u,g.a,r.a,u.a,b.a,p.e,p.f,p.h,m.a],styles:[".playlist-dropdown[_ngcontent-%COMP%]{position:absolute}.playlist-dropdown[_ngcontent-%COMP%]   .anchor[_ngcontent-%COMP%]{display:block;opacity:0}  .icon-playlist-add{left:2px}"]}),t})()},JEFd:function(t,n,e){"use strict";e.d(n,"a",(function(){return o.a})),e.d(n,"b",(function(){return g}));var o=e("s/vm"),i=(e("HZcR"),e("tTqN"),e("MUmz"),e("UT6+"),e("sWvm")),c=e("P8w3"),a=e("Nmku"),s=e("HIM4"),r=e("PcNq"),l=e("aW0q"),d=e("fXoL");let g=(()=>{class t{}return t.\u0275mod=d.Vb({type:t}),t.\u0275inj=d.Ub({factory:function(n){return new(n||t)},providers:[],imports:[[a.a,i.h,s.e,l.a,r.a,c.a]]}),t})()},MUmz:function(t,n,e){"use strict";e.d(n,"a",(function(){return J}));var o,i,c=e("eIep"),a=e("fXoL"),s=e("ey9i"),r=e("voWr"),l=(e("xMQD"),e("SZgj")),d=e("7FIj"),g=e("ofXK"),u=e("qZuT"),b=e("tyNb"),p=e("4Gki"),m=e("HZcR"),h=e("gCBE");function v(t,n){1&t&&(a.bc(0,22),a.hc(1,o),a.ac())}function C(t,n){1&t&&(a.bc(0,23),a.hc(1,i),a.ac())}o="\u0E44\u0E21\u0E48\u0E40\u0E1B\u0E34\u0E14\u0E40\u0E1C\u0E22",i="\u0E2A\u0E48\u0E27\u0E19\u0E15\u0E31\u0E27";const f=function(t){return["/video-channels",t]};function O(t,n){if(1&t&&(a.dc(0,"a",24),a.Yb(1,"img",25),a.cc()),2&t){const t=a.wc();a.Dc("routerLink",a.Hc(3,f,t.video.byVideoChannel))("title",t.channelLinkTitle),a.Jb(1),a.Dc("src",t.getAvatarUrl(),a.Uc)}}const P=function(t){return{"blur-filter":t}};function M(t,n){if(1&t&&(a.dc(0,"a",26),a.dd(1),a.cc()),2&t){const t=a.wc();a.Dc("routerLink",t.videoRouterLink)("ngClass",a.Hc(4,P,t.isVideoBlur)),a.Kb("title",t.video.name),a.Jb(1),a.ed(t.video.name)}}function y(t,n){if(1&t&&(a.dc(0,"a",27),a.dd(1),a.cc()),2&t){const t=a.wc();a.Dc("href",t.videoHref,a.Uc)("target",t.videoTarget)("ngClass",a.Hc(5,P,t.isVideoBlur)),a.Kb("title",t.video.name),a.Jb(1),a.ed(t.video.name)}}function _(t,n){if(1&t&&a.Yb(0,"my-date-toggle",28),2&t){const t=a.wc();a.Dc("date",t.video.publishedAt)}}function w(t,n){1&t&&(a.bc(0),a.dd(1," \u2022 "),a.ac())}var x;function k(t,n){if(1&t&&(a.bc(0),a.hc(1,x),a.xc(2,"myNumberFormatter"),a.ac()),2&t){const t=a.wc();a.Jb(2),a.lc(t.video.views)(a.yc(2,2,t.video.views)),a.ic(1)}}x="{VAR_PLURAL, plural, =1 {\u0E01\u0E32\u0E23\u0E14\u0E39 1 \u0E04\u0E23\u0E31\u0E49\u0E07} other {\u0E01\u0E32\u0E23\u0E14\u0E39 {INTERPOLATION} \u0E04\u0E23\u0E31\u0E49\u0E07}}",x=a.mc(x,{VAR_PLURAL:"\ufffd0\ufffd",INTERPOLATION:"\ufffd1\ufffd"});const S=function(t){return["/accounts",t]};function T(t,n){if(1&t&&(a.dc(0,"a",29),a.dd(1),a.cc()),2&t){const t=a.wc();a.Dc("routerLink",a.Hc(2,S,t.video.byAccount)),a.Jb(1),a.fd(" ",t.video.byAccount," ")}}function D(t,n){if(1&t&&(a.dc(0,"a",30),a.dd(1),a.cc()),2&t){const t=a.wc();a.Dc("routerLink",a.Hc(2,f,t.video.byVideoChannel)),a.Jb(1),a.fd(" ",t.video.byVideoChannel," ")}}function I(t,n){if(1&t&&(a.bc(0),a.dd(1),a.ac()),2&t){const t=a.wc();a.Jb(1),a.ed(t.video.privacy.label)}}function L(t,n){1&t&&(a.bc(0),a.dd(1," - "),a.ac())}function A(t,n){if(1&t&&(a.bc(0),a.dd(1),a.ac()),2&t){const t=a.wc();a.Jb(1),a.ed(t.getStateLabel(t.video))}}var E,F;function R(t,n){if(1&t&&(a.dc(0,"span",34),a.dd(1),a.cc()),2&t){const t=a.wc(2);a.Jb(1),a.ed(t.video.blockedReason)}}function V(t,n){if(1&t&&(a.dc(0,"div",31),a.dc(1,"span",32),a.hc(2,E),a.cc(),a.bd(3,R,2,1,"span",33),a.cc()),2&t){const t=a.wc();a.Jb(3),a.Dc("ngIf",t.video.blockedReason)}}function j(t,n){1&t&&(a.dc(0,"div",35),a.hc(1,F),a.cc())}function N(t,n){if(1&t){const t=a.ec();a.dc(0,"my-video-actions-dropdown",36),a.sc("videoRemoved",(function(){return a.Sc(t),a.wc().onVideoRemoved()}))("videoBlocked",(function(){return a.Sc(t),a.wc().onVideoBlocked()}))("videoUnblocked",(function(){return a.Sc(t),a.wc().onVideoUnblocked()}))("videoAccountMuted",(function(){return a.Sc(t),a.wc().onVideoAccountMuted()})),a.cc()}if(2&t){const t=a.wc();a.Dc("video",t.video)("displayOptions",t.videoActionsDisplayOptions)}}E="Blocked",F="\n        \u0E21\u0E35\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32\u0E44\u0E21\u0E48\u0E40\u0E2B\u0E21\u0E32\u0E30\u0E2A\u0E21\n      ";const U=function(t,n){return{"display-as-row":t,"fit-width":n}};let J=(()=>{class t{constructor(t,n,e,o,i,c,s){this.screenService=t,this.serverService=n,this.i18n=e,this.authService=o,this.videoPlaylistService=i,this.cd=c,this.localeId=s,this.ownerDisplayType="account",this.displayOptions={date:!0,views:!0,by:!0,avatar:!1,privacyLabel:!1,privacyText:!1,state:!1,blacklistInfo:!1},this.displayAsRow=!1,this.displayVideoActions=!0,this.fitWidth=!1,this.videoLinkType="internal",this.videoBlocked=new a.n,this.videoUnblocked=new a.n,this.videoRemoved=new a.n,this.videoAccountMuted=new a.n,this.videoActionsDisplayOptions={playlist:!0,download:!1,update:!0,blacklist:!0,delete:!0,report:!0,duplicate:!0,mute:!0},this.showActions=!1,this.channelLinkTitle="",this.videoRouterLink=[]}get isVideoBlur(){return this.video.isVideoNSFWForUser(this.user,this.serverConfig)}ngOnInit(){this.serverConfig=this.serverService.getTmpConfig(),this.serverService.getConfig().subscribe(t=>{this.serverConfig=t,this.buildVideoLink()}),this.setUpBy(),this.channelLinkTitle=this.i18n("{{name}} (channel page)",{name:this.video.channel.name,handle:this.video.byVideoChannel}),this.screenService.isInTouchScreen()&&this.loadActions()}buildVideoLink(){if("internal"!==this.videoLinkType&&this.video.url)return"external"===this.videoLinkType?(this.videoRouterLink=null,this.videoHref=this.video.url,void(this.videoTarget="_blank")):void(this.videoRouterLink=["/search/lazy-load-video",{url:this.video.url}]);this.videoRouterLink=["/videos/watch",this.video.uuid]}displayOwnerAccount(){return"account"===this.ownerDisplayTypeChosen}displayOwnerVideoChannel(){return"videoChannel"===this.ownerDisplayTypeChosen}isUnlistedVideo(){return this.video.privacy.id===r.c.UNLISTED}isPrivateVideo(){return this.video.privacy.id===r.c.PRIVATE}getStateLabel(t){if(!t.state)return"";if(t.privacy.id!==r.c.PRIVATE&&t.state.id===r.d.PUBLISHED)return this.i18n("Published");if(t.scheduledUpdate){const n=new Date(t.scheduledUpdate.updateAt.toString()).toLocaleString(this.localeId);return this.i18n("Publication scheduled on ")+n}return t.state.id===r.d.TO_TRANSCODE&&!0===t.waitTranscoding?this.i18n("Waiting transcoding"):t.state.id===r.d.TO_TRANSCODE?this.i18n("To transcode"):t.state.id===r.d.TO_IMPORT?this.i18n("To import"):""}getAvatarUrl(){return"account"===this.ownerDisplayTypeChosen?this.video.accountAvatarUrl:this.video.videoChannelAvatarUrl}loadActions(){this.displayVideoActions&&(this.showActions=!0),this.loadWatchLater()}onVideoBlocked(){this.videoBlocked.emit()}onVideoUnblocked(){this.videoUnblocked.emit()}onVideoRemoved(){this.videoRemoved.emit()}onVideoAccountMuted(){this.videoAccountMuted.emit()}isUserLoggedIn(){return this.authService.isLoggedIn()}onWatchLaterClick(t){!0===t?this.removeFromWatchLater():this.addToWatchLater(),this.inWatchLaterPlaylist=!t}addToWatchLater(){this.videoPlaylistService.addVideoInPlaylist(this.watchLaterPlaylist.id,{videoId:this.video.id}).subscribe(t=>{this.watchLaterPlaylist.playlistElementId=t.videoPlaylistElement.id})}removeFromWatchLater(){this.videoPlaylistService.removeVideoFromPlaylist(this.watchLaterPlaylist.id,this.watchLaterPlaylist.playlistElementId,this.video.id).subscribe(t=>{})}isWatchLaterPlaylistDisplayed(){return this.displayVideoActions&&this.isUserLoggedIn()&&void 0!==this.inWatchLaterPlaylist}setUpBy(){this.ownerDisplayTypeChosen="account"!==this.ownerDisplayType&&"videoChannel"!==this.ownerDisplayType?this.video.channel.name===this.video.account.name+"_channel"||this.video.channel.name.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/)?"account":"videoChannel":this.ownerDisplayType}loadWatchLater(){this.isUserLoggedIn()&&void 0===this.inWatchLaterPlaylist&&(this.authService.userInformationLoaded.pipe(Object(c.a)(()=>this.videoPlaylistService.listenToVideoPlaylistChange(this.video.id))).subscribe(t=>{const n=this.authService.getUser().specialPlaylists.find(t=>t.type===r.b.WATCH_LATER),e=t.find(t=>t.playlistId===n.id);this.inWatchLaterPlaylist=!1,this.watchLaterPlaylist={id:n.id},e&&(this.inWatchLaterPlaylist=!0,this.watchLaterPlaylist.playlistElementId=e.playlistElementId),this.cd.markForCheck()}),this.videoPlaylistService.runPlaylistCheck(this.video.id))}}return t.\u0275fac=function(n){return new(n||t)(a.Xb(s.q),a.Xb(s.s),a.Xb(d.a),a.Xb(s.a),a.Xb(l.b),a.Xb(a.h),a.Xb(a.w))},t.\u0275cmp=a.Rb({type:t,selectors:[["my-video-miniature"]],inputs:{user:"user",video:"video",ownerDisplayType:"ownerDisplayType",displayOptions:"displayOptions",displayAsRow:"displayAsRow",displayVideoActions:"displayVideoActions",fitWidth:"fitWidth",videoLinkType:"videoLinkType"},outputs:{videoBlocked:"videoBlocked",videoUnblocked:"videoUnblocked",videoRemoved:"videoRemoved",videoAccountMuted:"videoAccountMuted"},decls:26,vars:27,consts:[[1,"video-miniature",3,"ngClass","mouseenter"],[3,"video","nsfw","videoRouterLink","videoHref","videoTarget","displayWatchLaterPlaylist","inWatchLaterPlaylist","watchLaterClick"],["ngProjectAs","label-warning",5,["label-warning"],4,"ngIf"],["ngProjectAs","label-danger",5,["label-danger"],4,"ngIf"],[1,"video-bottom"],[1,"video-miniature-information"],[1,"d-inline-flex","video-miniature-meta"],["class","avatar",3,"routerLink","title",4,"ngIf"],[1,"w-100","d-flex","flex-column"],["tabindex","-1","class","video-miniature-name",3,"routerLink","ngClass",4,"ngIf"],["tabindex","-1","class","video-miniature-name",3,"href","target","ngClass",4,"ngIf"],[1,"video-miniature-created-at-views"],[3,"date",4,"ngIf"],[1,"views"],[4,"ngIf"],["tabindex","-1","class","video-miniature-account",3,"routerLink",4,"ngIf"],["tabindex","-1","class","video-miniature-channel",3,"routerLink",4,"ngIf"],[1,"video-info-privacy"],["class","video-info-blocked",4,"ngIf"],["class","video-info-nsfw",4,"ngIf"],[1,"video-actions"],["placement","bottom-left bottom-right left auto",3,"video","displayOptions","videoRemoved","videoBlocked","videoUnblocked","videoAccountMuted",4,"ngIf"],["ngProjectAs","label-warning",5,["label-warning"]],["ngProjectAs","label-danger",5,["label-danger"]],[1,"avatar",3,"routerLink","title"],["alt","",3,"src"],["tabindex","-1",1,"video-miniature-name",3,"routerLink","ngClass"],["tabindex","-1",1,"video-miniature-name",3,"href","target","ngClass"],[3,"date"],["tabindex","-1",1,"video-miniature-account",3,"routerLink"],["tabindex","-1",1,"video-miniature-channel",3,"routerLink"],[1,"video-info-blocked"],[1,"blocked-label"],["class","blocked-reason",4,"ngIf"],[1,"blocked-reason"],[1,"video-info-nsfw"],["placement","bottom-left bottom-right left auto",3,"video","displayOptions","videoRemoved","videoBlocked","videoUnblocked","videoAccountMuted"]],template:function(t,n){1&t&&(a.dc(0,"div",0),a.sc("mouseenter",(function(){return n.loadActions()})),a.dc(1,"my-video-thumbnail",1),a.sc("watchLaterClick",(function(t){return n.onWatchLaterClick(t)})),a.bd(2,v,2,0,"ng-container",2),a.bd(3,C,2,0,"ng-container",3),a.cc(),a.dc(4,"div",4),a.dc(5,"div",5),a.dc(6,"div",6),a.bd(7,O,2,5,"a",7),a.dc(8,"div",8),a.bd(9,M,2,6,"a",9),a.bd(10,y,2,7,"a",10),a.dc(11,"span",11),a.bd(12,_,1,1,"my-date-toggle",12),a.dc(13,"span",13),a.bd(14,w,2,0,"ng-container",14),a.bd(15,k,3,4,"ng-container",14),a.cc(),a.cc(),a.bd(16,T,2,4,"a",15),a.bd(17,D,2,4,"a",16),a.dc(18,"div",17),a.bd(19,I,2,1,"ng-container",14),a.bd(20,L,2,0,"ng-container",14),a.bd(21,A,2,1,"ng-container",14),a.cc(),a.cc(),a.cc(),a.bd(22,V,4,1,"div",18),a.bd(23,j,2,0,"div",19),a.cc(),a.dc(24,"div",20),a.bd(25,N,1,2,"my-video-actions-dropdown",21),a.cc(),a.cc(),a.cc()),2&t&&(a.Dc("ngClass",a.Ic(24,U,n.displayAsRow,n.fitWidth)),a.Jb(1),a.Dc("video",n.video)("nsfw",n.isVideoBlur)("videoRouterLink",n.videoRouterLink)("videoHref",n.videoHref)("videoTarget",n.videoTarget)("displayWatchLaterPlaylist",n.isWatchLaterPlaylistDisplayed())("inWatchLaterPlaylist",n.inWatchLaterPlaylist),a.Jb(1),a.Dc("ngIf",n.displayOptions.privacyLabel&&n.isUnlistedVideo()),a.Jb(1),a.Dc("ngIf",n.displayOptions.privacyLabel&&n.isPrivateVideo()),a.Jb(4),a.Dc("ngIf",n.displayOptions.avatar),a.Jb(2),a.Dc("ngIf",!n.videoHref),a.Jb(1),a.Dc("ngIf",n.videoHref),a.Jb(2),a.Dc("ngIf",n.displayOptions.date),a.Jb(2),a.Dc("ngIf",n.displayOptions.date&&n.displayOptions.views),a.Jb(1),a.Dc("ngIf",n.displayOptions.views),a.Jb(1),a.Dc("ngIf",n.displayOptions.by&&n.displayOwnerAccount()),a.Jb(1),a.Dc("ngIf",n.displayOptions.by&&n.displayOwnerVideoChannel()),a.Jb(2),a.Dc("ngIf",n.displayOptions.privacyText),a.Jb(1),a.Dc("ngIf",n.displayOptions.privacyText&&n.displayOptions.state&&n.getStateLabel(n.video)),a.Jb(1),a.Dc("ngIf",n.displayOptions.state),a.Jb(1),a.Dc("ngIf",n.displayOptions.blacklistInfo&&n.video.blacklisted),a.Jb(1),a.Dc("ngIf",n.displayOptions.nsfw&&n.video.nsfw),a.Jb(2),a.Dc("ngIf",n.showActions))},directives:[g.r,u.a,g.u,b.k,p.a,m.a],pipes:[h.a],styles:['.video-miniature[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;padding-bottom:15px;vertical-align:top}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]{display:flex}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]{width:183px;line-height:normal}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin:10px 10px 0 0}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;border-radius:50%;width:40px;height:40px;min-width:40px;min-height:40px}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-name[_ngcontent-%COMP%]{display:block;display:-webkit-box;max-height:2.2em;font-size:1.1em;line-height:1.1em;overflow:hidden;text-overflow:ellipsis;transition:color .2s;font-weight:600;color:var(--mainForegroundColor);margin-top:10px;margin-bottom:5px;width:calc(100% - 40px)}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-name[_ngcontent-%COMP%]:hover{text-decoration:none}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-name.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(3px);filter:blur(3px);padding-left:4px}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-meta[_ngcontent-%COMP%]{width:calc(100% + 40px);overflow:hidden}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-created-at-views[_ngcontent-%COMP%]{display:block;font-size:13px}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-account[_ngcontent-%COMP%], .video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-channel[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;font-size:13px;color:var(--greyForegroundColor)}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-account[_ngcontent-%COMP%]:active, .video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-account[_ngcontent-%COMP%]:focus, .video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-account[_ngcontent-%COMP%]:hover, .video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-channel[_ngcontent-%COMP%]:active, .video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-channel[_ngcontent-%COMP%]:focus, .video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-channel[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-account[_ngcontent-%COMP%]:hover, .video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-channel[_ngcontent-%COMP%]:hover{color:#303030}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-info-blocked[_ngcontent-%COMP%]   .blocked-label[_ngcontent-%COMP%], .video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-info-nsfw[_ngcontent-%COMP%], .video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-info-privacy[_ngcontent-%COMP%]{font-weight:600}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-info-blocked[_ngcontent-%COMP%]{color:red}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-info-blocked[_ngcontent-%COMP%]   .blocked-reason[_ngcontent-%COMP%]:before{content:" - "}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-info-nsfw[_ngcontent-%COMP%]{color:red}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]{margin-top:3px;width:40px;height:30px}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]     .dropdown-root:not(.show){opacity:0}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]     .playlist-dropdown.show+my-action-dropdown .dropdown-root{opacity:1}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]     .more-icon{opacity:.6}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]     .more-icon:hover{opacity:1}@media screen and (max-width:800px){.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]{margin:0 10px}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]{margin:0;top:-3px}.video-miniature[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]     .dropdown-root{opacity:1!important}}.video-miniature[_ngcontent-%COMP%]:hover   .video-bottom[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]     .dropdown-root, .video-miniature[_ngcontent-%COMP%]:hover     .video-thumbnail .video-thumbnail-actions-overlay{opacity:1}.video-miniature.fit-width[_ngcontent-%COMP%]{width:100%}.video-miniature.fit-width[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]{width:100%!important}.video-miniature.fit-width[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]{width:calc(100% - 40px)!important}.video-miniature.fit-width[_ngcontent-%COMP%]   my-video-thumbnail[_ngcontent-%COMP%]{position:relative;height:0;width:100%;padding-top:56%}.video-miniature.fit-width[_ngcontent-%COMP%]   my-video-thumbnail[_ngcontent-%COMP%]     .video-thumbnail{position:absolute;width:100%;height:100%;top:0}.video-miniature.display-as-row[_ngcontent-%COMP%]{flex-direction:row;padding-bottom:0;height:auto;display:flex;flex-grow:1}.video-miniature.display-as-row[_ngcontent-%COMP%]   my-video-thumbnail[_ngcontent-%COMP%]{margin-right:10px}@media screen and (min-width:800px){.video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]{width:auto;min-width:500px}}.video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-name[_ngcontent-%COMP%]{display:block;display:-webkit-box;max-height:2.6em;font-size:1.3em;line-height:1.3em;overflow:hidden;text-overflow:ellipsis;margin-top:2px;margin-bottom:5px}.video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-account[_ngcontent-%COMP%], .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-channel[_ngcontent-%COMP%], .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-created-at-views[_ngcontent-%COMP%]{font-size:95%;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-info-privacy[_ngcontent-%COMP%], .video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-miniature-created-at-views[_ngcontent-%COMP%] + .video-miniature-channel[_ngcontent-%COMP%]{margin-top:5px}.video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]   .video-info-blocked[_ngcontent-%COMP%]{margin-top:3px}.video-miniature.display-as-row[_ngcontent-%COMP%]   .video-bottom[_ngcontent-%COMP%]   .video-actions[_ngcontent-%COMP%]{margin:0;top:-3px}@media screen and (max-width:800px){.video-miniature.display-as-row[_ngcontent-%COMP%]{flex-direction:column;height:auto}.video-miniature.display-as-row[_ngcontent-%COMP%]   my-video-thumbnail[_ngcontent-%COMP%]{margin-right:0}.video-miniature.display-as-row[_ngcontent-%COMP%]   .video-miniature-information[_ngcontent-%COMP%]{min-width:0}}'],changeDetection:0}),t})()},NOtv:function(t,n,e){n.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},n.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const e="color: "+this.color;n.splice(1,0,e,"color: inherit");let o=0,i=0;n[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(o++,"%c"===t&&(i=o))}),n.splice(i,0,e)},n.save=function(t){try{t?n.storage.setItem("debug",t):n.storage.removeItem("debug")}catch(e){}},n.load=function(){let t;try{t=n.storage.getItem("debug")}catch(e){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return localStorage}catch(t){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=e("3JDX")(n);const{formatters:o}=t.exports;o.j=function(t){try{return JSON.stringify(t)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}},OsX3:function(t,n,e){"use strict";e.d(n,"a",(function(){return a}));var o=e("D0XW"),i=e("7o/Q"),c=e("z+Ro");function a(t){let n=arguments.length,e=o.a;Object(c.a)(arguments[arguments.length-1])&&(e=arguments[arguments.length-1],n--);let i=null;n>=2&&(i=arguments[1]);let a=Number.POSITIVE_INFINITY;return n>=3&&(a=arguments[2]),function(n){return n.lift(new s(t,i,a,e))}}class s{constructor(t,n,e,o){this.bufferTimeSpan=t,this.bufferCreationInterval=n,this.maxBufferSize=e,this.scheduler=o}call(t,n){return n.subscribe(new l(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))}}class r{constructor(){this.buffer=[]}}class l extends i.a{constructor(t,n,e,o,i){super(t),this.bufferTimeSpan=n,this.bufferCreationInterval=e,this.maxBufferSize=o,this.scheduler=i,this.contexts=[];const c=this.openContext();if(this.timespanOnly=null==e||e<0,this.timespanOnly)this.add(c.closeAction=i.schedule(d,n,{subscriber:this,context:c,bufferTimeSpan:n}));else{const t={bufferTimeSpan:n,bufferCreationInterval:e,subscriber:this,scheduler:i};this.add(c.closeAction=i.schedule(u,n,{subscriber:this,context:c})),this.add(i.schedule(g,e,t))}}_next(t){const n=this.contexts,e=n.length;let o;for(let i=0;i<e;i++){const e=n[i],c=e.buffer;c.push(t),c.length==this.maxBufferSize&&(o=e)}o&&this.onBufferFull(o)}_error(t){this.contexts.length=0,super._error(t)}_complete(){const{contexts:t,destination:n}=this;for(;t.length>0;){const e=t.shift();n.next(e.buffer)}super._complete()}_unsubscribe(){this.contexts=null}onBufferFull(t){this.closeContext(t);const n=t.closeAction;if(n.unsubscribe(),this.remove(n),!this.closed&&this.timespanOnly){t=this.openContext();const n=this.bufferTimeSpan;this.add(t.closeAction=this.scheduler.schedule(d,n,{subscriber:this,context:t,bufferTimeSpan:n}))}}openContext(){const t=new r;return this.contexts.push(t),t}closeContext(t){this.destination.next(t.buffer);const n=this.contexts;(n?n.indexOf(t):-1)>=0&&n.splice(n.indexOf(t),1)}}function d(t){const n=t.subscriber,e=t.context;e&&n.closeContext(e),n.closed||(t.context=n.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function g(t){const{bufferCreationInterval:n,bufferTimeSpan:e,subscriber:o,scheduler:i}=t,c=o.openContext();o.closed||(o.add(c.closeAction=i.schedule(u,e,{subscriber:o,context:c})),this.schedule(t,n))}function u(t){const{subscriber:n,context:e}=t;n.closeContext(e)}},PcNq:function(t,n,e){"use strict";e.d(n,"a",(function(){return a})),e("qZuT");var o=e("P8w3"),i=e("Nmku"),c=e("fXoL");let a=(()=>{class t{}return t.\u0275mod=c.Vb({type:t}),t.\u0275inj=c.Ub({factory:function(n){return new(n||t)},providers:[],imports:[[i.a,o.a]]}),t})()},SZgj:function(t,n,e){"use strict";e("DTAc"),e("2Qox"),e("DQE6"),e("dTdE"),e("a9tR");var o=e("4Yo8");e.d(n,"b",(function(){return o.a}));var i=e("aW0q");e.d(n,"a",(function(){return i.a}))},"UT6+":function(t,n,e){"use strict";e.d(n,"a",(function(){return y}));var o,i,c=e("fXoL"),a=e("ey9i"),s=e("xMQD"),r=e("s/vm"),l=e("7FIj"),d=e("tyNb"),g=e("ofXK"),u=e("UjHu"),b=e("/xt7"),p=e("3Pt+"),m=e("MUmz");function h(t,n){1&t&&(c.dc(0,"div",3),c.hc(1,o),c.cc())}function v(t,n){1&t&&c.Zb(0)}function C(t,n){if(1&t){const t=c.ec();c.dc(0,"div",10),c.dc(1,"div",11),c.dc(2,"span",12),c.sc("click",(function(){return c.Sc(t),c.wc(2).abortSelectionMode()})),c.hc(3,i),c.cc(),c.bd(4,v,1,0,"ng-container",13),c.cc(),c.cc()}if(2&t){const t=c.wc(2);c.Jb(4),c.Dc("ngTemplateOutlet",t.globalButtonsTemplate)}}function f(t,n){1&t&&c.Zb(0)}o="\u0E44\u0E21\u0E48\u0E21\u0E35\u0E1C\u0E25\u0E25\u0E31\u0E1E\u0E18\u0E4C",i="\n          \u0E22\u0E01\u0E40\u0E25\u0E34\u0E01\n        ";const O=function(t){return{$implicit:t}};function P(t,n){if(1&t&&(c.bc(0),c.bd(1,f,1,0,"ng-container",14),c.ac()),2&t){const t=c.wc().$implicit,n=c.wc();c.Jb(1),c.Dc("ngTemplateOutlet",n.rowButtonsTemplate)("ngTemplateOutletContext",c.Hc(2,O,t))}}function M(t,n){if(1&t){const t=c.ec();c.dc(0,"div",4),c.dc(1,"div",5),c.dc(2,"my-peertube-checkbox",6),c.sc("ngModelChange",(function(e){c.Sc(t);const o=n.$implicit;return c.wc()._selection[o.id]=e})),c.cc(),c.cc(),c.Yb(3,"my-video-miniature",7),c.bd(4,C,5,1,"div",8),c.bd(5,P,2,4,"ng-container",9),c.cc()}if(2&t){const t=n.$implicit,e=n.index,o=c.wc();c.Jb(2),c.Dc("inputName","video-check-"+t.id)("ngModel",o._selection[t.id]),c.Jb(1),c.Dc("video",t)("displayAsRow",!0)("displayOptions",o.miniatureDisplayOptions)("displayVideoActions",!1)("ownerDisplayType",o.ownerDisplayType),c.Jb(1),c.Dc("ngIf",!0===o.isInSelectionMode()&&0===e),c.Jb(1),c.Dc("ngIf",!1===o.isInSelectionMode())}}let y=(()=>{class t extends r.a{constructor(t,n,e,o,i,a,s,r,l){super(),this.i18n=t,this.router=n,this.route=e,this.notifier=o,this.authService=i,this.userService=a,this.screenService=s,this.storageService=r,this.serverService=l,this.selectionChange=new c.n,this.videosModelChange=new c.n,this._selection={}}get selection(){return this._selection}set selection(t){this._selection=t,this.selectionChange.emit(this._selection)}get videosModel(){return this.videos}set videosModel(t){this.videos=t,this.videosModelChange.emit(this.videos)}ngOnInit(){super.ngOnInit()}ngAfterContentInit(){{const t=this.templates.find(t=>"rowButtons"===t.name);t&&(this.rowButtonsTemplate=t.template)}{const t=this.templates.find(t=>"globalButtons"===t.name);t&&(this.globalButtonsTemplate=t.template)}}ngOnDestroy(){super.ngOnDestroy()}getVideosObservable(t){return this.getVideosObservableFunction(t,this.sort)}abortSelectionMode(){this._selection={}}isInSelectionMode(){return Object.keys(this._selection).some(t=>!0===this._selection[t])}generateSyndicationList(){throw new Error("Method not implemented.")}onMoreVideos(){this.videosModel=this.videos}}return t.\u0275fac=function(n){return new(n||t)(c.Xb(l.a),c.Xb(d.h),c.Xb(d.a),c.Xb(a.k),c.Xb(a.a),c.Xb(a.z),c.Xb(a.q),c.Xb(a.g),c.Xb(a.s))},t.\u0275cmp=c.Rb({type:t,selectors:[["my-videos-selection"]],contentQueries:function(t,n,e){var o;1&t&&c.Pb(e,s.e,!1),2&t&&c.Pc(o=c.tc())&&(n.templates=o)},inputs:{pagination:"pagination",titlePage:"titlePage",miniatureDisplayOptions:"miniatureDisplayOptions",ownerDisplayType:"ownerDisplayType",getVideosObservableFunction:"getVideosObservableFunction",selection:"selection",videosModel:"videosModel"},outputs:{selectionChange:"selectionChange",videosModelChange:"videosModelChange"},features:[c.Gb],decls:3,vars:5,consts:[["class","no-results",4,"ngIf"],["myInfiniteScroller","",1,"videos",3,"autoInit","dataObservable","nearOfBottom"],["class","video",4,"ngFor","ngForOf","ngForTrackBy"],[1,"no-results"],[1,"video"],[1,"checkbox-container"],[3,"inputName","ngModel","ngModelChange"],[3,"video","displayAsRow","displayOptions","displayVideoActions","ownerDisplayType"],["class","action-selection-mode",4,"ngIf"],[4,"ngIf"],[1,"action-selection-mode"],[1,"action-selection-mode-child"],[1,"action-button","action-button-cancel-selection",3,"click"],[4,"ngTemplateOutlet"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,n){1&t&&(c.bd(0,h,2,0,"div",0),c.dc(1,"div",1),c.sc("nearOfBottom",(function(){return n.onNearOfBottom()})),c.bd(2,M,6,9,"div",2),c.cc()),2&t&&(c.Dc("ngIf",0===n.pagination.totalItems),c.Jb(1),c.Dc("autoInit",!0)("dataObservable",n.onDataSubject.asObservable()),c.Jb(1),c.Dc("ngForOf",n.videos)("ngForTrackBy",n.videoById))},directives:[g.u,u.a,g.t,b.a,p.t,p.w,m.a,g.C],styles:['.action-selection-mode[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;flex-grow:1}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]{position:fixed}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{display:block;margin-left:55px}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer;background-color:#e5e5e5;color:var(--greyForegroundColor)}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection.focus-visible[_ngcontent-%COMP%], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem rgba(88,88,88,.05)}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection.disabled[_ngcontent-%COMP%], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]:active, .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]:focus, .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]:hover, .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[disabled][_ngcontent-%COMP%]{color:var(--greyForegroundColor);background-color:#efefef}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection.disabled[_ngcontent-%COMP%], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[disabled][_ngcontent-%COMP%]{cursor:default}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:var(--greyForegroundColor)}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:var(--greyForegroundColor)}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:var(--greyForegroundColor)}.action-selection-mode[_ngcontent-%COMP%]   .action-selection-mode-child[_ngcontent-%COMP%]   .action-button-cancel-selection[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:var(--greyForegroundColor)}.video[_ngcontent-%COMP%]{display:flex;min-height:130px;padding-bottom:20px;margin-bottom:20px;border-bottom:1px solid #c6c6c6}@media screen and (max-width:800px){.video[_ngcontent-%COMP%]{flex-direction:column;height:auto;align-items:center}}.video[_ngcontent-%COMP%]:first-child{margin-top:47px}.video[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:20px;margin-left:12px}.video[_ngcontent-%COMP%]   my-video-miniature[_ngcontent-%COMP%]{flex-grow:1}@media screen and (max-width:800px){.video[_ngcontent-%COMP%]{flex-direction:column;height:auto}.video[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{display:none}.video[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%]{margin-top:10px}.action-selection-mode[_ngcontent-%COMP%]{display:none}}']}),t})()},a9tR:function(t,n,e){"use strict";e.d(n,"a",(function(){return a}));var o=e("6rF9"),i=e("xMQD"),c=e("XRCn");class a{constructor(t,n){const e=Object(o.e)();this.id=t.id,this.uuid=t.uuid,this.isLocal=t.isLocal,this.displayName=t.displayName,this.description=t.description,this.privacy=t.privacy,this.thumbnailPath=t.thumbnailPath,this.thumbnailPath?(this.thumbnailUrl=e+t.thumbnailPath,this.originThumbnailUrl=this.thumbnailUrl):this.thumbnailUrl=window.location.origin+"/client/assets/images/default-playlist.jpg",this.videosLength=t.videosLength,this.type=t.type,this.createdAt=new Date(t.createdAt),this.updatedAt=new Date(t.updatedAt),this.ownerAccount=t.ownerAccount,this.ownerBy=i.c.CREATE_BY_STRING(t.ownerAccount.name,t.ownerAccount.host),this.ownerAvatarUrl=i.c.GET_ACTOR_AVATAR_URL(this.ownerAccount),t.videoChannel&&(this.videoChannel=t.videoChannel,this.videoChannelBy=i.c.CREATE_BY_STRING(t.videoChannel.name,t.videoChannel.host),this.videoChannelAvatarUrl=i.c.GET_ACTOR_AVATAR_URL(this.videoChannel)),this.privacy.label=Object(c.B)(this.privacy.label,n),this.type.id===c.o.WATCH_LATER&&(this.displayName=Object(c.B)(this.displayName,n))}refreshThumbnail(){this.originThumbnailUrl&&(this.thumbnailVersion||(this.thumbnailVersion=0),this.thumbnailVersion++,this.thumbnailUrl=this.originThumbnailUrl+"?v"+this.thumbnailVersion)}}},aW0q:function(t,n,e){"use strict";e.d(n,"a",(function(){return l}));var o=e("sWvm"),i=e("P8w3"),c=e("Nmku"),a=e("PcNq"),s=e("4Yo8"),r=e("fXoL");let l=(()=>{class t{}return t.\u0275mod=r.Vb({type:t}),t.\u0275inj=r.Ub({factory:function(n){return new(n||t)},providers:[s.a],imports:[[c.a,o.h,a.a,i.a]]}),t})()},b613:function(t,n,e){"use strict";e.d(n,"a",(function(){return w}));var o=e("NOtv"),i=e("BeL+"),c=e("jtHE"),a=e("XNiG"),s=e("VRyK"),r=e("D0XW"),l=e("LRne"),d=e("OsX3"),g=e("pLZG"),u=e("lJxs"),b=e("pxpQ"),p=e("eIep"),m=e("w1tV"),h=e("JIr8"),v=e("vkgz"),C=e("tk/3"),f=e("ey9i"),O=e("6rF9"),P=e("xMQD"),M=e("AytR"),y=e("fXoL");const _=o("peertube:subscriptions:UserSubscriptionService");let w=(()=>{class t{constructor(t,n,e,o,l){this.authHttp=t,this.restExtractor=n,this.videoService=e,this.restService=o,this.ngZone=l,this.existsSubject=new c.a(1),this.myAccountSubscriptionCache={},this.myAccountSubscriptionCacheObservable={},this.myAccountSubscriptionCacheSubject=new a.a,this.existsObservable=Object(s.a)(this.existsSubject.pipe(Object(d.a)(500,Object(O.l)(this.ngZone,r.a)),Object(g.a)(t=>0!==t.length),Object(u.a)(t=>Object(i.a)(t)),Object(b.b)(Object(O.d)(this.ngZone,r.a)),Object(p.a)(t=>this.doSubscriptionsExist(t)),Object(m.a)()),this.myAccountSubscriptionCacheSubject)}getUserSubscriptionVideos(n){const{videoPagination:e,sort:o,skipCount:i}=n,c=this.restService.componentPaginationToRestPagination(e);let a=new C.f;return a=this.restService.addRestGetParams(a,c,o),i&&(a=a.set("skipCount",i+"")),this.authHttp.get(t.BASE_USER_SUBSCRIPTIONS_URL+"/videos",{params:a}).pipe(Object(p.a)(t=>this.videoService.extractVideos(t)),Object(h.a)(t=>this.restExtractor.handleError(t)))}deleteSubscription(n){return this.authHttp.delete(t.BASE_USER_SUBSCRIPTIONS_URL+"/"+n).pipe(Object(u.a)(this.restExtractor.extractDataBool),Object(v.a)(()=>{this.myAccountSubscriptionCache[n]=!1,this.myAccountSubscriptionCacheSubject.next(this.myAccountSubscriptionCache)}),Object(h.a)(t=>this.restExtractor.handleError(t)))}addSubscription(n){return this.authHttp.post(t.BASE_USER_SUBSCRIPTIONS_URL,{uri:n}).pipe(Object(u.a)(this.restExtractor.extractDataBool),Object(v.a)(()=>{this.myAccountSubscriptionCache[n]=!0,this.myAccountSubscriptionCacheSubject.next(this.myAccountSubscriptionCache)}),Object(h.a)(t=>this.restExtractor.handleError(t)))}listSubscriptions(n){const e=t.BASE_USER_SUBSCRIPTIONS_URL,o=this.restService.componentPaginationToRestPagination(n);let i=new C.f;return i=this.restService.addRestGetParams(i,o),this.authHttp.get(e,{params:i}).pipe(Object(u.a)(t=>P.m.extractVideoChannels(t)),Object(h.a)(t=>this.restExtractor.handleError(t)))}listenToMyAccountSubscriptionCacheSubject(){return this.myAccountSubscriptionCacheSubject.asObservable()}listenToSubscriptionCacheChange(t){if(t in this.myAccountSubscriptionCacheObservable)return this.myAccountSubscriptionCacheObservable[t];const n=this.existsObservable.pipe(Object(g.a)(n=>void 0!==n[t]),Object(u.a)(n=>n[t]));return this.myAccountSubscriptionCacheObservable[t]=n,n}doesSubscriptionExist(t){return _("Running subscription check for %d.",t),t in this.myAccountSubscriptionCache?(_("Found cache for %d.",t),Object(l.a)(this.myAccountSubscriptionCache[t])):(this.existsSubject.next(t),_("Fetching from network for %d.",t),this.existsObservable.pipe(Object(g.a)(n=>void 0!==n[t]),Object(u.a)(n=>n[t]),Object(v.a)(n=>this.myAccountSubscriptionCache[t]=n)))}doSubscriptionsExist(n){const e=t.BASE_USER_SUBSCRIPTIONS_URL+"/exist";let o=new C.f;return o=this.restService.addObjectParams(o,{uris:n}),this.authHttp.get(e,{params:o}).pipe(Object(v.a)(t=>{this.myAccountSubscriptionCache=Object.assign(Object.assign({},this.myAccountSubscriptionCache),t)}),Object(h.a)(t=>this.restExtractor.handleError(t)))}}return t.BASE_USER_SUBSCRIPTIONS_URL=M.a.apiUrl+"/api/v1/users/me/subscriptions",t.\u0275fac=function(n){return new(n||t)(y.oc(C.b),y.oc(f.n),y.oc(P.r),y.oc(f.o),y.oc(y.D))},t.\u0275prov=y.Tb({token:t,factory:t.\u0275fac}),t})()},dTdE:function(t,n,e){"use strict";e.d(n,"a",(function(){return m})),e("a9tR");var o,i,c,a=e("fXoL"),s=e("ofXK"),r=e("tyNb"),l=e("LsvZ");o="{VAR_PLURAL, plural, =0 {\u0E44\u0E21\u0E48\u0E21\u0E35\u0E27\u0E34\u0E14\u0E35\u0E42\u0E2D} =1 {1 \u0E27\u0E34\u0E14\u0E35\u0E42\u0E2D} other {{INTERPOLATION} \u0E27\u0E34\u0E14\u0E35\u0E42\u0E2D}}",o=a.mc(o,{VAR_PLURAL:"\ufffd0\ufffd",INTERPOLATION:"\ufffd1\ufffd"}),i="\u0E2D\u0E31\u0E1B\u0E40\u0E14\u0E15\u0E40\u0E21\u0E37\u0E48\u0E2D " + "\ufffd0\ufffd" + "",c="\n      " + "\ufffd0\ufffd" + "\n    ";const d=function(t){return["/video-channels",t]};function g(t,n){if(1&t&&(a.dc(0,"a",13),a.hc(1,c),a.cc()),2&t){const t=a.wc();a.Dc("routerLink",a.Hc(2,d,t.playlist.videoChannelBy)),a.Jb(1),a.lc(t.playlist.videoChannelBy),a.ic(1)}}function u(t,n){if(1&t&&(a.dc(0,"span",14),a.dd(1),a.cc()),2&t){const t=a.wc();a.Jb(1),a.ed(t.playlist.privacy.label)}}function b(t,n){if(1&t&&(a.dc(0,"div",15),a.dd(1),a.cc()),2&t){const t=a.wc();a.Jb(1),a.ed(t.playlist.description)}}const p=function(t,n){return{"no-videos":t,"to-manage":n}};let m=(()=>{class t{constructor(){this.toManage=!1,this.displayChannel=!1,this.displayDescription=!1,this.displayPrivacy=!1}getPlaylistUrl(){return this.toManage?["/my-account/video-playlists",this.playlist.uuid]:0===this.playlist.videosLength?null:["/videos/watch/playlist",this.playlist.uuid]}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=a.Rb({type:t,selectors:[["my-video-playlist-miniature"]],inputs:{playlist:"playlist",toManage:"toManage",displayChannel:"displayChannel",displayDescription:"displayDescription",displayPrivacy:"displayPrivacy"},decls:18,vars:19,consts:[[1,"miniature",3,"ngClass"],[1,"miniature-thumbnail",3,"routerLink"],["alt",""],[1,"miniature-playlist-info-overlay"],[1,"play-overlay"],[1,"icon"],[1,"miniature-info"],["tabindex","-1",1,"miniature-name",3,"routerLink"],["class","by",3,"routerLink",4,"ngIf"],[1,"privacy-date"],["class","video-info-privacy",4,"ngIf"],[1,"updated-at"],["class","video-info-description",4,"ngIf"],[1,"by",3,"routerLink"],[1,"video-info-privacy"],[1,"video-info-description"]],template:function(t,n){1&t&&(a.dc(0,"div",0),a.dc(1,"a",1),a.Yb(2,"img",2),a.dc(3,"div",3),a.bc(4),a.hc(5,o),a.ac(),a.cc(),a.dc(6,"div",4),a.Yb(7,"div",5),a.cc(),a.cc(),a.dc(8,"div",6),a.dc(9,"a",7),a.dd(10),a.cc(),a.bd(11,g,2,4,"a",8),a.dc(12,"div",9),a.bd(13,u,2,1,"span",10),a.dc(14,"span",11),a.hc(15,i),a.xc(16,"myFromNow"),a.cc(),a.cc(),a.bd(17,b,2,1,"div",12),a.cc(),a.cc()),2&t&&(a.Dc("ngClass",a.Ic(16,p,0===n.playlist.videosLength,n.toManage)),a.Jb(1),a.Dc("routerLink",n.getPlaylistUrl()),a.Kb("title",n.playlist.description),a.Jb(1),a.Kb("aria-labelledby",n.playlist.displayName)("src",n.playlist.thumbnailUrl,a.Uc),a.Jb(3),a.lc(n.playlist.videosLength)(n.playlist.videosLength),a.ic(5),a.Jb(4),a.Dc("routerLink",n.getPlaylistUrl()),a.Kb("title",n.playlist.description),a.Jb(1),a.fd(" ",n.playlist.displayName," "),a.Jb(1),a.Dc("ngIf",n.displayChannel&&n.playlist.videoChannelBy),a.Jb(2),a.Dc("ngIf",n.displayPrivacy),a.Jb(3),a.lc(a.yc(16,14,n.playlist.updatedAt)),a.ic(15),a.Jb(1),a.Dc("ngIf",n.displayDescription))},directives:[s.r,r.k,s.u],pipes:[l.a],styles:['.miniature[_ngcontent-%COMP%]{display:inline-block}.miniature.no-videos[_ngcontent-%COMP%]:not(.to-manage)   a[_ngcontent-%COMP%]{cursor:default!important}.miniature.no-videos[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .miniature.to-manage[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{display:none}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]:hover{text-decoration:none!important}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.miniature[_ngcontent-%COMP%]   .miniature-thumbnail[_ngcontent-%COMP%]   .miniature-playlist-info-overlay[_ngcontent-%COMP%]{display:inline-block;background-color:rgba(0,0,0,.7);color:#fff;position:absolute;right:0;bottom:0;height:122px;padding:0 10px;display:flex;align-items:center;font-size:14px;font-weight:600}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]{width:200px;margin-top:2px;line-height:normal}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .miniature-name[_ngcontent-%COMP%]{max-height:2.2em;font-size:1.1em;line-height:1.1em;transition:color .2s;font-weight:600;color:var(--mainForegroundColor);display:block;display:-webkit-box;max-height:2.6em;font-size:1.3em;line-height:1.3em;overflow:hidden;text-overflow:ellipsis;margin:0}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .miniature-name[_ngcontent-%COMP%]:hover{text-decoration:none}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .miniature-name.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(3px);filter:blur(3px);padding-left:4px}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .by[_ngcontent-%COMP%]{display:block;color:var(--greyForegroundColor)}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .by[_ngcontent-%COMP%]:active, .miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .by[_ngcontent-%COMP%]:focus, .miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .by[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .privacy-date[_ngcontent-%COMP%]{margin-top:5px}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .privacy-date[_ngcontent-%COMP%]   .video-info-privacy[_ngcontent-%COMP%]{font-size:14px;font-weight:600}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .privacy-date[_ngcontent-%COMP%]   .video-info-privacy[_ngcontent-%COMP%]:after{content:"-";margin:0 3px}.miniature[_ngcontent-%COMP%]   .miniature-info[_ngcontent-%COMP%]   .video-info-description[_ngcontent-%COMP%]{margin-top:10px;color:var(--greyForegroundColor)}']}),t})()},gY50:function(t,n,e){"use strict";e.d(n,"a",(function(){return C}));var o,i,c,a=e("sWvm"),s=e("fXoL"),r=e("3Pt+"),l=e("ofXK"),d=e("1lk2"),g=e("BLxp");function u(t,n){1&t&&(s.nc(0,o,1),s.Yb(1,"span"),s.kc())}function b(t,n){1&t&&(s.nc(0,o,2),s.Yb(1,"span"),s.kc())}function p(t,n){1&t&&(s.bc(0),s.nc(1,i),s.Yb(2,"br"),s.Yb(3,"br"),s.kc(),s.ac())}function m(t,n){1&t&&(s.dc(0,"my-help"),s.bd(1,p,4,0,"ng-template",5),s.cc())}function h(t,n){1&t&&(s.bc(0),s.nc(1,c),s.Yb(2,"br"),s.Yb(3,"br"),s.kc(),s.ac())}function v(t,n){1&t&&(s.dc(0,"my-help"),s.bd(1,h,4,0,"ng-template",5),s.cc())}o="" + "\ufffd*5:1\ufffd\ufffd#1:1\ufffd" + "\u0E15\u0E34\u0E14\u0E15\u0E32\u0E21\u0E1C\u0E48\u0E32\u0E19\u0E40\u0E27\u0E47\u0E1A\u0E44\u0E0B\u0E15\u0E4C\u0E2D\u0E37\u0E48\u0E19" + "[\ufffd/#1:1\ufffd\ufffd/*5:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*6:2\ufffd]" + " " + "\ufffd*6:2\ufffd\ufffd#1:2\ufffd" + "\u0E42\u0E15\u0E49\u0E15\u0E2D\u0E1A\u0E1C\u0E48\u0E32\u0E19\u0E40\u0E27\u0E47\u0E1A\u0E44\u0E0B\u0E15\u0E4C\u0E2D\u0E37\u0E48\u0E19" + "[\ufffd/#1:1\ufffd\ufffd/*5:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*6:2\ufffd]" + " ",o=s.mc(o),i="\u0E04\u0E38\u0E13\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E15\u0E34\u0E14\u0E15\u0E32\u0E21\u0E0A\u0E48\u0E2D\u0E07\u0E1C\u0E48\u0E32\u0E19\u0E40\u0E27\u0E47\u0E1A\u0E44\u0E0B\u0E15\u0E4C\u0E43\u0E19\u0E40\u0E1F\u0E14\u0E34\u0E40\u0E27\u0E34\u0E23\u0E4C\u0E2A\u0E17\u0E35\u0E48\u0E23\u0E2D\u0E07\u0E23\u0E31\u0E1A ActivityPub" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + " \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A\u0E40\u0E27\u0E47\u0E1A\u0E17\u0E35\u0E48\u0E43\u0E0A\u0E49 Mastodon \u0E2B\u0E23\u0E37\u0E2D Pleroma \u0E04\u0E38\u0E13\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E43\u0E2A\u0E48 URL \u0E02\u0E2D\u0E07\u0E0A\u0E48\u0E2D\u0E07\u0E43\u0E19\u0E0A\u0E48\u0E2D\u0E07\u0E04\u0E49\u0E19\u0E2B\u0E32\u0E41\u0E25\u0E30\u0E15\u0E34\u0E14\u0E15\u0E32\u0E21\u0E08\u0E32\u0E01\u0E17\u0E35\u0E48\u0E19\u0E31\u0E48\u0E19\u0E44\u0E14\u0E49 ",i=s.mc(i),c="\u0E04\u0E38\u0E13\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E42\u0E15\u0E49\u0E15\u0E2D\u0E1A\u0E01\u0E31\u0E1A\u0E27\u0E34\u0E14\u0E35\u0E42\u0E2D\u0E19\u0E35\u0E49\u0E1C\u0E48\u0E32\u0E19\u0E40\u0E27\u0E47\u0E1A\u0E44\u0E0B\u0E15\u0E4C\u0E43\u0E19\u0E40\u0E1F\u0E14\u0E34\u0E40\u0E27\u0E34\u0E23\u0E4C\u0E2A\u0E17\u0E35\u0E48\u0E23\u0E2D\u0E07\u0E23\u0E31\u0E1A ActivityPub" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd]" + " \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A\u0E40\u0E27\u0E47\u0E1A\u0E17\u0E35\u0E48\u0E43\u0E0A\u0E49 Mastodon \u0E2B\u0E23\u0E37\u0E2D Pleroma \u0E04\u0E38\u0E13\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E43\u0E2A\u0E48 URL \u0E1B\u0E31\u0E08\u0E08\u0E38\u0E1A\u0E31\u0E19\u0E43\u0E19\u0E0A\u0E48\u0E2D\u0E07\u0E04\u0E49\u0E19\u0E2B\u0E32\u0E41\u0E25\u0E30\u0E42\u0E15\u0E49\u0E15\u0E2D\u0E1A\u0E08\u0E32\u0E01\u0E17\u0E35\u0E48\u0E19\u0E31\u0E48\u0E19\u0E44\u0E14\u0E49 ",c=s.mc(c);let C=(()=>{class t extends a.c{constructor(t,n){super(),this.formValidatorService=t,this.userValidatorsService=n,this.interact=!1,this.showHelp=!1}ngOnInit(){this.buildForm({text:this.userValidatorsService.USER_EMAIL})}onValidKey(){this.check(),this.form.valid&&this.formValidated()}formValidated(){const t=this.form.value.text,[n,e]=t.split("@");fetch(`https://${e}/.well-known/webfinger?resource=acct:${n}@${e}`).then(t=>t.json()).then(t=>new Promise((n,e)=>{if(t&&Array.isArray(t.links)){const e=t.links.find(t=>t&&"string"==typeof t.template&&"http://ostatus.org/schema/1.0/subscribe"===t.rel);e&&e.template.includes("{uri}")&&n(e.template.replace("{uri}",encodeURIComponent(this.uri)))}e()})).then(window.open).catch(t=>console.error(t))}}return t.\u0275fac=function(n){return new(n||t)(s.Xb(a.d),s.Xb(a.i))},t.\u0275cmp=s.Rb({type:t,selectors:[["my-remote-subscribe"]],inputs:{uri:"uri",interact:"interact",showHelp:"showHelp"},features:[s.Gb],decls:9,vars:6,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group","mb-2"],["type","email","formControlName","text","placeholder","jane_doe@example.com",1,"form-control",3,"keyup.control.enter","keyup.meta.enter"],["type","submit",1,"btn","btn-sm","btn-remote-follow",3,"disabled"],[4,"ngIf"],["ptTemplate","customHtml"]],template:function(t,n){1&t&&(s.dc(0,"form",0),s.sc("ngSubmit",(function(){return n.formValidated()})),s.dc(1,"div",1),s.dc(2,"input",2),s.sc("keyup.control.enter",(function(){return n.onValidKey()}))("keyup.meta.enter",(function(){return n.onValidKey()})),s.cc(),s.cc(),s.dc(3,"button",3),s.nc(4,o),s.bd(5,u,2,0,"span",4),s.bd(6,b,2,0,"span",4),s.kc(),s.cc(),s.bd(7,m,2,0,"my-help",4),s.bd(8,v,2,0,"my-help",4),s.cc()),2&t&&(s.Dc("formGroup",n.form),s.Jb(3),s.Dc("disabled",!n.form.valid),s.Jb(2),s.Dc("ngIf",!n.interact),s.Jb(1),s.Dc("ngIf",n.interact),s.Jb(1),s.Dc("ngIf",!n.interact&&n.showHelp),s.Jb(1),s.Dc("ngIf",n.showHelp&&n.interact))},directives:[r.J,r.u,r.m,r.d,r.t,r.k,l.u,d.a,g.a],styles:['.btn-remote-follow[_ngcontent-%COMP%]{border:none;font-weight:600;font-size:15px;height:30px;line-height:30px;border-radius:3px;text-align:center;padding:0 17px 0 13px;cursor:pointer}.btn-remote-follow.focus-visible[_ngcontent-%COMP%], .btn-remote-follow[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem var(--mainColorLightest)}.btn-remote-follow[_ngcontent-%COMP%], .btn-remote-follow[_ngcontent-%COMP%]:active, .btn-remote-follow[_ngcontent-%COMP%]:focus{color:#fff;background-color:var(--mainColor)}.btn-remote-follow[_ngcontent-%COMP%]:hover{color:#fff;background-color:var(--mainHoverColor)}.btn-remote-follow.disabled[_ngcontent-%COMP%], .btn-remote-follow[disabled][_ngcontent-%COMP%]{cursor:default;color:#fff;background-color:#c6c6c6}.btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:#fff}.btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:#fff}.btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:#fff}.btn-remote-follow[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:#fff}']}),t})()},hHkf:function(t,n,e){"use strict";e.d(n,"a",(function(){return s}));var o=e("sWvm"),i=e("Nmku"),c=e("b613"),a=e("fXoL");let s=(()=>{class t{}return t.\u0275mod=a.Vb({type:t}),t.\u0275inj=a.Ub({factory:function(n){return new(n||t)},providers:[c.a],imports:[[i.a,o.h]]}),t})()},qZuT:function(t,n,e){"use strict";e.d(n,"a",(function(){return y}));var o=e("fXoL"),i=e("ey9i"),c=(e("xMQD"),e("7FIj")),a=e("ofXK"),s=e("tyNb"),r=e("1kSV"),l=e("UkmY");function d(t,n){1&t&&o.Zb(0)}function g(t,n){if(1&t&&(o.dc(0,"a",3),o.bd(1,d,1,0,"ng-container",4),o.cc()),2&t){const t=o.wc(),n=o.Qc(3);o.Dc("routerLink",t.getVideoRouterLink())("queryParams",t.queryParams),o.Jb(1),o.Dc("ngTemplateOutlet",n)}}function u(t,n){1&t&&o.Zb(0)}function b(t,n){if(1&t&&(o.dc(0,"a",5),o.bd(1,u,1,0,"ng-container",4),o.cc()),2&t){const t=o.wc(),n=o.Qc(3);o.Dc("href",t.videoHref,o.Uc)("target",t.videoTarget),o.Jb(1),o.Dc("ngTemplateOutlet",n)}}function p(t,n){if(1&t){const t=o.ec();o.bc(0),o.dc(1,"div",16),o.sc("click",(function(n){return o.Sc(t),o.wc(3).onWatchLaterClick(n)})),o.Yb(2,"my-global-icon",17),o.cc(),o.ac()}if(2&t){const t=o.wc(3);o.Jb(1),o.Dc("ngbTooltip",t.addToWatchLaterText),o.Jb(1),o.Kb("aria-label",t.addToWatchLaterText)}}function m(t,n){if(1&t){const t=o.ec();o.bc(0),o.dc(1,"div",16),o.sc("click",(function(n){return o.Sc(t),o.wc(3).onWatchLaterClick(n)})),o.Yb(2,"my-global-icon",18),o.cc(),o.ac()}if(2&t){const t=o.wc(3);o.Jb(1),o.Dc("ngbTooltip",t.addedToWatchLaterText),o.Jb(1),o.Kb("aria-label",t.addedToWatchLaterText)}}function h(t,n){if(1&t&&(o.dc(0,"div",14),o.bd(1,p,3,2,"ng-container",15),o.bd(2,m,3,2,"ng-container",15),o.cc()),2&t){const t=o.wc(2);o.Jb(1),o.Dc("ngIf",!0!==t.inWatchLaterPlaylist),o.Jb(1),o.Dc("ngIf",!0===t.inWatchLaterPlaylist)}}const v=function(t){return{"width.%":t}};function C(t,n){if(1&t&&(o.dc(0,"div",19),o.Yb(1,"div",20),o.cc()),2&t){const t=o.wc(2);o.Jb(1),o.Dc("ngStyle",o.Hc(1,v,t.getProgressPercent()))}}const f=function(t){return{"blur-filter":t}};function O(t,n){if(1&t&&(o.Yb(0,"img",6),o.bd(1,h,3,2,"div",7),o.dc(2,"div",8),o.Bc(3),o.cc(),o.dc(4,"div",9),o.Bc(5,1),o.cc(),o.dc(6,"div",10),o.dd(7),o.cc(),o.dc(8,"div",11),o.Yb(9,"div",12),o.cc(),o.bd(10,C,2,3,"div",13)),2&t){const t=o.wc();o.Dc("ngClass",o.Hc(6,f,t.nsfw)),o.Kb("aria-label",t.video.name)("src",t.getImageUrl(),o.Uc),o.Jb(1),o.Dc("ngIf",t.displayWatchLaterPlaylist),o.Jb(6),o.ed(t.video.durationLabel),o.Jb(3),o.Dc("ngIf",null==t.video.userHistory?null:t.video.userHistory.currentTime)}}const P=[[["label-warning"]],[["label-danger"]]],M=["label-warning","label-danger"];let y=(()=>{class t{constructor(t,n){this.screenService=t,this.i18n=n,this.nsfw=!1,this.watchLaterClick=new o.n,this.addToWatchLaterText=this.i18n("Add to watch later"),this.addedToWatchLaterText=this.i18n("Remove from watch later")}getImageUrl(){return this.video?this.screenService.isInMobileView()?this.video.previewUrl:this.video.thumbnailUrl:""}getProgressPercent(){return this.video.userHistory?this.video.userHistory.currentTime/this.video.duration*100:0}getVideoRouterLink(){return this.videoRouterLink?this.videoRouterLink:["/videos/watch",this.video.uuid]}onWatchLaterClick(t){return this.watchLaterClick.emit(this.inWatchLaterPlaylist),t.stopPropagation(),!1}}return t.\u0275fac=function(n){return new(n||t)(o.Xb(i.q),o.Xb(c.a))},t.\u0275cmp=o.Rb({type:t,selectors:[["my-video-thumbnail"]],inputs:{video:"video",nsfw:"nsfw",videoRouterLink:"videoRouterLink",queryParams:"queryParams",videoHref:"videoHref",videoTarget:"videoTarget",displayWatchLaterPlaylist:"displayWatchLaterPlaylist",inWatchLaterPlaylist:"inWatchLaterPlaylist"},outputs:{watchLaterClick:"watchLaterClick"},ngContentSelectors:M,decls:4,vars:2,consts:[["class","video-thumbnail",3,"routerLink","queryParams",4,"ngIf"],["class","video-thumbnail",3,"href","target",4,"ngIf"],["aContent",""],[1,"video-thumbnail",3,"routerLink","queryParams"],[4,"ngTemplateOutlet"],[1,"video-thumbnail",3,"href","target"],["alt","",3,"ngClass"],["class","video-thumbnail-actions-overlay",4,"ngIf"],[1,"video-thumbnail-label-overlay","warning"],[1,"video-thumbnail-label-overlay","danger"],[1,"video-thumbnail-duration-overlay"],[1,"play-overlay"],[1,"icon"],["class","progress-bar",4,"ngIf"],[1,"video-thumbnail-actions-overlay"],[4,"ngIf"],["placement","left","container","body",1,"video-thumbnail-watch-later-overlay",3,"ngbTooltip","click"],["iconName","clock","role","button"],["iconName","tick","role","button"],[1,"progress-bar"],[3,"ngStyle"]],template:function(t,n){1&t&&(o.Cc(P),o.bd(0,g,2,3,"a",0),o.bd(1,b,2,3,"a",1),o.bd(2,O,11,8,"ng-template",null,2,o.cd)),2&t&&(o.Dc("ngIf",!n.videoHref),o.Jb(1),o.Dc("ngIf",n.videoHref))},directives:[a.u,s.k,a.C,a.r,r.y,l.a,a.y],styles:['.video-thumbnail[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;border-radius:3px;overflow:hidden;width:223px;height:122px;background-color:#ececec;transition:-webkit-filter .2s ease;transition:filter .2s ease;transition:filter .2s ease,-webkit-filter .2s ease}.video-thumbnail[_ngcontent-%COMP%]:focus:not(.focus-visible){outline:none}.video-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;width:inherit;height:inherit;opacity:0;background-color:rgba(0,0,0,.3)}.video-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%], .video-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:all .2s ease}.video-thumbnail[_ngcontent-%COMP%]   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:0;height:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.5);border-top:13px solid transparent;border-bottom:13px solid transparent;border-left:18px solid hsla(0,0%,100%,.95)}.video-thumbnail[_ngcontent-%COMP%]:hover{text-decoration:none!important}.video-thumbnail[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.video-thumbnail[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) scale(1)}.video-thumbnail.focus-visible[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--mainColorLightest);outline:none}.video-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:inherit;height:inherit}.video-thumbnail[_ngcontent-%COMP%]   img.blur-filter[_ngcontent-%COMP%]{-webkit-filter:blur(20px);filter:blur(20px);transform:scale(1.03)}.video-thumbnail[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:3px;width:100%;position:absolute;bottom:0;background-color:rgba(0,0,0,.2)}.video-thumbnail[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:100%;background-color:var(--mainColor)}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-duration-overlay[_ngcontent-%COMP%], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-label-overlay[_ngcontent-%COMP%], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]{display:inline-block;background-color:rgba(0,0,0,.7);color:#fff;border-radius:3px;font-size:12px;font-weight:600;line-height:1.2;z-index:10}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-label-overlay[_ngcontent-%COMP%]{position:absolute;padding:0 5px;left:5px;top:5px;font-weight:700}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-label-overlay.warning[_ngcontent-%COMP%]{background-color:orange}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-label-overlay.danger[_ngcontent-%COMP%]{background-color:red}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-duration-overlay[_ngcontent-%COMP%]{position:absolute;padding:0 3px;right:5px;bottom:5px}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:column;right:5px;top:5px;opacity:0}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:not(:first-child){margin-top:2px}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]{padding:3px}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{width:22px;height:22px}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .feather, .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     .material{color:#fff}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[fill="#000"], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[fill="#000"], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[fill="#000"], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[fill="#000"], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[fill="#000"]{fill:#fff}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg circle[stroke="#000"], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg g[stroke="#000"], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg path[stroke="#000"], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg polygon[stroke="#000"], .video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg rect[stroke="#000"]{stroke:#fff}.video-thumbnail[_ngcontent-%COMP%]   .video-thumbnail-actions-overlay[_ngcontent-%COMP%]   .video-thumbnail-watch-later-overlay[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]     svg stop[stop-color="#000"]{stop-color:#fff}']}),t})()},"s/vm":function(t,n,e){"use strict";e.d(n,"a",(function(){return m}));var o=e("XNiG"),i=e("xgIS"),c=e("Kj3r"),a=e("eIep"),s=e("vkgz");function r(t){const n=new Date;return n.setDate(n.getDate()-1),g(t,n)}function l(t){return u(new Date,t)<=30}function d(t){return u(new Date,t)<=7}function g(t,n){return t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate()}function u(t,n){return(t.getTime()-n.getTime())/864e5}var b=e("fXoL"),p=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.TODAY=1]="TODAY",t[t.YESTERDAY=2]="YESTERDAY",t[t.LAST_WEEK=3]="LAST_WEEK",t[t.LAST_MONTH=4]="LAST_MONTH",t[t.OLDER=5]="OLDER",t}({});let m=(()=>{class t{constructor(){this.pagination={currentPage:1,itemsPerPage:25},this.sort="-publishedAt",this.defaultSort="-publishedAt",this.syndicationItems=[],this.loadOnInit=!0,this.useUserVideoPreferences=!1,this.ownerDisplayType="account",this.displayModerationBlock=!1,this.displayVideoActions=!0,this.groupByDate=!1,this.videos=[],this.hasDoneFirstQuery=!1,this.disabled=!1,this.displayOptions={date:!0,views:!0,by:!0,avatar:!1,privacyLabel:!0,privacyText:!1,state:!1,blacklistInfo:!1},this.actions=[],this.onDataSubject=new o.a,this.groupedDates={}}ngOnInit(){this.serverConfig=this.serverService.getTmpConfig(),this.serverService.getConfig().subscribe(t=>this.serverConfig=t),this.groupedDateLabels={[p.UNKNOWN]:null,[p.TODAY]:this.i18n("Today"),[p.YESTERDAY]:this.i18n("Yesterday"),[p.LAST_WEEK]:this.i18n("Last week"),[p.LAST_MONTH]:this.i18n("Last month"),[p.OLDER]:this.i18n("Older")},this.loadRouteParams(this.route.snapshot.queryParams),this.resizeSubscription=Object(i.a)(window,"resize").pipe(Object(c.a)(500)).subscribe(()=>this.calcPageSizes()),this.calcPageSizes();const t=this.loadUserAndSettings();!0===this.loadOnInit&&t.subscribe(()=>this.loadMoreVideos()),this.userService.listenAnonymousUpdate().pipe(Object(a.a)(()=>this.loadUserAndSettings())).subscribe(()=>{this.hasDoneFirstQuery&&this.reloadVideos()}),this.screenService.isInMobileView()&&(this.displayOptions.avatar=!0)}ngOnDestroy(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}disableForReuse(){this.disabled=!0}enabledForReuse(){this.disabled=!1}videoById(t,n){return n.id}onNearOfBottom(){this.disabled||void 0!==this.lastQueryLength&&this.lastQueryLength<this.pagination.itemsPerPage||(this.pagination.currentPage+=1,this.setScrollRouteParams(),this.loadMoreVideos())}loadMoreVideos(t=!1){this.getVideosObservable(this.pagination.currentPage).subscribe(({data:n})=>{this.hasDoneFirstQuery=!0,this.lastQueryLength=n.length,t&&(this.videos=[]),this.videos=this.videos.concat(n),this.groupByDate&&this.buildGroupedDateLabels(),this.onMoreVideos(),this.onDataSubject.next(n)},t=>{const n=this.i18n("Cannot load more videos. Try again later.");console.error(n,{error:t}),this.notifier.error(n)})}reloadVideos(){this.pagination.currentPage=1,this.loadMoreVideos(!0)}toggleModerationDisplay(){throw new Error("toggleModerationDisplay is not implemented")}removeVideoFromArray(t){this.videos=this.videos.filter(n=>n.id!==t.id)}buildGroupedDateLabels(){let t=p.UNKNOWN;for(const n of this.videos){const e=n.publishedAt;if(t<=p.TODAY&&g(e,new Date)){if(t===p.TODAY)continue;t=p.TODAY,this.groupedDates[n.id]=t}else if(t<=p.YESTERDAY&&r(e)){if(t===p.YESTERDAY)continue;t=p.YESTERDAY,this.groupedDates[n.id]=t}else if(t<=p.LAST_WEEK&&d(e)){if(t===p.LAST_WEEK)continue;t=p.LAST_WEEK,this.groupedDates[n.id]=t}else if(t<=p.LAST_MONTH&&l(e)){if(t===p.LAST_MONTH)continue;t=p.LAST_MONTH,this.groupedDates[n.id]=t}else if(t<=p.OLDER){if(t===p.OLDER)continue;t=p.OLDER,this.groupedDates[n.id]=t}}}getCurrentGroupedDateLabel(t){if(!1!==this.groupByDate)return this.groupedDateLabels[this.groupedDates[t.id]]}onMoreVideos(){}loadRouteParams(t){this.sort=t.sort||this.defaultSort,this.categoryOneOf=t.categoryOneOf,this.angularState=t["a-state"]}calcPageSizes(){this.screenService.isInMobileView()&&(this.pagination.itemsPerPage=5)}setScrollRouteParams(){if(this.angularState)return;this.angularState=42;let t=this.router.url;t&&"/"!==t||(t=this.serverConfig.instance.defaultClientRoute),this.router.navigate([t],{queryParams:{"a-state":this.angularState,categoryOneOf:this.categoryOneOf},replaceUrl:!0,queryParamsHandling:"merge"})}loadUserAndSettings(){return this.userService.getAnonymousOrLoggedUser().pipe(Object(s.a)(t=>{this.userMiniature=t,this.useUserVideoPreferences&&(this.languageOneOf=t.videoLanguages,this.nsfwPolicy=t.nsfwPolicy)}))}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=b.Sb({type:t}),t})()},tTqN:function(t,n,e){"use strict";e.d(n,"a",(function(){return $}));var o=e("mrSG"),i=e("TSHB"),c=e("Bw5p"),a=e("aEDk"),s=e("ey9i"),r=e("XRCn"),l=e("xMQD"),d=e("fXoL"),g=e("1kSV"),u=e("7FIj"),b=e("ofXK"),p=e("UkmY"),m=e("UXJo"),h=e("3Pt+");const v=["modal"];var C;C="\u0E14\u0E32\u0E27\u0E19\u0E4C\u0E42\u0E2B\u0E25\u0E14";const f=["value","\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01"],O=["value","\u0E14\u0E32\u0E27\u0E19\u0E4C\u0E42\u0E2B\u0E25\u0E14"];var P,M,y,_,w,x,k,S,T,D;function I(t,n){if(1&t){const t=d.ec();d.dc(0,"button",24),d.sc("click",(function(){return d.Sc(t),d.wc(3).switchToType("subtitles")})),d.hc(1,P),d.cc()}}function L(t,n){if(1&t){const t=d.ec();d.dc(0,"button",24),d.sc("click",(function(){return d.Sc(t),d.wc(3).switchToType("video")})),d.hc(1,M),d.cc()}}function A(t,n){if(1&t&&(d.dc(0,"div",20),d.dc(1,"span",21),d.dd(2),d.cc(),d.dc(3,"div",22),d.bd(4,I,2,0,"button",23),d.bd(5,L,2,0,"button",23),d.cc(),d.cc()),2&t){const t=d.wc(2);d.Jb(2),d.fd(" ",t.type," "),d.Jb(2),d.Dc("ngIf","video"===t.type),d.Jb(1),d.Dc("ngIf","subtitles"===t.type)}}function E(t,n){if(1&t&&(d.dc(0,"option",27),d.dd(1),d.cc()),2&t){const t=n.$implicit;d.Dc("value",t.resolution.id),d.Jb(1),d.ed(t.resolution.label)}}function F(t,n){if(1&t){const t=d.ec();d.dc(0,"select",25),d.sc("ngModelChange",(function(n){return d.Sc(t),d.wc(2).resolutionId=n}))("ngModelChange",(function(){return d.Sc(t),d.wc(2).onResolutionIdChange()})),d.bd(1,E,2,2,"option",26),d.cc()}if(2&t){const t=d.wc(2);d.Dc("ngModel",t.resolutionId),d.Jb(1),d.Dc("ngForOf",t.getVideoFiles())}}function R(t,n){if(1&t&&(d.dc(0,"option",27),d.dd(1),d.cc()),2&t){const t=n.$implicit;d.Dc("value",t.language.id),d.Jb(1),d.ed(t.language.label)}}function V(t,n){if(1&t){const t=d.ec();d.dc(0,"select",25),d.sc("ngModelChange",(function(n){return d.Sc(t),d.wc(2).subtitleLanguageId=n})),d.bd(1,R,2,2,"option",26),d.cc()}if(2&t){const t=d.wc(2);d.Dc("ngModel",t.subtitleLanguageId),d.Jb(1),d.Dc("ngForOf",t.videoCaptions)}}function j(t,n){if(1&t&&(d.dc(0,"div",37),d.dc(1,"span",38),d.hc(2,x),d.cc(),d.dc(3,"span",39),d.dd(4),d.cc(),d.cc()),2&t){const t=n.$implicit;d.Jb(2),d.lc(t.value.label),d.ic(2),d.Jb(2),d.ed(t.value.value)}}function N(t,n){if(1&t&&(d.dc(0,"div",35),d.bd(1,j,5,2,"div",36),d.xc(2,"keyvalue"),d.cc()),2&t){const t=d.wc(3);d.Jb(1),d.Dc("ngForOf",d.yc(2,1,t.videoFileMetadataFormat))}}function U(t,n){if(1&t&&(d.dc(0,"div",37),d.dc(1,"span",38),d.hc(2,k),d.cc(),d.dc(3,"span",39),d.dd(4),d.cc(),d.cc()),2&t){const t=n.$implicit;d.Jb(2),d.lc(t.value.label),d.ic(2),d.Jb(2),d.ed(t.value.value)}}function J(t,n){if(1&t&&(d.dc(0,"div",35),d.bd(1,U,5,2,"div",36),d.xc(2,"keyvalue"),d.cc()),2&t){const t=d.wc(3);d.Jb(1),d.Dc("ngForOf",d.yc(2,1,t.videoFileMetadataVideoStream))}}function B(t,n){if(1&t&&(d.dc(0,"div",37),d.dc(1,"span",38),d.hc(2,S),d.cc(),d.dc(3,"span",39),d.dd(4),d.cc(),d.cc()),2&t){const t=n.$implicit;d.Jb(2),d.lc(t.value.label),d.ic(2),d.Jb(2),d.ed(t.value.value)}}function z(t,n){if(1&t&&(d.dc(0,"div",35),d.bd(1,B,5,2,"div",36),d.xc(2,"keyvalue"),d.cc()),2&t){const t=d.wc(3);d.Jb(1),d.Dc("ngForOf",d.yc(2,1,t.videoFileMetadataAudioStream))}}function H(t,n){if(1&t&&(d.bc(0),d.dc(1,"div",28,29),d.bc(3,30),d.dc(4,"a",31),d.hc(5,y),d.cc(),d.bd(6,N,3,3,"ng-template",32),d.ac(),d.bc(7,33),d.dc(8,"a",31),d.hc(9,_),d.cc(),d.bd(10,J,3,3,"ng-template",32),d.ac(),d.bc(11,33),d.dc(12,"a",31),d.hc(13,w),d.cc(),d.bd(14,z,3,3,"ng-template",32),d.ac(),d.cc(),d.Yb(15,"div",34),d.ac()),2&t){const t=d.Qc(2),n=d.wc(2);d.Jb(7),d.Dc("disabled",void 0===n.videoFileMetadataVideoStream),d.Jb(4),d.Dc("disabled",void 0===n.videoFileMetadataAudioStream),d.Jb(4),d.Dc("ngbNavOutlet",t)}}function X(t,n){if(1&t){const t=d.ec();d.dc(0,"div",40),d.dc(1,"div",41),d.dc(2,"input",42),d.sc("ngModelChange",(function(n){return d.Sc(t),d.wc(2).downloadType=n})),d.cc(),d.dc(3,"label",43),d.hc(4,T),d.cc(),d.cc(),d.dc(5,"div",41),d.dc(6,"input",44),d.sc("ngModelChange",(function(n){return d.Sc(t),d.wc(2).downloadType=n})),d.cc(),d.dc(7,"label",45),d.hc(8,D),d.cc(),d.cc(),d.cc()}if(2&t){const t=d.wc(2);d.Jb(2),d.Dc("ngModel",t.downloadType),d.Jb(4),d.Dc("ngModel",t.downloadType)}}function Y(t,n){if(1&t){const t=d.ec();d.dc(0,"div",1),d.dc(1,"h4",2),d.bc(2),d.hc(3,C),d.ac(),d.bd(4,A,6,3,"div",3),d.cc(),d.dc(5,"my-global-icon",4),d.sc("click",(function(){return(0,n.close)()})),d.cc(),d.cc(),d.dc(6,"div",5),d.dc(7,"div",6),d.dc(8,"div",7),d.dc(9,"div",8),d.bd(10,F,2,2,"select",9),d.bd(11,V,2,2,"select",9),d.cc(),d.dc(12,"input",10,11),d.sc("click",(function(){return d.Sc(t),d.Qc(13).select()})),d.cc(),d.dc(14,"div",12),d.dc(15,"button",13),d.sc("click",(function(){return d.Sc(t),d.wc().activateCopiedMessage()})),d.Yb(16,"span",14),d.cc(),d.cc(),d.cc(),d.cc(),d.bd(17,H,16,3,"ng-container",15),d.bd(18,X,9,2,"div",16),d.cc(),d.dc(19,"div",17),d.dc(20,"input",18),d.jc(21,f),d.sc("click",(function(){return(0,n.close)()}))("key.enter",(function(){return(0,n.close)()})),d.cc(),d.dc(22,"input",19),d.jc(23,O),d.sc("click",(function(){return d.Sc(t),d.wc().download()})),d.cc(),d.cc()}if(2&t){const t=d.Qc(13),n=d.wc();d.Jb(4),d.Dc("ngIf",n.videoCaptions),d.Jb(6),d.Dc("ngIf","video"===n.type),d.Jb(1),d.Dc("ngIf","subtitles"===n.type),d.Jb(1),d.Dc("value",n.getLink()),d.Jb(3),d.Dc("cdkCopyToClipboard",t.value),d.Jb(2),d.Dc("ngIf","video"===n.type&&(null==n.videoFile?null:n.videoFile.metadata)),d.Jb(1),d.Dc("ngIf","video"===n.type)}}P="\u0E04\u0E33\u0E1A\u0E23\u0E23\u0E22\u0E32\u0E22\u0E43\u0E15\u0E49\u0E20\u0E32\u0E1E",M="\u0E27\u0E34\u0E14\u0E35\u0E42\u0E2D",y="Format",_="\u0E2A\u0E15\u0E23\u0E35\u0E21\u0E27\u0E34\u0E14\u0E35\u0E42\u0E2D",w="\u0E2A\u0E15\u0E23\u0E35\u0E21\u0E40\u0E2A\u0E35\u0E22\u0E07",x="" + "\ufffd0\ufffd" + "",k="" + "\ufffd0\ufffd" + "",S="" + "\ufffd0\ufffd" + "",T="\u0E14\u0E32\u0E27\u0E19\u0E4C\u0E42\u0E2B\u0E25\u0E14\u0E15\u0E23\u0E07",D="Torrent (\u0E44\u0E1F\u0E25\u0E4C .torrent)";let $=(()=>{class t{constructor(t,n,e,o,i){this.notifier=t,this.modalService=n,this.videoService=e,this.auth=o,this.i18n=i,this.downloadType="torrent",this.resolutionId=-1,this.type="video",this.bytesPipe=new a.a,this.numbersPipe=new l.d}get typeText(){return this.i18n("video"===this.type?"video":"subtitles")}getVideoFiles(){return this.video?this.video.getFiles():[]}show(t,n){this.video=t,this.videoCaptions=n&&n.length?n:void 0,this.activeModal=this.modalService.open(this.modal,{centered:!0}),this.resolutionId=this.getVideoFiles()[0].resolution.id,this.onResolutionIdChange(),this.videoCaptions&&(this.subtitleLanguageId=this.videoCaptions[0].language.id)}onClose(){this.video=void 0,this.videoCaptions=void 0}download(){window.location.assign(this.getLink()),this.activeModal.close()}getLink(){return"subtitles"===this.type&&this.videoCaptions?this.getSubtitlesLink():this.getVideoFileLink()}onResolutionIdChange(){return Object(o.a)(this,void 0,void 0,(function*(){this.videoFile=this.getVideoFile(),!this.videoFile.metadata&&this.videoFile.metadataUrl&&(yield this.hydrateMetadataFromMetadataUrl(this.videoFile),this.videoFileMetadataFormat=this.videoFile?this.getMetadataFormat(this.videoFile.metadata.format):void 0,this.videoFileMetadataVideoStream=this.videoFile?this.getMetadataStream(this.videoFile.metadata.streams,"video"):void 0,this.videoFileMetadataAudioStream=this.videoFile?this.getMetadataStream(this.videoFile.metadata.streams,"audio"):void 0)}))}getVideoFile(){this.resolutionId=parseInt(this.resolutionId.toString(),10);const t=this.getVideoFiles().find(t=>t.resolution.id===this.resolutionId);if(t)return t;console.error("Could not find file with resolution %d.",this.resolutionId)}getVideoFileLink(){const t=this.videoFile;if(!t)return;const n=this.video.privacy.id===r.p.PRIVATE||this.video.privacy.id===r.p.INTERNAL?"?access_token="+this.auth.getAccessToken():"";switch(this.downloadType){case"direct":return t.fileDownloadUrl+n;case"torrent":return t.torrentDownloadUrl+n}}getSubtitlesLink(){return window.location.origin+this.videoCaptions.find(t=>t.language.id===this.subtitleLanguageId).captionPath}activateCopiedMessage(){this.notifier.success(this.i18n("Copied"))}switchToType(t){this.type=t}getMetadataFormat(t){const n={encoder:t=>({label:this.i18n("Encoder"),value:t}),format_long_name:t=>({label:this.i18n("Format name"),value:t}),size:t=>({label:this.i18n("Size"),value:this.bytesPipe.transform(t,2)}),bit_rate:t=>({label:this.i18n("Bitrate"),value:this.numbersPipe.transform(t)+"bps"})},e=Object.assign(t,t.tags);return delete e.tags,Object(i.a)(Object(c.a)(e,Object.keys(n)),(t,e)=>n[e](t))}getMetadataStream(t,n){const e=t.find(t=>t.codec_type===n);if(!e)return;let o={codec_long_name:t=>({label:this.i18n("Codec"),value:t}),profile:t=>({label:this.i18n("Profile"),value:t}),bit_rate:t=>({label:this.i18n("Bitrate"),value:this.numbersPipe.transform(t)+"bps"})};return o=Object.assign(o,"video"===n?{width:t=>({label:this.i18n("Resolution"),value:`${t}x${e.height}`}),display_aspect_ratio:t=>({label:this.i18n("Aspect ratio"),value:t}),avg_frame_rate:t=>({label:this.i18n("Average frame rate"),value:t}),pix_fmt:t=>({label:this.i18n("Pixel format"),value:t})}:{sample_rate:t=>({label:this.i18n("Sample rate"),value:t}),channel_layout:t=>({label:this.i18n("Channel Layout"),value:t})}),Object(i.a)(Object(c.a)(e,Object.keys(o)),(t,n)=>o[n](t))}hydrateMetadataFromMetadataUrl(t){const n=this.videoService.getVideoFileMetadata(t.metadataUrl);return n.subscribe(n=>t.metadata=n),n.toPromise()}}return t.\u0275fac=function(n){return new(n||t)(d.Xb(s.k),d.Xb(g.k),d.Xb(l.r),d.Xb(s.a),d.Xb(u.a))},t.\u0275cmp=d.Rb({type:t,selectors:[["my-video-download"]],viewQuery:function(t,n){var e;1&t&&d.Yc(v,!0),2&t&&d.Pc(e=d.tc())&&(n.modal=e.first)},decls:2,vars:0,consts:[["modal",""],[1,"modal-header"],[1,"modal-title"],["ngbDropdown","","class","d-inline-block",4,"ngIf"],["iconName","cross","aria-label","Close","role","button",3,"click"],[1,"modal-body"],[1,"form-group"],[1,"input-group","input-group-sm"],[1,"input-group-prepend","peertube-select-container"],[3,"ngModel","ngModelChange",4,"ngIf"],["type","text","readonly","",1,"form-control","input-sm","readonly",3,"value","click"],["urlInput",""],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"cdkCopyToClipboard","click"],[1,"glyphicon","glyphicon-copy"],[4,"ngIf"],["class","download-type",4,"ngIf"],[1,"modal-footer","inputs"],["type","button","role","button",1,"action-button","action-button-cancel",3,"click","key.enter",6,"value"],["type","submit",1,"action-button-submit",3,"click",6,"value"],["ngbDropdown","",1,"d-inline-block"],["id","dropdownDownloadType","ngbDropdownToggle",""],["ngbDropdownMenu","","aria-labelledby","dropdownDownloadType"],["ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","",3,"click"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["ngbNav","",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","",3,"disabled"],[3,"ngbNavOutlet"],[1,"file-metadata"],["class","metadata-attribute metadata-attribute-tags",4,"ngFor","ngForOf"],[1,"metadata-attribute","metadata-attribute-tags"],[1,"metadata-attribute-label"],[1,"metadata-attribute-value"],[1,"download-type"],[1,"peertube-radio-container"],["type","radio","name","download","id","download-direct","value","direct",3,"ngModel","ngModelChange"],["for","download-direct"],["type","radio","name","download","id","download-torrent","value","torrent",3,"ngModel","ngModelChange"],["for","download-torrent"]],template:function(t,n){1&t&&d.bd(0,Y,24,7,"ng-template",null,0,d.cd)},directives:[b.u,p.a,m.a,g.e,g.j,g.h,g.g,h.F,h.t,h.w,b.t,h.y,h.I,g.n,g.p,g.q,g.o,g.s,h.B,h.d],pipes:[b.m],styles:['.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;width:100px;border-radius:3px;color:var(--inputForegroundColor);background:var(--inputBackgroundColor);position:relative;font-size:15px;border-top-right-radius:0;border-bottom-right-radius:0;border-right:none}.peertube-select-container.disabled[_ngcontent-%COMP%]{background-color:#e5e5e5}.peertube-select-container.disabled[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:default}@media screen and (max-width:100px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:15px;content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid transparent;border-top-color:#000;margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:0 35px 0 12px;width:calc(100% + 2px);position:relative;left:1px;border:1px solid #c6c6c6;background:transparent none;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:30px;text-overflow:ellipsis;color:var(--mainForegroundColor)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:-moz-focusring{color:transparent;text-shadow:0 0 0 #000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:inherit}#dropdownDownloadType[_ngcontent-%COMP%]{cursor:pointer}.download-type[_ngcontent-%COMP%]{margin-top:30px}.download-type[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%]{display:inline-block;margin-right:30px}.download-type[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{display:none}.download-type[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{font-weight:400;cursor:pointer}.download-type[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{position:relative;top:-2px;content:"";background:#fff;border-radius:100%;border:1px solid #000;display:inline-block;width:15px;height:15px;vertical-align:middle;cursor:pointer;text-align:center;margin-right:10px}.download-type[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{background-color:#000;box-shadow:inset 0 0 0 4px #fff}.download-type[_ngcontent-%COMP%]   .peertube-radio-container[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%]:before{outline:none;border-color:#000}.file-metadata[_ngcontent-%COMP%]{padding:1rem}.file-metadata[_ngcontent-%COMP%]   .metadata-attribute[_ngcontent-%COMP%]{font-size:13px;display:block;margin-bottom:12px}.file-metadata[_ngcontent-%COMP%]   .metadata-attribute[_ngcontent-%COMP%]   .metadata-attribute-label[_ngcontent-%COMP%]{min-width:142px;padding-right:5px;display:inline-block;color:var(--greyForegroundColor);font-weight:700}.file-metadata[_ngcontent-%COMP%]   .metadata-attribute[_ngcontent-%COMP%]   a.metadata-attribute-value[_ngcontent-%COMP%]{color:var(--mainForegroundColor)}.file-metadata[_ngcontent-%COMP%]   .metadata-attribute[_ngcontent-%COMP%]   a.metadata-attribute-value[_ngcontent-%COMP%]:active, .file-metadata[_ngcontent-%COMP%]   .metadata-attribute[_ngcontent-%COMP%]   a.metadata-attribute-value[_ngcontent-%COMP%]:focus, .file-metadata[_ngcontent-%COMP%]   .metadata-attribute[_ngcontent-%COMP%]   a.metadata-attribute-value[_ngcontent-%COMP%]:hover{text-decoration:none!important;outline:none!important}.file-metadata[_ngcontent-%COMP%]   .metadata-attribute[_ngcontent-%COMP%]   a.metadata-attribute-value[_ngcontent-%COMP%]:hover{opacity:.9}.file-metadata[_ngcontent-%COMP%]   .metadata-attribute.metadata-attribute-tags[_ngcontent-%COMP%]   .metadata-attribute-value[_ngcontent-%COMP%]:not(:nth-child(2)):before{content:", "}']}),t})()}}]);